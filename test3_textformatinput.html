<html>


<script src="https://d3js.org/d3.v3.min.js"></script>	

<div id="myInputBox">
	<textarea id="NicEdit" cols="80" rows="20">Some Sample Text</textarea>
</div>

<script src="https://js.nicedit.com/nicEdit-latest.js"></script>
<script>
bkLib.onDomLoaded(function()
{
new nicEditor().panelInstance('NicEdit');
});
</script>

<script>


//my edit for the input box
//https://stackoverflow.com/questions/12481032/nicedit-data-not-in-post
	var myInputBox=document.getElementById("myInputBox");
	
	myInputBox.addEventListener("input", function(event) { //use input instead of keyup, as keyup does not detect font or hyperlink change that are not caued by key pressing
		inputTextChangeUpdate();
	})
	

	function inputTextChangeUpdate(){
	
		//nicEditors.findEditor('NicEdit').saveContent();
		var theDivs=d3.selectAll("div")[0];
		console.log('theDIVs ===')
		console.log(theDivs)
		//find theDIV with the class name containing 'nicEdit-main'
		theDivs.forEach(function(d){
			theClassName =d.className		
			//if (theClassName.includes("nicEdit-main")){console.log(theClassName)
			if (/nicEdit-main/i.test(theClassName)){
				theDiv=d
				console.log(d.innerHTML)
			}
		})
	
	}




	//theInputDiv.on('keypress', function(e){
//console.log(theInputDiv.innerHTML)	
//	})

</script>

</html>