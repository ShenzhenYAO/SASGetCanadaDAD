{"idx":"ProjectCollection-cmSbt48MqRzD7t79","name":"PhD_PhysicianImpactStatin_20191120","type":"PROJECT","children":[{"idx":"MY985829e8-14f7-4a67-86ac-167da3d62fa4","name":"Scientific protocol","custparents":[{"idx":"ProjectCollection-cmSbt48MqRzD7t79"}],"children":[{"idx":"MYea8e5ad7-1600-4ff1-9184-dc7f1025a867","name":"Objective 1 Confounders Misclassification COC","custparents":[{"idx":"MY985829e8-14f7-4a67-86ac-167da3d62fa4"}],"children":[{"idx":"MY4a596869-1435-4e2c-87d9-d1c628f02362","name":"1a. Predictors of UPC index","custparents":[{"idx":"MYea8e5ad7-1600-4ff1-9184-dc7f1025a867"}]},{"idx":"MY06421742-59ab-4e25-b1f5-1ea26a53aada","name":"1b. Thresholds to identify COC","custparents":[{"idx":"MYea8e5ad7-1600-4ff1-9184-dc7f1025a867"}]}]},{"idx":"MY31f1b29d-5517-4f66-bf79-a5a129a0b8d1","name":"Objective 2 Distribution of Comp COC","custparents":[{"idx":"MY985829e8-14f7-4a67-86ac-167da3d62fa4"}]},{"idx":"MYefba38f3-3278-4541-8c7e-d7a558d757f1","name":"Objective 3 Measures of COC to Statin Adherence","custparents":[{"idx":"MY985829e8-14f7-4a67-86ac-167da3d62fa4"}]}]},{"idx":"MYea01f777-ef0e-4d2f-95f3-8a911b9f304f","name":"Analytical protocol","custparents":[{"idx":"ProjectCollection-cmSbt48MqRzD7t79"}],"children":[{"idx":"MY35f244bc-10c0-4dd6-8fd1-7e4ad6bdb900","name":"Definitions","custparents":[{"idx":"MYea01f777-ef0e-4d2f-95f3-8a911b9f304f"}],"children":[{"idx":"MY5da86f71-fcfd-4876-9ebd-59fff0bfc0ff","name":"Prescription-related definitions","custparents":[{"idx":"MY35f244bc-10c0-4dd6-8fd1-7e4ad6bdb900"}],"children":[{"idx":"MY3d0369c0-1645-4934-bae7-6d517ab82147","name":"Statin users","custparents":[{"idx":"MY5da86f71-fcfd-4876-9ebd-59fff0bfc0ff"}],"children":[{"idx":"MY4b082829-4095-4ac4-bace-aa3b77459633","name":"Incident users","custparents":[{"idx":"MY3d0369c0-1645-4934-bae7-6d517ab82147"}]}]},{"idx":"MY34563ee5-427e-49ca-ab3b-50c3c42d06d1","name":"Prescriber","custparents":[{"idx":"MY5da86f71-fcfd-4876-9ebd-59fff0bfc0ff"}],"children":[{"idx":"MYe2c1e9ab-c0c6-46f0-a9a5-5e4494133bc0","name":"usual statin prescriber","custparents":[{"idx":"MY34563ee5-427e-49ca-ab3b-50c3c42d06d1"}]},{"idx":"MY0778a16c-0de6-4a34-998e-c3c330a7e98b","name":"usual prescriber (all medications)","custparents":[{"idx":"MY34563ee5-427e-49ca-ab3b-50c3c42d06d1"}]},{"idx":"MY46524583-26e1-4063-9ab0-f232b19ec1d7","name":"CMEP","custparents":[{"idx":"MY34563ee5-427e-49ca-ab3b-50c3c42d06d1"}],"children":[]}]}]},{"idx":"MY478cc996-7267-4da4-8524-754234b8d6fe","name":"Physician visit related definitions","custparents":[{"idx":"MY35f244bc-10c0-4dd6-8fd1-7e4ad6bdb900"}],"children":[{"idx":"MY7c0a1ca0-0f69-4741-8976-59f3038969ed","name":"encounter","custparents":[{"idx":"MY478cc996-7267-4da4-8524-754234b8d6fe"}],"children":[{"idx":"MY56d73af6-d5d8-4cc8-9173-1f50a64bb0d6","name":"UPC Index","custparents":[{"idx":"MY7c0a1ca0-0f69-4741-8976-59f3038969ed"}]}]},{"idx":"MY3e128472-642e-4abd-a955-0450fcb27988","name":"care provider","custparents":[{"idx":"MY478cc996-7267-4da4-8524-754234b8d6fe"}],"children":[{"idx":"MY229d8695-f8c4-446d-9630-3e650de9e9d6","name":"Usual care provider (UCP)","custparents":[{"idx":"MY3e128472-642e-4abd-a955-0450fcb27988"}]},{"idx":"MY82c7a6ea-b3bb-403b-b70b-e96e18aaee3b","name":"Complete Medical Exam Provider (CMEP)","custparents":[{"idx":"MY3e128472-642e-4abd-a955-0450fcb27988"}]}]}]},{"idx":"MY8c7227a3-e866-4ab0-8873-4278079a5e59","name":"Time related","custparents":[{"idx":"MY35f244bc-10c0-4dd6-8fd1-7e4ad6bdb900"}],"children":[{"idx":"MY93856693-7813-4096-b370-b1f53796c1d9","name":"Cohort entry date","custparents":[{"idx":"MY8c7227a3-e866-4ab0-8873-4278079a5e59"}]},{"idx":"MY0a8c54ed-5142-4f80-a9dc-e8dafa79ab0d","name":"Washout period","custparents":[{"idx":"MY8c7227a3-e866-4ab0-8873-4278079a5e59"}]},{"idx":"MY9875de35-c094-46e7-b443-7bcd2ac2921b","name":"Run-in period","custparents":[{"idx":"MY8c7227a3-e866-4ab0-8873-4278079a5e59"}]},{"idx":"MYd6712be1-6462-4b25-b5b0-d4e3e65cfa96","name":"Follow up period","custparents":[{"idx":"MY8c7227a3-e866-4ab0-8873-4278079a5e59"}]}]}]},{"idx":"MYac146db1-02ec-4142-a757-383d13223742","name":"1. Cohort","custparents":[{"idx":"MYea01f777-ef0e-4d2f-95f3-8a911b9f304f"},{"idx":"MYea01f777-ef0e-4d2f-95f3-8a911b9f304f"}],"children":[{"idx":"MY3aed56c1-a14a-4a17-82f4-2e7fd835dd07","name":"Report patient flow","custparents":[{"idx":"MYac146db1-02ec-4142-a757-383d13223742"}],"NodeDescription":"<p>///t</p><p>[to do]</p><p>The patient flow:</p><table><tbody><tr><td data-row=\"row-ilj0\">Step</td><td data-row=\"row-ilj0\">Excluded</td><td data-row=\"row-ilj0\">Remaining</td></tr><tr><td data-row=\"row-6dbt\"># of Saskatchewan residents between 2012-1-1 and 2017-12-31</td><td data-row=\"row-6dbt\"><br></td><td data-row=\"row-6dbt\"><br></td></tr><tr><td data-row=\"row-35m7\">Received statin medications between 2012-1-1 and 2017-12-31</td><td data-row=\"row-35m7\"><br></td><td data-row=\"row-35m7\"><br></td></tr><tr><td data-row=\"row-fmuj\">missing age or sex information in the patient registration file</td><td data-row=\"row-fmuj\"><br></td><td data-row=\"row-fmuj\"><br></td></tr><tr><td data-row=\"row-c8an\">less than 18 years old on the cohort entry date</td><td data-row=\"row-c8an\"><br></td><td data-row=\"row-c8an\"><br></td></tr><tr><td data-row=\"row-ghyd\">not continuously registered for healthcare service within the washout period, or a follow-up period of 365 days (including  deceased, or termination of benefit during the follow-up period)</td><td data-row=\"row-ghyd\"><br></td><td data-row=\"row-ghyd\"><br></td></tr><tr><td data-row=\"row-9rso\">receiving statin medications within the washout period</td><td data-row=\"row-9rso\"><br></td><td data-row=\"row-9rso\"><br></td></tr><tr><td data-row=\"row-amok\">admitted in long term care facilities within washout, or follow-up period</td><td data-row=\"row-amok\"><br></td><td data-row=\"row-amok\"><br></td></tr><tr><td data-row=\"row-l2ip\">unable to obtain sufficient data for analysis (e.g., stayed in an out-province facility for acute care during follow-up)</td><td data-row=\"row-l2ip\"><br></td><td data-row=\"row-l2ip\"><br></td></tr></tbody></table><p><br></p><p>t///</p>"},{"idx":"MY21331bca-7074-453a-a971-27ca07680d38","name":"New statin users","custparents":[{"idx":"MYac146db1-02ec-4142-a757-383d13223742"}]},{"idx":"MYfeeb4b19-3539-421c-8154-3c5b2992f3cc","name":"Encounters with GP","custparents":[{"idx":"MYac146db1-02ec-4142-a757-383d13223742"}],"children":[{"idx":"MY3ae87311-4989-4080-90db-8e8a692cf3a7","name":"Having 1+ visit to GPs during follow up","custparents":[{"idx":"MYfeeb4b19-3539-421c-8154-3c5b2992f3cc"},{"idx":"MY21331bca-7074-453a-a971-27ca07680d38"}],"NodeDescription":"<p>///t</p><p>t///</p>"}]}],"NodeDescription":"<p>///t</p><p>[To do]</p><p><strong style=\"color: rgb(230, 0, 0);\">The final cohort is the inner joined collection of new statin users, and patients having 1+ visits to GPs. Patients without GP visits cannot be included as there would not be a UCP to define. The following does not take into account the second part...</strong></p><p><br></p><p><span class=\"ql-font-timesnewroman\" style=\"font-size: 20px;\">The study participants were individuals who newly initiated a statin medication (i.e., using a five year washout period) between January 1, 2012, and December 31, 2017. The Drug Identification Number (DIN) of statin medications can be found in Appendix 2. The date of receiving the first dispensation of a statin medication was defined as the cohort entry date.</span></p><p><br></p><p><span class=\"ql-font-timesnewroman\" style=\"font-size: 20px;\">Several exclusion criteria were applied before assembling the final cohort, including:</span></p><p><span class=\"ql-font-timesnewroman\" style=\"font-size: 20px;\">1) missing age or sex information in the patient registration file;</span></p><p><span class=\"ql-font-timesnewroman\" style=\"font-size: 20px;\">2) less than 18 years old on the cohort entry date;</span></p><p><span class=\"ql-font-timesnewroman\" style=\"font-size: 20px;\">3) not continuously registered for healthcare service within the washout period, or a follow-up period of 365 days;</span></p><p><span class=\"ql-font-timesnewroman\" style=\"font-size: 20px;\">4) deceased, or termination of benefit during the follow-up period;</span></p><p><span class=\"ql-font-timesnewroman\" style=\"font-size: 20px;\">5) receiving statin medications within the washout period;</span></p><p><span class=\"ql-font-timesnewroman\" style=\"font-size: 20px;\">6) admitted in long term care facilities within washout, or follow-up period; </span></p><p><span class=\"ql-font-timesnewroman\" style=\"font-size: 20px;\">7) unable to obtain sufficient data for analysis (e.g., stayed in an out-province facility for acute care during follow-up)</span></p><p><br></p><p>t///</p>"},{"idx":"MY490700c5-bc45-4590-9085-d5e3b8dda83f","name":"2. UPC Index","custparents":[{"idx":"MYea01f777-ef0e-4d2f-95f3-8a911b9f304f"},{"idx":"MYea01f777-ef0e-4d2f-95f3-8a911b9f304f"}],"children":[{"idx":"MYe63cefbd-5486-4928-9056-74a469a3aa2a","name":"Determine Max UPC Index per patient","custparents":[{"idx":"MY490700c5-bc45-4590-9085-d5e3b8dda83f"}],"children":[{"idx":"MY02e00aec-ee2e-4506-91c1-2d005c191f7d","name":"substeps","custparents":[{"idx":"MYe63cefbd-5486-4928-9056-74a469a3aa2a"}],"children":[{"idx":"MY6db6cc3e-c075-4081-916d-38ee17e30a4a","name":"Patient encounters with GPs","custparents":[{"idx":"MY02e00aec-ee2e-4506-91c1-2d005c191f7d"}],"children":[{"idx":"MY1d42e51e-5a5a-4b4c-937d-705463079640","name":"UPC Index of Patient-GP pairs","custparents":[{"idx":"MY6db6cc3e-c075-4081-916d-38ee17e30a4a"}],"children":[{"idx":"MYab5edcdf-a5eb-4889-a018-2f782caa9174","name":"Max UPC Index per patient","custparents":[{"idx":"MY1d42e51e-5a5a-4b4c-937d-705463079640"}],"NodeDescription":"<p>///t</p><p>[to do]</p><p>t///</p>"}]}]}]}]},{"idx":"MY8781aabf-09eb-401b-ba8f-11e3a958d883","name":"Predictors of UPC Index per patient","custparents":[{"idx":"MY490700c5-bc45-4590-9085-d5e3b8dda83f"}],"children":[{"idx":"MY4841887f-aba4-468c-95b0-e74a7ef96211","name":"Poisson regression (UPCIndex Covariates)","custparents":[{"idx":"MY8781aabf-09eb-401b-ba8f-11e3a958d883"},{"idx":"MYe63cefbd-5486-4928-9056-74a469a3aa2a"},{"idx":"MY4a596869-1435-4e2c-87d9-d1c628f02362"}]}]}]},{"idx":"MY9dff0eee-dd1d-4ab3-8f26-8a25b12dea37","name":"3. GP as UCP CMEP USP CompCOC","custparents":[{"idx":"MYea01f777-ef0e-4d2f-95f3-8a911b9f304f"},{"idx":"MYea01f777-ef0e-4d2f-95f3-8a911b9f304f"}],"children":[{"idx":"MY71ba1d61-e896-4a00-9dcd-c3e1b45137eb","name":"UPC and # encounter categories","custparents":[{"idx":"MY9dff0eee-dd1d-4ab3-8f26-8a25b12dea37"},{"idx":"MY06421742-59ab-4e25-b1f5-1ea26a53aada"}],"children":[{"idx":"MY0aeca86d-2f4a-46fe-81bd-8d43012e9282","name":"Question","custparents":[{"idx":"MY71ba1d61-e896-4a00-9dcd-c3e1b45137eb"}],"NodeDescription":"<p>///t</p><p>[to do]</p><p>Was there # of encounters for that top physician in the corresponding table?</p><p><br></p><p>Yes. In VZE, there are columns for UPCP, in which there are physician ID, # visits to that physician, as well as UPC Index</p><p>t///</p>"}]},{"idx":"MY57b7aefa-727b-4af0-9bea-d29df0ddfb32","name":"UPC Index cat and Same doc as CMEP, USP, and CompCOC","custparents":[{"idx":"MY9dff0eee-dd1d-4ab3-8f26-8a25b12dea37"}],"children":[{"idx":"MY2f2b8f44-3947-4783-ac94-f9cf87808429","name":"Questions","custparents":[{"idx":"MY57b7aefa-727b-4af0-9bea-d29df0ddfb32"}],"NodeDescription":"<p>///t</p><p>[to do] How does the table look like? Does it have doc patterns?</p><p>Yes, in VZC, there are columns indicating whether there is one physician as PCP (UCP), USP (Prescriber of Statin), and  CMEP. There is a column called 'Never_changed). I wonder it is the same doc for all the 3 roles plus First prescriber. Anyways, the algorithm can be found in the program VZC or near.</p><p>t///</p>"}]}]},{"idx":"MY04800235-73cd-463c-b8d9-a8da1e496b0c","name":"4. GPs and panels","custparents":[{"idx":"MYea01f777-ef0e-4d2f-95f3-8a911b9f304f"},{"idx":"MYea01f777-ef0e-4d2f-95f3-8a911b9f304f"}],"children":[{"idx":"MY2abdb541-220d-45fe-abe6-2b9df7fd0fdb","name":"Question1","custparents":[{"idx":"MY04800235-73cd-463c-b8d9-a8da1e496b0c"}],"NodeDescription":"<p>///t</p><p><span class=\"ql-font-timesnewroman\" style=\"color: rgb(61, 20, 102); font-size: 20px;\">[to do]</span></p><ol><li data-list=\"ordered\"><span class=\"ql-ui\" contenteditable=\"false\"></span><span class=\"ql-font-timesnewroman\" style=\"color: rgb(61, 20, 102); font-size: 20px;\">who are these GPs? Limited to service providers of the Statin patients? Should be!</span></li><li data-list=\"ordered\"><span class=\"ql-ui\" contenteditable=\"false\"></span><span class=\"ql-font-timesnewroman\" style=\"color: rgb(61, 20, 102); font-size: 20px;\">Cannot be USP, must be UP, as many of their patients are not statin users. Well if so, it is not quite strongly connect to the rest of the study here (the focus is on statin Rx, isn't it?)</span></li></ol><p><span class=\"ql-font-timesnewroman\" style=\"color: rgb(61, 20, 102); font-size: 20px;\">OK, change to only patients receiving Statins. </span></p><p><span class=\"ql-font-timesnewroman\" style=\"color: rgb(61, 20, 102); font-size: 20px;\">Even better, no need to redo the calculation, as all patients are within the cohort. Just to:</span></p><ol><li data-list=\"ordered\"><span class=\"ql-ui\" contenteditable=\"false\"></span><span class=\"ql-font-timesnewroman\" style=\"color: rgb(61, 20, 102); font-size: 20px;\">get all docs in VZC</span></li><li data-list=\"ordered\"><span class=\"ql-ui\" contenteditable=\"false\"></span><span class=\"ql-font-timesnewroman\" style=\"color: rgb(61, 20, 102); font-size: 20px;\">For each doc, get Statin users ever visited them during follow up? no... It is like this: </span></li><li data-list=\"ordered\" class=\"ql-indent-1\"><span class=\"ql-ui\" contenteditable=\"false\"></span><span class=\"ql-font-timesnewroman\" style=\"color: rgb(61, 20, 102); font-size: 20px;\">get the patient-specific doc, </span></li><li data-list=\"ordered\" class=\"ql-indent-1\"><span class=\"ql-ui\" contenteditable=\"false\"></span><span class=\"ql-font-timesnewroman\" style=\"color: rgb(61, 20, 102); font-size: 20px;\">define the period (365 days start from the patient's index date)</span></li><li data-list=\"ordered\" class=\"ql-indent-1\"><span class=\"ql-ui\" contenteditable=\"false\"></span><span class=\"ql-font-timesnewroman\" style=\"color: rgb(61, 20, 102); font-size: 20px;\">get the statin users who visited the doc defined in a) within the period in b) These are the panel patients of the doctor</span></li><li data-list=\"ordered\" class=\"ql-indent-1\"><span class=\"ql-ui\" contenteditable=\"false\"></span><span class=\"ql-font-timesnewroman\" style=\"color: rgb(61, 20, 102); font-size: 20px;\">For each patient in c. determine the UCP, USP, and CMEP, and see if the three is the same as the doc defined in a)</span></li></ol><p><strong class=\"ql-font-timesnewroman\" style=\"color: rgb(61, 20, 102); font-size: 20px;\">This does not seem right!</strong></p><p><span class=\"ql-font-timesnewroman\" style=\"color: rgb(61, 20, 102); font-size: 20px;\"> 1) some patients in the panel might deceased, lost of coverage during that period, some might joined the doctor's panel on the last day... </span><strong class=\"ql-font-timesnewroman\" style=\"color: rgb(230, 0, 0); font-size: 20px;\"><em>How did other researchers identify the panel?</em></strong></p><p><br></p><p><strong>The following :</strong></p><ol><li data-list=\"ordered\"><span class=\"ql-ui\" contenteditable=\"false\"></span>Identify the physician(s) with the highest UPC Index during the patient specific study period</li><li data-list=\"ordered\"><span class=\"ql-ui\" contenteditable=\"false\"></span>Have all patients ever visited that physician within the same study period. These patients have to be:</li><li data-list=\"ordered\" class=\"ql-indent-1\"><span class=\"ql-ui\" contenteditable=\"false\"></span>Statin users.</li><li data-list=\"ordered\" class=\"ql-indent-1\"><span class=\"ql-ui\" contenteditable=\"false\"></span>Having full insurance coverage during the study period defined in step 1.</li><li data-list=\"ordered\"><span class=\"ql-ui\" contenteditable=\"false\"></span>For each of the patients identified in step 2, identify their UCP(s) (of the highest UPC index), USP(s), and CMEP(s) within the study period defined in step1</li><li data-list=\"ordered\"><span class=\"ql-ui\" contenteditable=\"false\"></span>Determine whether the physician(s) identified in step 1 is the same as the UPC/USP/CMEP for each of the patients identified in step 3.</li><li data-list=\"ordered\"><span class=\"ql-ui\" contenteditable=\"false\"></span>Calculate the % of patients (identified in step 3) whose UCP/USP/CMEP, and CompCOC provider is the physician in 1</li></ol><p><strong style=\"font-size: 36px; color: rgb(230, 0, 0);\"><em>The physician(s) identified in 1 can repeatedly appear for multiple statin cohort patients...Average?</em></strong></p><p><strong style=\"font-size: 36px; color: rgb(230, 0, 0);\"><em>What type of average? simply like (% of patient 1 + %of patient2) /n?, or </em></strong></p><p><strong style=\"font-size: 36px; color: rgb(230, 0, 0);\"><em>Sum(# visits by patient 1 + # visits by patient 2) / (# total visits of patient 1 + # of visits by patient 2)...</em></strong></p><p><br></p><p><a href=\"https://youtu.be/qLmMPtQRfI4\" target=\"_blank\">Discussion of the problem (a video)</a></p><iframe class=\"ql-video\" frameborder=\"0\" allowfullscreen=\"true\" src=\"https://www.youtube.com/embed/qLmMPtQRfI4?showinfo=0\" data-blot-formatter-unclickable-bound=\"true\"></iframe><p><br></p><p><br></p><p>t///</p>"},{"idx":"MYade38f5f-ed3c-4986-ac53-7b26217d23d1","name":"Distribution on PCT as UCP, USP, CMEP, & COMPCOC","custparents":[{"idx":"MY04800235-73cd-463c-b8d9-a8da1e496b0c"},{"idx":"MY31f1b29d-5517-4f66-bf79-a5a129a0b8d1"}],"children":[{"idx":"MY633f8c56-4b92-4a8f-b7a4-7c2ed3d04a7c","name":"Identify pairs of UCP-CohortPt","custparents":[{"idx":"MYade38f5f-ed3c-4986-ac53-7b26217d23d1"}],"NodeDescription":"<p>///t</p><p>For each cohort member (the eligible statin users), identify the UCP(s). UCPs are those having the highest UPC index within the study period (index, index +364)</p><p>t///</p>","children":[{"idx":"MY44d8ecaa-7f17-4747-9bef-2f9311169718","name":"The patient specific follow up period (SFollowup)","custparents":[{"idx":"MY633f8c56-4b92-4a8f-b7a4-7c2ed3d04a7c"}]},{"idx":"MY07644db6-f532-4aff-8341-af49bfb63dbc","name":"The UCP(s)","custparents":[{"idx":"MY633f8c56-4b92-4a8f-b7a4-7c2ed3d04a7c"}],"children":[{"idx":"MY0dd503ea-d725-4e6f-82f3-87b9462c0f5b","name":"Panel patients of the UCP with SFollowup","custparents":[{"idx":"MY07644db6-f532-4aff-8341-af49bfb63dbc"}],"children":[{"idx":"MYa6caf5ea-8b53-4f8c-b872-4e699cde7bb4","name":"Panel pt receiving Statin & fully covered &No Hosp LTC","custparents":[{"idx":"MY44d8ecaa-7f17-4747-9bef-2f9311169718"},{"idx":"MY00ef3afe-9722-4dc4-8db9-fb2c47e84798"},{"idx":"MY0dd503ea-d725-4e6f-82f3-87b9462c0f5b"}],"children":[{"idx":"MYe68081c9-40b8-4121-8949-e2bab19101f2","name":"Eligible panel size","custparents":[{"idx":"MYa6caf5ea-8b53-4f8c-b872-4e699cde7bb4"}],"children":[{"idx":"MY673bd3d2-5aa1-4dc3-a905-13547afc443f","name":"Sum of panel size by UCP (S0i)","custparents":[{"idx":"MYe68081c9-40b8-4121-8949-e2bab19101f2"}]}]},{"idx":"MYc21daff2-4048-4728-bc41-af77afeed377","name":"UCP' of each Panel patient within Followup","custparents":[{"idx":"MYa6caf5ea-8b53-4f8c-b872-4e699cde7bb4"},{"idx":"MY44d8ecaa-7f17-4747-9bef-2f9311169718"},{"idx":"MYa6caf5ea-8b53-4f8c-b872-4e699cde7bb4"}],"children":[{"idx":"MYddb2e02e-f93c-469e-be56-4f4a94cd86c8","name":"subtotal1A: # panel patients whose UCP' = UCP","custparents":[{"idx":"MYc21daff2-4048-4728-bc41-af77afeed377"}],"children":[{"idx":"MY11399132-8f7e-434b-bdbd-162da2927481","name":"subtotal1B: sum of subtotal1A by UCP","custparents":[{"idx":"MYddb2e02e-f93c-469e-be56-4f4a94cd86c8"}],"children":[{"idx":"MYa20d04c8-9f55-4acf-b399-d9fbaacadcb7","name":"PCT1i = S1Ai / S0i","custparents":[{"idx":"MY11399132-8f7e-434b-bdbd-162da2927481"},{"idx":"MY673bd3d2-5aa1-4dc3-a905-13547afc443f"}],"children":[{"idx":"MY2005d324-c4cb-42f2-a0e6-1130486c34a5","name":"Distribution of PCT1i for all UCPs","custparents":[{"idx":"MYa20d04c8-9f55-4acf-b399-d9fbaacadcb7"}],"children":[{"idx":"MY5241c564-e17f-4035-844b-921e64a3c713","name":"Making graphics","custparents":[{"idx":"MY2005d324-c4cb-42f2-a0e6-1130486c34a5"},{"idx":"MY656f3256-8406-4d40-9207-c665ce2d023b"},{"idx":"MY18b5d962-ba7a-4ff6-9b9c-1119c89fadf0"},{"idx":"MY27f6d625-0c03-49de-a004-ef9007eb469f"}],"children":[{"idx":"MY696f801f-da3e-4d47-ad5f-b3b2f794a2b0","name":"Question","custparents":[{"idx":"MY5241c564-e17f-4035-844b-921e64a3c713"}],"NodeDescription":"<p>///t</p><p>[to do]</p><p><br></p><p>The purpose is to show the disagreement between UCP (determined by UPC index), and USP</p><p>which chart makes more sense?</p><p><br></p><p>Histogram?</p><p><img src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAwQAAAF1CAYAAABWGi2vAAAgAElEQVR4Ae3dvW4babYo7FVnjDl9gAF2uG+AcmD4CqhsMtGJIwVKnJHRQEo6aMCYYGC0ggY2xFAEdtCJAkVKTGaTSVcgODCZKNxXcPobfIM6KP6JpEmKEslilfgIcIv1t973fVaRqsX66eS///u/0//5n/8JPwQIECBAgAABAgQI7JfAf/7nf8abrBj45Zdf9mvkRkuAAAECBAgQIECAQJyfn8f/4kCAAAECBAgQIECAwP4KKAj2N/dGToAAAQIECBAgQMAZAvsAAQIECBAgQIAAgX0WcIZgn7Nv7AQIECBAgAABAnsvoCDY+10AAAECBAgQIECAwD4LKAj2OfvGToAAAQIECBAgsPcCCoK93wUAECBAgAABAgQI7LOAgmCfs2/sBAgQIECAAAECey+gINj7XQAAAQIECBAgQIDAPgsoCFbNfqcRSZJEozOzwXB+tiz7d9jszaxgkgABAgQIECBAgEBxBRQEK+Sm00giufkY7frsyp1o1O7joptGmqaRdi8izn6L2ZphdivTBAgQIECAAAECBIoioCBYIRNHl2mkl0crrGkVAgQIECBAgAABAuUSeFOu7hatt0dx2f0ehwdJnPW7Vo92ehlPlQ5XV1fx8PAwHsxf/vKX+Nvf/jae9oIAAQIECBAgQIBAXgIKgjWle1+v4y7q0e6+iy8HZ1FrfHzybMLJyclUq+fn51PTJggQIECAAAECBAjkJeCSoXWkO404uD6ObnZWoHIat2k3Lu5rP954vE4btiVAgAABAgQIECCwRQEFwUZxu/HtbqMBBSNAgAABAgQIECCwVQEFwQq8/acMJUnUWhGtWvZ40cPoP1306DLa78/iYPjI0SSpxf1FN9x/vAKqVQgQIECAAAECBAoh4B6CFdIweMrQ/BWXLZu/hbkECBAgQIAAAQIEiiPgDEFxcqEnBAgQIECAAAECBHIXUBDkTq5BAgQIECBAgAABAsURUBAUJxd6QoAAAQIECBAgQCB3AQVB7uQaJECAAAECBAgQIFAcAQVBcXKhJwQIECBAgAABAgRyF1AQ5E6uQQIECBAgQIAAAQLFEVAQFCcXekKAAAECBAgQIEAgdwEFQe7kGiRAgAABAgQIECBQHAEFQXFyoScECBAgQIAAAQIEchdQEOROrkECBAgQIECAAAECxRFQEBQnF3pCgAABAgQIECBAIHcBBUHu5BokQIAAAQIECBAgUBwBBUFxcqEnBAgQIECAAAECBHIXUBDkTq5BAgQIECBAgAABAsURUBAUJxd6QoAAAQIECBAgQCB3AQVB7uQaJECAAAECBAgQIFAcAQVBcXKhJwQIECBAgAABAgRyF1AQ5E6uQQIECBAgQIAAAQLFEVAQFCcXekKAAAECBAgQIEAgdwEFQe7kGiRAgAABAgQIECBQHAEFQXFyoScECBAgQIAAAQIEchdQEOROrkECBAgQIECAAAECxRFQEBQnF3pCgAABAgQIECBAIHcBBUHu5BokQIAAAQIECBAgUBwBBcGqueg0IkmSaHR+3KDTSPrLsuVJ0og5q/y4kTkECBAgQIAAAQIECiCgIFghCf0D/puP0a7/uHK2rBbtSNN0+O8yjn5czRwCBAgQIECAAAEChRR4U8heFaxTR5dppBHRacx2rBM3rXq0UyXArIxpAgQIECBAgACBcggoCNbJU+973Ffv4z7JzhIMf+rtSC+XFwhXV1fx8PAw2qJ/udF4wgsCBAhMCPzxr3/HT3/+08Sc/Xv5f/+//z/+z//258q+sH/7vhETyEvAJ+y60nfv43N6O7xMqBONpBaNj2ksqwlOTk6mWj0/P5+aNkGAAIGRQFYMfPzHP0eTe/n75u9/3XuDLPGZgx8CBAhsQ8A9BBtVPYqPc+4z2GgTghEgQIAAAQIECBDYoICCYB3Myoc4rrbiZvRYoV4zvrSq8e5gnaC2JUCAAAECBAgQIJCfgIJgBevRY0VrrYhWLXu06GE0e9mGlTj9/SLu+/OSSA7O4n37Nk4rKwS1CgECBAgQIECAAIECCLiHYIUk9J8ydLlgxcpp3KanCxaaTYAAAQIECBAgQKDYAs4QFDs/ekeAAAECBAgQIEBgqwIKgq3yCk6AAAECBAgQIECg2AIKgmLnR+8IECBAgAABAgQIbFVAQbBVXsEJECBAgAABAgQIFFtAQVDs/OgdAQIECBAgQIAAga0KKAi2yis4AQIECBAgQIAAgWILKAiKnR+9I0CAAAECBAgQILBVAQXBVnkFJ0CAAAECBAgQIFBsAQVBsfOjdwQIECBAgAABAgS2KqAg2Cqv4AQIECBAgAABAgSKLaAgKHZ+9I4AAQIECBAgQIDAVgUUBFvlFZwAAQIECBAgQIBAsQUUBMXOj94RIECAAAECBAgQ2KqAgmCrvIITIECAAAECBAgQKLaAgqDY+dE7AgQIECBAgAABAlsVUBBslVdwAgQIECBAgAABAsUWUBAUOz96R4AAAQIECBAgQGCrAgqCrfIKToAAAQIECBAgQKDYAgqCYudH7wgQIECAAAECBAhsVUBBsFVewQkQIECAAAECBAgUW0BBUOz86B0BAgQIECBAgACBrQooCLbKKzgBAgQIECBAgACBYgsoCIqdH70jQIAAAQIECBAgsFUBBcFWeQUnQIAAAQIECBAgUGwBBcGq+ek0IkmSaHTmb9BrHi5dPn8rcwkQIECAAAECBAjsVkBBsIJ/p5FEcvMx2vUFK/ea8en6OC4WLV+wmdkECBAgQIAAAQIEdi2gIFghA0eXaaSXRwvW7EXz03Uc/34abxesYTYBAgQIECBAgACBogq8KWrHytKvXvNTXB//HreViAVXE/0wlKurq3h4eBjPzy5F8kOAAAECBAgQIEBgFwIKgnXUs0uFzt7H57TyrCgnJydT65+fn09NmyBAgAABAgQIECCQl4BLhtaR7n6Lu2hFLUn6NxTXWhGtWhKHzd46UW1LgAABAgQIECBAIDcBBcE61EeXkabp+F9203G9ncbt6fPOGKzTBdsSIECAAAECBAgQWEdAQbCCXv8pQ0kSozMASXIYTgKsAGcVAgQIECBAgACBwgu4h2CFFA2eMvT0itl6i55F9PTW1iBAgAABAgQIECCQv4AzBPmba5EAAQIECBAgQIBAYQQUBIVJhY4QIECAAAECBAgQyF9AQZC/uRYJECBAgAABAgQIFEZAQVCYVOgIAQIECBAgQIAAgfwFFAT5m2uRAAECBAgQIECAQGEEFASFSYWOECBAgAABAgQIEMhfQEGQv7kWCRAgQIAAAQIECBRGQEFQmFToCAECBAgQIECAAIH8BRQE+ZtrkQABAgQIECBAgEBhBBQEhUmFjhAgQIAAAQIECBDIX0BBkL+5FgkQIECAAAECBAgURkBBUJhU6AgBAgQIECBAgACB/AUUBPmba5EAAQIECBAgQIBAYQQUBIVJhY4QIECAAAECBAgQyF9AQZC/uRYJECBAgAABAgQIFEZAQVCYVOgIAQIECBAgQIAAgfwFFAT5m2uRAAECBAgQIECAQGEEFASFSYWOECBAgAABAgQIEMhfQEGQv7kWCRAgQIAAAQIECBRGQEFQmFToCAECBAgQIECAAIH8BRQE+ZtrkQABAgQIECBAgEBhBBQEhUmFjhAgQIAAAQIECBDIX0BBkL+5FgkQIECAAAECBAgURkBBUJhU6AgBAgQIECBAgACB/AUUBKuadxqRJEk0OjMbDOdny5LDZvRmFpskQIAAAQIECBAgUGQBBcEK2ek0kkhuPka7PrtyJxpf3kU3TSNNu3ERZ/GpqSSYVTJNgAABAgQIECBQXAEFwQq5ObpMI708mrPmUVzenkalv6QSH46rc9YxiwABAgQIECBAgEBxBd4Ut2tl61kvvl7fxfvPg/JgWe+vrq7i4eFhvEp2uZEfAgSmBf7417/jpz//aXqmKQJ7LOA9MUg+hz1+Exj61gQUBBui7TU/xdn7dqTzTiTMtHFycjI15/z8fGraBAEC0S8GPv7jn3tPcfP3v+69AYCBQFYge09EeE94RxDYvICCYAOmveZhHFwfR/d2hWpgA+0JQYAAAQIECBAgQGBTAgqCNSWzG45r0Y5UMbCmpM0JECBAgAABAgR2IeCm4hXU+08ZSpKotSJatSSS5DD6DxPqNeNLK7KZ/UeS9h89mjRi9smkKzRhFQIECBAgQIAAAQI7EXCGYAX2wVOG5q14Grfp6bwF5hEgQIAAAQIECBAohYAzBKVIk04SIECAAAECBAgQ2I6AgmA7rqISIECAAAECBAgQKIWAgqAUadJJAgQIECBAgAABAtsRUBBsx1VUAgQIECBAgAABAqUQUBCUIk06SYAAAQIECBAgQGA7AgqC7biKSoAAAQIECBAgQKAUAgqCUqRJJwkQIECAAAECBAhsR0BBsB1XUQkQIECAAAECBAiUQkBBUIo06SQBAgQIECBAgACB7QgoCLbjKioBAgQIECBAgACBUggoCEqRJp0kQIAAAQIECBAgsB0BBcF2XEUlQIAAAQIECBAgUAoBBUEp0qSTBAgQIECAAAECBLYjoCDYjquoBAgQIECAAAECBEohoCAoRZp0kgABAgQIECBAgMB2BBQE23EVlQABAgQIECBAgEApBBQEpUiTThIgQIAAAQIECBDYjoCCYDuuohIgQIAAAQIECBAohYCCoBRp0kkCBAgQIECAAAEC2xFQEGzHVVQCBAgQIECAAAECpRBQEJQiTTpJgAABAgQIECBAYDsCCoLtuIpKgAABAgQIECBAoBQCCoJSpEknCRAgQIAAAQIECGxHQEGwHVdRCRAgQIAAAQIECJRCQEGwapo6jUiSJBqdmQ2G87Nl2b/DZm9mBZMECBAgQIAAAQIEiiugIFghN51GEsnNx2jXZ1fuRKN2HxfdNNI0jbR7EXH2KdQEs06mCRAgQIAAAQIEiirwpqgdK1K/ji7TSCOi05jpVecmWvXPkVaG8yun8bl+Fl++9uL0dDRzZpuIuLq6ioeHh/GC7MyCHwIjgT/+9e/46c9/Gk36TYAAAQITAj4jBxgcJnYKL9cWUBCsQdj7fh8RH6ciHLyrTk3Pmzg5OZmafX5+PjVtYr8FsmLg4z/+ud8IEXHz97/uvQEAAgR+FPAZOTDxGfnjvmHOywVcMvRyO1sSIECAAAECBAgQKL2AgmDDKex+u9twROEIECBAgAABAgQIbE9AQbCGbeXDcVRbXx5vIu4140urGscfFt8/sEZzNiVAgAABAgQIECCwcQEFwQqk/acMJUnUWhGtWvZ40cNBEVA5jdv2+zg7GDxyNDk4i/ft21hyP/EKrVmFAAECBAgQIECAQH4Cbipewbr/lKHLBSseXUaaLlq4YBuzCRAgQIAAAQIECBREwBmCgiRCNwgQIECAAAECBAjsQkBBsAt1bRIgQIAAAQIECBAoiICCoCCJ0A0CBAgQIECAAAECuxBQEOxCXZsECBAgQIAAAQIECiKgIChIInSDAAECBAgQIECAwC4EFAS7UNcmAQIECBAgQIAAgYIIKAgKkgjdIECAAAECBAgQILALgWIWBJ1GJMnE/wBsFzLaJECAAAECBAgQILAHApsvCPoH843oRET///DbyF4956cXzS+tiOpFdNOZ/+tvrxmHSRKHzd44YK95+Ph/Dh7OHf2fhftFxWEz+msPtx0UGsP/s/Cz+zZu1gsCBAgQIECAAAECr0Jg4wVB7/t9RPVdHAx5qu9Gr1b16sa3u4h4/zYqq24yXq8XzcMkaq1qXHTTSNM00s/f4tNEAVG96Pbndy+qEa3aVHExDuMFAQIECBAgQIAAgT0R2GhBkH1bf3B2F3F3FgdJdmCevTyIuV/Ejy8LGnxbP/jWPzugr0Urw2/VIkkGZxpWzkXva1zfZScXfo/TUTVxdBm344nHSJUPx1F9nPSKAAECBAgQIECAwF4KbLQgqJzeRrseEfV2pGk7Bi/TuDyasc0u36m1YvLb+kHhUInT28F2gxiXMbvpTKSpyd7X6xicXBhVA1OLpyaes+7UhiYIECBAgAABAgQIvCKBjRYEEb0YXDE0ukyoGvOuGBocjFfj+MPgwH30bf3998d7A7ZlnBUe2X0E2ZmMrCD5oVjZVsPiEiBAgAABAgQIECigwJvN9Sm73OcgsiuG4u4gkrNh5INGvE2f903/S/tUefs+azz6hcXR/LMEWREw7xKil7ZpOwIECBAgQIAAAQJlFtjgGYLR5T7DG3oH1w5Fe04xMDpw/9Yd0M2eMVgIWnkb/UP+66+DJwdFL772bxo4jv7JhqOfI7tX+O7st/5TjvpxssuT5t7EsLAVCwgQIECAAAECBAjsjcAGzxBERO973EfEu/7L7GlDx+OnDU2JHl1G9+I+DmrJ4Abi/m0H6eONwFMrT04cxWXajkhqcTA+BVGPdno6fCJRVpR0Iw4Popb0b03OIveXZ33zQ4AAAQIECBAgQIDAtMBmC4LKadymp4MWTm9j9HK6ycFUdgPy/OXZQX8al/M26s97anlWFKQx7MVjlMm+Pc71igABAgQIECBAgMBeC2zwkqG9djR4AgQIECBAgAABAqUUUBCUMm06TYAAAQIECBAgQGAzAgqCzTiKQoAAAQIECBAgQKCUAgqCUqZNpwkQIECAAAECBAhsRkBBsBlHUQgQIECAAAECBAiUUkBBUMq06TQBAgQIECBAgACBzQgoCNZx7DQiSZLxv8Nmb51otiVAgAABAgQIECCQu4CC4MXknWjU7uOim0aappF2LyIm/w/JL45rQwIECBAgQIAAAQL5CSgI8rPWEgECBAgQIECAAIHCCWz2/1RcuOFts0NHcdn9HocHSZz1m6lHO72MoxWavLq6ioeHh/Ga2WVHfggQIECAAAECBAjsQkBBsIZ67+t13EU92t138eXgLGqNj5FePl0SnJycTLV6fn4+NW2CAAECBAgQIECAQF4CLhl6qXSnEQfXx9HNzgpUTuM27cbFfS0anZcGtB0BAgQIECBAgACB/AUUBBsz78a3u40FE4gAAQIECBAgQIBALgIuGXop89FltG+SOEgGdxBkYaoX3bh9+oqhl7ZoOwIECBAgQIAAAQIbF1AQrEF6dJlGerlGAJsSIECAAAECBAgQ2LGAS4Z2nADNEyBAgAABAgQIENilgIJgl/raJkCAAAECBAgQILBjAQXBjhOgeQIECBAgQIAAAQK7FFAQ7FJf2wQIECBAgAABAgR2LKAg2HECNE+AAAECBAgQIEBglwIKgl3qa5sAAQIECBAgQIDAjgUUBDtOgOYJECBAgAABAgQI7FJAQbBLfW0TIECAAAECBAgQ2LGAgmDHCdA8AQIECBAgQIAAgV0KKAh2qa9tAgQIECBAgAABAjsWUBDsOAGaJ0CAAAECBAgQILBLAQXBLvW1PSXwx7/+PTVtggABAgQIEJgv4G/mwIXD/P3juXPfPHcD6xPYlsBPf/5TfPzHP7cVvjRxb/7+19L0VUcJECBAYDcC/mYO3P3N3Mz+5wzBZhxFIUCAAAECBAgQIFBKAQVBKdOm0wQIECBAgAABAgQ2I6Ag2IyjKAQIECBAgAABAgRKKaAgKGXadJoAAQIECBAgQIDAZgQUBJtxFIUAAQIECBAgQIBAKQUUBKVMm04TIECAAAECBAgQ2IyAgmAzjqIQIECAAAECBAgQKKWAgqCUadNpAgQIECBAgAABApsRUBBsxlEUAgQIECBAgAABAqUUUBCUMm06TYAAAQIECBAgQGAzAgqCzTiKQoAAAQIECBAgQKCUAgqCNdPWaSSRJKN/jeisGc/mBAgQIECAAAECBPIUeJNnY6+trawYqEU70vTotQ3NeAgQIECAAAECBPZEQEHw4kR34qZVj7Zi4MWCNiRAgAABAgQIENi9gILgpTnofY/76n3cJ9lZguFPvR3p5dNnC66uruLh4WG0Vf+So/GEFwQIECBAgAABAgRyFFAQrIN99z4+p7cxKAE60Uhq0fiYxlM1wcnJyVSr5+fnU9MmCBAgQIAAAQIECOQl4KbijUkfxcf6xoIJRIAAAQIECBAgQCAXAQXBS5krH+K42oqb0WOFes340qrGu4OXBrQdAQIECBAgQIAAgfwFXDL0YvNKnP5+EYcHSSTDGPV2GqeVFwe0IQECBAgQIECAAIHcBRQE65BXTuM2PV0ngm0JECBAgAABAgQI7FTAJUM75dc4AQIECBAgQIAAgd0KKAh26691AgQIECBAgAABAjsVUBDslF/jBAgQIECAAAECBHYroCDYrb/WCRAgQIAAAQIECOxUQEGwU36NEyBAgAABAgQIENitgIJgt/5aJ0CAAAECBAgQILBTAQXBTvk1ToAAAQIECBAgQGC3AgqC3fprnQABAgQIECBAgMBOBRQEO+XXOAECBAgQIECAAIHdCigIduuvdQIECBAgQIAAAQI7FVAQ7JRf4wQIECBAgAABAi8V+ONf/37ppq9qu3Ud3rwqjRIP5uM//lni3m+m6zd//+tmAolCgAABAgQI7IXAT3/+UziGilj3GMoZgr14uxgkAQIECBAgQIAAgfkCCoL5LuYSIECAAAECBAgQ2AsBBcFepNkgCRAgQIAAAQIECMwXUBDMdzGXAAECBAgQIECAwF4IKAj2Is0GSYAAAQIECBAgQGC+gIJgvou5BAgQIECAAAECBPZCQEGwF2k2SAIECBAgQIAAAQLzBRQE813MJUCAAAECBAgQILAXAgqCvUizQRIgQIAAAQIECBCYL6AgmO9iLgECBAgQIECAAIG9EFAQ7EWaDZIAAQIECBAgQIDAfAEFwXwXcwkQIECAAAECBAjshYCCYANp7jUPI0mSaHQ2EEwIAgQIECBAgAABAjkKKAjWxe4149P1cVzU1w1kewIECBAgQIAAAQL5CygI1jLvRfPTdRz/fhpv14pjYwIECBAgQIAAAQK7EXizm2ZfR6u95qe4Pv49bisRz7la6OrqKh4eHsYI2eVGfggQIECAAAECBAjsQkBB8FL17FKhs/fxOa08O8LJycnUNufn51PTJggQIECAAAECBAjkJeCSoZdKd7/FXbSiliT9G4prrYhWLYnDZu+lEW1HgAABAgQIECBAIHcBBcFLyY8uI03T8b92PaLeTuP29PlnDF7aBdsRIECAAAECBAgQWFdAQbCuoO0JECBAgAABAgQIlFjAPQQbSt7RZRpHG4olDAECBAgQIECAAIG8BJwhyEtaOwQIECBAgAABAgQKKKAgKGBSdIkAAQIECBAgQIBAXgIKgryktUOAAAECBAgQIECggAIKggImRZcIECBAgAABAgQI5CWgIMhLWjsECBAgQIAAAQIECiigIChgUnSJAAECBAgQIECAQF4CCoK8pLVDgAABAgQIECBAoIACCoICJkWXCBAgQIAAAQIECOQloCDIS1o7BAgQIECAAAECBAoooCAoYFJ0iQABAgQIECBAgEBeAgqCvKS1Q4AAAQIECBAgQKCAAgqCAiZFlwgQIECAAAECBAjkJaAgyEtaOwQIECBAgAABAgQKKKAgKGBSdIkAAQIECBAgQIBAXgIKgryktUOAAAECBAgQIECggAIKggImRZcIECBAgAABAgQI5CWgIMhLWjsECBAgQIAAAQIECiigIChgUnSJAAECBAgQIECAQF4CCoK8pLVDgAABAgQIECBAoIACCoICJkWXCBAgQIAAAQIECOQloCDIS1o7BAgQIECAAAECBAoooCAoYFJ0iQABAgQIECBAgEBeAgqCvKS1Q4AAAQIECBAgQKCAAgqCAiZFlwgQIECAAAECBAjkJaAgWEe604gkSQb/DpvRWyeWbQkQIECAAAECBAjsQEBB8GL0TjS+vItumkaaduMizuJTU0nwYk4bEiBAgAABAgQI7ERAQfBi9qO4vD2NSn/7Snw4rr44kg0JECBAgAABAgQI7Ergza4afl3t9uLr9V28/zwoD54a29XVVTw8PIxXyy478kOAAAECBAgQIEBgFwIKgg2o95qf4ux9O9Kj1YKdnJxMrXh+fj41bYIAAQIECBAgQIBAXgIKgjWle83DOLg+ju7titXAmu3ZnAABAgQIECBAgMAmBRQEa2h2GknUoh2pYmANRZsSIECAAAECBAjsUsBNxS/V7zXjSysiWrXHR48mjei8NJ7tCBAgQIAAAQIECOxAwBmCl6JXTuM2PX3p1rYjQIAAAQIECBAgUAgBZwgKkQadIECAAAECBAgQILAbAQXBbty1SoAAAQIECBAgQKAQAgqCQqRBJwgQIECAAAECBAjsRkBBsBt3rRIgQIAAAQIECBAohICCoBBp0AkCBAgQIECAAAECuxFQEOzGXasECBAgQIAAAQIECiGgIChEGnSCAAECBAgQIECAwG4EFAS7cdcqAQIECBAgQIAAgUIIKAgKkQadIECAAAECBAgQILAbAQXBbty1SoAAAQIECBAgQKAQAgqCQqRBJwgQIECAAAECBAjsRkBBsBt3rRIgQIAAAQIECBAohICCoBBp0AkCBAgQIECAAAECuxFQEOzGXasECBAgQIAAAQIECiGgIChEGnSCAAECBAgQIECAwG4EFAS7cdcqAQIECBAgQIAAgUIIKAgKkQadIECAAAECBAgQILAbAQXBbty1SoAAAQIECBAgQKAQAgqCQqRBJwgQIECAAAECBAjsRkBBsBt3rRIgQIAAAQIECBAohICCoBBp0AkCBAgQIECAAAECuxFQEOzGXasECBAgQIAAAQIECiGgIChEGnSCAAECBAgQIECAwG4EFATruHcakSTJ+N9hs7dONNsSIECAAAECBAgQyF1AQfBi8k40avdx0U0jTdNIuxcRZ59CTfBiUBsSIECAAAECBAjsQEBB8FL0zk206p/jtDIMUDmNz/W7uP7qLMFLSW1HgAABAgQIECCQv0Dy66+/pr/88kv+LZe8xV7zMA6+fY708mg8khIF+78AABHhSURBVGzep/g9bsdVwnjR1Iurq6t4eHgYz8suO8rOMvghQIAAAQIECBAg8FyBv/zlL/G3v/3tuZv11z8/P483L9rSRmsJnJycTG2fJUJRFsFhsFtw4DD5AWF/8Nkw2h/sCz4bRvtC9tv+YH+Y3R8mp5/72iVDzxVbsn73292SpRYRIECAAAECBAgQKJ6AguCFOal8OI5q68vjTcS9ZnxpVeP4w+imghcGthkBAgQIECBAgACBHAVcMvRS7Mpp3La/RXKQxNkwRr2dPt5k/NK4tiNAgAABAgQIECCQo4CCYB3so8tI08t1IvS3/Y//+I+1Y7yGABwGWeTAYfL9bH+IYOA94T0xKWB/mNTw+bCZ/cFThib3Kq8JECBAgAABAgQI7JFAdoO6ewj2KOGGSoAAAQIECBAgQGBWQEEwK2KaAAECBAgQIECAwB4JKAj2KNmGSoAAAQIECBAgQGBWQEEwK2KaAAECBAgQIECAwB4JKAj2KNmGSoAAAQIECBAgQGBWQEEwK2KaAAECBAgQIECAwB4JKAj2KNmGSoAAAQIECBAgQGBWQEEwK2KaAAECBAgQIECAwB4JKAheS7I7jUiSZPzvsNlbPrLh+o3OzGpz43SiMYo9uUGvGYeHzXiipZkGtjS5aDxZc8uWzXZn3rpTJofxSFswl8l+zuZlclmSxNL9Y3LdyTiT85PiOvSah+P3QTLVz8d9YfReWeawME5JHEa79mgck2/d0XtiFYeFcUrh0Ivm4ePnYn+8kxBTY1j2vlgSZypGcd8XncakQyPGH/1T/V9mMNgT5saZilFQg6k+jixe4LAsztSygjpkaZzq50zOly0bfRiMfi9ad2p+wRwW9u0Jl9GYJ38PY01+pLzMtiDHEr/++mvqp+wC7bQe1fSiOxxH9yKtTk7PDK9djzTq7TT7XW9PLpwfp16vptV+8G56Ua2ng02ydUevJ2Pk/3rxeNL+GOeP9cd+zo3Tt5wYZ7uexnDc3YsiubTTevUiHewCWZ5imLNsnPPzOt5fpigWxCmlQ5pmOcryP/h5qcNEnNI4DIec9bd6kV5Mvdef47AgTmkcBu+F8S4wHM7z94cFcUriMPpsmxp+f+J5+8LcOCUx+GHs2Wf5eMd4nsNUrFGc0jjMG+vob9y8ZRPHFtMDn3PcUU/bRXZY0rfn/Z1cdGyxzG/xsiIcS2S1gDMEk9VeWV93bqJV/xynleEAKqfxuX4X11/nf3d/dJlGenn042gXxGm17n5Yt9OoRbQvY06UH9bd9oyF44mIZctm+zVv3d7X67irf3wc59HHqMd9fJ9PG7tzOYrL29MY7AKV+HBcfRzegrzO3z/mxymnQ0T3211U3x0MLF7s8BinPA7ZkHvR/HQdx7+fxtvHvSHiWQ7z45TLYXLwE6+f7TCx7fBlORw6cdOqR/sZn/nzPxvmxymHwWzuetH80or6x+FfsBfvC49xyukw4/Jih8c43wv8N3Npjp459nnHC0s/W58ZfxfHEgqCx/24tK963+9/6PvBu4kDwh+Wzp+xKE714iLenx1EkhzE9fHPcdA8jC/vujHv78v8yOWdW3n7PqJ183h6PQ7iXfUuvnUjKqefC+rSi6/Xd/H+7aA8WJTXp7PyGKdMDqNLZLLLQ2rRjtthpfxch3lxyuXwKa6Pf3/8omCY8Oc7/BinTA7ZsFu10SUiSYxO7z/XYV6cUjj0vsd99T6+jC77zH4PEZ5lsCBOKQxmP+w6v8VZXMTPw3rgWQ6TsSbilMfhKC67x3F9MHxPHHyLz+ngy73nOcyPc1rgv5nLcvS8sU/uBI+vl8VYtqwoxxIKgsdcvspXkwc1y66XXj74D3GZppGmadx++Bqfvn3u/z4c/oF5edzlrW5z6couR5fRrreiNv5jehBnd9UYfOl8VEiXXvNTnL1vr1SwLXOYilMih8rpbX9fzfbX7rsvkUzeB7Fgp5rnMDdOWRx6zfh09j4+j08bLhj4zOwfHBbFKYtDVOL0dvDZle0P2TWErdrEdeMz4x9N/uCwKE5ZHO7ex+fhZ3iatqPeqo0Lo9GYZ3//aBAR8+JE2T4jh9/qfx6dUZ0d+fT0XIf+KjNxyrIvZOcOs2/xox7t7kVUoxW1UZU8PfSpqXkOc+MU2WFp36aGOzUxb+xTK6w9UYxjCQXB2oksZoDsUonsZ/KgZvRN6XN6PIoz2KYTjezbhMuj6Px2Fu/baaTdi4jrr8W4sfgZA3uOS//U4OQf03gfwy/fhy0WxyX74Dq4Po7uE6dvRnld5DAvTpkcRrtC9s1L/e46Flw917+kKFt3kcO8OKVw6H6Lu+wP/bCQrbUG35IvKt4X7g9L4pTCYZTA0e8nLvlb6DDafvR7Ik75HI7iY300kB9/r2wQj3FKZZB9q39Xj9HVQj8KDOY86TAnTikcOo3B34jsrEDlNG7TblzcLy4QFzosiVNkh6f79rhHLBz74ypPvhrFmLfij8t2eyyhIJiXpZLNq3w4jmrry+PTb3rN+NKqxvGH0U0Fqw1oeZzsKRtf4l135r6Bytt4v1r4V7FWdl1fa/Keguw67YK4ZE//OPj2OdLxvQQD8uV5/TEti+JMrllYh+ypD5PfdmXXbQ4LuGc5LIlTCoejy/FZkuyb8XY9svsn+5dPPcthSZxSOEx2Mnv90v1hSZzJRYV8X1Q+xHG1FTejxwoN/z5kZzmftS8siVN4g4kOdm5aUb34+fG+sOwLgRf8DZ0XZ6KZ/v1kRf1bMdnPiG4Mvz98kcNjrMc4j/OyBxoV+W/mY99esg9MjjN7vSzGsmWDOAU4lvCUoanb5ss70X/6TaQRg3/jhyfMGVH/SRHD9QbrTzxFYEGcx7vghwH7d+s/3dac5jc+a9l4li2b7cjcddvZE5seXR+fSjHYujAuE/kY7QOjpyH1e7ogr7MG6aI4s/NndrDCOKSDp8HMNcgGu6rDojilcZjObLZvT6VsZYcFcUrjkD3ZY+L9O/tktJUdFsQpi8NMP1+8L8yLMzOvsJ+R2a7c7+voiTrT+/bqnw0L4pTIYfZv3eApgkOPld8TwyftTLy/+nGK7PBE356zD8waxujJjsv8lizb9d/QrBZIsv/88ssvs4WOaQIECBAgQIAAAQIEXrnA+fl5uGTolSfZ8AgQIECAAAECBAgsE1AQLNOxjAABAgQIECBAgMArF1AQvPIEGx4BAgQIECBAgACBZQIKgmU6lhEgQIAAAQIECBB45QIKgleeYMMjQIAAAQIECBAgsExAQbBMxzICBAgQIECAAAECr1xAQfDKE2x4BAgQIECAAAECBJYJKAiW6VhGgAABAgQIECBA4JULKAheeYINjwABAgQIECBAgMAyAQXBMh3LCBAgQIAAAQIECLxyAQXBK0+w4REgsAWBTiOSJIkkOYxmb3vxG50txH5uyF4zDpMkDrcy0Od25hWtP9yHtppjuXtFO4yhENiugIJgu76iEyCwa4HhQVH/AH7y6Kt/QNaI5x9z96L5pRVRvYhuehunlfUH2GkkkRw2Y9O1xbbirj/iFSLMOZjtNQ9/KML6Y+wXZxOGkzkfLZvM/QrNl3GVjed7hRwMcpIVx0kkI+M99S/jPqPPBEYCCoKRhN8ECLxKgc5vZ3FXb0farke0bgYFQHbAUruPi+5lHD171N34dhcR79/GBmqB+a0fXUaapnH5/M7Nj/cq5/aieZhErVWNi27a90o/f4tPE2cyqhfd/vzuRTWiVXOWY9P7QacRB2d3UW8P/LvvbqbOmPHfNLh4BLYnoCDYnq3IBAgUUqAXzU9nERe/L/92f3xZ0ODbz8ElM9lBaC1a2bhatUiSmTMM/W9GD6PZHF1SNPGtaXSiMfq2OvvdPyMwOqiNiLuzOEiS6H/JOns5ycw3ruPLdxa2tyDuRD4G36yP+j/s2/gsxWD78Te+2XbffutfOjT1TXA2f65TtmAYYzjm0ZfHsWgsE31b6WXva1zfZSdqJvJ4dBm3c07ZVD4cR3VO0NUN5uVuyRin2lq07eRKC6wW2k5u+9iPWrZjTu5Ho9UW5W7NXPS+349a6P+unF7OfU8t8p/a2AQBAjsVUBDslF/jBAhsW+Do54uoZgfvtVZUL36OaBzE2fv23APHcV+yA6X++o/fMN+dHUSjU4nT23bUsxWzsw7pvDMMd3F2/S66aRqjb6b7B8O9g/g5HX6TnZ2tuDuL3/rx0sgmB5cgzTkrkPXl4CzeD7+FTbsXEf2+jHo7296XaPayfi6Pe/Qxa/Q+vmfXKfW+R//Q7u5bdLOwo4PtdwejRuLu/l38Ph5T1ka23iKnbNGnOLurR3s45v7ZjifHMm7uyRe9r9cxOFHz9HmaReuubDA3dwvGONvzBdtOrrbQau4+OLnl6PXyfC/M3dL9ahR78e/K6ef+e6FVW34/zSL/xZEtIUAgbwEFQd7i2iNAIF+BymncDg9Kb9/+FrVWPdo/fx9/2z3+tn2iV4MDmGocfxgcbI6+4bzvHz1PrLjgZfX4Q/9yoqntKt34bXSGoP9V7oKNZ2d3v/UPfAcHXUkkB2f96cm+jNt7+z77iji+9Y/qZwPNTB+8i2rcxfXXXkTWRr0e9WjFTXZTRb/Nx/FnW85rY5lTpd+XVtRGZz2yICuMZaaXa01mRVx2RiO7rCW7fOWHS7BWNViQu7ljnO3xgm0nV5sXZ5nt5LarvJ6Xu83k4iguR0Vi3MXZwfTN50/6r9J56xAgkIuAgiAXZo0QILBzgf632YP7BuK37JKhbv++gruz315wY/HzR9NpZJcaDb8x758SeF6M0XXa2b0F2b95l8Y8K2LlQxxXI+6+daNz04r6x8vIThpkhUY2HdXjGNZDzwo7Xrl/H0Q3BpfvTx8obmIsg4PoQX/Hbc68GF3DvtBrRYOFuVsyxlFXFm47WiH7vUKcydU3+XojuTi9jTQdnDnL9qfRz5P+oxX9JkBg5wIKgp2nQAcIENi+QCcaBwvuG6i+i8cLYwY9GRxsPn7TPvtt7VP9vbv+2n9i0GC77P7j6ctaZq+97scbXa4zG7z/LXZ2P/Tzn4e0NG5U4kNWEdzfxM19NbKrgw7eVePu+re4uX88IzDbncnpZU69ZmN46dLEgeJzxlJ5G/3zHUPL7J6Er/2bBoaFytHP/WJjqqDLir7xzQqTPV30+vkGk7mbO8ZFTfWvzJq+5n606rw4y2xH2839vWg/ml15lVw8kYPsCUNj7uFlZ9WJy8xmmzRNgECBBX799dfUDwECBF6zQLseafYolPFPu55GRP9f9aI7nj35ontRHa+Trfu4eTutZ9s+znjcrHuRViPSanVi29F6w2X9dqvV/nqjRelEf/rzhtPzlg/6XU373R61NxrDku3GsR57m6bjPtXTvs54ehg/W/eJNp506jsP42fxJsY6NZbJfo1fD62HuYqYiNNfp5teVAd5HMSaHsei3I7DZy/GY57eNuJHgx9zN9m/2b4NWxnHjzQm8z6Vq/lxFttOjeBxYsK2n+8ncrdaLib7lllPjnNm2Wgnm233sYdeESBQQIGsFkiy//zyyy8FLll0jQABAiURGN40m12OtPYlPSUZsm4SIECAQLkFzs/PwyVD5c6h3hMgQIAAAQIECBBYS+DNWlvbmAABAgQeBfpPNDp9nPaKAAECBAiUQMAZghIkSRcJECBAgAABAgQIbEtAQbAtWXEJECBAgAABAgQIlEBAQVCCJOkiAQIECBAgQIAAgW0JKAi2JSsuAQIECBAgQIAAgRIIKAhKkCRdJECAAAECBAgQILAtAQXBtmTFJUCAAAECBAgQIFACAQVBCZKkiwQIECBAgAABAgS2JaAg2JasuAQIECBAgAABAgRKIKAgKEGSdJEAAQIECBAgQIDAtgQUBNuSFZcAAQIECBAgQIBACQQUBCVIki4SIECAAAECBAgQ2JaAgmBbsuISIECAAAECBAgQKIGAgqAESdJFAgQIECBAgAABAtsSUBBsS1ZcAgQIECBAgAABAiUQUBCUIEm6SIAAAQIECBAgQGBbAgqCbcmKS4AAAQIECBAgQKAEAgqCEiRJFwkQIECAAAECBAhsSyD5r//6r/SPP/7YVnxxCRAgQIAAAQIECBAoqMBPP/0U/w+guPNGB7+iGAAAAABJRU5ErkJggg==\" height=\"223.6936765491453\" width=\"463\" style=\"cursor: nwse-resize;\"></p><p><strong style=\"color: rgb(230, 0, 0); font-size: 20px;\"><em>It is plainly a distribution, which does not covey the strong message that % of UCP=USP is low. </em></strong></p><p><strong style=\"color: rgb(230, 0, 0); font-size: 20px;\"><em>Also, it cannot illustrate the even UCP = USP, UCP might not be CMEP, vise versa... The distribution of the UCP-CMEP chart may look similar</em></strong></p><p>Scattered? (Can we report that?),<strong style=\"color: rgb(230, 0, 0); font-size: 20px;\"><em> can't do it, as there is only one dimension (% of patients whose UCP=USP)</em></strong></p><p>% bar? <strong style=\"font-size: 20px; color: rgb(230, 0, 0);\"><em>then a cut off is required, like % of UCPs whose % of patient whose UCP=USP &gt; 80%...</em></strong></p><p>A table with means and SD?</p><table><tbody><tr><td data-row=\"row-dvjx\"><strong>% of stuff</strong></td><td data-row=\"row-dvjx\"><strong>Mean +/- SD</strong></td></tr><tr><td data-row=\"row-5mqp\">% of patient whose UCP = USP</td><td data-row=\"row-5mqp\">50% (+/- 15%)</td></tr><tr><td data-row=\"row-m8z7\">% of patient whose UCP = CMEP</td><td data-row=\"row-m8z7\">40% (+/-20%)</td></tr><tr><td data-row=\"row-n02j\">% of patient whose UCP =USP= CMEP</td><td data-row=\"row-n02j\">10% (+/-30%)</td></tr></tbody></table><p><strong style=\"color: rgb(230, 0, 0); font-size: 20px;\"><em>Honestly, the table makes more sense to me. </em></strong></p><p>t///</p>"}]}]}]}]}]}]},{"idx":"MY451e4e0a-b450-46e7-b9da-c7c0de927209","name":"USP' of each Panel patient within Followup","custparents":[{"idx":"MYa6caf5ea-8b53-4f8c-b872-4e699cde7bb4"},{"idx":"MY44d8ecaa-7f17-4747-9bef-2f9311169718"},{"idx":"MYa6caf5ea-8b53-4f8c-b872-4e699cde7bb4"}],"children":[{"idx":"MYd0abcf7a-4314-430e-9a3e-04cd24f35f5b","name":"subtotal2A: # patients whose USP' = UCP","custparents":[{"idx":"MY451e4e0a-b450-46e7-b9da-c7c0de927209"}],"children":[{"idx":"MYb7a5e86a-a83b-47cf-8e22-60f4f34ac581","name":"subtotal2B: sum of subtotal2A by UCP","custparents":[{"idx":"MYd0abcf7a-4314-430e-9a3e-04cd24f35f5b"}],"children":[{"idx":"MY1f44f49a-16c0-47ef-8d0a-f330ea3e3558","name":"PCT2i = S2Bi / S0i","custparents":[{"idx":"MYb7a5e86a-a83b-47cf-8e22-60f4f34ac581"},{"idx":"MY673bd3d2-5aa1-4dc3-a905-13547afc443f"}],"children":[{"idx":"MY18b5d962-ba7a-4ff6-9b9c-1119c89fadf0","name":"Distribution of PCT2i for all UCPs","custparents":[{"idx":"MY1f44f49a-16c0-47ef-8d0a-f330ea3e3558"}]}]}]}]}]},{"idx":"MYf59c286e-eafe-4863-9327-0c22a1b3712a","name":"CMEP' of each panel patient within follow up","custparents":[{"idx":"MYa6caf5ea-8b53-4f8c-b872-4e699cde7bb4"},{"idx":"MY44d8ecaa-7f17-4747-9bef-2f9311169718"},{"idx":"MYa6caf5ea-8b53-4f8c-b872-4e699cde7bb4"}],"children":[{"idx":"MY234be778-48ac-4652-81c8-6ee6cc6163c1","name":"subtotal3A: # of patients whose CMEP' = UCP","custparents":[{"idx":"MYf59c286e-eafe-4863-9327-0c22a1b3712a"}],"children":[{"idx":"MYc4aa266f-dc15-4226-a78d-3415155252e8","name":"subtotal3B: sum of subtotal3A by UCP","custparents":[{"idx":"MY234be778-48ac-4652-81c8-6ee6cc6163c1"}],"children":[{"idx":"MYeb2cdaf3-49d8-4b0f-89d0-d44cdd5c1e8a","name":"PCT3i = S3Bi / S0i","custparents":[{"idx":"MYc4aa266f-dc15-4226-a78d-3415155252e8"},{"idx":"MY673bd3d2-5aa1-4dc3-a905-13547afc443f"}],"children":[{"idx":"MY656f3256-8406-4d40-9207-c665ce2d023b","name":"Distribution of PCT3i for all UCPs","custparents":[{"idx":"MYeb2cdaf3-49d8-4b0f-89d0-d44cdd5c1e8a"}]}]}]}]},{"idx":"MYc61c09d6-6834-496a-991e-12c6843383ed","name":"# patients subtotal4: whose CompCOC provider was the UCP)","custparents":[{"idx":"MYf59c286e-eafe-4863-9327-0c22a1b3712a"}],"NodeDescription":"<p>///t</p><p>Comprehensive continuity of care provider is the UCP whose is also the USP, and the CMEP</p><p>t///</p>","children":[{"idx":"MYdda1c477-9bfc-445c-85f4-b4b12b3d2a69","name":"subtotal4B: sum of subtotal4A by UCP","custparents":[{"idx":"MYc61c09d6-6834-496a-991e-12c6843383ed"}],"children":[{"idx":"MYb09f3807-baa7-46c3-a900-56efd916ea3c","name":"PCT4i = S4Bi / S0i","custparents":[{"idx":"MYdda1c477-9bfc-445c-85f4-b4b12b3d2a69"},{"idx":"MY673bd3d2-5aa1-4dc3-a905-13547afc443f"}],"children":[{"idx":"MY27f6d625-0c03-49de-a004-ef9007eb469f","name":"Distribution of PCT4i for all UCPs","custparents":[{"idx":"MYb09f3807-baa7-46c3-a900-56efd916ea3c"}]}]}]}]}]}]}]}]}]}],"NodeDescription":"<p>///t</p><iframe class=\"ql-video\" frameborder=\"0\" allowfullscreen=\"true\" src=\"https://www.youtube.com/embed/fEVANChmEbs?showinfo=0\" data-blot-formatter-unclickable-bound=\"true\"></iframe><p><br></p><p><br></p><p>t///</p>"}]},{"idx":"MY54622cd1-9528-4768-9d54-1817716cf038","name":"5. Adh by measures","custparents":[{"idx":"MYea01f777-ef0e-4d2f-95f3-8a911b9f304f"},{"idx":"MYea01f777-ef0e-4d2f-95f3-8a911b9f304f"}],"children":[{"idx":"MYb219761d-297c-40a6-a0d6-83c31f5a71e6","name":"PS matching","custparents":[{"idx":"MY54622cd1-9528-4768-9d54-1817716cf038"}],"children":[{"idx":"MY1e9980ec-fc56-4af2-abeb-e2a33c16e39b","name":"Adh by UPCI Cat, compCOC, and combined","custparents":[{"idx":"MYb219761d-297c-40a6-a0d6-83c31f5a71e6"}]},{"idx":"MYe73a5faa-4b03-40bb-ae72-7496debcea36","name":"Predicting power of each model","custparents":[{"idx":"MYb219761d-297c-40a6-a0d6-83c31f5a71e6"}],"children":[]}]}]}]},{"idx":"MY043c6d28-3e77-4035-8f61-8ea6497d8f23","name":"Data flow","custparents":[{"idx":"ProjectCollection-cmSbt48MqRzD7t79"}],"children":[{"idx":"a15c93fd-0b50-4623-a964-6a1f7ef941a4","name":"VXA_V SlimMasters","NodeDescription":"///t<br/>///s<br/>/*VXA_V. Make smaller master files*/<br/>/*only to run once*/<br/>%macro makeSlimMaster&#59<br/>/*VXA_V0. Prepare source data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_dp_benefit_pop.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_dp_benefit_pop.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_dp_nonbenefit_pop.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_dp_nonbenefit_pop.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_DINmap_pop.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_DINmap_pop.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_patientidmap_pop.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_patientidmap_pop.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_docidmap_pop.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_docidmap_pop.sas7bdat)<br/>)&#59<br/><br/><br/><br/><br/>/*VXA_V1. the dp files are too big, to make it slim:<br/> keep only din key_hsn key_prscr_num and Rx_ddddd<br/>*/<br/><br/>/*VXA_V1a. compress the dp_benefit file*/<br/>/*%print(data=master_dp_benefit_pop)&#59*/<br/>data VXA_V1a1&#59<br/>&nbsp&nbsp&nbsp&nbspset master_dp_benefit_pop (keep=din key_hsn key_prscr_num Rx_ddddd)&#59<br/>run&#59<br/>/*110358616*/<br/>/*replace the key_hsn (length=11) with key_hsnc (length=4)<br/>&nbsp&nbsp&nbsp&nbspNote: some records are lost as key_hsn of these claims cannot be found in the PHRS<br/>*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXA_V1a1,<br/>&nbsp&nbsp&nbsp&nbspt2=master_patientidmap_pop,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXA_V1a2,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.din, t2.key_hsnc, t1.key_prscr_num as key_doc_num, t1.Rx_ddddd),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>/*replace the key_doc_num (length=11) with key_doc_numc (length=2)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXA_V1a2,<br/>&nbsp&nbsp&nbsp&nbspt2=master_DocIDmap_pop,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXA_V1a3,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.din, key_hsnc, t2.key_doc_numc, t1.Rx_ddddd),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num<br/>)&#59<br/>/*replace the DIN (length=8) with DINStr (length=3)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXA_V1a3,<br/>&nbsp&nbsp&nbsp&nbspt2=master_DINmap_pop,<br/>&nbsp&nbsp&nbsp&nbsptarget=master_dp_benefit_pop_slim,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t2.dinStr, t1.key_hsnc, t1.key_doc_numC, t1.Rx_ddddd),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=din<br/>)&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=%str(&localDataPath), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=master_dp_benefit_pop_slim.zip, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=master_dp_benefit_pop_slim.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/>/*VXA_V1b. compress the dp_nonbenefit file*/<br/>/*%print(data=master_dp_nonbenefit_pop)&#59*/<br/>data VXA_V1b1&#59<br/>&nbsp&nbsp&nbsp&nbspset master_dp_nonbenefit_pop (keep=din key_hsn key_prscr_num Rx_ddddd)&#59<br/>run&#59<br/>/*replace the key_hsn (length=11) with key_hsnc (length=4)<br/>&nbsp&nbsp&nbsp&nbspNote: some records are lost as key_hsn of these claims cannot be found in the PHRS<br/>*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXA_V1b1,<br/>&nbsp&nbsp&nbsp&nbspt2=master_patientidmap_pop,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXA_V1b2,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.din, t2.key_hsnc, t1.key_prscr_num as key_doc_num, t1.Rx_ddddd),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>/*replace the key_doc_num (length=11) with key_doc_numc (length=2)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXA_V1b2,<br/>&nbsp&nbsp&nbsp&nbspt2=master_DocIDmap_pop,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXA_V1b3,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.din, key_hsnc, t2.key_doc_numc, t1.Rx_ddddd),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num<br/>)&#59<br/>/*replace the DIN (length=8) with DINStr (length=3). Some records cannot be mapped, why the dins in master_DINmap_pop is incomplete?<br/>*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXA_V1b3,<br/>&nbsp&nbsp&nbsp&nbspt2=master_DINmap_pop,<br/>&nbsp&nbsp&nbsp&nbsptarget=master_dp_nonbenefit_pop_slim,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t2.dinStr, t1.key_hsnc, t1.key_doc_numC, t1.Rx_ddddd),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=din<br/>)&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=%str(&localDataPath), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=master_dp_nonbenefit_pop_slim.zip, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=master_dp_nonbenefit_pop_slim.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/>%beep&#59<br/><br/>%mend makeSlimMaster&#59<br/>s///<br/>t///","custparents":[{"idx":"CodeTask-rXaW7KfQgzQfcx1V"},{"idx":"MY043c6d28-3e77-4035-8f61-8ea6497d8f23"}]},{"idx":"cef2d381-52dc-483e-b956-804d56329258","name":"VXA_Z MapIDs","NodeDescription":"///t<br/>///s<br/>/*VXA_Z. Mapping of key_hsn and physician IDs*/<br/>/*only to run once<br/>NOTE: Do not change the mapping. Otherwise the slim files would be messed up for wrong mapping.<br/>*/<br/><br/>%macro mapIDs&#59<br/>/*VXA_Z0. Prepare source data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_keyhsn_pop.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_keyhsn_pop.sas7bdat)<br/>)&#59<br/>%sort(data=master_keyhsn_pop, sorter=descending key_hsn)&#59<br/>data VXA_Z0&#59<br/>&nbsp&nbsp&nbsp&nbspset master_keyhsn_pop&#59<br/>&nbsp&nbsp&nbsp&nbspi=_n_&#59<br/>run&#59<br/><br/>/*VXA_Z1. make a uniq code (key_hsnc)with 4 chars to represent a unqiue key_hsn<br/>&nbsp&nbsp&nbsp&nbspfor a number between 1 and 128**4 (i.e., 2097152), turn it to a 4-char string<br/>&nbsp&nbsp&nbsp&nbspeach char represents a number between 1 to 128*/<br/>data master_patientIDmap_pop&#59<br/>&nbsp&nbsp&nbsp&nbspset VXA_Z0 &#59<br/>&nbsp&nbsp&nbsp&nbsplength C1-C4 $1.&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*Note! order matters, first to have N1, then N2, then N3, then N4*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*In the left position, the number N1 (1-128) behind the char is the quotient of i divided by 128^3 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN1=int(i/128**3)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspC1=byte(N1)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*In the second left position, the number (1-128) behind the char is the quotient of <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi - N1*128^3 divided by 128^2 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN2=int((i-N1*128**3)/128**2)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspC2=byte(N2)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*In the third left position, the number (1-128) behind the char is the quotient of <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi - (N1*128+N2)*128^2 divided by 128 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN3=int((i-(N1*128+N2)*128**2)/128)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspC3=byte(N3)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*In the right position, the number N4 (1-128) behind the char is the remainder of i divided by 128 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN4 =mod(i, 128)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspC4=byte(N4)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspKey_HSNC=C1||C2||C3||C4&#59<br/><br/>&nbsp&nbsp&nbsp&nbspdrop N: c: i&#59<br/>run&#59<br/>/*%distinct(data=VXA_Z1, target=test2, vars=Key_HSNC)&#59 */<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=%str(&localDataPath), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=master_patientIDmap_pop.zip, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=master_patientIDmap_pop.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/><br/><br/><br/><br/>/*mapping physician ids*/<br/>/*VXA_Z0. Prepare source data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_docnum_pop.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_docnum_pop.sas7bdat)<br/>)&#59<br/>%sort(data=master_docnum_pop, sorter=descending key_doc_num)&#59<br/>data VXA_Z1&#59<br/>&nbsp&nbsp&nbsp&nbspset master_docnum_pop&#59<br/>&nbsp&nbsp&nbsp&nbspi=_n_&#59<br/>run&#59<br/>/*As there are less then 9999 docs in the province (at least for now), two chars will be enough*/<br/>data master_DocIDmap_pop&#59<br/>&nbsp&nbsp&nbsp&nbspset VXA_Z1 &#59<br/>&nbsp&nbsp&nbsp&nbsplength C1-C2 $1.&#59<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*In the left position, the number N1 (1-128) behind the char is the quotient of i divided by 128 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN1=int(i/128)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspC1=byte(N1)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*In the right position, the number N2 (1-128) behind the char is the remainder of i divided by 128 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN2 =mod(i, 128)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspC2=byte(N2)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkey_doc_numc=C1||C2&#59<br/><br/>&nbsp&nbsp&nbsp&nbspdrop N: c: i&#59<br/>run&#59<br/>/*%distinct(data=master_DocIDmap_pop, target=test2, vars=key_doc_numc)&#59 */<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=%str(&localDataPath), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=master_DocIDmap_pop.zip, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=master_DocIDmap_pop.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/><br/><br/>/*mapping dins*/<br/>/*VXA_Z0. Prepare source data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_din_pop.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_din_pop.sas7bdat)<br/>)&#59<br/>%sort(data=master_din_pop, sorter=descending din)&#59<br/>data VXA_Z2&#59<br/>&nbsp&nbsp&nbsp&nbspset master_din_pop&#59<br/>&nbsp&nbsp&nbsp&nbspi=_n_&#59<br/>run&#59<br/>/*Three chars will be enough*/<br/>data master_DINmap_pop&#59<br/>&nbsp&nbsp&nbsp&nbspset VXA_Z2 &#59<br/>&nbsp&nbsp&nbsp&nbsplength C1-C3 $1.&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*Note: order matters, first to have N1, then N2, then N3, then N4.*/<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*In the left position, the number N1 (1-128) behind the char is the quotient of i divided by 128 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN1=int(i/128**2)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspC1=byte(N1)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*In the second left position, the number (1-128) behind the char is the quotient of <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi - N1*128^2 divided by 128 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN2=int((i-N1*128**2)/128)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspC2=byte(N2)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*In the right position, the number N2 (1-128) behind the char is the remainder of i divided by 128 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN3 =mod(i, 128)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspC3=byte(N3)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdinStr=C1||C2||C3&#59<br/><br/>&nbsp&nbsp&nbsp&nbspdrop N: c: i&#59<br/>run&#59<br/>/*%distinct(data=master_DINmap_pop, target=test2, vars=dinStr)&#59 */<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=%str(&localDataPath), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=master_DINmap_pop.zip, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=master_DINmap_pop.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/>%mend mapIDs&#59<br/>s///<br/>t///","children":[{"idx":"ed5aa019-47c1-468a-b1ca-85117ab57474","name":"Q alldin","NodeDescription":"///t<br/>///s<br/>/*Question is the alldin file complete?<br/>No. There are dins in dp claim files, but not in alldins. However, there are also dins in alldin file, but not in dp claims (ben and nonben) <br/>&nbsp&nbsp&nbsp&nbspThe mapping here takes all dins from both alldin file, and the dp claim files (ben and nonben)<br/>*/<br/>s///<br/>t///","custparents":[{"idx":"CodeTask-Cyi72WHtF1TQ611E"}]}],"custparents":[{"idx":"CodeTask-rXaW7KfQgzQfcx1V"},{"idx":"MY043c6d28-3e77-4035-8f61-8ea6497d8f23"}]},{"idx":"1811c2fb-f705-411b-b82d-4fc56f3381d5","name":"VXA_Statin Users","NodeDescription":"///t<br/>///s<br/>/*VXA. Those receiving Statins between 2012 and 2017*/<br/>data _null_&#59 run&#59<br/><br/>/*VXA0. perepared source data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_cohort.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_cohort.sas7bdat)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>%vbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_mds_ltc.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_mds_ltc.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_hosp.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_hosp.sas7bdat)<br/>)&#59<br/>/*%print(data=master_cohort)&#59*/<br/>/*%nobs(data=master_cohort)&#59*/<br/>/*%minmax(data=master_cohort, var=dqdate, format=date9., target=test1, m=max)&#59*/<br/>/*%minmax(data=master_cohort, var=dqdate, format=date9., target=test2, m=min)&#59*/<br/><br/>/*VXA1. keep the relevant cols, the latest entry date is 31dec2017d (so as to allow 365 days follow up)*/<br/>data VXA1&#59<br/>&nbsp&nbsp&nbsp&nbspset master_cohort&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn dqdate RHA sex_desc mari_stat_desc fam_no birth age fsa nh_name nh_number QAIPPE resitype&#59<br/>&nbsp&nbsp&nbsp&nbspif dqdate le &EntryEndDate&#59   <br/>&nbsp&nbsp&nbsp&nbsprename dqdate = EntryDate&#59<br/>&nbsp&nbsp&nbsp&nbspif QAIPPE=. then QAIPPE=9&#59<br/>run&#59<br/><br/>/*<br/>The following exclusion has been applied during cohort creation<br/>missing age sex<br/>age < 18 at entry<br/>not continuously covered during washout (5 years) or 1 years follow up<br/>(including those deceased)<br/>Receiving statin within washout (5 years)<br/>*/<br/><br/><br/>/*apply other exclusion criterias<br/>&nbsp&nbsp&nbsp&nbspThis part was copied from VZC<br/>*/ <br/><br/><br/><br/>/*VXA2. LTC stay: in LTC from 365*5 days prior through 365 days since entryDate*/<br/>/*VXA2a. from the mds_ltc file, get ltc stay records*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXA1,<br/>&nbsp&nbsp&nbsp&nbspt2=master_mds_ltc,<br/>&nbsp&nbsp&nbsp&nbsptarget= VXA2a,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.entryDate, t2.key_hsn, t2.mds_ab1 as adm_date, t2.mds_r4 as dschg_date ),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/><br/>/*VXA2b. oncatenate the overlaping periods*/<br/>%cleanHospital(<br/>&nbsp&nbsp&nbsp&nbspdata=VXA2a, <br/>&nbsp&nbsp&nbsp&nbsptarget=VXA2b, <br/>&nbsp&nbsp&nbsp&nbspdxCol=,<br/>&nbsp&nbsp&nbsp&nbspmdxCol=, <br/>&nbsp&nbsp&nbsp&nbspintvnCol=, <br/>&nbsp&nbsp&nbsp&nbspstartD=,<br/>&nbsp&nbsp&nbsp&nbspendD=,<br/>&nbsp&nbsp&nbsp&nbspinst_num=,<br/>&nbsp&nbsp&nbsp&nbspMaxGap=1, <br/>&nbsp&nbsp&nbsp&nbspincldHN=0, <br/>&nbsp&nbsp&nbsp&nbspkeep=EntryDate,<br/>&nbsp&nbsp&nbsp&nbspmaxLenD=,<br/>&nbsp&nbsp&nbsp&nbspmaxLenM=,<br/>&nbsp&nbsp&nbsp&nbspmaxLenI=,<br/>&nbsp&nbsp&nbsp&nbspkeepTmp=<br/>)&#59<br/><br/>/*VXA2c. Get a list of distinct patient id of those ever stayed in a LTC facility within the washout , or the follow up period*/<br/>%distinct(data=VXA2b, target=VXA2c, vars=%str(key_hsn), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str(adm_date between entryDate - &washoutdays and entryDate +&followdays-1 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor dschg_date between entryDate - &washoutdays and entryDate +&followdays-1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor adm_date < entryDate - &washoutdays and dschg_date > entryDate +&followdays-1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp))&#59<br/><br/>/*VXA2D. Link to vax1, indicate those having LTC stay*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXA1,<br/>&nbsp&nbsp&nbsp&nbspt2=VXA2c,<br/>&nbsp&nbsp&nbsp&nbsptarget= VXA2d,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.key_hsn = \"\", 0, 1) as LTCStay),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>/*%freq(data=VXA2d, table=LTCStay)&#59*/<br/><br/><br/>/*VXA2E, from above, keep patients not having LTC stays. These are cohort memebers not stayed in a LTC facility within the washout<br/>&nbsp&nbsp&nbsp&nbspor the followup period*/<br/>data VXA2&#59<br/>&nbsp&nbsp&nbsp&nbspset VXA2d&#59<br/>&nbsp&nbsp&nbsp&nbspwhere LTCStay=0&#59<br/>&nbsp&nbsp&nbsp&nbspdrop LTCStay&#59<br/>run&#59<br/><br/>/*VXA3. Stayed in an out-province facility (prov_loc_sk = 'N') for acute care during follow -up*/<br/>/*%print(data=master_hosp)&#59*/<br/>/*%freq(data=master_hosp, table=prov_loc_sk*ds_ip)&#59*/<br/><br/>/*VXA3a. From the master hospitalization record, select those events occured in a facility indicated as out-of-province facility (i.e., prov_loc_sk = 'N')*/<br/>data VXA3a&#59<br/>&nbsp&nbsp&nbsp&nbspset master_hosp&#59<br/>&nbsp&nbsp&nbsp&nbspwhere prov_loc_sk = 'N'&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn adm_date dschg_date&#59<br/>run&#59<br/>/*VXA3b. From VXA2, and according to VXA3a, get a list of patient who stayed in an out-province acute care facility during follow up*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXA2,<br/>&nbsp&nbsp&nbsp&nbspt2=VXA3a, <br/>&nbsp&nbsp&nbsp&nbsptarget=VXA3b, <br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjterm = %str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.key_hsn = t2.key_hsn and<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.adm_date between t1.entryDate  and t1.entryDate +&followdays-1 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor t2.dschg_date between t1.entryDate and t1.entryDate +&followdays-1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor t2.adm_date < t1.entryDate  and t2.dschg_date > t1.entryDate +&followdays-1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/><br/>/*Exclude patients in VXA3b to get the cohort after applying excusion criteria */<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1= VXA2,<br/>&nbsp&nbsp&nbsp&nbsptarget= VXA,<br/>&nbsp&nbsp&nbsp&nbspvars=*,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(key_hsn not in (select key_hsn from VXA3b)) <br/>)&#59<br/><br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localTargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VXa.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VXa.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/>%exportvars(data=VXA)&#59<br/><br/><br/><br/>s///<br/>t///","children":[{"idx":"f44f4584-792a-457b-809a-53c17af66389","name":"VXB_Encounter Episodes","NodeDescription":"///t<br/>///s<br/>/*VXB, get all encounter episodes, indicated by whether or not being CME, and type of provider (PCP, SCP, OTH)<br/>&nbsp&nbsp&nbsp&nbsp1) get patient-physician-date-spec specific encounters <br/>&nbsp&nbsp&nbsp&nbsp2) keep encounters with GPs<br/>&nbsp&nbsp&nbsp&nbsp3) determine the final cohort (those having encounters with GP during follow up) <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNote: patients are excluded if only having encounters during run-in period but not during follow up<br/>&nbsp&nbsp&nbsp&nbsp4) Keep encounters with GPs, and of the final cohort members<br/>&nbsp&nbsp&nbsp&nbsp5) indicate whether the encounter was for complete medical examination encounters (CME) <br/>*/<br/>data _null_&#59run&#59<br/><br/>/*VXB0a. perepared source data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\vxa.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(vxa.sas7bdat)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_msb.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_msb.sas7bdat)<br/>)&#59<br/><br/>/*VXB0b. get msb claims within lookback and follow up (i.e. +/- 365 days around entryDate) of the cohort members in VXA*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_msb,<br/>&nbsp&nbsp&nbsp&nbspt2=vxa,<br/>&nbsp&nbsp&nbsp&nbsptarget=vxb0b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.entryDate),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(t1.dos between t2.EntryDate-&runindays and t2.EntryDate +&followdays-1)<br/>)&#59<br/><br/>/*VXB1 get patient-physician-date-spec specific encounters with PCPs (GPs)*/<br/>/*VXB1a. from above, get eligible service claims (see appendix 2)*/<br/>data vxb1a&#59<br/>&nbsp&nbsp&nbsp&nbspset vxb0b&#59<br/>&nbsp&nbsp&nbsp&nbspwhere<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnum_srv ne 0<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLOS NOT in ('B','2','K','9')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspMODE ne 'Z'<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>run&#59<br/><br/>/*VXB1b. excluding claims without doc number, or by slush doc codes, anyway these claims are difficult to calculate encounter episodes*/<br/>data vxb1b&#59<br/>&nbsp&nbsp&nbsp&nbspset vxb1a&#59<br/>&nbsp&nbsp&nbsp&nbspwhere key_doc_num ne '' and DocSlushCode = 'N'&#59<br/>run&#59<br/><br/>/*VXB1C. get the number of encounter episode (a distinct patient-doc-dos is an Encounter), get distinct patient doc dos and spec*/<br/>%distinct(data=vxb1b, target=vxb1c, vars=%str(key_hsn, entryDate, key_doc_num, dos, spec), orderby=%str(key_hsn,key_doc_num, dos, spec))&#59 <br/>/*The above may have the same doc as diff SPEC on the same date. Only encounters with physcians claimed as PCPs(GPs) will be kept*/<br/><br/>/*VXB1d. determine whether the encounter episodes are with a PCP (GP), SCP (SP, a specialist who treated statin related conditions), <br/>or others (appendix 3 and 4). */<br/>data VXB1&#59<br/>&nbsp&nbsp&nbsp&nbspset vxb1c&#59<br/>&nbsp&nbsp&nbsp&nbspif spec in:('B') then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspProviderType_DateSpecific = 'GP'&#59 /*Family physician or primary care provider*/<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif spec in ('CL','DL') then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspProviderType_DateSpecific = 'SCP'&#59 /*Specialist*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse ProviderType_DateSpecific = 'OTH'&#59 /*Other*/<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/><br/>run&#59<br/>/*%freq(data=vxb1, table=ProviderType_DateSpecific)&#59*/<br/>/*vxb1 contains all encounters, the provider indicated as PCP, SCP, or OTH*/<br/><br/>/*VXB2. Keep encounters with PCPs (GPs)<br/>Note that the data vxb1 allowsthe flexibility for analyses including non-GP physicians. In this study however, only GP will be kept starting from here<br/>*/<br/><br/>/*VXB2a. From VXB1, keep encounters indicated as with 'GP' */<br/>Data VXB2a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXB1&#59<br/>&nbsp&nbsp&nbsp&nbspif ProviderType_DateSpecific= 'GP'&#59<br/>&nbsp&nbsp&nbsp&nbspdrop spec&#59<br/>run&#59<br/>/*in the above there might be encounters of the same physician as of different SPEC value of the B class (e.g., B1, B3)*/<br/><br/>/*VXB2b, keep distinct encounters with 'GP'*/<br/>%distinct(data=VXB2a, target=VXB2, vars=*)&#59<br/><br/>/*<br/>VXB3. determine the final cohort (those having encounters with GP during follow up) <br/>Note: patients are excluded if only having encounters during run-in period but not during follow up<br/>*/<br/>/*VXB3a. Get a distinct list of patients who had encounters with GP during followup*/<br/>%distinct(data=VXB2, target=VXB3a, vars=key_hsn, filters=%str(dos between entryDate and entrydate + &followdays -1))&#59<br/><br/>/*VXB3b. from VXA, keep those appearing in VXB3a. The result is the final cohort, i.e., eligible new users of statin medication, <br/>&nbsp&nbsp&nbsp&nbspand having one GP encounter during followup*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=vxA,<br/>&nbsp&nbsp&nbsp&nbspt2=vxb3a,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXB_finalCohort,<br/>&nbsp&nbsp&nbsp&nbspvars=t1.*,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localTargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VXB_finalCohort.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VXB_finalCohort.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/><br/>/*VXB4. Keep encounters with GPs, and of the final cohort members<br/>&nbsp&nbsp&nbsp&nbspNote: these encounters occured in run-in period, or in follow up (the records in run-in period is for future sensitivity analysis)<br/>*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=vxb2,<br/>&nbsp&nbsp&nbsp&nbspt2=VXB_finalCohort,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXB4,<br/>&nbsp&nbsp&nbsp&nbspvars=t1.*,<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/><br/><br/>/*VXB5. indicate CME encounters, FSC code in Appendix 5*/<br/>/*VXB5a. From vxb1b (claims with a non-slush physician), select claims indicated as CMEs*/<br/>data vxb5a&#59<br/>&nbsp&nbsp&nbsp&nbspset vxb1b&#59<br/>&nbsp&nbsp&nbsp&nbspif fsc in ('B003','B064','B052', 'B004')&#59<br/>run&#59<br/><br/>/*VXB5b. get distinct CME claims by patient, provider, and date)*/<br/>%distinct(data=vxb5a, target=vxb5b, vars=%str(key_hsn, key_doc_num, dos))&#59<br/><br/>/*VXB5c. link vxb5b to vxb4 to indicate the CME episodes*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=vxb4,<br/>&nbsp&nbsp&nbsp&nbspt2=vxb5b,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXB,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.key_hsn='', 0,1) as CME),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn dos key_doc_num<br/>)&#59<br/>/*%freq(data=vxb, table=cme*ProviderType_DateSpecific)&#59*/<br/>/*!!! VXB contains all encounter episodes with PCPs, indicated whether or not being a CME within runin and follow up period*/<br/>/*however don't get confused!<br/>&nbsp&nbsp&nbsp&nbspA doctors can be both a CMEP, or not&#59 <br/>&nbsp&nbsp&nbsp&nbspThese classifications are encounter-specific (i.e., patient and service date specific) <br/>*/<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localTargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VXB.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VXB.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/>%exportvars(data=VXB)&#59<br/>%exportvars(data=VXB_finalCohort)&#59<br/><br/>s///<br/>t///","children":[{"idx":"b45165f9-1aae-428b-9ea4-aa9ccb066d84","name":"VXC_F_UPCIndex in Followup &amp; UCPF","NodeDescription":"///t<br/>///s<br/>/*VXC_F determine the upc index during follow up for all the encounterd GPs during follow up*/<br/>data _null_&#59run&#59<br/><br/><br/>/*VXC_F0, perepared source data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\vxb.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(vxb.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\vxb_finalcohort.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(vxb_finalcohort.sas7bdat)<br/>)&#59<br/><br/>/*VXC_F1, From vxb, get claims with follow up, i.e., 365 days since to the index(entryDate) */<br/>data VXC_F1&#59<br/>&nbsp&nbsp&nbsp&nbspset vxb&#59<br/>&nbsp&nbsp&nbsp&nbspwhere DOS between entryDate  and entryDate + &followdays -1&#59<br/>run&#59<br/><br/>/*calculate the UPC index from encounter episodes in follow up*/<br/>/*the macro getUPCIndex works for MSB claim data, and other data<br/>&nbsp&nbsp&nbsp&nbspfor claimTYpe = '', MSB claim data, the LOS, MODE, SPEC, and NUM_SRV must be provided<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthe excluding LOC, excluding MODE, and including SPEC must be provided<br/>&nbsp&nbsp&nbsp&nbspfor cliamtype=others: other data (like in this case, the episodes have been prepared, or like prescription data)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspspecify the claimType as others, and do not need to specify LOS,MODE exclusion, and SPEC<br/>&nbsp&nbsp&nbsp&nbspBy default, the target file contains the doc with the max UPCIndex<br/>&nbsp&nbsp&nbsp&nbspbut this is not what is wanted here. <br/>&nbsp&nbsp&nbsp&nbspFor this analysis, it is expected to keep all docs, each doc having a UPC index<br/>&nbsp&nbsp&nbsp&nbspso the interested data set is not the target, but the tmp5 file created by the macro&nbsp&nbsp&nbsp&nbsp<br/>*/<br/>%getUPCIndex(<br/>&nbsp&nbsp&nbsp&nbspdata=VXC_F1, <br/>&nbsp&nbsp&nbsp&nbsptarget=notInterested,<br/>&nbsp&nbsp&nbsp&nbspclaimType=others,<br/>&nbsp&nbsp&nbsp&nbspdebug=1<br/>)&#59<br/><br/><br/>/*VXC_F2. for each patient, sort by UPC index*/<br/>%sort(data= getUPC_tmp5, target=VXC_F2, sorter=%str(key_hsn descending UPCIndex))&#59<br/><br/>/*VXC_F3. Keep physician(s) with the highest UPC index for each cohort patient*/<br/>/*VXC_F3a, determine the highest UPC index of each patient */<br/>data VXC_F3a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXC_F2&#59<br/>&nbsp&nbsp&nbsp&nbspby key_hsn descending  UPCIndex&#59<br/>&nbsp&nbsp&nbsp&nbspif first.key_hsn&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn UPCIndex&#59<br/>run&#59<br/>/*VXC_F3b, link the patient and highest UPC index back to VXC_F2, and keep patient-physician pairs with the highest UPC index<br/>(there could be multiple physicians with tie index values for a single patient)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXC_F2,<br/>&nbsp&nbsp&nbsp&nbspt2=VXC_F3a,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXC_F3b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars= key_hsn upcindex,<br/>&nbsp&nbsp&nbsp&nbsporderby=%str(key_hsn) <br/>)&#59<br/>/*VXC_F3c. determine the UCPF. In case of tie, getUCPF1,UCPF2, ....<br/>&nbsp&nbsp&nbsp&nbsp in case of tie, there will be multipleUCPFs. DocNumer, Nvisits, UPCindex,  these are all specific by eachUCPF <br/>&nbsp&nbsp&nbsp&nbspand we'll need these values for eachUCPF.<br/>&nbsp&nbsp&nbsp&nbspFollowing is a smart idea:<br/>&nbsp&nbsp&nbsp&nbsp1) putting values of these doc-specifc variables into a string (theStr), with the dlmt \"&#59\"<br/>&nbsp&nbsp&nbsp&nbsp2) make a tag of UCPF1, 2, etc<br/>*/<br/>data VXC_F3c&#59<br/>&nbsp&nbsp&nbsp&nbspset VXC_F3b&#59<br/>&nbsp&nbsp&nbsp&nbspformat UPCIndex 6.2&#59<br/>&nbsp&nbsp&nbsp&nbspby key_hsn &#59<br/>&nbsp&nbsp&nbsp&nbspif first.key_hsn then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi =1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUCPF='UCPF' || strip(i)&#59&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi+1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUCPF='UCPF' || strip(i)&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdrop i&#59<br/>&nbsp&nbsp&nbsp&nbsp/*combine the var values together*/<br/>&nbsp&nbsp&nbsp&nbsplength theStr $50.&#59 <br/>&nbsp&nbsp&nbsp&nbsptheStr = catx(':', key_doc_num, N_Visits, put(UPCIndex, 6.2))&#59<br/>&nbsp&nbsp&nbsp&nbsprename T_visits=T_visitsF N_visits = NMax_VisitsPerDocF UPCIndex=UPCIndexF&#59<br/>run&#59<br/>/*VXC_F3d. Now we can transpose the string in theStr into columsn of UCPF1, 2, ...<br/>&nbsp&nbsp&nbsp&nbspThe values will stay there. Later we can use scan(var, # of word, dlmt) to get the values<br/>&nbsp&nbsp&nbsp&nbsp(i.e., scan(UCPF1, 1, \":\") is the key_doc_num of UCPF1, scan(UCPF1, 2, \"&#59\") is the n_visits of UCPF1, etc<br/>&nbsp&nbsp&nbsp&nbspQuetions: Why it has to be like this?<br/>&nbsp&nbsp&nbsp&nbspThe # of visits, the UPC index will always be the same for UCPs of the same doctor...<br/>*/<br/>%transpose(data = VXC_F3c, target=VXC_F3, <br/>&nbsp&nbsp&nbsp&nbsprowhead =key_hsn NMax_VisitsPerDocF  T_VisitsF UPCIndexF  ,<br/>&nbsp&nbsp&nbsp&nbspcolhead=UCPF,<br/>&nbsp&nbsp&nbsp&nbspcontents= theStr<br/>)&#59<br/>/*example to get upcindex of UCPF1*/<br/>/*<br/>data test&#59<br/>&nbsp&nbsp&nbsp&nbspset VXC_F3 (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbspUPCIndex_UCPF1= scan(UCPF1, 3, ':')&#59<br/>run&#59<br/>*/<br/><br/><br/>/*VXC_F4. The docs in VXC_F3 are UCPFs, link them back to VXB_finalcohort(the cohort)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXB_finalcohort,<br/>&nbsp&nbsp&nbsp&nbspt2=VXC_F3,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXC_F,<br/>&nbsp&nbsp&nbsp&nbspvars=*,<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localTargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VXC_F.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VXC_F.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/>/*how many patients had multiple UCPs*/<br/>/*data test&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspset VXC_F&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspMultipleUCPFs=0&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspif UCPF2 ne '' then MultipleUCPFs=1&#59*/<br/>/*run&#59*/<br/>/*%freq(data=test, table = MultipleUCPFs)&#59*/<br/>%exportvars(data=VXC_F)&#59<br/><br/><br/><br/><br/><br/><br/>s///<br/>t///","children":[{"idx":"d8f37a0d-47f6-4d69-b835-eb765b23800d","name":"VXC_W_UPCIndx in whole period &amp; UCPW","NodeDescription":"///t<br/>///s<br/>/*VXC_W. determine the upc index during running through followup for all the encounterd GPs during running through followup, <br/>&nbsp&nbsp&nbsp&nbspand the UCP of the whole period*/<br/>data _null_&#59run&#59<br/><br/><br/>/*VXC_W0, perepared source data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\vxb.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(vxb.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXB_F.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXB_F.sas7bdat)<br/>)&#59<br/><br/>/*VXC_W1, From vxb, get claims with running through followup, i.e., 365 days since to the index(entryDate) */<br/>data VXC_W1&#59<br/>&nbsp&nbsp&nbsp&nbspset vxb&#59<br/>&nbsp&nbsp&nbsp&nbspwhere DOS between entryDate - &runindays  and entryDate + &followdays -1&#59<br/>run&#59<br/><br/>/*calculate the UPC index from encounter episodes in running through followup*/<br/>/*the macro getUPCIndex works for MSB claim data, and other data<br/>&nbsp&nbsp&nbsp&nbspfor claimTYpe = '', MSB claim data, the LOS, MODE, SPEC, and NUM_SRV must be provided<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthe excluding LOC, excluding MODE, and including SPEC must be provided<br/>&nbsp&nbsp&nbsp&nbspfor cliamtype=others: other data (like in this case, the episodes have been prepared, or like prescription data)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspspecify the claimType as others, and do not need to specify LOS,MODE exclusion, and SPEC<br/>&nbsp&nbsp&nbsp&nbspBy default, the target file contains the doc with the max UPCIndex<br/>&nbsp&nbsp&nbsp&nbspbut this is not what is wanted here. <br/>&nbsp&nbsp&nbsp&nbspFor this analysis, it is expected to keep all docs, each doc having a UPC index<br/>&nbsp&nbsp&nbsp&nbspso the interested data set is not the target, but the tmp5 file created by the macro&nbsp&nbsp&nbsp&nbsp<br/>*/<br/>%getUPCIndex(<br/>&nbsp&nbsp&nbsp&nbspdata=VXC_W1, <br/>&nbsp&nbsp&nbsp&nbsptarget=notInterested,<br/>&nbsp&nbsp&nbsp&nbspclaimType=others,<br/>&nbsp&nbsp&nbsp&nbspdebug=1<br/>)&#59<br/><br/><br/>/*VXC_W2. for each patient, sort by UPC index*/<br/>%sort(data= getUPC_tmp5, target=VXC_W2, sorter=%str(key_hsn descending UPCIndex))&#59<br/><br/>/*VXC_W3. Keep physician(s) with the highest UPC index for each cohort patient*/<br/>/*VXC_W3a, determine the highest UPC index of each patient */<br/>data VXC_W3a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXC_W2&#59<br/>&nbsp&nbsp&nbsp&nbspby key_hsn descending  UPCIndex&#59<br/>&nbsp&nbsp&nbsp&nbspif first.key_hsn&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn UPCIndex&#59<br/>run&#59<br/>/*VXC_W3b, link the patient and highest UPC index back to VXC_W2, and keep patient-physician pairs with the highest UPC index<br/>(there could be multiple physicians with tie index values for a single patient)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXC_W2,<br/>&nbsp&nbsp&nbsp&nbspt2=VXC_W3a,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXC_W3b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars= key_hsn upcindex,<br/>&nbsp&nbsp&nbsp&nbsporderby=%str(key_hsn) <br/>)&#59<br/>/*VXC_W3c. determine the UCPW. In case of tie, getUCPW1,UCPW2, ....<br/>&nbsp&nbsp&nbsp&nbsp in case of tie, there will be multipleUCPWs. DocNumer, Nvisits, UPCindex,  these are all specific by eachUCPW <br/>&nbsp&nbsp&nbsp&nbspand we'll need these values for eachUCPW.<br/>&nbsp&nbsp&nbsp&nbspFollowing is a smart idea:<br/>&nbsp&nbsp&nbsp&nbsp1) putting values of these doc-specifc variables into a string (theStr), with the dlmt \"&#59\"<br/>&nbsp&nbsp&nbsp&nbsp2) make a tag of UCPW1, 2, etc<br/>*/<br/>data VXC_W3c&#59<br/>&nbsp&nbsp&nbsp&nbspset VXC_W3b&#59<br/>&nbsp&nbsp&nbsp&nbspformat UPCIndex 6.2&#59<br/>&nbsp&nbsp&nbsp&nbspby key_hsn &#59<br/>&nbsp&nbsp&nbsp&nbspif first.key_hsn then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi =1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUCPW='UCPW' || strip(i)&#59&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi+1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUCPW='UCPW' || strip(i)&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdrop i&#59<br/>&nbsp&nbsp&nbsp&nbsp/*combine the var values together*/<br/>&nbsp&nbsp&nbsp&nbsplength theStr $50.&#59 <br/>&nbsp&nbsp&nbsp&nbsptheStr = catx(':', key_doc_num, N_Visits, put(UPCIndex, 6.2))&#59<br/>&nbsp&nbsp&nbsp&nbsprename T_visits=T_visitsW N_visits = NMax_VisitsPerDocW UPCIndex=UPCIndexW&#59<br/>run&#59<br/>/*VXC_W3d. Now we can transpose the string in theStr into columsn of UCPW1, 2, ...<br/>&nbsp&nbsp&nbsp&nbspThe values will stay there. Later we can use scan(var, # of word, dlmt) to get the values<br/>&nbsp&nbsp&nbsp&nbsp(i.e., scan(UCPW1, 1, \":\") is the key_doc_num of UCPW1, scan(UCPW1, 2, \"&#59\") is the n_visits of UCPW1, etc<br/>&nbsp&nbsp&nbsp&nbspQuetions: Why it has to be like this?<br/>&nbsp&nbsp&nbsp&nbspThe # of visits, the UPC index will always be the same for UCPs of the same doctor...<br/>*/<br/>%transpose(data = VXC_W3c, target=VXC_W3, <br/>&nbsp&nbsp&nbsp&nbsprowhead =key_hsn NMax_VisitsPerDocW  T_VisitsW UPCIndexW  ,<br/>&nbsp&nbsp&nbsp&nbspcolhead=UCPW,<br/>&nbsp&nbsp&nbsp&nbspcontents= theStr<br/>)&#59<br/>/*example to get upcindex of UCPW1*/<br/>/*<br/>data test&#59<br/>&nbsp&nbsp&nbsp&nbspset VXC_W3 (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbspUPCIndex_UCPW1= scan(UCPW1, 3, ':')&#59<br/>run&#59<br/>*/<br/><br/><br/>/*VXC_W4. The docs in VXC_W3 are UCPWs, link them back to VXB_finalcohort(the cohort)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXC_F,<br/>&nbsp&nbsp&nbsp&nbspt2=VXC_W3,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXC_W,<br/>&nbsp&nbsp&nbsp&nbspvars=*,<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localTargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VXC_W.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VXC_W.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/>/*how many patients had multiple UCPs*/<br/>/*data test&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspset VXC_W&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspMultipleUCPWs=0&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspif UCPW2 ne '' then MultipleUCPWs=1&#59*/<br/>/*run&#59*/<br/>/*%freq(data=test, table = MultipleUCPWs)&#59*/<br/><br/>%exportvars(data=VXC_W)&#59<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>s///<br/>t///","children":[{"idx":"79dbdad1-e8cf-4324-a0dc-f996a3216bbb","name":"VXD_F_CMEPF","NodeDescription":"///t<br/>///s<br/>/*VXD_F: determine the CMEPF during follow up*/<br/>data _null_&#59run&#59<br/><br/>/*VXD_F0. perepared source data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXC_W.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXC_W.sas7bdat)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\vxb.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(vxb.sas7bdat)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>/*VXD_F1. From VXB, get encounter episodes indicated as CME during follow up */<br/>data VXD_F1&#59<br/>&nbsp&nbsp&nbsp&nbspset vxb&#59<br/>&nbsp&nbsp&nbsp&nbspwhere DOS between entryDate and entryDate  +&FollowDays -1 and CME=1&#59<br/>run&#59<br/><br/>/*VXD_F2. sort by days between service date entryDate, and determine the days between CME and EntryDate.<br/>&nbsp&nbsp&nbsp&nbspfor the same physician who provided CME on different dates, keep the record which is the closest to the EntryDate<br/>*/<br/>data VXD_F2a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXD_F1&#59<br/>&nbsp&nbsp&nbsp&nbspCMEDaysToEntry = intck('day',  entrydate, dos)&#59 /*date2 - date1*/<br/>&nbsp&nbsp&nbsp&nbspabsCMEDaysToEntry=abs(CMEDaysToEntry)&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn key_doc_num EntryDate CMEDaysToEntry absCMEDaysToEntry&#59<br/>run&#59 <br/>%sort(data=VXD_F2a, sorter=key_hsn key_doc_num absCMEDaysToEntry)&#59<br/>/*For the same physician who provided CME on different dates, keep the record which is the closest to the EntryDate*/<br/>data VXD_F2&#59<br/>&nbsp&nbsp&nbsp&nbspset VXD_F2a&#59<br/>&nbsp&nbsp&nbsp&nbspby key_hsn key_doc_num absCMEDaysToEntry&#59<br/>&nbsp&nbsp&nbsp&nbspif first.key_doc_num&#59<br/>run&#59<br/><br/>/*VXD_F3. shall we keep only the CMEPF closer to the entry date? or any CMEPF during follow up<br/>&nbsp&nbsp&nbsp&nbspIt seems that keeping any makes more sense<br/>*/<br/>/*determine the CMEPF. In case of tie, get CMEPF1, CMEP2, ....<br/>&nbsp&nbsp&nbsp&nbsp in case of tie, there will be multiple CMEPFs<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocNumer, Nvisits, UPCindex,  these are all specific by each CMEPF <br/>&nbsp&nbsp&nbsp&nbspand we'll need these values for each CMEPF<br/>&nbsp&nbsp&nbsp&nbspFollowing is a nice idea:<br/>&nbsp&nbsp&nbsp&nbsp1) putting values of these doc-specifc variables into a string (theStr), with the dlmt \"&#59\"<br/>&nbsp&nbsp&nbsp&nbsp2) make a tag of CMEPF1, 2, etc<br/>*/<br/>data VXD_F3a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXD_F2&#59<br/>&nbsp&nbsp&nbsp&nbspby key_hsn &#59<br/>&nbsp&nbsp&nbsp&nbspif first.key_hsn then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi =1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCMEPF='CMEPF' || strip(i)&#59&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi+1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCMEPF='CMEPF' || strip(i)&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdrop i absCMEDaysToEntry&#59<br/>&nbsp&nbsp&nbsp&nbsp/*combine the var values together*/<br/>&nbsp&nbsp&nbsp&nbsplength theStr $50.&#59 <br/>&nbsp&nbsp&nbsp&nbsptheStr = catx(':', key_doc_num, CMEDaysToEntry)&#59<br/>run&#59<br/>/*now we can transpose the string in theStr into columsn of CMEPF1, 2, ...<br/>&nbsp&nbsp&nbsp&nbspThe values will stay there. Later we can use scan(var, # of word, dlmt) to get the values<br/>&nbsp&nbsp&nbsp&nbsp(i.e., scan(CMEPF1, 1, \":\") is the key_doc_num of CMEPF1, scan(CMEPF1, 2, \"&#59\") is the n_visits of CMEPF1, etc<br/>*/<br/>%transpose(data = VXD_F3a, target=VXD_F3, <br/>&nbsp&nbsp&nbsp&nbsprowhead =key_hsn EntryDate  ,<br/>&nbsp&nbsp&nbsp&nbspcolhead=CMEPF,<br/>&nbsp&nbsp&nbsp&nbspcontents= theStr<br/>)<br/><br/>/*VXD_F4. The docs in VXD_F3 are CMEPFs, link them back to VXC_W (the cohort)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXC_W,<br/>&nbsp&nbsp&nbsp&nbspt2=VXD_F3,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXD_F,<br/>&nbsp&nbsp&nbsp&nbspvars=*,<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localTargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VXD_F.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VXD_F.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/>/*data test&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspset VXD_F&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspCMEPF=1&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspif CMEPF1 = '' then CMEPF=0&#59*/<br/>/*run&#59*/<br/>/*%freq(data=test, table= CMEPF)&#59*/<br/><br/>%exportvars(data=VXD_F)&#59<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>s///<br/>t///","children":[{"idx":"b3b83945-1cf9-4a9f-87c2-fdc4b3037eea","name":"VXD_W_CMEPW","NodeDescription":"///t<br/>///s<br/>/*VXD_W: determine the CMEPW during runin through followup*/<br/>data _null_&#59run&#59<br/><br/>/*VXD_W0. perepared source data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXD_F.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXD_F.sas7bdat)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\vxb.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(vxb.sas7bdat)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>/*VXD_W1. From VXB, get encounter episodes indicated as CME during runin through followup */<br/>data VXD_W1&#59<br/>&nbsp&nbsp&nbsp&nbspset vxb&#59<br/>&nbsp&nbsp&nbsp&nbspwhere DOS between entryDate - &runindays and entryDate  +&FollowDays -1 and CME=1&#59<br/>run&#59<br/><br/>/*VXD_W2. sort by days between service date entryDate, and determine the days between CME and EntryDate.<br/>&nbsp&nbsp&nbsp&nbspfor the same physician who provided CME on different dates, keep the record which is the closest to the EntryDate<br/>*/<br/>data VXD_W2a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXD_W1&#59<br/>&nbsp&nbsp&nbsp&nbspCMEDaysToEntry = intck('day',  entrydate, dos)&#59 /*date2 - date1*/<br/>&nbsp&nbsp&nbsp&nbspabsCMEDaysToEntry=abs(CMEDaysToEntry)&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn key_doc_num EntryDate CMEDaysToEntry absCMEDaysToEntry&#59<br/>run&#59 <br/>%sort(data=VXD_W2a, sorter=key_hsn key_doc_num absCMEDaysToEntry)&#59<br/>/*For the same physician who provided CME on different dates, keep the record which is the closest to the EntryDate*/<br/>data VXD_W2&#59<br/>&nbsp&nbsp&nbsp&nbspset VXD_W2a&#59<br/>&nbsp&nbsp&nbsp&nbspby key_hsn key_doc_num absCMEDaysToEntry&#59<br/>&nbsp&nbsp&nbsp&nbspif first.key_doc_num&#59<br/>run&#59<br/><br/><br/>/*VXD_W3. shall we keep only the CMEPW closer to the entry date? or any CMEPW during runin through followup<br/>&nbsp&nbsp&nbsp&nbspIt seems that keeping any makes more sense<br/>*/<br/>/*determine the CMEPW. In case of tie, get CMEPW1, CMEP2, ....<br/>&nbsp&nbsp&nbsp&nbsp in case of tie, there will be multiple CMEPWs<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocNumer, Nvisits, UPCindex,  these are all specific by each CMEPW <br/>&nbsp&nbsp&nbsp&nbspand we'll need these values for each CMEPW<br/>&nbsp&nbsp&nbsp&nbspFollowing is a nice idea:<br/>&nbsp&nbsp&nbsp&nbsp1) putting values of these doc-specifc variables into a string (theStr), with the dlmt \"&#59\"<br/>&nbsp&nbsp&nbsp&nbsp2) make a tag of CMEPW1, 2, etc<br/>*/<br/>data VXD_W3a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXD_W2&#59<br/>&nbsp&nbsp&nbsp&nbspby key_hsn &#59<br/>&nbsp&nbsp&nbsp&nbspif first.key_hsn then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi =1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCMEPW='CMEPW' || strip(i)&#59&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi+1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCMEPW='CMEPW' || strip(i)&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdrop i absCMEDaysToEntry&#59<br/>&nbsp&nbsp&nbsp&nbsp/*combine the var values together*/<br/>&nbsp&nbsp&nbsp&nbsplength theStr $50.&#59 <br/>&nbsp&nbsp&nbsp&nbsptheStr = catx(':', key_doc_num, CMEDaysToEntry)&#59<br/>run&#59<br/>/*now we can transpose the string in theStr into columsn of CMEPW1, 2, ...<br/>&nbsp&nbsp&nbsp&nbspThe values will stay there. Later we can use scan(var, # of word, dlmt) to get the values<br/>&nbsp&nbsp&nbsp&nbsp(i.e., scan(CMEPW1, 1, \":\") is the key_doc_num of CMEPW1, scan(CMEPW1, 2, \"&#59\") is the n_visits of CMEPW1, etc<br/>*/<br/>%transpose(data = VXD_W3a, target=VXD_W3, <br/>&nbsp&nbsp&nbsp&nbsprowhead =key_hsn EntryDate  ,<br/>&nbsp&nbsp&nbsp&nbspcolhead=CMEPW,<br/>&nbsp&nbsp&nbsp&nbspcontents= theStr<br/>)<br/><br/>/*VXD_W4. The docs in VXD_W3 are CMEPWs, link them back to VXD_F (the cohort)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXD_F,<br/>&nbsp&nbsp&nbsp&nbspt2=VXD_W3,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXD_W,<br/>&nbsp&nbsp&nbsp&nbspvars=*,<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localTargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VXD_W.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VXD_W.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/>/*data test&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspset VXD_W&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspCMEPW=1&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspif CMEPW1 = '' then CMEPW=0&#59*/<br/>/*run&#59*/<br/>/*%freq(data=test, table= CMEPW)&#59*/<br/><br/>%exportvars(data=VXD_W)&#59<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>s///<br/>t///","custparents":[{"idx":"CodeTask-1SpxtlXR8T5jchis"},{"idx":"CodeTask-gbhiLx1DedOwRO4o"}]}],"custparents":[{"idx":"CodeTask-sTWWDBOZ5LYZpRwK"},{"idx":"CodeTask-gbhiLx1DedOwRO4o"}]}],"custparents":[{"idx":"CodeTask-jZobJlVFsLEwSeaJ"},{"idx":"CodeTask-gbhiLx1DedOwRO4o"}]},{"idx":"1465f415-21e8-48ce-adf8-9b3bd9517db4","name":"QVXC_F","NodeDescription":"///t<br/>///s<br/>/*<br/>[to do]<br/>1. Why the file is so small? VXC_F is only 1k?!!!!!! need to rerun it<br/><br/>1. Why the UPC Index is so high (25% percentile =60%, median =77%)<br/>  Need to validate by comparing  some patients with their previous run data on Z drive<br/><br/>2. How many patients are with 1 encounter? <br/>&nbsp&nbsp&nbsp&nbspWhat if taking out those with 1 encounter, how does the percentile median  of UPC index change<br/><br/>3. How is the distribution of 2 year UPC index<br/>*/<br/>/*settings*/<br/>%include \"S:\\Collaborative_researchers\\Shenzhen\\My Project\\Projects\\DoNotDelete Common Macros\\MyMacros.sas\" /LRECL=32767&#59<br/><br/>%let oldLocalT = Z:\\My Project\\Projects\\PhD Thesis\\StatinCohort\\Output\\Result data&#59<br/>libname oLocalT \"&oldLocalT\"&#59<br/>/*the path with old UPCIndex data <br/>&nbsp&nbsp&nbsp&nbspi.e. VXD_F.zip in Z:\\My Project\\Projects\\PhD Thesis\\StatinCohort\\Output\\Result data<br/>*/<br/><br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&oldLocalT.\\VXD_F.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXD_F.sas7bdat)<br/>)&#59<br/>data UPCI_Old&#59<br/>&nbsp&nbsp&nbsp&nbspset VXD_F&#59<br/>run&#59<br/><br/>%let newLocalT = P:\\Physician_Impact_Pro(SYao)_Bio14-143\\Output\\Result data&#59<br/>libname nLocalT \"&newLocalT\"&#59<br/>/*the path with new UPCIndex data <br/>&nbsp&nbsp&nbsp&nbspi.e. VXC_F.zip in Z:\\My Project\\Projects\\PhD Thesis\\StatinCohort\\Output\\Result data<br/>*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&newLocalT.\\VXC_F.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXC_F.sas7bdat)<br/>)&#59<br/>data UPCI_New&#59<br/>&nbsp&nbsp&nbsp&nbspset VXC_F&#59<br/>run&#59<br/><br/>%print(data=UPCI_old)&#59<br/>%print(data=UPCI_new)&#59<br/><br/>/*patients appeared in both old and new cohort*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=UPCI_old,<br/>&nbsp&nbsp&nbsp&nbspt2=UPCI_new,<br/>&nbsp&nbsp&nbsp&nbsptarget=test1,<br/>&nbsp&nbsp&nbsp&nbspvars=t1.key_hsn,<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>/*more questions!!!!! why there were patients in new cohort, but NOT in old cohort? */<br/><br/>/*For patients in test1, from the old data, get the entry date,  UPC index, Total encounters, and the UCPs*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=UPCI_old,<br/>&nbsp&nbsp&nbsp&nbspt2=test1,<br/>&nbsp&nbsp&nbsp&nbsptarget=test2a,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.entryDate, t1.T_visitsF, t1.UPCPF1),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn,<br/>&nbsp&nbsp&nbsp&nbsporderby =key_hsn<br/>)&#59<br/>data test3a&#59<br/>&nbsp&nbsp&nbsp&nbspset test2a&#59<br/>&nbsp&nbsp&nbsp&nbsplength docID $11.&#59<br/>&nbsp&nbsp&nbsp&nbspdocID = scan(UPCPF1, 1, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspN_VisitsF = input(scan(UPCPF1, 2, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspIndex1= input(scan(UPCPF1, 4, \":\"), 8.2)&#59<br/>&nbsp&nbsp&nbsp&nbspUPCIndex=round((N_VisitsF/T_VisitsF) * 100, '.01')&#59<br/>&nbsp&nbsp&nbsp&nbspif Index1=UPCIndex&#59<br/>run&#59<br/><br/>/*For patients in test1, from the new data, get the entry date,  UPC index, Total encounters, and the UCPs*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=UPCI_new,<br/>&nbsp&nbsp&nbsp&nbspt2=test1,<br/>&nbsp&nbsp&nbsp&nbsptarget=test2b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.entryDate,t1.NMax_VisitsPerDocF, t1.UpcIndexF, t1.T_visitsF, t1.ucpf1),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn,<br/>&nbsp&nbsp&nbsp&nbsporderby =key_hsn<br/>)&#59<br/>data test3b&#59<br/>&nbsp&nbsp&nbsp&nbspset test2b&#59<br/>&nbsp&nbsp&nbsp&nbsplength docID $11.&#59<br/>&nbsp&nbsp&nbsp&nbspdocID = scan(ucpf1, 1, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspN_VisitsF = NMax_VisitsPerDocF&#59<br/>&nbsp&nbsp&nbsp&nbspIndex1=round(UPCIndexF, '.01')&#59<br/>&nbsp&nbsp&nbsp&nbspUPCIndex=round((N_VisitsF/T_VisitsF) * 100, '.01')&#59<br/>&nbsp&nbsp&nbsp&nbspif index1 = UPCIndex&#59<br/>run&#59<br/><br/>/*from the above test3a and b, make a head to head comparison set for each var*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=test3a,<br/>&nbsp&nbsp&nbsp&nbspt2=test3b,<br/>&nbsp&nbsp&nbsp&nbsptarget=test4,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.key_hsn,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.entryDate as entryDate_old,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.entryDate as entryDate_new,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.DocID as DocID_old,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.DocID as DocID_new,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.N_VisitsF as N_VisitsF_old,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.N_VisitsF as N_VisitsF_new,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.T_VisitsF as T_VisitsF_old,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.T_VisitsF as T_VisitsF_new,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.UPCIndex as UPCIndex_old,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.UPCIndex as UPCIndex_new<br/>&nbsp&nbsp&nbsp&nbsp),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/><br/>/*check those not having the same N_VisitsF*/<br/>data test5&#59<br/>&nbsp&nbsp&nbsp&nbspset test4&#59<br/>&nbsp&nbsp&nbsp&nbspif entryDate_old ne entryDate_new&#59<br/>run&#59<br/>/*none*/<br/><br/>/*the T_VisitsF sounds different<br/>&nbsp&nbsp&nbsp&nbsp1) ? Was it because SPEC visits were included in the old data<br/>&nbsp&nbsp&nbsp&nbsp2) ? Was it because sometimes a the UCP (as GP) was acting as SP, and the visits as SP is also accounted<br/>*/<br/>/*get the first patient in test4*/<br/>Data test6&#59<br/>&nbsp&nbsp&nbsp&nbspset test4 (obs=1)&#59<br/>run&#59<br/>/*get the patients msb claims within follow up*/<br/>%let newDataPath = P:\\Physician_Impact_Pro(SYao)_Bio14-143\\Data&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&newDataPath.\\master_msb.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_msb.sas7bdat)<br/>)&#59<br/>/*%minmax(data=master_msb, var=dos, format=date9., target=xxx, m=min)&#59*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_msb,<br/>&nbsp&nbsp&nbsp&nbspt2=test6,<br/>&nbsp&nbsp&nbsp&nbsptarget=test7a,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.entrydate_new),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>data test7b&#59<br/>&nbsp&nbsp&nbsp&nbspset test7a&#59<br/>&nbsp&nbsp&nbsp&nbspwhere dos between entrydate_new and entrydate_new + 365-1&#59<br/>run&#59<br/>/*further remove records that are not eligible*/<br/>data test7c&#59<br/>&nbsp&nbsp&nbsp&nbspset test7b&#59<br/>&nbsp&nbsp&nbsp&nbspwhere<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnum_srv ne 0<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLOS NOT in ('B','2','K','9')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspMODE ne 'Z'<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocSlushCode = 'N'<br/>&#59<br/>run&#59<br/>/*from above, get distinct records by patient doc spec and date*/<br/>%distinct(data=test7c, target=test7d, vars=%str(key_hsn, key_doc_num, spec, dos), orderby=key_doc_num)&#59<br/>/*Yep, in the old data, T_visits included encounters to SPs*/<br/><br/>/*So, for UPC index calculation, what constructs the proper denominator? with or without encounters to SPs?<br/>&nbsp&nbsp&nbsp&nbspcheck the comment in the proposal file in dropbox: <br/>&nbsp&nbsp&nbsp&nbspcontinuity ofphysician care patterns 20191205.docx. Page 21 comments<br/>&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspThe denomintor should be to all family physicians (supported by Provost, and CiHI's paper). However, both of the paper<br/>&nbsp&nbsp&nbsp&nbsplimited to those having at least twice visits to GPs. <br/>&nbsp&nbsp&nbsp&nbspIn Provost's cohort, within 2 years, the % with UPC index . 75% is 37.5%<br/>&nbsp&nbsp&nbsp&nbspIn CIHI report, the 'average' (mean? median?) of UPC index in SK (2007-2012) is 0.56 <br/>&nbsp&nbsp&nbsp&nbsp(of what period?, )<br/>&nbsp&nbsp&nbsp&nbspwhat is the quintile distribution look like?<br/>&nbsp&nbsp&nbsp&nbspFor all the provinces (not SK specific), \"approximately one-quater of patients were in the low (<0.4) and high(0.8) category\"<br/>&nbsp&nbsp&nbsp&nbsp(page 7). <br/>*/<br/><br/>proc means data=VXC_F mean median q1 q3&#59<br/>&nbsp&nbsp&nbsp&nbspvar UPCIndexF&#59<br/>run&#59<br/><br/>/*how many patients with only 1 T_visitsF*/<br/>data test8&#59<br/>&nbsp&nbsp&nbsp&nbspset VXC_F&#59<br/>&nbsp&nbsp&nbsp&nbspTVF_Cat='>1'&#59<br/>&nbsp&nbsp&nbsp&nbspif T_visitsF =1 then TVF_Cat='1'&#59<br/>run&#59<br/>%freq(data=test8, table = TVF_Cat)&#59<br/>/*excluding those with only 1 T_visitsF?*/<br/>proc means data=VXC_F mean median q1 q3&#59<br/>&nbsp&nbsp&nbsp&nbspwhere T_visitsF>1&#59<br/>&nbsp&nbsp&nbsp&nbspvar UPCIndexF&#59<br/>run&#59<br/>proc univariate data=VXC_F &#59<br/>&nbsp&nbsp&nbsp&nbspwhere T_visitsF>1&#59<br/>&nbsp&nbsp&nbsp&nbsphistogram UPCIndexF / normal&#59<br/>run&#59<br/>/*Similar !*/<br/><br/>/*whose index is 100%*/<br/>data test9&#59&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspset VXC_F&#59<br/>&nbsp&nbsp&nbsp&nbspif UPCIndexF=100&#59<br/>run&#59<br/>/*among those UPCIndex=100, how many only had 1 visits*/<br/>data test9&#59<br/>&nbsp&nbsp&nbsp&nbspset VXC_F&#59<br/>&nbsp&nbsp&nbsp&nbspTVF_Cat='>1'&#59<br/>&nbsp&nbsp&nbsp&nbspif T_visitsF =1 then TVF_Cat='1'&#59<br/>run&#59<br/>%freq(data=test9, table = TVF_Cat)&#59 <br/>/*Not a lot at all*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_msb,<br/>&nbsp&nbsp&nbsp&nbspt2=test9,<br/>&nbsp&nbsp&nbsp&nbsptarget=test12a,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.entrydate),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn,<br/>&nbsp&nbsp&nbsp&nbsporderby=%str(key_hsn, entryDate)<br/>)&#59<br/>data test12b&#59<br/>&nbsp&nbsp&nbsp&nbspset test12a&#59<br/>&nbsp&nbsp&nbsp&nbspwhere dos between entrydate and entrydate + 365-1&#59<br/>run&#59<br/>/*further remove records that are not eligible*/<br/>data test12c&#59<br/>&nbsp&nbsp&nbsp&nbspset test12b&#59<br/>&nbsp&nbsp&nbsp&nbspwhere<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnum_srv ne 0<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLOS NOT in ('B','2','K','9')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspMODE ne 'Z'<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocSlushCode = 'N'<br/>&#59<br/>run&#59<br/>/*from above, get distinct records by patient doc spec and date*/<br/>%distinct(data=test12c, target=test12d, vars=%str(key_hsn, key_doc_num, spec, dos), orderby=key_doc_num)&#59<br/><br/><br/>/*How is the distribution of 2 year UPC index*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&newLocalT.\\VXF_FS.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXF_FS.sas7bdat)<br/>)&#59<br/>%print(data=VXF_FS)&#59<br/>proc means data=VXF_FS mean median q1 q3&#59<br/>&nbsp&nbsp&nbsp&nbspvar UPCIndexW&#59<br/>run&#59<br/>proc means data=VXF_FS mean median q1 q3&#59<br/>&nbsp&nbsp&nbsp&nbspwhere T_visitsW>1&#59<br/>&nbsp&nbsp&nbsp&nbspvar UPCIndexW&#59<br/>run&#59<br/>/*better. The UPCIndex level lowered*/<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>s///<br/>t///","children":[{"idx":"fe75c7fb-bafc-48b9-8c25-d0d2a3fa0d73","name":"Additional Analysis of UPCindex","NodeDescription":"///t<br/>///s<br/>/*settings*/<br/>%include \"S:\\Collaborative_researchers\\Shenzhen\\My Project\\Projects\\DoNotDelete Common Macros\\MyMacros.sas\" /LRECL=32767&#59<br/><br/>%let oldLocalT = Z:\\My Project\\Projects\\PhD Thesis\\StatinCohort\\Output\\Result data&#59<br/>libname oLocalT \"&oldLocalT\"&#59<br/>/*the path with old UPCIndex data <br/>&nbsp&nbsp&nbsp&nbspi.e. VXD_F.zip in Z:\\My Project\\Projects\\PhD Thesis\\StatinCohort\\Output\\Result data<br/>*/<br/><br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&oldLocalT.\\VXD_F.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXD_F.sas7bdat)<br/>)&#59<br/>data UPCI_Old&#59<br/>&nbsp&nbsp&nbsp&nbspset VXD_F&#59<br/>run&#59<br/><br/>%let newLocalT = P:\\Physician_Impact_Pro(SYao)_Bio14-143\\Output\\Result data&#59<br/>libname nLocalT \"&newLocalT\"&#59<br/>libname LocalT \"&newLocalT\"&#59<br/>/*the path with new UPCIndex data <br/>&nbsp&nbsp&nbsp&nbspi.e. VXC_F.zip in Z:\\My Project\\Projects\\PhD Thesis\\StatinCohort\\Output\\Result data<br/>*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&newLocalT.\\VXC_F.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXC_F.sas7bdat)<br/>)&#59<br/>data UPCI_New&#59<br/>&nbsp&nbsp&nbsp&nbspset VXC_F&#59<br/>run&#59<br/><br/>%print(data=UPCI_old)&#59<br/>%print(data=UPCI_new)&#59<br/><br/>/*patients appeared in both old and new cohort*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=UPCI_old,<br/>&nbsp&nbsp&nbsp&nbspt2=UPCI_new,<br/>&nbsp&nbsp&nbsp&nbsptarget=test1,<br/>&nbsp&nbsp&nbsp&nbspvars=t1.key_hsn,<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>/*more questions!!!!! why there were patients in new cohort, but NOT in old cohort? */<br/><br/>/*For patients in test1, from the old data, get the entry date,  UPC index, Total encounters, and the UCPs*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=UPCI_old,<br/>&nbsp&nbsp&nbsp&nbspt2=test1,<br/>&nbsp&nbsp&nbsp&nbsptarget=test2a,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.entryDate, t1.T_visitsF, t1.UPCPF1),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn,<br/>&nbsp&nbsp&nbsp&nbsporderby =key_hsn<br/>)&#59<br/>data test3a&#59<br/>&nbsp&nbsp&nbsp&nbspset test2a&#59<br/>&nbsp&nbsp&nbsp&nbsplength docID $11.&#59<br/>&nbsp&nbsp&nbsp&nbspdocID = scan(UPCPF1, 1, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspN_VisitsF = input(scan(UPCPF1, 2, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspIndex1= input(scan(UPCPF1, 4, \":\"), 8.2)&#59<br/>&nbsp&nbsp&nbsp&nbspUPCIndex=round((N_VisitsF/T_VisitsF) * 100, '.01')&#59<br/>&nbsp&nbsp&nbsp&nbspif Index1=UPCIndex&#59<br/>run&#59<br/><br/>/*For patients in test1, from the new data, get the entry date,  UPC index, Total encounters, and the UCPs*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=UPCI_new,<br/>&nbsp&nbsp&nbsp&nbspt2=test1,<br/>&nbsp&nbsp&nbsp&nbsptarget=test2b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.entryDate,t1.NMax_VisitsPerDocF, t1.UpcIndexF, t1.T_visitsF, t1.ucpf1),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn,<br/>&nbsp&nbsp&nbsp&nbsporderby =key_hsn<br/>)&#59<br/>data test3b&#59<br/>&nbsp&nbsp&nbsp&nbspset test2b&#59<br/>&nbsp&nbsp&nbsp&nbsplength docID $11.&#59<br/>&nbsp&nbsp&nbsp&nbspdocID = scan(ucpf1, 1, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspN_VisitsF = NMax_VisitsPerDocF&#59<br/>&nbsp&nbsp&nbsp&nbspIndex1=round(UPCIndexF, '.01')&#59<br/>&nbsp&nbsp&nbsp&nbspUPCIndex=round((N_VisitsF/T_VisitsF) * 100, '.01')&#59<br/>&nbsp&nbsp&nbsp&nbspif index1 = UPCIndex&#59<br/>run&#59<br/><br/>/*from the above test3a and b, make a head to head comparison set for each var*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=test3a,<br/>&nbsp&nbsp&nbsp&nbspt2=test3b,<br/>&nbsp&nbsp&nbsp&nbsptarget=test4,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.key_hsn,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.entryDate as entryDate_old,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.entryDate as entryDate_new,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.DocID as DocID_old,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.DocID as DocID_new,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.N_VisitsF as N_VisitsF_old,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.N_VisitsF as N_VisitsF_new,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.T_VisitsF as T_VisitsF_old,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.T_VisitsF as T_VisitsF_new,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.UPCIndex as UPCIndex_old,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.UPCIndex as UPCIndex_new<br/>&nbsp&nbsp&nbsp&nbsp),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/><br/>/*check those not having the same N_VisitsF*/<br/>data test5&#59<br/>&nbsp&nbsp&nbsp&nbspset test4&#59<br/>&nbsp&nbsp&nbsp&nbspif entryDate_old ne entryDate_new&#59<br/>run&#59<br/>/*none*/<br/><br/>/*the T_VisitsF sounds different<br/>&nbsp&nbsp&nbsp&nbsp1) ? Was it because SPEC visits were included in the old data<br/>&nbsp&nbsp&nbsp&nbsp2) ? Was it because sometimes a the UCP (as GP) was acting as SP, and the visits as SP is also accounted<br/>*/<br/>/*get the first patient in test4*/<br/>Data test6&#59<br/>&nbsp&nbsp&nbsp&nbspset test4 (obs=1)&#59<br/>run&#59<br/>/*get the patients msb claims within follow up*/<br/>%let newDataPath = P:\\Physician_Impact_Pro(SYao)_Bio14-143\\Data&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&newDataPath.\\master_msb.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_msb.sas7bdat)<br/>)&#59<br/>/*%minmax(data=master_msb, var=dos, format=date9., target=xxx, m=min)&#59*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_msb,<br/>&nbsp&nbsp&nbsp&nbspt2=test6,<br/>&nbsp&nbsp&nbsp&nbsptarget=test7a,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.entrydate_new),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>data test7b&#59<br/>&nbsp&nbsp&nbsp&nbspset test7a&#59<br/>&nbsp&nbsp&nbsp&nbspwhere dos between entrydate_new and entrydate_new + 365-1&#59<br/>run&#59<br/>/*further remove records that are not eligible*/<br/>data test7c&#59<br/>&nbsp&nbsp&nbsp&nbspset test7b&#59<br/>&nbsp&nbsp&nbsp&nbspwhere<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnum_srv ne 0<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLOS NOT in ('B','2','K','9')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspMODE ne 'Z'<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocSlushCode = 'N'<br/>&#59<br/>run&#59<br/>/*from above, get distinct records by patient doc spec and date*/<br/>%distinct(data=test7c, target=test7d, vars=%str(key_hsn, key_doc_num, spec, dos), orderby=key_doc_num)&#59<br/>/*Yep, in the old data, T_visits included encounters to SPs*/<br/><br/>/*So, for UPC index calculation, what constructs the proper denominator? with or without encounters to SPs?<br/>&nbsp&nbsp&nbsp&nbspcheck the comment in the proposal file in dropbox: <br/>&nbsp&nbsp&nbsp&nbspcontinuity ofphysician care patterns 20191205.docx. Page 21 comments<br/>&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspThe denomintor should be to all family physicians (supported by Provost, and CiHI's paper). However, both of the paper<br/>&nbsp&nbsp&nbsp&nbsplimited to those having at least twice visits to GPs. <br/>&nbsp&nbsp&nbsp&nbspIn Provost's cohort, within 2 years, the % with UPC index . 75% is 37.5%<br/>&nbsp&nbsp&nbsp&nbspIn CIHI report, the 'average' (mean? median?) of UPC index in SK (2007-2012) is 0.56 <br/>&nbsp&nbsp&nbsp&nbsp(of what period?, )<br/>&nbsp&nbsp&nbsp&nbspwhat is the quintile distribution look like?<br/>&nbsp&nbsp&nbsp&nbspFor all the provinces (not SK specific), \"approximately one-quater of patients were in the low (<0.4) and high(0.8) category\"<br/>&nbsp&nbsp&nbsp&nbsp(page 7). <br/>*/<br/><br/>proc means data=VXC_F mean median q1 q3&#59<br/>&nbsp&nbsp&nbsp&nbspvar UPCIndexF&#59<br/>run&#59<br/><br/>/*how many patients with only 1 T_visitsF*/<br/>data test8&#59<br/>&nbsp&nbsp&nbsp&nbspset VXC_F&#59<br/>&nbsp&nbsp&nbsp&nbspTVF_Cat='>1'&#59<br/>&nbsp&nbsp&nbsp&nbspif T_visitsF =1 then TVF_Cat='1'&#59<br/>run&#59<br/>%freq(data=test8, table = TVF_Cat)&#59<br/>/*excluding those with only 1 T_visitsF?*/<br/>proc means data=VXC_F mean median q1 q3&#59<br/>&nbsp&nbsp&nbsp&nbspwhere T_visitsF>1&#59<br/>&nbsp&nbsp&nbsp&nbspvar UPCIndexF&#59<br/>run&#59<br/>proc univariate data=VXC_F &#59<br/>&nbsp&nbsp&nbsp&nbspwhere T_visitsF>1&#59<br/>&nbsp&nbsp&nbsp&nbsphistogram UPCIndexF / normal&#59<br/>run&#59<br/>/*Similar !*/<br/><br/>/*whose index is 100%*/<br/>data test9&#59&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspset VXC_F&#59<br/>&nbsp&nbsp&nbsp&nbspif UPCIndexF=100&#59<br/>run&#59<br/>/*among those UPCIndex=100, how many only had 1 visits*/<br/>data test9&#59<br/>&nbsp&nbsp&nbsp&nbspset VXC_F&#59<br/>&nbsp&nbsp&nbsp&nbspTVF_Cat='>1'&#59<br/>&nbsp&nbsp&nbsp&nbspif T_visitsF =1 then TVF_Cat='1'&#59<br/>run&#59<br/>%freq(data=test9, table = TVF_Cat)&#59 <br/>/*Not a lot at all*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_msb,<br/>&nbsp&nbsp&nbsp&nbspt2=test9,<br/>&nbsp&nbsp&nbsp&nbsptarget=test12a,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.entrydate),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn,<br/>&nbsp&nbsp&nbsp&nbsporderby=%str(key_hsn, entryDate)<br/>)&#59<br/>data test12b&#59<br/>&nbsp&nbsp&nbsp&nbspset test12a&#59<br/>&nbsp&nbsp&nbsp&nbspwhere dos between entrydate and entrydate + 365-1&#59<br/>run&#59<br/>/*further remove records that are not eligible*/<br/>data test12c&#59<br/>&nbsp&nbsp&nbsp&nbspset test12b&#59<br/>&nbsp&nbsp&nbsp&nbspwhere<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnum_srv ne 0<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLOS NOT in ('B','2','K','9')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspMODE ne 'Z'<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocSlushCode = 'N'<br/>&#59<br/>run&#59<br/>/*from above, get distinct records by patient doc spec and date*/<br/>%distinct(data=test12c, target=test12d, vars=%str(key_hsn, key_doc_num, spec, dos), orderby=key_doc_num)&#59<br/><br/><br/><br/><br/>/*How is the distribution of 2 year UPC index*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&newLocalT.\\VXF_FS.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXF_FS.sas7bdat)<br/>)&#59<br/>%print(data=VXF_FS)&#59<br/>proc means data=VXF_FS mean median q1 q3&#59<br/>&nbsp&nbsp&nbsp&nbspvar UPCIndexW&#59<br/>run&#59<br/>proc means data=VXF_FS mean median q1 q3&#59<br/>&nbsp&nbsp&nbsp&nbspwhere T_visitsW>1&#59<br/>&nbsp&nbsp&nbsp&nbspvar UPCIndexW&#59<br/>run&#59<br/><br/><br/><br/><br/><br/><br/><br/>s///<br/>t///","custparents":[{"idx":"CodeTask-NDmRsLr4oAZXwf3g"}]}],"custparents":[{"idx":"CodeTask-jZobJlVFsLEwSeaJ"}]}],"custparents":[{"idx":"CodeTask-gbhiLx1DedOwRO4o"}]},{"idx":"855f9514-fab5-4f86-aa40-7a72d9896eab","name":"Exclude Preg","NodeDescription":"<p>///t</p><p>///s</p><p><br></p><p>/*[to do] Need to exclude those preg during runin or follow up!!! (see VXI)*/</p><p>s///</p><p>t///</p>","custparents":[{"idx":"CodeTask-gbhiLx1DedOwRO4o"}]},{"idx":"7e838781-4b05-4b87-ac03-8acd7ea13d18","name":"VXB_V validate GP whose SPEC starts B","NodeDescription":"///t<br/>///s<br/>/*VXB_V:<br/>&nbsp&nbsp&nbsp&nbspValidate that SPEC starting with 'B' represents family physicians (FP)<br/>*/<br/><br/>data _null_&#59run&#59<br/><br/>/*The idea is to check who ever wrote a reference to a specialist.<br/>&nbsp&nbsp&nbsp&nbspTheoretically, only GPs would write references to a specialist. So the claims indicated as writing a referal should be from a GP.<br/>&nbsp&nbsp&nbsp&nbspIn the service billing claims, such referals billed by a GP is with an FSC code of 'B055'. <br/>*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_msb.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_msb.sas7bdat)<br/>)&#59<br/>/*From msb claims, get claims indicated as a referal from a GP (FSC= 'B055'), and list out the SPECs of the physicians who wrote these referals */<br/>proc freq data=master_msb&#59<br/>&nbsp&nbsp&nbsp&nbspwhere FSC=\"B055\"&#59<br/>&nbsp&nbsp&nbsp&nbsptable  spec * fsc /nocol norow nopct&#59<br/>run&#59<br/>/*Bingo! <br/>&nbsp&nbsp&nbsp&nbspIn the above, all claims with 'B055' are from a SPEC starting with 'B'. <br/>&nbsp&nbsp&nbsp&nbspIt proves that spec starting with a 'B' are GPs. <br/>*/<br/><br/><br/><br/><br/>/*other attempts&nbsp&nbsp&nbsp&nbsp<br/><br/>&nbsp&nbsp&nbsp&nbspThe idea is that both FP and SP will have the save service codes, but<br/>&nbsp&nbsp&nbsp&nbsp1). The charge of a subsequent service by SP is higher<br/><br/>&nbsp&nbsp&nbsp&nbspLet's just use the MSB services of the statin cohort as an example<br/>*/<br/><br/>/*1. Get service claims of the patients in the statin cohort*/<br/>/*%print(data=master_msb)&#59*/<br/>/*2. does the amount of charge (amt_app) the same for<br/>&nbsp&nbsp&nbsp&nbspdifferent<br/>&nbsp&nbsp&nbsp&nbspspec, fsc?<br/>*/<br/>%distinct(data=master_msb, target=ZXA1, <br/>vars=%str(fsc, amt_app, diag, ifc(substr(strip(spec),1,1) = 'B', 'GP', SPEC) as SP length=2), <br/>orderby=%str(fsc, amt_app, diag, SP))&#59<br/>/*the result shows that even for same GP same FSC, the charge is different<br/>*/<br/>data ZXA2a1&#59<br/>&nbsp&nbsp&nbsp&nbspset master_msb&#59<br/>&nbsp&nbsp&nbsp&nbspCalendarYr= year(dos)&#59<br/>&nbsp&nbsp&nbsp&nbspif month(dos) < 4 then FiscalYr=year(dos)-1&#59<br/>&nbsp&nbsp&nbsp&nbspelse FiscalYr=year(dos)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat SPEC2 $2.&#59<br/>&nbsp&nbsp&nbsp&nbspif spec in: (\"B\") then SPEC2=\"GP\"&#59<br/>&nbsp&nbsp&nbsp&nbspelse SPEC2=\"SP\"&#59<br/>run&#59<br/>%beep&#59<br/>data ZXA2a2&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXA2a1&#59<br/>&nbsp&nbsp&nbsp&nbspif FSC=\"A073\"&#59<br/>run&#59<br/>/*is it true that by fiscal year the charge is the same for the same SPEC and the same FSC*/<br/>%distinct(data=ZXA2a2, target=ZXA2b1, <br/>vars=%str(fsc, amt_app, ifc(substr(strip(spec),1,1) = 'B', 'GP', SPEC) as SP length=2, FiscalYr), <br/>orderby=%str(fsc, amt_app, FiscalYr, SP))&#59<br/>/*Nope. e.g., in CY 2015, for GP, the charge for A037 could be 56.8 or 57.9*/<br/>%distinct(data=ZXA2a2, target=ZXA2b2, <br/>vars=%str(fsc, amt_app, ifc(substr(strip(spec),1,1) = 'B', 'GP', SPEC) as SP length=2, CalendarYr), <br/>orderby=%str(fsc, amt_app, CalendarYr, SP))&#59<br/>/*Nope. e.g., again in FY 2015, for GP, the charge for A037 could be 56.8 or 57.9*/<br/>/*get the claims by GP in FY or CY 2015*/<br/>data ZXA2b3&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXA2a2&#59<br/>&nbsp&nbsp&nbsp&nbspif CalendarYr=2015 or FiscalYr=2015&#59<br/>run&#59<br/>/*it seems that the charge increased in FY 2015, but sometimes services in Apr (although in FY2015) were yet charged by the rate<br/>&nbsp&nbsp&nbsp&nbspof the previous year<br/>&nbsp&nbsp&nbsp&nbspHmm.... If that is true, then the services in the second half year should be of the same charge for GPs<br/>*/<br/>data ZXA2b4&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXA2a1&#59<br/>&nbsp&nbsp&nbsp&nbspif spec in: (\"B\") and month(dos) > 5&#59<br/>run&#59<br/>%distinct(data=ZXA2b4, target=ZXA2b5, <br/>vars=%str(fsc, amt_app, ifc(substr(strip(spec),1,1) = 'B', 'GP', SPEC) as SP length=2, FiscalYr), <br/>orderby=%str(fsc, amt_app, FiscalYr, SP))&#59<br/>/*still have claims of different charges<br/>e.g.<br/>A056&nbsp&nbsp&nbsp&nbsp13.2 or 13.5 by&nbsp&nbsp&nbsp&nbspGP&nbsp&nbsp&nbsp&nbspin FY 2015<br/>but maybe it is good enough, as the deviation in the same year is not that big<br/>*/<br/>/*another way, <br/>what is the mean sd of charges by GP/SP by fsc fiscal years<br/>*/<br/>%GetMeanStats(<br/>&nbsp&nbsp&nbsp&nbspdata=ZXA2a1, <br/>&nbsp&nbsp&nbsp&nbspwhere=,<br/>&nbsp&nbsp&nbsp&nbsptheVar=amt_app,<br/>&nbsp&nbsp&nbsp&nbspgroupVars= fiscalyr fsc spec2,  <br/>&nbsp&nbsp&nbsp&nbsptheStats=mean sd, <br/>&nbsp&nbsp&nbsp&nbsptarget=ZXA3a, <br/>&nbsp&nbsp&nbsp&nbspdebug=1,<br/>&nbsp&nbsp&nbsp&nbsppersonID=<br/>)&#59<br/>/*Just to hypothesis, could it be that <br/>&nbsp&nbsp&nbsp&nbspthe means of charge are sig dif between GP and SP<br/>&nbsp&nbsp&nbsp&nbsp(by fiscal year, by fsc)<br/>*/<br/>/*<br/>does it make sense to let charge predict SPEC?<br/>is that a conditional log model (paired by fsc)<br/>*/<br/>proc genmod data=ZXA2a1&#59<br/>&nbsp&nbsp&nbsp&nbspwhere fsc='A110'&#59<br/>&nbsp&nbsp&nbsp&nbspclass key_doc_num key_hsn <br/>&nbsp&nbsp&nbsp&nbsp fiscalyr (ref='2006') /param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspmodel SPEC2 (ref='GP') = amt_app fiscalyr&#59<br/>&nbsp&nbsp&nbsp&nbsprepeated subject=key_doc_num ( key_hsn) /covb&#59<br/>run&#59<br/><br/><br/><br/><br/><br/><br/><br/>s///<br/>t///","custparents":[{"idx":"CodeTask-gbhiLx1DedOwRO4o"},{"idx":"f44f4584-792a-457b-809a-53c17af66389"}]},{"idx":"259eecc0-101b-4eea-aeed-69212ee6bd70","name":"VXB_R Table 1 Patient Flow","NodeDescription":"///t<br/>///s<br/>/*VXB_R: Table 1.  patient flow*/<br/>/*The report in &localReportPath\\Analytical Report.xlsx contains the primary patient flow*/<br/>data _null_&#59run&#59<br/><br/><br/>/*VXB_R1, get existing patient flow from the report generated when preparing data*/<br/>Proc import datafile=\"&localReportPath.\\Analytical Report.xlsx\"<br/>&nbsp&nbsp&nbsp&nbspdbms=excel<br/>&nbsp&nbsp&nbsp&nbspout=VXB_r1a<br/>&nbsp&nbsp&nbsp&nbspreplace&#59<br/>&nbsp&nbsp&nbsp&nbspgetnames=no&#59<br/>&nbsp&nbsp&nbsp&nbspsheet= \"Patient flow\"&#59<br/>run&#59<br/>data VXB_R1b&#59<br/>&nbsp&nbsp&nbsp&nbspset VXB_R1a&#59<br/>&nbsp&nbsp&nbsp&nbspkeep F1 f3 obs&#59<br/>&nbsp&nbsp&nbsp&nbspif f1 ne ''&#59<br/>run&#59<br/>data VXB_R1&#59<br/>&nbsp&nbsp&nbsp&nbsplength F1 $500.&#59<br/>&nbsp&nbsp&nbsp&nbspset VXB_R1b&#59<br/>&nbsp&nbsp&nbsp&nbspif _n_ = 2 then F1 = \"Received statin medications between Jan 1,2012 and Dec 31, 2017\" &#59<br/>&nbsp&nbsp&nbsp&nbspif _n_ = 3 then F1 = \"Excluding those missing age/sex information \" &#59<br/>&nbsp&nbsp&nbsp&nbspif _n_ = 5 then F1 = \"Excluding those <18 on cohort entry \" &#59<br/>&nbsp&nbsp&nbsp&nbspif _n_ = 7 then F1 = \"Excluding those not continuously registered for healthcare service within the washout period of 1825 days, or a follow-up period of 365 days \" &#59<br/>&nbsp&nbsp&nbsp&nbspif _n_ = 9 then F1 = \"Excluding those receiving statin medications within the washout period\"&#59 <br/>&nbsp&nbsp&nbsp&nbspif _n_ in (1,2,3,5,7,9)&#59<br/>&nbsp&nbsp&nbsp&nbsprename F1=Steps F3 = Remaining&#59<br/>run&#59<br/><br/>/*VXB_R2. Adding the flow info after excluding those stayed in LTC during washout or follow-up*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXA2,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXB_R2,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp\"Excluding those admitted to long term care facilities within washout,or follow-up period \" as Steps length=500,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcount (key_hsn) as Remaining<br/>&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/><br/>/*VXB_R3 Adding the flow info after excluding those stayed in an out province facility*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXA,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXB_R3,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp\"Excluding those unable to obtain sufficient data for analysis (e.g. stayed in an out-out-province facility for acute care during follow-up \" as Steps length=500,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcount (key_hsn) as Remaining<br/>&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/><br/>/*VXB_R4. Adding the flow info after excluding those not have encounters with a GP during followup */<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXB_finalCohort,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXB_R4,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp\"Excluding those not having encounters with a GP during follow up \" as Steps length=500,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcount (key_hsn) as Remaining<br/>&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/><br/>/*VXB_R5. Putting all steps together */<br/>data VXB_R5&#59<br/>&nbsp&nbsp&nbsp&nbspobs=_n_&#59<br/>&nbsp&nbsp&nbsp&nbspset VXB_R1-VXB_R4&#59<br/>run&#59<br/><br/><br/>data localt.VXB_R&#59<br/>&nbsp&nbsp&nbsp&nbspset VXB_R5&#59<br/>&nbsp&nbsp&nbsp&nbspif obs >0 then &nbsp&nbsp&nbsp&nbspExcluded = lag(Remaining)-Remaining&#59<br/>&nbsp&nbsp&nbsp&nbspProject = &_clientprojectname&#59<br/>&nbsp&nbsp&nbsp&nbspProgram = &_clienttasklabel&#59<br/>&nbsp&nbsp&nbsp&nbspCreateDate = date()&#59<br/>&nbsp&nbsp&nbsp&nbspformat CreateDate date9.&#59<br/>&nbsp&nbsp&nbsp&nbsprename Remaining = NPatients_remaining&#59<br/>run&#59<br/><br/><br/>proc export data=localt.VXB_R<br/>&nbsp&nbsp&nbsp&nbspdbms=xlsx<br/>&nbsp&nbsp&nbsp&nbspoutfile=\"&localReportPath.\\reports.xlsx\"<br/>&nbsp&nbsp&nbsp&nbspreplace&#59<br/>&nbsp&nbsp&nbsp&nbspsheet= \"T1.Patient Flow\"&#59&nbsp&nbsp&nbsp&nbsp<br/>&#59<br/>run&#59<br/>&nbsp&nbsp&nbsp&nbsp<br/><br/><br/>s///<br/>t///","custparents":[{"idx":"CodeTask-gbhiLx1DedOwRO4o"},{"idx":"CodeTask-rXaW7KfQgzQfcx1V"},{"idx":"f44f4584-792a-457b-809a-53c17af66389"}]}],"custparents":[{"idx":"CodeTask-rXaW7KfQgzQfcx1V"}]},{"idx":"470ba7bc-fc54-4855-8da4-ac4910590c15","name":"VXE_StatinClaims","NodeDescription":"///t<br/>///s<br/>/*VXE_F. the statin Rx of the final cohort members within followup*/<br/>data _null_&#59run&#59<br/><br/>/*VXE_F0. Prepare source data&#59*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localdataPath.\\master_dp_benefit.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_dp_benefit.sas7bdat)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXD_W.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXD_W.sas7bdat)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localdataPath.\\master_dp_nonbenefit.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_dp_nonbenefit.sas7bdat)<br/>)&#59<br/><br/><br/>/*VXE_F1 statin claims of the patients within followup.*/<br/>/*VXE_F1a. benefit statin claims */<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_benefit, <br/>&nbsp&nbsp&nbsp&nbspt2=locald.statindins,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXE_F1a,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*), <br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=din<br/>)&#59<br/>/*VXE_F1b. benefit statin claims within followup*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXE_F1a, <br/>&nbsp&nbsp&nbsp&nbspt2=VXD_W,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXE_F1b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.EntryDate), <br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjterm=%str(t1.Key_hsn = t2.key_hsn and t1.rx_ddddd between t2.EntryDate and t2.EntryDate +&followdays-1)<br/>)&#59<br/>/*VXE_F1c. nonbenefit statin claims */<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_nonbenefit, <br/>&nbsp&nbsp&nbsp&nbspt2=locald.statindins,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXE_F1c,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*), <br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=din<br/>)&#59<br/>/*VXE_F1d. nonbenefit statin claims within followup*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXE_F1c, <br/>&nbsp&nbsp&nbsp&nbspt2=VXD_W,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXE_F1d,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.EntryDate), <br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjterm=%str(t1.Key_hsn = t2.key_hsn and t1.rx_ddddd between t2.EntryDate and t2.EntryDate +&followdays-1)<br/>)&#59<br/>/*VXE_F1e. combined to have claims from both sources, indicate those anonymous or slushcode doctors as unknown<br/>&nbsp&nbsp&nbsp&nbspthese docs are kept here as we'll still need the corresponding claims to identify the first prescriber<br/>*/<br/>data VXE_F&#59<br/>&nbsp&nbsp&nbsp&nbspset VXE_F1b VXE_F1d&#59<br/>&nbsp&nbsp&nbsp&nbspif docslushcode ='Y' or key_prscr_num = '' or key_prscr_num = 'UNKNOWN0000' then <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkey_prscr_num='unknown'&nbsp&nbsp&nbsp&nbsp&#59<br/>run&#59<br/>%sort(data=VXE_F, sorter=%str(key_hsn rx_ddddd key_prscr_num))&#59<br/>/*VXE_F contains statin claims within 365 days since the EntryDate<br/>&nbsp&nbsp&nbsp&nbspit includes those prescribed by slushcode docs or docs unknown (blank)<br/>&nbsp&nbsp&nbsp&nbspFor adherence calculation, these claims should be included<br/>*/<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=%str(&localTargetPath), <br/>&nbsp&nbsp&nbsp&nbspzipFile=VXE_F.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VXE_F.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/><br/>%exportvars(data=VXE_F)&#59<br/><br/><br/><br/><br/><br/><br/><br/>s///<br/>t///","children":[{"idx":"4e26d943-bcea-40f8-9805-dd1148a08779","name":"VXF_FS USPF in Followup","NodeDescription":"///t<br/>///s<br/>/*VXF_FS: USPF, usual statin prescriber*/<br/><br/>data _null_&#59run&#59<br/><br/>/*VXF_FS0. prepare source data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXD_W.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXD_W.sas7bdat)<br/>)&#59<br/>/*get statin claims*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXE_F.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXE_F.sas7bdat)<br/>)&#59<br/><br/><br/><br/><br/><br/>/*calculate the Rx Freq from statin drug claims in follow up*/<br/>/*the macro getUPCIndex works for MSB claim data, and other data<br/>&nbsp&nbsp&nbsp&nbspfor MSB claim data, the LOS, MODE, SPEC, and NUM_SRV must be provided<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthe excluding LOC, excluding MODE, and including SPEC must be provided<br/>&nbsp&nbsp&nbsp&nbspfor other data (like in this case, the episodes have been prepared, or like prescription data)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspspecify the claimType as others, and do not need to specify LOS,MODE exclusion, and SPEC<br/><br/>&nbsp&nbsp&nbsp&nbspunlike UPC in MSB, here it is fine even if the combination of same patient-doc-rx_ddddd repeat<br/><br/>&nbsp&nbsp&nbsp&nbspBy default, the target file contains the doc with the max rx Freq<br/>&nbsp&nbsp&nbsp&nbspbut this is not what is wanted here. <br/>&nbsp&nbsp&nbsp&nbspFor this analysis, it is expected to keep all docs, from which those as PCP, and with Max rx Freq will be kept<br/>&nbsp&nbsp&nbsp&nbspso the interested data set is not the target, but the tmp5 file created by the macro&nbsp&nbsp&nbsp&nbsp<br/><br/>*/<br/>/*VXF_FS1. Use the macro UPC to identify the most freq prescriber of Statin during follow up, <br/>&nbsp&nbsp&nbsp&nbspunlike UPC in MSB, here it is fine even if the combination of same patient-doc-rx_ddddd repeat<br/>&nbsp&nbsp&nbsp&nbspNote: those with a unknown doc number are excluded<br/>*/<br/><br/>%getUPCIndex(<br/>&nbsp&nbsp&nbsp&nbspdata=VXE_F, <br/>&nbsp&nbsp&nbsp&nbsptarget=notintersted,<br/>&nbsp&nbsp&nbsp&nbspInPatientLOS = , <br/>&nbsp&nbsp&nbsp&nbspoutProvMode = ,<br/>&nbsp&nbsp&nbsp&nbspInterestedSPEC =,<br/>&nbsp&nbsp&nbsp&nbspdocIDCol = key_prscr_num,<br/>&nbsp&nbsp&nbsp&nbspdoscol=rx_ddddd,<br/>&nbsp&nbsp&nbsp&nbspclaimType=dp,<br/>&nbsp&nbsp&nbsp&nbspdebug=1<br/>)&#59<br/>data VXF_FS1&#59<br/>&nbsp&nbsp&nbsp&nbspset getUPC_tmp5&#59<br/>&nbsp&nbsp&nbsp&nbsprename <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkey_prscr_num = key_doc_num<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN_visits=NRx_MaxPerDocSF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspT_Visits=TRxSF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCIndex = RxIndexSF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbspwhere key_prscr_num ne 'unknown'&#59 <br/>run&#59<br/>%sort(data=VXF_FS1, sorter=key_hsn descending RxIndexSF)&#59<br/><br/>/*VXF_FS2. For each patient, keep  the highest Rx index*/<br/>data VXF_FS2&#59<br/>&nbsp&nbsp&nbsp&nbspset VXF_FS1&#59<br/>&nbsp&nbsp&nbsp&nbspby key_hsn descending RxIndexSF&#59<br/>&nbsp&nbsp&nbsp&nbspif first.key_hsn&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn RxIndexSF&#59<br/>run&#59<br/><br/>/*VXF_FS3. Link the highest Rx index back to VXF_FS1 to keep patient-doc links with the highest UPC index<br/>(there could be multiple physicians with tie index values for a single patient)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXF_FS1,<br/>&nbsp&nbsp&nbsp&nbspt2=VXF_FS2,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXF_FS3,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars= key_hsn RxIndexSF,<br/>&nbsp&nbsp&nbsp&nbsporderby=%str(key_hsn, key_doc_num) <br/>)&#59<br/><br/>/*VXF_FS4. determine the UP. In case of tie, get UP1, UP2, ....<br/>&nbsp&nbsp&nbsp&nbsp in case of tie, there will be multiple UPs<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocNumer, NRx_MaxPerDoc, RxIndex, these are all specific by each USP <br/>&nbsp&nbsp&nbsp&nbspand we'll need these values for each USP<br/>&nbsp&nbsp&nbsp&nbspFollowing is a smart idea:<br/>&nbsp&nbsp&nbsp&nbsp1) putting values of these doc-specifc variables into a string (theStr), with the dlmt \"&#59\"<br/>&nbsp&nbsp&nbsp&nbsp2) make a tag of USP1, 2, etc<br/>*/<br/>data VXF_FS4&#59<br/>&nbsp&nbsp&nbsp&nbspset VXF_FS3&#59<br/>&nbsp&nbsp&nbsp&nbspformat RxIndexSF 6.2&#59<br/>&nbsp&nbsp&nbsp&nbspby key_hsn &#59<br/>&nbsp&nbsp&nbsp&nbspif first.key_hsn then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi =1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUSPF='USPF' || strip(i)&#59&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi+1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUSPF='USPF' || strip(i)&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdrop i&#59<br/>&nbsp&nbsp&nbsp&nbsp/*combine the var values together*/<br/>&nbsp&nbsp&nbsp&nbsplength theStr $50.&#59 <br/>&nbsp&nbsp&nbsp&nbsptheStr = catx(':', key_doc_num, NRx_MaxPerDocSF, put(RxIndexSF, 6.2))&#59<br/>run&#59<br/><br/>/*VXF_FS5. Now we can transpose the string in theStr into columsn of USP1, 2, ...<br/>&nbsp&nbsp&nbsp&nbspThe values will stay there. Later we can use scan(var, # of word, dlmt) to get the values<br/>&nbsp&nbsp&nbsp&nbsp(i.e., scan(USP1, 1, \":\") is the key_doc_num of USP1, scan(USP1, 2, \"&#59\") is the n_visits of USP1, etc<br/>*/<br/>%transpose(data = VXF_FS4, target=VXF_FS5, <br/>&nbsp&nbsp&nbsp&nbsprowhead =key_hsn NRx_MaxPerDocSF    TRxSF     RxIndexSF  ,<br/>&nbsp&nbsp&nbsp&nbspcolhead=USPF,<br/>&nbsp&nbsp&nbsp&nbspcontents= theStr<br/>)&#59<br/>/*example to get upcindex of USPF1*/<br/>/*<br/>data test&#59<br/>&nbsp&nbsp&nbsp&nbspset VXF_FS5 (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbspRxIndex_USPF1= scan(USPF1, 3, ':')&#59<br/>run&#59<br/>*/<br/><br/>/*VXF_FS6. The docs in VXF_FS5 are USPs, link them back to VXD_W (the cohort)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXD_W,<br/>&nbsp&nbsp&nbsp&nbspt2=VXF_FS5,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXF_FS,<br/>&nbsp&nbsp&nbsp&nbspvars=*,<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localTargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VXF_FS.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VXF_FS.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/>/*data test&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspset VXF_FS&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspUSP=1&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspif USP = '' then USP=0&#59*/<br/>/*run&#59*/<br/>/*%freq(data=test, table= USP)&#59*/<br/><br/>%exportvars(data=VXF_FS)&#59<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>s///<br/>t///","children":[{"idx":"98f3a85b-f112-41d6-b28a-7a0f21078375","name":"VXE_WW AllMed","NodeDescription":"<p>///t</p><p>///s</p><p>/*VXE_WW. Rx of all medications of the final cohort members  from runin through followup.*/</p><p>data _null_;run;</p><p><br></p><p>/*VXE_WW0. Prepare source data;*/</p><p>%VbsUnzip(</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tgtDir=,</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;zipFile=%str(&amp;localdataPath.\\master_dp_benefit.zip),</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;srcFile=%str(master_dp_benefit.sas7bdat)</p><p>&nbsp;&nbsp;&nbsp;&nbsp;);</p><p>%VbsUnzip(</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tgtDir=,</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;zipFile=%str(&amp;localTargetPath.\\VXF_FS.zip),</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;srcFile=%str(VXF_FS.sas7bdat)</p><p>&nbsp;&nbsp;&nbsp;&nbsp;);</p><p>%VbsUnzip(</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tgtDir=,</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;zipFile=%str(&amp;localdataPath.\\master_dp_nonbenefit.zip),</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;srcFile=%str(master_dp_nonbenefit.sas7bdat)</p><p>);</p><p><br></p><p><br></p><p>/*VXE_WW1 all medication claims of the patients from runin through followup.*/</p><p>/*VXE_WW1b. benefit all medication claims from runin through followup*/</p><p>%sqljoinv2(</p><p>&nbsp;&nbsp;&nbsp;&nbsp;t1=master_dp_benefit, </p><p>&nbsp;&nbsp;&nbsp;&nbsp;t2=VXF_FS,</p><p>&nbsp;&nbsp;&nbsp;&nbsp;target=VXE_WW1b,</p><p>&nbsp;&nbsp;&nbsp;&nbsp;vars=%str(t1.key_hsn, t1.key_prscr_num, t1.Rx_ddddd, t1.DIN, t1.docslushcode, t2.EntryDate), </p><p>&nbsp;&nbsp;&nbsp;&nbsp;jtype=inner,</p><p>&nbsp;&nbsp;&nbsp;&nbsp;jterm=%str(t1.Key_hsn = t2.key_hsn and t1.rx_ddddd between t2.EntryDate - &amp;runindays and t2.EntryDate +&amp;followdays-1)</p><p>);</p><p>/*VXE_WW1d. nonbenefit all medication claims runin through followup*/</p><p>%sqljoinv2(</p><p>&nbsp;&nbsp;&nbsp;&nbsp;t1=master_dp_nonbenefit, </p><p>&nbsp;&nbsp;&nbsp;&nbsp;t2=VXF_FS,</p><p>&nbsp;&nbsp;&nbsp;&nbsp;target=VXE_WW1d,</p><p>&nbsp;&nbsp;&nbsp;&nbsp;vars=%str(t1.key_hsn, t1.key_prscr_num, t1.Rx_ddddd, t1.DIN, t1.docslushcode, t2.EntryDate), </p><p>&nbsp;&nbsp;&nbsp;&nbsp;jtype=inner,</p><p>&nbsp;&nbsp;&nbsp;&nbsp;jterm=%str(t1.Key_hsn = t2.key_hsn and t1.rx_ddddd between t2.EntryDate - &amp;runindays and t2.EntryDate +&amp;followdays-1)</p><p>);</p><p>/*VXE_WW1e. combined to have claims from both sources, indicate those anonymous or slushcode doctors as unknown</p><p>&nbsp;&nbsp;&nbsp;&nbsp;these docs are kept here as we'll still need the corresponding claims to identify the first prescriber</p><p>*/</p><p>data VXE_WW;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;set VXE_WW1b VXE_WW1d;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;if docslushcode ='Y' or key_prscr_num = '' or key_prscr_num = 'UNKNOWN0000' then </p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;key_prscr_num='unknown'&nbsp;&nbsp;&nbsp;&nbsp;;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;drop DocSlushCode</p><p>run;</p><p>%sort(data=VXE_WW, sorter=%str(key_hsn rx_ddddd key_prscr_num));</p><p>/*VXE_WW contains claims of all medications runin through followup</p><p>&nbsp;&nbsp;&nbsp;&nbsp;it includes those prescribed by slushcode docs or docs unknown (blank), such that the base (Total Rx) of RxIndex calculation will </p><p>&nbsp;&nbsp;&nbsp;&nbsp;be complete.</p><p>*/</p><p>%vbsZip(</p><p>&nbsp;&nbsp;&nbsp;&nbsp;tgtDir=%str(&amp;localTargetPath), </p><p>&nbsp;&nbsp;&nbsp;&nbsp;zipFile=VXE_WW.zip, </p><p>&nbsp;&nbsp;&nbsp;&nbsp;srcFile=VXE_WW.sas7bdat, </p><p>&nbsp;&nbsp;&nbsp;&nbsp;srcDir=</p><p>);</p><p><br></p><p>%exportvars(data=VXE_WW);</p><p><br></p><p>%beep;</p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p>s///</p><p>t///</p>","custparents":[{"idx":"CodeTask-j6dtk9XKc4xrGUMh"}]},{"idx":"e065be0e-5a79-458f-91f6-c8375d3b97b4","name":"VXF_FW UWPF in Followup","NodeDescription":"///t<br/>///s<br/>/*VXF_FW: UWPF, usual prescriber of all (whole) medications with follow up*/<br/><br/>data _null_&#59run&#59<br/><br/>/*VXF_FS0. prepare source data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXF_FS.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXF_FS.sas7bdat)<br/>)&#59<br/>/*get all medication claims*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localdataPath.\\VXE_WW.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXE_WW.sas7bdat)<br/>)&#59<br/><br/><br/>/*VXF_FW1. all medication claims within follow up*/<br/>data VXF_FW1&#59<br/>&nbsp&nbsp&nbsp&nbspset VXE_WW&#59<br/>&nbsp&nbsp&nbsp&nbspwhere rx_ddddd between EntryDate and EntryDate + &Followdays -1&#59<br/>run&#59&nbsp&nbsp&nbsp&nbsp<br/><br/><br/>/*calculate the Rx Freq from statin drug claims in follow up*/<br/>/*the macro getUPCIndex works for MSB claim data, and other data<br/>&nbsp&nbsp&nbsp&nbspfor MSB claim data, the LOS, MODE, SPEC, and NUM_SRV must be provided<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthe excluding LOC, excluding MODE, and including SPEC must be provided<br/>&nbsp&nbsp&nbsp&nbspfor other data (like in this case, the episodes have been prepared, or like prescription data)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspspecify the claimType as others, and do not need to specify LOS,MODE exclusion, and SPEC<br/><br/>&nbsp&nbsp&nbsp&nbspunlike UPC in MSB, here it is fine even if the combination of same patient-doc-rx_ddddd repeat<br/><br/>&nbsp&nbsp&nbsp&nbspBy default, the target file contains the doc with the max rx Freq<br/>&nbsp&nbsp&nbsp&nbspbut this is not what is wanted here. <br/>&nbsp&nbsp&nbsp&nbspFor this analysis, it is expected to keep all docs, from which those as PCP, and with Max rx Freq will be kept<br/>&nbsp&nbsp&nbsp&nbspso the interested data set is not the target, but the tmp5 file created by the macro&nbsp&nbsp&nbsp&nbsp<br/><br/>*/<br/>/*VXF_FW2. Use the macro UPC to identify the most freq prescriber of Statin during follow up, <br/>&nbsp&nbsp&nbsp&nbspunlike UPC in MSB, here it is fine even if the combination of same patient-doc-rx_ddddd repeat<br/>&nbsp&nbsp&nbsp&nbspNote: those with a unknown doc number are excluded<br/>*/<br/><br/>%getUPCIndex(<br/>&nbsp&nbsp&nbsp&nbspdata=VXF_FW1, <br/>&nbsp&nbsp&nbsp&nbsptarget=notintersted,<br/>&nbsp&nbsp&nbsp&nbspInPatientLOS = , <br/>&nbsp&nbsp&nbsp&nbspoutProvMode = ,<br/>&nbsp&nbsp&nbsp&nbspInterestedSPEC =,<br/>&nbsp&nbsp&nbsp&nbspdocIDCol = key_prscr_num,<br/>&nbsp&nbsp&nbsp&nbspdoscol=rx_ddddd,<br/>&nbsp&nbsp&nbsp&nbspclaimType=dp,<br/>&nbsp&nbsp&nbsp&nbspdebug=1<br/>)&#59<br/>data VXF_FW2&#59<br/>&nbsp&nbsp&nbsp&nbspset getUPC_tmp5&#59<br/>&nbsp&nbsp&nbsp&nbsprename <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkey_prscr_num = key_doc_num<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN_visits=NRx_MaxPerDocWF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspT_Visits=TRxWF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCIndex = RxIndexWF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbspwhere key_prscr_num ne 'unknown'&#59 <br/>run&#59<br/>%sort(data=VXF_FW2, sorter=key_hsn descending RxIndexWF)&#59<br/><br/>/*VXF_FW3. For each patient, keep  the highest Rx index*/<br/>data VXF_FW3&#59<br/>&nbsp&nbsp&nbsp&nbspset VXF_FW2&#59<br/>&nbsp&nbsp&nbsp&nbspby key_hsn descending RxIndexWF&#59<br/>&nbsp&nbsp&nbsp&nbspif first.key_hsn&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn RxIndexWF&#59<br/>run&#59<br/><br/>/*VXF_FW4. Link the highest Rx index back to VXF_FW1 to keep patient-doc links with the highest UPC index<br/>(there could be multiple physicians with tie index values for a single patient)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXF_FW2,<br/>&nbsp&nbsp&nbsp&nbspt2=VXF_FW3,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXF_FW4,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars= key_hsn RxIndexWF,<br/>&nbsp&nbsp&nbsp&nbsporderby=%str(key_hsn, key_doc_num) <br/>)&#59<br/><br/>/*VXF_FW5. determine the UP. In case of tie, get UP1, UP2, ....<br/>&nbsp&nbsp&nbsp&nbsp in case of tie, there will be multiple UPs<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocNumer, NRx_MaxPerDoc, RxIndex, these are all specific by each USP <br/>&nbsp&nbsp&nbsp&nbspand we'll need these values for each USP<br/>&nbsp&nbsp&nbsp&nbspFollowing is a smart idea:<br/>&nbsp&nbsp&nbsp&nbsp1) putting values of these doc-specifc variables into a string (theStr), with the dlmt \"&#59\"<br/>&nbsp&nbsp&nbsp&nbsp2) make a tag of USP1, 2, etc<br/>*/<br/>data VXF_FW5&#59<br/>&nbsp&nbsp&nbsp&nbspset VXF_FW4&#59<br/>&nbsp&nbsp&nbsp&nbspformat RxIndexWF 6.2&#59<br/>&nbsp&nbsp&nbsp&nbspby key_hsn &#59<br/>&nbsp&nbsp&nbsp&nbspif first.key_hsn then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi =1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUWPF='UWPF' || strip(i)&#59&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi+1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUWPF='UWPF' || strip(i)&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdrop i&#59<br/>&nbsp&nbsp&nbsp&nbsp/*combine the var values together*/<br/>&nbsp&nbsp&nbsp&nbsplength theStr $50.&#59 <br/>&nbsp&nbsp&nbsp&nbsptheStr = catx(':', key_doc_num, NRx_MaxPerDocWF, put(RxIndexWF, 6.2))&#59<br/>run&#59<br/><br/>/*VXF_FW6. Now we can transpose the string in theStr into columsn of USP1, 2, ...<br/>&nbsp&nbsp&nbsp&nbspThe values will stay there. Later we can use scan(var, # of word, dlmt) to get the values<br/>&nbsp&nbsp&nbsp&nbsp(i.e., scan(USP1, 1, \":\") is the key_doc_num of USP1, scan(USP1, 2, \"&#59\") is the n_visits of USP1, etc<br/>*/<br/>%transpose(data = VXF_FW5, target=VXF_FW6, <br/>&nbsp&nbsp&nbsp&nbsprowhead =key_hsn NRx_MaxPerDocWF    TRxWF     RxIndexWF  ,<br/>&nbsp&nbsp&nbsp&nbspcolhead=UWPF,<br/>&nbsp&nbsp&nbsp&nbspcontents= theStr<br/>)&#59<br/>/*example to get upcindex of UWPF1*/<br/>/*<br/>data test&#59<br/>&nbsp&nbsp&nbsp&nbspset VXF_FW5 (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbspRxIndex_UWPF1= scan(UWPF1, 3, ':')&#59<br/>run&#59<br/>*/<br/><br/>/*VXF_FW7. The docs in VXF_FW5 are USPs, link them back to VXF_FS (the cohort)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXF_FS,<br/>&nbsp&nbsp&nbsp&nbspt2=VXF_FW6,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXF_FW,<br/>&nbsp&nbsp&nbsp&nbspvars=*,<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localTargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VXF_FW.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VXF_FW.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/>/*data test&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspset VXF_FW&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspUSP=1&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspif USP = '' then USP=0&#59*/<br/>/*run&#59*/<br/>/*%freq(data=test, table= USP)&#59*/<br/><br/>%exportvars(data=VXF_FW)&#59<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>s///<br/>t///","children":[{"idx":"ccb59e79-57c6-4519-bf01-43e592686719","name":"VXG_CompSF CompWF CompWW","NodeDescription":"///t<br/>///s<br/>/*VXG. Comprehensive continuity of care by three definitions:<br/>&nbsp&nbsp&nbsp&nbsp1. COMPFS: Same UCPF, USPF, and CMEPF<br/>&nbsp&nbsp&nbsp&nbsp2. COMPFW: Same UCPF, UWPF, and CMEPF<br/>&nbsp&nbsp&nbsp&nbsp3. COMPWW: Same UCPW, UWPW, and CMEPW <br/>*/<br/><br/>data _null_&#59run&#59<br/><br/>/*VXG0. prepare source data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXF_WW.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXF_WW.sas7bdat)<br/>)&#59<br/><br/><br/>/*VXG1. Determine COMPFS: Same UCPF, USPF, and CMEPF*/<br/>/*VXG1a. now we are going to determine an algorithm to deal with the link pattern.<br/>&nbsp&nbsp&nbsp&nbspWe need to determine, for each role (UCPF, USPF, etc), which doctor to select in case of tie<br/>&nbsp&nbsp&nbsp&nbspFirst, we need to see how the tie patterns looks like. &nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspIn the following we'll try to map out all the tie patterns. For example:<br/>&nbsp&nbsp&nbsp&nbspfor UCPF, if there are two docs, it'll be AB<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthen for USPF, if there are two docs again, in which one is the same doc A as in UCPF, but the other is a new one, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp the pattern for USPF will be AC,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand we'll line them up to be like: AB,AC.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspWe'll repeat the same method for other role of docs (CMEPF), like AB,AC,BC,.....<br/>&nbsp&nbsp&nbsp&nbspThat way we can see how does physicians repeatedly appear in different roles<br/>&nbsp&nbsp&nbsp&nbspbyte values for A =65, a=97<br/>*/<br/>data VXG1a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXF_WW&#59<br/>&nbsp&nbsp&nbsp&nbsparray tmp1 {*} UCPF:&#59<br/>&nbsp&nbsp&nbsp&nbsparray tmp2 {*} USPF:&#59<br/>&nbsp&nbsp&nbsp&nbsparray tmp3 {*} CMEPF:&#59<br/>&nbsp&nbsp&nbsp&nbsp/*get the max # of doctors */<br/>/*&nbsp&nbsp&nbsp&nbspdimAll = sum(dim(tmp1),dim(tmp2),dim(tmp3))&#59*/<br/>&nbsp&nbsp&nbsp&nbsp/*set the length of the docIDs*/<br/>&nbsp&nbsp&nbsp&nbsplength docIDs $1500.&#59<br/>/*&nbsp&nbsp&nbsp&nbsparray tmpAll {dimAll}&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspconcatecate all docs together, between different roles, split by &#59, within roles, split by ,*/<br/>&nbsp&nbsp&nbsp&nbspDo i = 1 to dim(tmp1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheID = scan(tmp1(i), 1, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif i =1 and theID='' then theID='_'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif theID ne '' and theID not in:('na') then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdocIDs = strip(docIDs) || \",\"  || theID&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdocIDs=strip(docIDs) || \"&#59\"&#59<br/><br/>&nbsp&nbsp&nbsp&nbspDo i = 1 to dim(tmp2)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheID = scan(tmp2(i), 1, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif i =1 and theID='' then theID='_'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif theID ne '' and theID not in:('na') then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdocIDs = strip(docIDs) || \",\"  || theID&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdocIDs=strip(docIDs) || \"&#59\"&#59<br/><br/>&nbsp&nbsp&nbsp&nbspDo i = 1 to dim(tmp3)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheID = scan(tmp3(i), 1, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif i =1 and theID='' then theID='_'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif theID ne '' and theID not in:('na') then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdocIDs = strip(docIDs) || \",\"  || theID&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdocIDs=strip(docIDs) || \"&#59\"&#59<br/>&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspdocIDs = tranwrd(docIDs, \"&#59,\", \"&#59\")&#59<br/>&nbsp&nbsp&nbsp&nbspif substr(docIDs, 1,1) =\",\" then docIDs = substr(docIDs, 2, length(docIDs) -1)&#59<br/>&nbsp&nbsp&nbsp&nbspif substr(docIDs, length(DocIDs), 1) =\"&#59\" then docIDs = substr(docIDs, 1, length(docIDs) -1)&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn docIDs&#59<br/>run&#59<br/><br/>/*VXG1b. scan for each docid and use letters to indicate the role patterns.<br/>A&#59A&#59A for comprehence continuity of care<br/>a&#59b&#59c for UCP, U prescriber, and CMEP were undertaken by different physicians. <br/>A&#59A&#59b for UCP, and U prescriber is the same physician, while CMEP is a different one.<br/>As long as there was the same physician, the letter for that physician is in upper case. <br/>*/<br/>data VXG1b&#59<br/>&nbsp&nbsp&nbsp&nbspset VXG1a  &#59<br/>&nbsp&nbsp&nbsp&nbspNTotalIDs=countw(docIDs)&#59 /*get the total # of IDs*/<br/>&nbsp&nbsp&nbsp&nbspdocIDs2=tranwrd(docIDs, 'unknown', '')&#59<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheID=scan(docIDs2, 1, \",&#59\")&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspdocIDs2=tranwrd(docIDs2, strip(theID), 'a')&#59*/<br/>&nbsp&nbsp&nbsp&nbspletterCNT=0&#59<br/>&nbsp&nbsp&nbsp&nbspdo NIDs = 1 to NTotalIDs&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheID=scan(docIDs2, NIDs, \",&#59\")&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif theID in: ('0','1','2','3','4','5','6','7','8','9') then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspletterCNT+1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspIDCount=count(docIDs2, strip(theID))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif IDCount > 1 then byteBase=64&#59 /*This is to indicate that if the same doctor appeared across different roles (e.g., as UCPF, and USPF), the Letter will be in upper case*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse byteBase=96&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdocIDs2=tranwrd(docIDs2, strip(theID), byte(letterCNT+byteBase))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn docIDs DocIDs2&#59<br/>&nbsp&nbsp&nbsp&nbsprename DocIDs2 = RolesPatternAllDoc&#59 <br/>run&#59<br/>/*There is no such case '&#59&#59'*/<br/>data test&#59<br/>&nbsp&nbsp&nbsp&nbspset VXG1a&#59<br/>&nbsp&nbsp&nbsp&nbspif index(RolesPatternAllDoc, \"&#59&#59\")>0&#59<br/>run&#59<br/><br/>/*VXG1c. determine the COMPFS term (whether or not having the same physician as UCPF, USPF, and CMEPF*/<br/>data VXG1&#59<br/>&nbsp&nbsp&nbsp&nbspset VXG1b &#59<br/>&nbsp&nbsp&nbsp&nbspCOMPFS=0&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn RolesPatternAllDoc COMPFS&#59<br/>&nbsp&nbsp&nbsp&nbspif RolesPatternAllDoc='_&#59_&#59_&#59' then COMPFS=9&#59 <br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdo i = 1 to 26&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif count(RolesPatternAllDoc, byte(i+63)) =3 then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCOMPFS=1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspleave&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>run&#59<br/>%freq(data=VXG1, table=COMPFS)&#59<br/><br/><br/>/*VXG2. Determine COMPFW: Same UCPF, UWPF, and CMEPF*/<br/>/*VXG2a. now we are going to determine an algorithm to deal with the link pattern.<br/>&nbsp&nbsp&nbsp&nbspWe need to determine, for each role (UCPF, USPF, etc), which doctor to select in case of tie<br/>&nbsp&nbsp&nbsp&nbspFirst, we need to see how the tie patterns looks like. &nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspIn the following we'll try to map out all the tie patterns. For example:<br/>&nbsp&nbsp&nbsp&nbspfor UCPF, if there are two docs, it'll be AB<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthen for USPF, if there are two docs again, in which one is the same doc A as in UCPF, but the other is a new one, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp the pattern for USPF will be AC,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand we'll line them up to be like: AB,AC.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspWe'll repeat the same method for other role of docs (CMEPF), like AB,AC,BC,.....<br/>&nbsp&nbsp&nbsp&nbspThat way we can see how does physicians repeatedly appear in different roles<br/>&nbsp&nbsp&nbsp&nbspbyte values for A =65, a=97<br/>*/<br/>data VXG2a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXF_WW&#59<br/>&nbsp&nbsp&nbsp&nbsparray tmp1 {*} UCPF:&#59<br/>&nbsp&nbsp&nbsp&nbsparray tmp2 {*} UWPF:&#59<br/>&nbsp&nbsp&nbsp&nbsparray tmp3 {*} CMEPF:&#59<br/>&nbsp&nbsp&nbsp&nbsp/*get the max # of doctors */<br/>/*&nbsp&nbsp&nbsp&nbspdimAll = sum(dim(tmp1),dim(tmp2),dim(tmp3))&#59*/<br/>&nbsp&nbsp&nbsp&nbsp/*set the length of the docIDs*/<br/>&nbsp&nbsp&nbsp&nbsplength docIDs $1500.&#59<br/>/*&nbsp&nbsp&nbsp&nbsparray tmpAll {dimAll}&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspconcatecate all docs together, between different roles, split by &#59, within roles, split by ,*/<br/>&nbsp&nbsp&nbsp&nbspDo i = 1 to dim(tmp1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheID = scan(tmp1(i), 1, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif i =1 and theID='' then theID='_'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif theID ne '' and theID not in:('na') then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdocIDs = strip(docIDs) || \",\"  || theID&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdocIDs=strip(docIDs) || \"&#59\"&#59<br/><br/>&nbsp&nbsp&nbsp&nbspDo i = 1 to dim(tmp2)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheID = scan(tmp2(i), 1, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif i =1 and theID='' then theID='_'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif theID ne '' and theID not in:('na') then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdocIDs = strip(docIDs) || \",\"  || theID&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdocIDs=strip(docIDs) || \"&#59\"&#59<br/><br/>&nbsp&nbsp&nbsp&nbspDo i = 1 to dim(tmp3)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheID = scan(tmp3(i), 1, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif i =1 and theID='' then theID='_'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif theID ne '' and theID not in:('na') then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdocIDs = strip(docIDs) || \",\"  || theID&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdocIDs=strip(docIDs) || \"&#59\"&#59<br/>&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspdocIDs = tranwrd(docIDs, \"&#59,\", \"&#59\")&#59<br/>&nbsp&nbsp&nbsp&nbspif substr(docIDs, 1,1) =\",\" then docIDs = substr(docIDs, 2, length(docIDs) -1)&#59<br/>&nbsp&nbsp&nbsp&nbspif substr(docIDs, length(DocIDs), 1) =\"&#59\" then docIDs = substr(docIDs, 1, length(docIDs) -1)&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn docIDs&#59<br/>run&#59<br/><br/>/*VXG2b. scan for each docid and use letters to indicate the role patterns.<br/>A&#59A&#59A for comprehence continuity of care<br/>a&#59b&#59c for UCP, U prescriber, and CMEP were undertaken by different physicians. <br/>A&#59A&#59b for UCP, and U prescriber is the same physician, while CMEP is a different one.<br/>As long as there was the same physician, the letter for that physician is in upper case. <br/>*/<br/>data VXG2b&#59<br/>&nbsp&nbsp&nbsp&nbspset VXG2a  &#59<br/>&nbsp&nbsp&nbsp&nbspNTotalIDs=countw(docIDs)&#59 /*get the total # of IDs*/<br/>&nbsp&nbsp&nbsp&nbspdocIDs2=tranwrd(docIDs, 'unknown', '')&#59<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheID=scan(docIDs2, 1, \",&#59\")&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspdocIDs2=tranwrd(docIDs2, strip(theID), 'a')&#59*/<br/>&nbsp&nbsp&nbsp&nbspletterCNT=0&#59<br/>&nbsp&nbsp&nbsp&nbspdo NIDs = 1 to NTotalIDs&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheID=scan(docIDs2, NIDs, \",&#59\")&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif theID in: ('0','1','2','3','4','5','6','7','8','9') then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspletterCNT+1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspIDCount=count(docIDs2, strip(theID))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif IDCount > 1 then byteBase=64&#59 /*This is to indicate that if the same doctor appeared across different roles (e.g., as UCPF, and USPF), the Letter will be in upper case*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse byteBase=96&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdocIDs2=tranwrd(docIDs2, strip(theID), byte(letterCNT+byteBase))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn docIDs DocIDs2&#59<br/>&nbsp&nbsp&nbsp&nbsprename DocIDs2 = RolesPatternAllDoc&#59 <br/>run&#59<br/>/*There is no such case '&#59&#59'*/<br/>data test&#59<br/>&nbsp&nbsp&nbsp&nbspset VXG2a&#59<br/>&nbsp&nbsp&nbsp&nbspif index(RolesPatternAllDoc, \"&#59&#59\")>0&#59<br/>run&#59<br/><br/>/*VXG2c. determine the COMPFW term*/<br/>data VXG2&#59<br/>&nbsp&nbsp&nbsp&nbspset VXG2b &#59<br/>&nbsp&nbsp&nbsp&nbspCOMPFW=0&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn RolesPatternAllDoc COMPFW&#59<br/>&nbsp&nbsp&nbsp&nbspif RolesPatternAllDoc='_&#59_&#59_&#59' then COMPFW=9&#59 <br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdo i = 1 to 26&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif count(RolesPatternAllDoc, byte(i+63)) =3 then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCOMPFW=1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspleave&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>run&#59<br/>%freq(data=VXG2, table=COMPFW)&#59<br/><br/><br/><br/>/*VXG3. Determine COMPWW: Same UCPW, UWPW, and CMEPW*/<br/>/*VXG3a. now we are going to determine an algorithm to deal with the link pattern.<br/>&nbsp&nbsp&nbsp&nbspWe need to determine, for each role (UCPF, USPF, etc), which doctor to select in case of tie<br/>&nbsp&nbsp&nbsp&nbspFirst, we need to see how the tie patterns looks like. &nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspIn the following we'll try to map out all the tie patterns. For example:<br/>&nbsp&nbsp&nbsp&nbspfor UCPF, if there are two docs, it'll be AB<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthen for USPF, if there are two docs again, in which one is the same doc A as in UCPF, but the other is a new one, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp the pattern for USPF will be AC,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand we'll line them up to be like: AB,AC.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspWe'll repeat the same method for other role of docs (CMEPF), like AB,AC,BC,.....<br/>&nbsp&nbsp&nbsp&nbspThat way we can see how does physicians repeatedly appear in different roles<br/>&nbsp&nbsp&nbsp&nbspbyte values for A =65, a=97<br/>*/<br/>data VXG3a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXF_WW&#59<br/>&nbsp&nbsp&nbsp&nbsparray tmp1 {*} UCPW:&#59<br/>&nbsp&nbsp&nbsp&nbsparray tmp2 {*} UWPW:&#59<br/>&nbsp&nbsp&nbsp&nbsparray tmp3 {*} CMEPW:&#59<br/>&nbsp&nbsp&nbsp&nbsp/*get the max # of doctors */<br/>/*&nbsp&nbsp&nbsp&nbspdimAll = sum(dim(tmp1),dim(tmp2),dim(tmp3))&#59*/<br/>&nbsp&nbsp&nbsp&nbsp/*set the length of the docIDs*/<br/>&nbsp&nbsp&nbsp&nbsplength docIDs $1500.&#59<br/>/*&nbsp&nbsp&nbsp&nbsparray tmpAll {dimAll}&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspconcatecate all docs together, between different roles, split by &#59, within roles, split by ,*/<br/>&nbsp&nbsp&nbsp&nbspDo i = 1 to dim(tmp1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheID = scan(tmp1(i), 1, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif i =1 and theID='' then theID='_'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif theID ne '' and theID not in:('na') then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdocIDs = strip(docIDs) || \",\"  || theID&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdocIDs=strip(docIDs) || \"&#59\"&#59<br/><br/>&nbsp&nbsp&nbsp&nbspDo i = 1 to dim(tmp2)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheID = scan(tmp2(i), 1, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif i =1 and theID='' then theID='_'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif theID ne '' and theID not in:('na') then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdocIDs = strip(docIDs) || \",\"  || theID&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdocIDs=strip(docIDs) || \"&#59\"&#59<br/><br/>&nbsp&nbsp&nbsp&nbspDo i = 1 to dim(tmp3)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheID = scan(tmp3(i), 1, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif i =1 and theID='' then theID='_'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif theID ne '' and theID not in:('na') then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdocIDs = strip(docIDs) || \",\"  || theID&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdocIDs=strip(docIDs) || \"&#59\"&#59<br/>&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspdocIDs = tranwrd(docIDs, \"&#59,\", \"&#59\")&#59<br/>&nbsp&nbsp&nbsp&nbspif substr(docIDs, 1,1) =\",\" then docIDs = substr(docIDs, 2, length(docIDs) -1)&#59<br/>&nbsp&nbsp&nbsp&nbspif substr(docIDs, length(DocIDs), 1) =\"&#59\" then docIDs = substr(docIDs, 1, length(docIDs) -1)&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn docIDs&#59<br/>run&#59<br/><br/>/*VXG3b. scan for each docid and use letters to indicate the role patterns.<br/>A&#59A&#59A for comprehence continuity of care<br/>a&#59b&#59c for UCP, U prescriber, and CMEP were undertaken by different physicians. <br/>A&#59A&#59b for UCP, and U prescriber is the same physician, while CMEP is a different one.<br/>As long as there was the same physician, the letter for that physician is in upper case. <br/>*/<br/>data VXG3b&#59<br/>&nbsp&nbsp&nbsp&nbspset VXG3a  &#59<br/>&nbsp&nbsp&nbsp&nbspNTotalIDs=countw(docIDs)&#59 /*get the total # of IDs*/<br/>&nbsp&nbsp&nbsp&nbspdocIDs2=tranwrd(docIDs, 'unknown', '')&#59<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheID=scan(docIDs2, 1, \",&#59\")&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspdocIDs2=tranwrd(docIDs2, strip(theID), 'a')&#59*/<br/>&nbsp&nbsp&nbsp&nbspletterCNT=0&#59<br/>&nbsp&nbsp&nbsp&nbspdo NIDs = 1 to NTotalIDs&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheID=scan(docIDs2, NIDs, \",&#59\")&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif theID in: ('0','1','2','3','4','5','6','7','8','9') then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspletterCNT+1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspIDCount=count(docIDs2, strip(theID))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif IDCount > 1 then byteBase=64&#59 /*This is to indicate that if the same doctor appeared across different roles (e.g., as UCPF, and USPF), the Letter will be in upper case*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse byteBase=96&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdocIDs2=tranwrd(docIDs2, strip(theID), byte(letterCNT+byteBase))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn docIDs DocIDs2&#59<br/>&nbsp&nbsp&nbsp&nbsprename DocIDs2 = RolesPatternAllDoc&#59 <br/>run&#59<br/>/*There is no such case '&#59&#59'*/<br/>data test&#59<br/>&nbsp&nbsp&nbsp&nbspset VXG3a&#59<br/>&nbsp&nbsp&nbsp&nbspif index(RolesPatternAllDoc, \"&#59&#59\")>0&#59<br/>run&#59<br/><br/>/*VXG3c. determine the COMPWW term*/<br/>data VXG3&#59<br/>&nbsp&nbsp&nbsp&nbspset VXG3b &#59<br/>&nbsp&nbsp&nbsp&nbspCOMPWW=0&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn RolesPatternAllDoc COMPWW&#59<br/>&nbsp&nbsp&nbsp&nbspif RolesPatternAllDoc='_&#59_&#59_&#59' then COMPWW=9&#59 <br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdo i = 1 to 26&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif count(RolesPatternAllDoc, byte(i+63)) =3 then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCOMPWW=1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspleave&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>run&#59<br/>%freq(data=VXG3, table=COMPWW)&#59<br/><br/>/*VXG4. Link the 3 COMP patterns to the cohort*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXF_WW,<br/>&nbsp&nbsp&nbsp&nbspt2=VXG1,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXG4,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.RolesPatternAllDoc as CompFS_Pattern, t2.COMPFS),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>/*VXG5. Link the 3 COMP patterns to the cohort*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXG4,<br/>&nbsp&nbsp&nbsp&nbspt2=VXG2,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXG5,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.RolesPatternAllDoc as COMPFW_Pattern, t2.COMPFW),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>/*VXG6. Link the 3 COMP patterns to the cohort*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXG5,<br/>&nbsp&nbsp&nbsp&nbspt2=VXG3,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXG,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.RolesPatternAllDoc as COMPWW_Pattern, t2.COMPWW),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>/*%freq(data=VXG, table=COMPFS)&#59*/<br/>/*%freq(data=VXG, table=COMPFW)&#59*/<br/>/*%freq(data=VXG, table=COMPWW)&#59*/<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localTargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VXG.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VXG.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/><br/>%exportvars(data=VXG)&#59<br/><br/><br/>s///<br/>t///","children":[{"idx":"dc626e99-ad26-47da-a62a-85eed65a3adb","name":"VXH_FS Same Doc","NodeDescription":"///t<br/>///s<br/>/*VXH_FS. UCPF = USPF, UCPF=CMEPF*/<br/><br/>data _null_&#59run&#59<br/><br/>/*VXH_FS0. prepare source data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXG.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXG.sas7bdat)<br/>)&#59<br/><br/>%print(data=VXG)&#59<br/><br/><br/>/*VXH_FS1. indicate whether UCPF is the same doc as USPF, or CMEPF*/<br/>%let thePatten =CompFS_Pattern&#59<br/>%let theUCPUSP=UCPFUSPF&#59<br/>%let theUCPCMEP=UCPFCMEPF&#59<br/>data VXH_FS1&#59<br/>&nbsp&nbsp&nbsp&nbspset VXG&#59<br/>&nbsp&nbsp&nbsp&nbsplength  _tmp1 $100. &#59<br/>&nbsp&nbsp&nbsp&nbsp/*split the pattern into 3 substrings, each for UCPF, USPF, and CMEPF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthen select the desired combination*/<br/>&nbsp&nbsp&nbsp&nbsp/*UCPF and USPF*/<br/>&nbsp&nbsp&nbsp&nbspsame_&theUCPUSP=0&#59<br/>&nbsp&nbsp&nbsp&nbsp_tmp1=''&#59<br/>&nbsp&nbsp&nbsp&nbspdo i =1 , 2 &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp_tmp1= strip(_tmp1) || '&#59' || strip(scan(&thePatten, i, \"&#59\"))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*The following is like counting 2As, 2Bs, ..., 2Zs. If any of them is matched, UCPF and USPF are the same doc*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdo j = 1 to 26&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif count(_tmp1, byte(j+63)) =2 then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsame_&theUCPUSP=1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspleave&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp/*UCPF and CMEPF*/<br/>&nbsp&nbsp&nbsp&nbspsame_&theUCPCMEP=0&#59<br/>&nbsp&nbsp&nbsp&nbsp_tmp1=''&#59<br/>&nbsp&nbsp&nbsp&nbspdo i =1 , 3 &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp_tmp1= strip(_tmp1) || '&#59' || strip(scan(&thePatten, i, \"&#59\"))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdo j = 1 to 26&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif count(_tmp1, byte(j+63)) =2 then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsame_&theUCPCMEP=1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspleave&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdrop _tmp: i j&#59<br/>run&#59<br/><br/><br/>/*VXH_FS2. Determine the 25% and 75% percentile category of UPCIndexF */<br/>proc means data =  VXH_FS1 noprint&#59<br/>&nbsp&nbsp&nbsp&nbspvar UPCIndexF&#59<br/>&nbsp&nbsp&nbsp&nbspoutput out=VXH_FS2a mean=mean median=median p25 = p25 p75=p75 &#59<br/>run&#59<br/>/*In VXH_FS1, indicate the category by UPCIndexF*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXH_FS1,<br/>&nbsp&nbsp&nbsp&nbspt2=VXH_FS2a,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXH_FS2,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.*, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.p25 as UPCIndexFP25,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.median as UPCIndexFP50,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.p75 as UPCIndexFP75,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(case<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwhen t1.UPCIndexF < t2.p25 then cat('_0L_', '(<', round(t2.p25, 1), ')')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwhen t1.UPCIndexF >=  t2.p25 and t1.UPCIndexF <  t2.p75 then cat('_1M_', '(', round(t2.p25, 1), ' to ', round(t2.p75, 1)-1, ')')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwhen t1.UPCIndexF  >= t2.p75 then cat('_2H_', '(>=', round(t2.p75,1), ')')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse 'Wrong' <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend ) as UPCIndexF_Cat<br/>&nbsp&nbsp&nbsp&nbsp),<br/>&nbsp&nbsp&nbsp&nbspjtype=cross<br/>)&#59<br/>%freq(data=VXH_FS2, table=UPCIndexF_Cat)&#59<br/><br/><br/>/*VXH_FS3. Determine the 25% and 75% percentile category of # visits to the most visited GP */<br/>proc means data =  VXH_FS2 noprint&#59<br/>&nbsp&nbsp&nbsp&nbspvar NMax_VisitsPerDocF&#59<br/>&nbsp&nbsp&nbsp&nbspoutput out=VXH_FS3a mean=mean median=median p25 = p25 p75=p75 min=min max=max &#59<br/>run&#59<br/>/*In VXH_FS1, indicate the category by UPCIndexF*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXH_FS2,<br/>&nbsp&nbsp&nbsp&nbspt2=VXH_FS3a,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXH_FS,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.*, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.p25 as NMax_VisitsPerDocF25,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.median as NMax_VisitsPerDocF50,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.p75 as NMax_VisitsPerDocF75,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(case<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwhen t1.NMax_VisitsPerDocF < t2.p25 then cat('_0L_', '(<', t2.p25, ')')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwhen t1.NMax_VisitsPerDocF >=  t2.p25 and t1.NMax_VisitsPerDocF <  t2.p75 then cat('_1M_', '(', t2.p25, ' to ', t2.p75-1, ')')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwhen t1.NMax_VisitsPerDocF  >= t2.p75 then cat('_2H_', '(>=', t2.p75, ')')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse 'Wrong' <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend ) length = 20 as NMax_VisitsPerDocF_Cat<br/>&nbsp&nbsp&nbsp&nbsp),<br/>&nbsp&nbsp&nbsp&nbspjtype=cross<br/>)&#59<br/>%freq(data=VXH_FS, table=UPCIndexF_Cat * NMax_VisitsPerDocF_Cat )&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localTargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VXH_FS.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VXH_FS.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/>%exportvars(data=VXH_FS)&#59<br/><br/><br/>s///<br/>t///","children":[{"idx":"5e5e5c09-6792-4271-a2fb-9ccd33ab8119","name":"VXI Patient Covariates","NodeDescription":"///t<br/>///s<br/>/*VXI, Patient Covariates*/<br/><br/>data _null_&#59run&#59<br/><br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXH_FS.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXH_FS.sas7bdat)<br/>)&#59<br/><br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_hosp.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_hosp.sas7bdat)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_msb.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_msb.sas7bdat)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>%vbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_dp_benefit.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_dp_benefit.sas7bdat)<br/>)&#59<br/><br/>%vbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_dp_nonbenefit.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_dp_nonbenefit.sas7bdat)<br/>)&#59<br/><br/>%vbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_ed_a2012.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_ed_a2012.sas7bdat)<br/>)&#59<br/>%vbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_verif_mort.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_verif_mort.sas7bdat)<br/>)&#59<br/>%vbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_phrs_cov.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_phrs_cov.sas7bdat)<br/>)&#59<br/><br/>%vbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_mds_ltc.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_mds_ltc.sas7bdat)<br/>)&#59<br/><br/>%put >>> &theChronicConditionDataPath&#59<br/><br/>%vbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&theChronicConditionDataPath.\\&theChronicConditionData..zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(&theChronicConditionData..sas7bdat)<br/>)&#59<br/><br/><br/><br/><br/><br/>/*# med (excluding the study medication)*/<br/>/***5* # DINs within 365 days prior to entry***************************************/<br/>&nbsp&nbsp&nbsp&nbsp/*from benefit file*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=master_dp_benefit,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXH_FS,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI5a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.din, 'be' as src),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str(t1.rx_ddddd between t2.entryDate-1 and t2.entryDate -365)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp/*from nonbenefit file*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=master_dp_nonbenefit,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXH_FS,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI5b,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.din, 'nb' as src),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str(t1.rx_ddddd between t2.entryDate-1 and t2.entryDate -365)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp/*put the above together*/<br/>&nbsp&nbsp&nbsp&nbspdata VXI5c&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXI5a VXI5b&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*remove those DINs as statin*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI5c,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI5d,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str(DIN not in (select DIN from locald.StatinDINs))<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp/*get distinct DINs by key_hsn from both the benefit file and the nonbenefit file*/<br/>&nbsp&nbsp&nbsp&nbsp%distinct(data=VXI5d, target=VXI5e, vars=%str(key_hsn, DIN))&#59<br/>&nbsp&nbsp&nbsp&nbsp/*count DINs by Key_hsn*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI5e,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI5f,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, count(DIN) as NDINS_Pre365),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupby=%str(key_hsn)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp/*Link backto VXH_FS*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXH_FS,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI5f,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI5,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdistinction=1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspifn(t2.NDINS_Pre365 = ., 0, t2.NDINS_Pre365) as NDINS_Pre365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn)<br/>&nbsp&nbsp&nbsp&nbsp)&#59&nbsp&nbsp&nbsp&nbsp<br/><br/>/***6* # DINs within 365 days since entry***************************************/<br/>&nbsp&nbsp&nbsp&nbsp/*from benefit file*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=master_dp_benefit,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI5,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI6a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.din, 'be' as src),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str(t1.rx_ddddd between t2.entryDate and t2.entryDate +365-1)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp/*from nonbenefit file*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=master_dp_nonbenefit,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI5,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI6b,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.din, 'nb' as src),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str(t1.rx_ddddd between t2.entryDate and t2.entryDate +365-1)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp/*put the above together*/<br/>&nbsp&nbsp&nbsp&nbspdata VXI6c&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXI6a VXI6b&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*remove those DINs as statin*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI6c,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI6d,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str(DIN not in (select DIN from locald.StatinDINs))<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp/*get distinct DINs by key_hsn from both the benefit file and the nonbenefit file*/<br/>&nbsp&nbsp&nbsp&nbsp%distinct(data=VXI6d, target=VXI6e, vars=%str(key_hsn, DIN))&#59<br/>&nbsp&nbsp&nbsp&nbsp/*count DINs by Key_hsn*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI6e,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI6f,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, count(DIN) as NDINS_Post365),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupby=%str(key_hsn)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp/*Link backto VXI5*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI5,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI6f,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI6,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdistinction=1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspifn(t2.NDINS_Post365 = ., 0, t2.NDINS_Post365) as NDINS_Post365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn)<br/>&nbsp&nbsp&nbsp&nbsp)&#59&nbsp&nbsp&nbsp&nbsp<br/><br/><br/>/*VXI7 #  hospitalizations within 365 days prior to entry*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=master_hosp,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI6,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI7a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.adm_date, t1.dschg_date, t2.entrydate),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str( <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspds_IP='IP'<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(t1.adm_date ne .  and t1.dschg_date ne . )<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.adm_date between t2.entryDate -1 and t2.entryDate - 365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.dschg_date between t2.entryDate -1 and t2.entryDate - 365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.adm_date < t2.entryDate-365 and t1.dschg_date > t2.entryDate -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*count # of hosp visits per patient*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI7a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI7b,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(key_hsn, entryDate, count(adm_date) as NHosp_Pre365),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupby=%str(key_hsn, entryDate)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*Link to VXI6*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI6,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI7b,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI7,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.NHosp_Pre365=., 0, t2.NHosp_Pre365) as NHosp_Pre365),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>/*VXI8 #  hospitalizations within 365 days prior to entry*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=master_hosp,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI7,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI8a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.adm_date, t1.dschg_date, t2.entrydate),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str( <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspds_IP='IP'<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(t1.adm_date ne .  and t1.dschg_date ne . )<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.adm_date between t2.entryDate  and t2.entryDate + 365 -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.dschg_date between t2.entryDate  and t2.entryDate + 365 -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.adm_date < t2.entryDate and t1.dschg_date > t2.entryDate + 365 -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*count # of hosp visits per patient*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI8a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI8b,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(key_hsn, entryDate, count(adm_date) as NHosp_Post365),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupby=%str(key_hsn, entryDate)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*Link to VXI7*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI7,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI8b,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI8,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.NHosp_Post365=., 0, t2.NHosp_Post365) as NHosp_Post365),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp/*VXI 9, # days/nights in hospital within 365 days prior to entry*/<br/>&nbsp&nbsp&nbsp&nbsp%getHDay_Nights(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHospFile=master_hosp, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPtFile=VXI8, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdStart=&dataStartdate&#59, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdEnd=&dataEnddate&#59, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspMaxGap=1, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspincldHN=0, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspindexCol=EntryDate, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcohortGroup=, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptargetFile=VXI9a, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspperiodStart=EntryDate - 365, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPeriodEnd=EntryDate - 1, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspstep=2, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspxtrc=, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeepTMP=<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbspdata VXI9&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXI9a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprename PtHNights = HNights_Pre365 PtHDays = HDays_Pre365&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*VXI10, # days/nights in hospital within 365 days since entry*/<br/>&nbsp&nbsp&nbsp&nbsp%getHDay_Nights(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHospFile=master_hosp, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPtFile=VXI9, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdStart=&dataStartdate&#59, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdEnd=&dataEnddate&#59, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspMaxGap=1, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspincldHN=0, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspindexCol=EntryDate, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcohortGroup=, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptargetFile=VXI10a, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspperiodStart=EntryDate , <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPeriodEnd=EntryDate + 365 - 1, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspstep=2, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspxtrc=, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeepTMP=<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbspdata VXI10&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXI10a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprename PtHNights = HNights_Post365 PtHDays = HDays_Post365&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/><br/>/*11. Doc (GP/SP) visits within 1 years prior to entry*/<br/>&nbsp&nbsp&nbsp&nbsp/*from msb file, distinct visits (same date, same doc)*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=master_msb,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI10,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI11a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.dos, t1.key_doc_num, t1.spec),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str(t1.dos between t2.entryDate-1 and t2.entryDate - &runinDays)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*get gp visits*/<br/>&nbsp&nbsp&nbsp&nbspdata VXI11b1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXI11a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif spec in: ('B')&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp%distinct(data=VXI11b1, target=VXI11c1, vars=%str(key_hsn, dos, key_doc_num))&#59<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI11c1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI11d1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(key_hsn, count(dos) as NVisits_GP_Pre365),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupby=key_hsn<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*get SP visits*/<br/>&nbsp&nbsp&nbsp&nbspdata VXI11b2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXI11a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif spec not in: ('B') and spec not in: ('W')&#59 /*W are nurses or pharmacists*/<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp%distinct(data=VXI11b2, target=VXI11c2, vars=%str(key_hsn, dos, key_doc_num))&#59<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI11c2,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI11d2,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(key_hsn, count(dos) as NVisits_SP_Pre365),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupby=key_hsn<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*Link to VXI10*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI10,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI11d1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI11e,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.NVisits_GP_Pre365=., 0, t2.NVisits_GP_Pre365) as NVisits_GP_Pre365),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI11e,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI11d2,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI11,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.NVisits_SP_Pre365=., 0, t2.NVisits_SP_Pre365) as NVisits_SP_Pre365),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>/*12. Doc (GP/SP) visits within 1 years since entry*/<br/>&nbsp&nbsp&nbsp&nbsp/*from msb file, distinct visits (same date, same doc)*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=master_msb,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI11,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI12a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.dos, t1.key_doc_num, t1.spec),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str(t1.dos between t2.entryDate and t2.entryDate + &followDays-1)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*get gp visits*/<br/>&nbsp&nbsp&nbsp&nbspdata VXI12b1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXI12a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif spec in: ('B')&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp%distinct(data=VXI12b1, target=VXI12c1, vars=%str(key_hsn, dos, key_doc_num))&#59<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI12c1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI12d1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(key_hsn, count(dos) as NVisits_GP_Post365),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupby=key_hsn<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*get SP visits*/<br/>&nbsp&nbsp&nbsp&nbspdata VXI12b2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXI12a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif spec not in: ('B') and spec not in: ('W')&#59 /*W are nurses or pharmacists*/<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp%distinct(data=VXI12b2, target=VXI12c2, vars=%str(key_hsn, dos, key_doc_num))&#59<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI12c2,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI12d2,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(key_hsn, count(dos) as NVisits_SP_Post365),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupby=key_hsn<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*Link to VXI11*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI11,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI12d1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI12e,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.NVisits_GP_Post365=., 0, t2.NVisits_GP_Post365) as NVisits_GP_Post365),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI12e,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI12d2,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI12,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.NVisits_SP_Post365=., 0, t2.NVisits_SP_Post365) as NVisits_SP_Post365),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>/*13. ER visits within a year prior to entry*/<br/>&nbsp&nbsp&nbsp&nbsp/*from ER file*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=master_ed_a2012,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI12,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI13a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.inst_num, t1.reg_date, t1.disp_date, t2.entrydate),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str( <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(t1.reg_date ne .  and t1.disp_date ne . )<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.reg_date between t2.entryDate -1 and t2.entryDate - &runinDays<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.disp_date between t2.entryDate -1 and t2.entryDate - &runinDays<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.reg_date < t2.entryDate- &runinDays and t1.disp_date > t2.entryDate -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*count # of ER visits per patient*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI13a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI13b,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(key_hsn, entryDate, count(inst_num) as NVisits_ER_Pre365),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupby=%str(key_hsn, entryDate)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp/*link to VXI12*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI12,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI13b,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI13,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.NVisits_ER_Pre365=., 0, t2.NVisits_ER_Pre365) as NVisits_ER_Pre365),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>/*14. ER visits within a year since entry*/<br/>&nbsp&nbsp&nbsp&nbsp/*from ER file*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=master_ed_a2012,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI13,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI14a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.inst_num, t1.reg_date, t1.disp_date, t2.entrydate),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str( <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(t1.reg_date ne .  and t1.disp_date ne . )<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.reg_date between t2.entryDate  and t2.entryDate + &followdays -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.disp_date between t2.entryDate  and t2.entryDate + &followdays -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.reg_date < t2.entryDate and t1.disp_date > t2.entryDate+&followdays -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*count # of ER visits per patient*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI14a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI14b,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(key_hsn, entryDate, count(inst_num) as NVisits_ER_Post365),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupby=%str(key_hsn, entryDate)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp/*link to VXI13*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI13,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI14b,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI14,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.NVisits_ER_Post365=., 0, t2.NVisits_ER_Post365) as NVisits_ER_Post365),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>/*VXI15 the % paid by patient or 3rd party insurer of all drugs within 365 days prior to entry<br/>&nbsp&nbsp&nbsp&nbsp1. get all drug claims for patients in the cohort<br/>&nbsp&nbsp&nbsp&nbsp2. keep the claims within 365 prior to entry<br/>&nbsp&nbsp&nbsp&nbsp3. For the claim from step 2, estimate the % paid by patient or 3rd party insurer<br/>*/<br/>/*VXI15a, get drug claims within 365*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_benefit,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI14,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI15a1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn,  t1.Rx_ddddd, t1.rx_qty_amt, t1.total_apprv,t1.amnt_pay_drug_plan, t2.entryDate), <br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(t1.rx_ddddd between t2.entryDate - &runindays and t2.entryDate -1)<br/>)&#59<br/><br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_nonbenefit,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI14,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI15a2,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.Rx_ddddd, t1.rx_qty_amt, t1.total_cost as total_apprv,0 as amnt_pay_drug_plan, t2.entryDate), <br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(t1.rx_ddddd between t2.entryDate - &runinDays and t2.entryDate -1)<br/>)&#59<br/><br/>data VXI15a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI15a1 VXI15a2&#59<br/>run&#59<br/><br/>/*Sum to have total drug cost and the proportion paid by public drug plan*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI15a,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI15b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(key_hsn, EntryDate, sum(total_apprv) as total_Cost, sum(total_apprv) - sum(amnt_pay_drug_plan) as ThirdPartyPay),<br/>&nbsp&nbsp&nbsp&nbspgroupby = %str(key_hsn, EntryDate)<br/>)&#59<br/><br/>data VXI15c&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI15b&#59<br/>&nbsp&nbsp&nbsp&nbspThirdPartyPayPCT = ThirdPartyPay / total_Cost&#59<br/>&nbsp&nbsp&nbsp&nbspformat ThirdPartyPayCAT $20.&#59<br/>&nbsp&nbsp&nbsp&nbspif ThirdPartyPayPCT < .50 then ThirdPartyPayCAT =\"<50%\"&#59<br/>&nbsp&nbsp&nbsp&nbspelse ThirdPartyPayCAT =\">=50%\"&#59<br/>&nbsp&nbsp&nbsp&nbspThirdPartyPayPCT2=round(ThirdPartyPayPCT*100, 1)&#59<br/>run&#59<br/>/*%freq(data=VXI15c, table=ThirdPartyPayCAT)&#59*/<br/>%MakeCategories(<br/>    Data=VXI15c, <br/>    theVar=ThirdPartyPayPCT2,<br/>    theTargetVar=ThirdPartyPayPCT2_CAT,<br/>    theCutOffs=0 10 20 30 40 50 60 70 80 90 100, <br/>    dlmt=, <br/>    debug=, <br/>    closeSide=left,<br/>    target=VXI15d<br/>)&#59<br/>/*%freq(data=VXI15D, table=ThirdPartyPayPCT2_CAT)&#59<br/>&nbsp&nbsp&nbsp&nbsp%GetMeanStats(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata=VXI15D,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwhere=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupVars=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheVar=ThirdPartyPayPCT2,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheStats=mean median,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI15Tmp1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdebug=<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbspproc univariate data =  VXI15d normal&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvar ThirdPartyPayPCT2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsphistogram /normal&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>*/<br/><br/>/*Link the 3rd party pay variables to VXI14 */<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI14,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI15D,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI15,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.ThirdPartyPay as ThirdPartyPay_Pre365, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.ThirdPartyPayPCT as ThirdPartyPayPCT_Pre365, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.ThirdPartyPayCAT as ThirdPartyPayCAT_Pre365, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.ThirdPartyPayPCT2_CAT as ThirdPartyPayLevel_Pre365), <br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/><br/><br/>/*VXI16 the % paid by patient or 3rd party insurer of all drugs within 365 days since entry<br/>&nbsp&nbsp&nbsp&nbsp1. get all drug claims for patients in the cohort<br/>&nbsp&nbsp&nbsp&nbsp2. keep the claims within 365 since entry<br/>&nbsp&nbsp&nbsp&nbsp3. For the claim from step 2, estimate the % paid by patient or 3rd party insurer<br/>*/<br/>/*VXI16a, get drug claims within 365 days since entry*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_benefit,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI15,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI16a1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn,  t1.Rx_ddddd, t1.rx_qty_amt, t1.total_apprv,t1.amnt_pay_drug_plan, t2.entryDate), <br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(t1.rx_ddddd between t2.entryDate  and t2.entryDate +&followdays -1)<br/>)&#59<br/><br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_nonbenefit,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI15,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI16a2,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.Rx_ddddd, t1.rx_qty_amt, t1.total_cost as total_apprv,0 as amnt_pay_drug_plan, t2.entryDate), <br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(t1.rx_ddddd between t2.entryDate  and t2.entryDate +&followdays -1)<br/>)&#59<br/><br/>data VXI16a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI16a1 VXI16a2&#59<br/>run&#59<br/><br/>/*Sum to have total drug cost and the proportion paid by public drug plan*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI16a,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI16b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(key_hsn, EntryDate, sum(total_apprv) as total_Cost, sum(total_apprv) - sum(amnt_pay_drug_plan) as ThirdPartyPay),<br/>&nbsp&nbsp&nbsp&nbspgroupby = %str(key_hsn, EntryDate)<br/>)&#59<br/><br/>data VXI16c&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI16b&#59<br/>&nbsp&nbsp&nbsp&nbspThirdPartyPayPCT = ThirdPartyPay / total_Cost&#59<br/>&nbsp&nbsp&nbsp&nbspformat ThirdPartyPayCAT $20.&#59<br/>&nbsp&nbsp&nbsp&nbspif ThirdPartyPayPCT < .50 then ThirdPartyPayCAT =\"<50%\"&#59<br/>&nbsp&nbsp&nbsp&nbspelse ThirdPartyPayCAT =\">=50%\"&#59<br/>&nbsp&nbsp&nbsp&nbspThirdPartyPayPCT2=round(ThirdPartyPayPCT*100, 1)&#59<br/>run&#59<br/>/*%freq(data=VXI16c, table=ThirdPartyPayCAT)&#59*/<br/>%MakeCategories(<br/>    Data=VXI16c, <br/>    theVar=ThirdPartyPayPCT2,<br/>    theTargetVar=ThirdPartyPayPCT2_CAT,<br/>    theCutOffs=0 10 20 30 40 50 60 70 80 90 100, <br/>    dlmt=, <br/>    debug=, <br/>    closeSide=left,<br/>    target=VXI16d<br/>)&#59<br/>/*%freq(data=VXI16D, table=ThirdPartyPayPCT2_CAT)&#59<br/>&nbsp&nbsp&nbsp&nbsp%GetMeanStats(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata=VXI16D,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwhere=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupVars=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheVar=ThirdPartyPayPCT2,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheStats=mean median,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI16Tmp1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdebug=<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbspproc univariate data =  VXI16d normal&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvar ThirdPartyPayPCT2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsphistogram /normal&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>*/<br/><br/>/*Link the 3rd party pay variables to VXI15 */<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI15,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI16D,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI16,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.ThirdPartyPay as ThirdPartyPay_Post365, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.ThirdPartyPayPCT as ThirdPartyPayPCT_Post365, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.ThirdPartyPayCAT as ThirdPartyPayCAT_Post365, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.ThirdPartyPayPCT2_CAT as ThirdPartyPayLevel_Post365), <br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/><br/><br/>/*VXI 17, receiving PIM drugs within 365 days prior (exclusive) to the entry<br/>&nbsp&nbsp&nbsp&nbspthese drugs including, Anticholinergics, antipsychotics, antidepressants, Benzodiazpines<br/>&nbsp&nbsp&nbsp&nbspDINs were provided by Laura in the dropbox, also copied to P:\\Frailty(MaxwellC)_Bio43\\Documentation\\Doc from ON team\\PIM and ChEI DINS<br/>&nbsp&nbsp&nbsp&nbspDINS were imported by the program makePIMs<br/>*/<br/><br/>/* 1. get drug claims<br/>&nbsp&nbsp&nbsp&nbsp2. For patients in VXI16, determine whether or not the patient received 1+ dispensation of the PIM DINs within 30 days <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspprior (exclusive) to entry<br/>&nbsp&nbsp&nbsp&nbsp3. Indicate those received the interested PIMs&nbsp&nbsp&nbsp&nbsp<br/>*/<br/>/*VXI17a, get drug claims of ChEIs*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_benefit,<br/>&nbsp&nbsp&nbsp&nbspt2=localt.PIMS,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI17a1,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t2.class, t1.Rx_ddddd), <br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=din<br/>)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_nonbenefit,<br/>&nbsp&nbsp&nbsp&nbspt2=localt.PIMS,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI17a2,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t2.class, t1.Rx_ddddd), <br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=din<br/>)&#59<br/><br/>data VXI17a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI17a1 VXI17a2&#59<br/>run&#59<br/><br/><br/>/*VXI17b, keep the last drug specific claim closest to entryDate*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI16,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI17a,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI17B,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t2.Class), <br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn ,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(entryDate -365 <= rx_ddddd < entryDate)<br/>)&#59<br/><br/>/*transpose VXI17B, so as to have indicates for each class*/<br/>%transpose(data=VXI17B, target=VXI17c, rowhead=key_hsn, colhead=class, contents=class)&#59<br/><br/><br/>/*Link the PIM indicatorsto VXI16 */<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI16,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI17c,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI17,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.BENZO ne '', 1, 0) as BENZO_Pre365, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspifn(t2.PSYCHO ne '', 1, 0) as PSYCHO_Pre365, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspifn(t2.AntiDep ne '', 1, 0) as ANTIDEP_Pre365, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspifn(t2.AntiCHO ne '', 1, 0) as ANTICHO_Pre365), <br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/><br/><br/><br/>/*VXI 18, receiving PIM drugs within 365 days since (inclusive) to the entry<br/>&nbsp&nbsp&nbsp&nbspthese drugs including, Anticholinergics, antipsychotics, antidepressants, Benzodiazpines<br/>&nbsp&nbsp&nbsp&nbspDINs were provided by Laura in the dropbox, also copied to P:\\Frailty(MaxwellC)_Bio43\\Documentation\\Doc from ON team\\PIM and ChEI DINS<br/>&nbsp&nbsp&nbsp&nbspDINS were imported by the program makePIMs<br/>*/<br/><br/>/* 1. get drug claims<br/>&nbsp&nbsp&nbsp&nbsp2. For patients in VXI17, determine whether or not the patient received 1+ dispensation of the PIM DINs within 30 days <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspprior (exclusive) to entry<br/>&nbsp&nbsp&nbsp&nbsp3. Indicate those received the interested PIMs&nbsp&nbsp&nbsp&nbsp<br/>*/<br/>/*VXI18a, get drug claims of ChEIs*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_benefit,<br/>&nbsp&nbsp&nbsp&nbspt2=localt.PIMS,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI18a1,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t2.class, t1.Rx_ddddd), <br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=din<br/>)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_nonbenefit,<br/>&nbsp&nbsp&nbsp&nbspt2=localt.PIMS,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI18a2,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t2.class, t1.Rx_ddddd), <br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=din<br/>)&#59<br/><br/>data VXI18a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI18a1 VXI18a2&#59<br/>run&#59<br/><br/><br/>/*VXI18b, keep the last drug specific claim closest to entryDate*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI17,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI18a,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI18B,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t2.Class), <br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn ,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(entryDate  <= rx_ddddd < entryDate +&followdays)<br/>)&#59<br/><br/>/*transpose VXI18B, so as to have indicates for each class*/<br/>%transpose(data=VXI18B, target=VXI18c, rowhead=key_hsn, colhead=class, contents=class)&#59<br/><br/><br/>/*Link the PIM indicatorsto VXI16 */<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI17,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI18c,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI18,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.BENZO ne '', 1, 0) as BENZO_Post365, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspifn(t2.PSYCHO ne '', 1, 0) as PSYCHO_Post365, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspifn(t2.AntiDep ne '', 1, 0) as ANTIDEP_Post365, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspifn(t2.AntiCHO ne '', 1, 0) as ANTICHO_Post365), <br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/><br/>/*19. CAMH*/<br/>%get_CAMH( Data_Hosp=master_hosp, Data_msb=master_msb, Data_ed=master_ed_a2012, <br/>&nbsp&nbsp&nbsp&nbspstartDate=&dataStartDate, endDate=&DataEndDate, debug=1, dxDateCol=, target=VXI19a<br/>) &#59<br/>%print(data=VXI19a)&#59<br/>/*from the above, transpose and put the type of CAMH in one row for each patient*/<br/>%transpose(data=VXI19a, target=VXI19b, rowhead=key_hsn, colhead=camh_cat, contents=dxdate)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI18,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI19b,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI19c,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.npd as CAMH_NPD_Date, t2.SA as CAMH_SA_Date,t2.PSY as CAMH_PSY_Date), <br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/><br/>data VXI19&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI19c&#59<br/>&nbsp&nbsp&nbsp&nbsparray cAMHdates{3} CAMH_NPD_Date CAMH_SA_Date CAMH_PSY_Date&#59<br/>&nbsp&nbsp&nbsp&nbsparray CAMHPre_{3} &#59<br/>&nbsp&nbsp&nbsp&nbsparray camhPost_{3} &#59<br/>&nbsp&nbsp&nbsp&nbspdo i = 1 to 3&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*if there is no camh date, both pre and post are negative*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif cAMHdates(i) =. then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMHPre_(i) = 0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMHPost_(i) = 0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*if the camh date is before the entrydate, both pre and post are positive*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif cAMHdates(i) < entryDate then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMHPre_(i) = 1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMHPost_(i) = 1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*if the camh date is within the follow up period, the pre is negative, the post positive*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif entryDate <= cAMHdates(i) < entryDate + 365 then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMHPre_(i) = 0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMHPost_(i) =1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*if the camh date is after the follow up period, both are negative*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMHPre_(i) = 0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMHPost_(i) =0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsprename <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMHPre_1 = CAMH_NPD_Pre365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMHPre_2 = CAMH_SA_Pre365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMHPre_3 = CAMH_PSY_Pre365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMHPost_1 = CAMH_NPD_Post365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMHPost_2 = CAMH_SA_Post365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMHPost_3 = CAMH_PSY_Post365<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbspdrop i&#59<br/>run&#59<br/><br/>/*20 Charlson score*/<br/>/*for charlson score calculation, the following macro 'VarExist.sas' will be required.<br/>&nbsp&nbsp&nbsp&nbspHowever, it has conflict with the macro 'VarExist.sas' in MyMacros.sas.<br/>&nbsp&nbsp&nbsp&nbspAfter Calculating Charlson score, remember to reload MyMacros so as to load the same-name macro in MyMacros<br/>*/<br/>%include 'R:\\Macros\\Util\\VarExist.sas' /LRECL=32767&#59<br/>%Charlson_Elixhauser_Score_local(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp charlson=Y, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp elixhauser=N, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp msb_xtrc_start_dt=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp msb_xtrc_end_dt=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp hosp_file=master_hosp, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp msb_file=master_msb, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp hsn_file=VXI19, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp ref_date_var=EntryDate, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp charlson_var_out=, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp elix_postfix=elix_,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp additionalByVar=, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp ds_out=VXI20,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp days_lookback=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp debug=N<br/>)&#59<br/>%let nccSASTools=S:\\Collaborative_researchers\\Shenzhen\\My Project\\Projects\\DoNotDelete Common Macros\\MyMacros.sas&#59<br/>%include \"&nccSASTools\" /LRECL=32767&#59<br/><br/><br/>/*mortality*/<br/>%print(data=master_verif_mort)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI20,<br/>&nbsp&nbsp&nbsp&nbspt2=master_verif_mort,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI21a,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.ddt_novit as MortDate),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/><br/>data VXI21&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI21a&#59<br/>&nbsp&nbsp&nbsp&nbspDeath_Pre365 =0&#59Death_Post365 =0&#59<br/>&nbsp&nbsp&nbsp&nbspif MortDate ne . and MortDate < EntryDate then Death_Pre365=1&#59<br/>&nbsp&nbsp&nbsp&nbspif MortDate ne . and EntryDate <= MortDate < EntryDate + &followdays then Death_Post365=1&#59<br/>Run&#59<br/>%freq(data=VXI21, table = Death_Pre365)&#59<br/>%freq(data=VXI21, table = Death_Post365)&#59<br/><br/>/*22. lost of coverage during follow up */<br/>%getCoverGAPs(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprawfile=master_phrs_cov, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspptFile=VXI21, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheCovXtrc=, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspstart=EntryDate, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend= %str(EntryDate+&followdays-1), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI22a, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcohortgroup=, <br/>&nbsp&nbsp&nbsp&nbspdebug=1<br/>)&#59<br/>/*from above, get those with coverage gaps*/<br/>data VXI22b&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI22a&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn EntryDate start<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcoverstart<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcoverEnd<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdays<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcoverPCT<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgaps<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgapPCT<br/>&#59<br/>&nbsp&nbsp&nbsp&nbspif gaps ne . and gaps > 0&#59<br/>run&#59<br/>/*make a distinct list from above*/<br/>%sort(data=VXI22b, sorter = key_hsn entryDate coverstart coverend)&#59<br/>data VXI22c&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI22b&#59<br/>&nbsp&nbsp&nbsp&nbspby key_hsn entryDate coverstart coverend&#59<br/>&nbsp&nbsp&nbsp&nbspif first.key_hsn&#59<br/>run&#59<br/><br/>/*link back to VXI21, if the patient appears in VXI22C, indicate as lost of coverage in post365*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI21,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI22C,<br/>&nbsp&nbsp&nbsp&nbspTarget=VXI22,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.key_hsn = \"\", 0,1) as LostCov_Post365, t2.coverstart as Date_LostCov ),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/><br/>/*23. LTC stay*/<br/>/*from the mds_ltc file, get ltc stay records*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI22,<br/>&nbsp&nbsp&nbsp&nbspt2=master_mds_ltc,<br/>&nbsp&nbsp&nbsp&nbsptarget= VXI23a,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.entryDate, t2.key_hsn, t2.mds_ab1 as adm_date, t2.mds_r4 as dschg_date ),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>/*concatenate the overlaping periods*/<br/>%cleanHospital(<br/>&nbsp&nbsp&nbsp&nbspdata=VXI23a, <br/>&nbsp&nbsp&nbsp&nbsptarget=VXI23b, <br/>&nbsp&nbsp&nbsp&nbspdxCol=,<br/>&nbsp&nbsp&nbsp&nbspmdxCol=, <br/>&nbsp&nbsp&nbsp&nbspintvnCol=, <br/>&nbsp&nbsp&nbsp&nbspstartD=,<br/>&nbsp&nbsp&nbsp&nbspendD=,<br/>&nbsp&nbsp&nbsp&nbspinst_num=,<br/>&nbsp&nbsp&nbsp&nbspMaxGap=1, <br/>&nbsp&nbsp&nbsp&nbspincldHN=0, <br/>&nbsp&nbsp&nbsp&nbspkeep=EntryDate,<br/>&nbsp&nbsp&nbsp&nbspmaxLenD=,<br/>&nbsp&nbsp&nbsp&nbspmaxLenM=,<br/>&nbsp&nbsp&nbsp&nbspmaxLenI=,<br/>&nbsp&nbsp&nbsp&nbspkeepTmp=1<br/>)&#59<br/><br/>%distinct(data=VXI23b, target=VXI23c, vars=%str(key_hsn), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str(adm_date between entryDate and entryDate +&followdays-1 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor dschg_date between entryDate and entryDate +&followdays-1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor adm_date < entryDate and dschg_date > entryDate +&followdays-1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp))&#59<br/><br/>/*Link to VSZ22, indicate those having LTC stay*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI22,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI23c,<br/>&nbsp&nbsp&nbsp&nbsptarget= VXI23,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.key_hsn = \"\", 0, 1) as LTCStay_Post365 ),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/><br/><br/>/*24. Chronic Conditions (CCSDD definition) within 365 days prior to entry. The data has been prepared. file name and path <br/>&nbsp&nbsp&nbsp&nbspdefined in Local Settings<br/>*/<br/><br/>/*from the conditions, get a list of distinct key_hsn - chronic conditions for patients in VXI23*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI23,<br/>&nbsp&nbsp&nbsp&nbspt2=&theChronicConditionData,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI24a,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.entryDate, t2.disease as ChronicD),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspjvars=%str(key_hsn),<br/>&nbsp&nbsp&nbsp&nbspfilters=%str( t2.dzStartDate between t1.EntryDate -&runindays and t1.EntryDate -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp t2.dzEndDate between t1.EntryDate -&runindays and t1.EntryDate -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp or<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  t2.dzStartDate < t1.EntryDate -&runindays and t2.dzEndDate > t1.EntryDate -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/><br/>data VXI24b&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI24a&#59<br/>&nbsp&nbsp&nbsp&nbsplength ChronicD $50.&#59<br/>&nbsp&nbsp&nbsp&nbspChronicD2='CC_Pre365_' || strip(ChronicD) &#59<br/>&nbsp&nbsp&nbsp&nbspChronicD3=1&#59<br/>run&#59<br/><br/>%transpose(data=VXI24b, target=VXI24c, rowhead=key_hsn, colhead=ChronicD2, contents=ChronicD3)&#59<br/><br/>/*link the above back to VXI23*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI23,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI24c,<br/>&nbsp&nbsp&nbsp&nbsptarget= VXI24d,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=*,<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/><br/>data VXI24&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI24d&#59<br/>&nbsp&nbsp&nbsp&nbsparray tmp {*} cc_pre365_:&#59<br/>&nbsp&nbsp&nbsp&nbspdo i = 1 to dim(tmp)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif tmp(i) =. then tmp(i)=0&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdrop i&#59<br/>run&#59<br/><br/>/*25. Chronic Conditions (CCSDD definition) within 365 days prior to entry. The data has been prepared. file name and path <br/>&nbsp&nbsp&nbsp&nbspdefined in Local Settings<br/>*/<br/>/*from the conditions, get a list of distinct key_hsn - chronic conditions for patients in VXI23*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI24,<br/>&nbsp&nbsp&nbsp&nbspt2=&theChronicConditionData,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI25a,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.entryDate, t2.disease as ChronicD),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspjvars=%str(key_hsn),<br/>&nbsp&nbsp&nbsp&nbspfilters=%str( t2.dzStartDate between t1.EntryDate and t1.EntryDate +&followdays -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp t2.dzEndDate between t1.EntryDate  and t1.EntryDate +&followdays -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp or<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  t2.dzStartDate < t1.EntryDate and t2.dzEndDate > t1.EntryDate +&followdays -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/><br/>data VXI25b&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI25a&#59<br/>&nbsp&nbsp&nbsp&nbsplength ChronicD $50.&#59<br/>&nbsp&nbsp&nbsp&nbspChronicD2='CC_Post365_' || strip(ChronicD) &#59<br/>&nbsp&nbsp&nbsp&nbspChronicD3=1&#59<br/>run&#59<br/><br/>%transpose(data=VXI25b, target=VXI25c, rowhead=key_hsn, colhead=ChronicD2, contents=ChronicD3)&#59<br/><br/>/*link the above back to VXI24*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI24,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI25c,<br/>&nbsp&nbsp&nbsp&nbsptarget= VXI25d,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=*,<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/><br/>data VXI25&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI25d&#59<br/>&nbsp&nbsp&nbsp&nbsparray tmp {*} cc_post365_:&#59<br/>&nbsp&nbsp&nbsp&nbspdo i = 1 to dim(tmp)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif tmp(i) =. then tmp(i)=0&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdrop i&#59<br/>run&#59<br/><br/>/*26. pregnancy<br/>pregnancy (UltraSound Project, too complicated. eventually using the CCDSS case definition, which is used for exclusion in definition of CCDSS chronic conditions)<br/>the code of pregancy was from the file A12_CoMorb_ICDDX in the ChronicPop's remoteS folder<br/><br/>('641', '642', '643', '644', '645', '646', '647', '648', '649', '650', '651', '652', '653', '654', '655', '656', '657', '658', '659', '660', '661', '662', '663', '664', '665', '666', '667', '668', '669', '670', '671', '672', '673', '674', '675', '676', 'V27', 'O10', 'O11', 'O12', 'O13', 'O14', 'O15', 'O16', 'O17', 'O18', 'O19', 'O21', 'O22', 'O23', 'O24', 'O25', 'O26', 'O27', 'O28', 'O29', 'O30', 'O31', 'O32', 'O33', 'O34', 'O35', 'O36', 'O37', 'O38', 'O39', 'O40', 'O41', 'O42', 'O43', 'O44', 'O45', 'O46', 'O47', 'O48', 'O49', 'O50', 'O51', 'O52', 'O53', 'O54', 'O55', 'O56', 'O57', 'O58', 'O59', 'O60', 'O61', 'O62', 'O63', 'O64', 'O65', 'O66', 'O67', 'O68', 'O69', 'O70', 'O71', 'O72', 'O73', 'O74', 'O75', 'O76', 'O77', 'O78', 'O79', 'O80', 'O81', 'O82', 'O83', 'O84', 'O85', 'O86', 'O87', 'O88', 'O89', 'O90', 'O91', 'O92', 'O93', 'O94', 'O95', 'O98', 'O99', 'Z37')<br/>*/<br/><br/>%let pregCodes=%str('641', '642', '643', '644', '645', '646', '647', '648', '649', '650', '651', '652', '653', '654', <br/>'655', '656', '657', '658', '659', '660', '661', '662', '663', '664', '665', '666', '667', '668', '669', '670', '671', '672', <br/>'673', '674', '675', '676', 'V27', 'O10', 'O11', 'O12', 'O13', 'O14', 'O15', 'O16', 'O17', 'O18', 'O19', 'O21', 'O22', 'O23', <br/>'O24', 'O25', 'O26', 'O27', 'O28', 'O29', 'O30', 'O31', 'O32', 'O33', 'O34', 'O35', 'O36', 'O37', 'O38', 'O39', 'O40', <br/>'O41', 'O42', 'O43', 'O44', 'O45', 'O46', 'O47', 'O48', 'O49', 'O50', 'O51', 'O52', 'O53', 'O54', 'O55', 'O56', 'O57', <br/>'O58', 'O59', 'O60', 'O61', 'O62', 'O63', 'O64', 'O65', 'O66', 'O67', 'O68', 'O69', 'O70', 'O71', 'O72', 'O73', 'O74', 'O75', <br/>'O76', 'O77', 'O78', 'O79', 'O80', 'O81', 'O82', 'O83', 'O84', 'O85', 'O86', 'O87', 'O88', 'O89', 'O90', 'O91', 'O92', 'O93', <br/>'O94', 'O95', 'O98', 'O99', 'Z37')&#59<br/><br/>/*hospital*/<br/>data VXI26a&#59<br/>&nbsp&nbsp&nbsp&nbspset master_hosp&#59<br/>&nbsp&nbsp&nbsp&nbspsrc='hp'&#59<br/>&nbsp&nbsp&nbsp&nbsparray dxs $ dx_code_1 - dx_code_25&#59<br/>&nbsp&nbsp&nbsp&nbsparray cdxs $ conv_dx_code_1 - conv_dx_code_25&#59<br/>&nbsp&nbsp&nbsp&nbspformat type $5.&#59<br/>&nbsp&nbsp&nbsp&nbspformat code $10.&#59<br/>&nbsp&nbsp&nbsp&nbspdo i = 1 to 25&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif dxs(i) in: (&pregCodes) then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspoutput&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspleave&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif cdxs(i) in: (&pregCodes)  then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspoutput&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspleave&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn adm_date dschg_date src&#59<br/>run&#59<br/><br/>data VXI26b&#59<br/>&nbsp&nbsp&nbsp&nbspset master_msb&#59<br/>&nbsp&nbsp&nbsp&nbspsrc='mb'&#59<br/>&nbsp&nbsp&nbsp&nbspif diag in:(&pregCodes) then output&#59<br/>&nbsp&nbsp&nbsp&nbspadm_date=dos&#59<br/>&nbsp&nbsp&nbsp&nbspdschg_date=dos&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn adm_date dschg_date src&#59<br/>run&#59<br/><br/>data VXI26c&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI26a VXI26b&#59<br/>run&#59<br/><br/>/*link to VXI25, indicate those having preg during pre365*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI26c,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI25,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI26d,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, 1 as preg_pre365),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.adm_date between t2.entryDate -1 and t2.entryDate - &runindays<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.dschg_date between t2.entryDate -1 and t2.entryDate - &runindays<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.adm_date < t2.entryDate-&runindays and t1.dschg_date > t2.entryDate -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/>/*link to VXI25, indicate those having preg during post365*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI26c,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI25,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI26e,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, 1 as preg_post365),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.adm_date between t2.entryDate  and t2.entryDate + &followdays -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.dschg_date between t2.entryDate  and t2.entryDate + &followdays -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.adm_date < t2.entryDate and t1.dschg_date > t2.entryDate + &followdays -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/>/*link back to VXI25*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI25,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI26d,<br/>&nbsp&nbsp&nbsp&nbspTarget=VXI26f,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.key_hsn = \"\", 0,1) as preg_pre365 ),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI26f,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI26e,<br/>&nbsp&nbsp&nbsp&nbspTarget=VXI26,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.key_hsn = \"\", 0,1) as preg_post365 ),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>%freq(data=VXI26, table=preg_pre365*preg_post365)&#59<br/><br/><br/>/*VXI27<br/>to count # of prescribers<br/>of AHTN OH Statin medications<br/>1) within 1 year prior to entryDate<br/>2) within 1 year during follow up<br/>*/<br/><br/>/*claims of STATIN*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_benefit,<br/>&nbsp&nbsp&nbsp&nbspt2=locald.statindins,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI27a1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.Rx_ddddd, t1.key_prscr_num),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=din,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(docslushcode='N')<br/>)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_nonbenefit,<br/>&nbsp&nbsp&nbsp&nbspt2=locald.statindins,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI27a2,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.Rx_ddddd, t1.key_prscr_num),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=din,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(docslushcode='N')<br/>)&#59<br/><br/>/*claims of antiHTN*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_benefit,<br/>&nbsp&nbsp&nbsp&nbspt2=locald.ahtndins,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI27a3,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.Rx_ddddd, t1.key_prscr_num),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=din,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(docslushcode='N')<br/>)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_nonbenefit,<br/>&nbsp&nbsp&nbsp&nbspt2=locald.ahtndins,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI27a4,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.Rx_ddddd, t1.key_prscr_num),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=din,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(docslushcode='N')<br/>)&#59<br/><br/>/*claims of oh*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_benefit,<br/>&nbsp&nbsp&nbsp&nbspt2=locald.ohdins,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI27a5,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.Rx_ddddd, t1.key_prscr_num),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=din,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(docslushcode='N')<br/>)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_nonbenefit,<br/>&nbsp&nbsp&nbsp&nbspt2=locald.ohdins,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI27a6,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.Rx_ddddd, t1.key_prscr_num),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=din,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(docslushcode='N')<br/>)&#59<br/><br/>/*distinct records of statins*/<br/>data VXI27b1&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI27a1 VXI27a2&#59<br/>&nbsp&nbsp&nbsp&nbsptheMedClass='statin'&#59<br/>run&#59<br/>%distinct(data=VXI27b1, target=VXI27b2, vars=*)&#59<br/><br/>data VXI27b3&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI27a3 VXI27a4&#59<br/>&nbsp&nbsp&nbsp&nbsptheMedClass='ahtn'&#59<br/>run&#59<br/>%distinct(data=VXI27b3, target=VXI27b4, vars=*)&#59<br/><br/>data VXI27b5&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI27a5 VXI27a6&#59<br/>&nbsp&nbsp&nbsp&nbsptheMedClass='oh'&#59<br/>run&#59<br/>%distinct(data=VXI27b5, target=VXI27b6, vars=*)&#59<br/><br/>/*put all records together*/<br/>data VXI27C&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI27b2 VXI27B4 VXI27B6&#59<br/>run&#59<br/><br/>/*link to VXI26 to select records within look back*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI27C,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI26,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI27D1,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.key_prscr_num, t1.theMedClass, 'pre365' as thePeriod),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=%str(key_hsn),<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(t1.rx_ddddd between t2.entryDate -365 and t2.entryDate -1)<br/>)&#59<br/><br/>/*link to VXI26 to select records within follow up*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI27C,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI26,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI27D2,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.key_prscr_num, t1.theMedClass, 'follow' as thePeriod),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=%str(key_hsn),<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(t1.rx_ddddd between t2.entryDate and t2.entryDate+&followdays-1)<br/>)&#59<br/><br/>/*For each patient, # of distinct prescriber of statin ahtn oh in pre365 days*/<br/>%distinct(data=VXI27D1, target=VXI27E1a, vars=%str(key_hsn, key_prscr_num))&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI27E1a,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI27E1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(key_hsn, count(key_prscr_num) as Pre365_Prscr_statinAHTNOH),<br/>&nbsp&nbsp&nbsp&nbspgroupby=key_hsn<br/>)&#59<br/>/*For each patient, # of distinct category of statin ahtn oh (1 to 3 categories) in pre365 days*/<br/>%distinct(data=VXI27D1, target=VXI27E2a, vars=%str(key_hsn, theMedClass))&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI27E2a,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI27E2,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(key_hsn, count(theMedClass) as Pre365_MedClass_statinAHTNOH),<br/>&nbsp&nbsp&nbsp&nbspgroupby=key_hsn<br/>)&#59<br/><br/>/*For each patient, # of distinct prescriber of statin ahtn oh in follow up*/<br/>%distinct(data=VXI27D2, target=VXI27E3a, vars=%str(key_hsn, key_prscr_num))&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI27E3a,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI27E3,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(key_hsn, count(key_prscr_num) as Followup_Prscr_statinAHTNOH),<br/>&nbsp&nbsp&nbsp&nbspgroupby=key_hsn<br/>)&#59<br/>/*For each patient, # of distinct category of statin ahtn oh (1 to 3 categories) in pre365 days*/<br/>%distinct(data=VXI27D2, target=VXI27E4a, vars=%str(key_hsn, theMedClass))&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI27E4a,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI27E4,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(key_hsn, count(theMedClass) as Followup_MedClass_statinAHTNOH),<br/>&nbsp&nbsp&nbsp&nbspgroupby=key_hsn<br/>)&#59<br/><br/>/*link to VXI26 to have the vars*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI26,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI27E1,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI27F1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.Pre365_Prscr_statinAHTNOH=., 0, Pre365_Prscr_statinAHTNOH) as Pre365_Prscr_statinAHTNOH ),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI27f1,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI27E2,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI27F2,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.Pre365_MedClass_statinAHTNOH=., 0, Pre365_MedClass_statinAHTNOH) as Pre365_MedClass_statinAHTNOH ),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI27f2,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI27E3,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI27F3,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.Followup_Prscr_statinAHTNOH=., 0, Followup_Prscr_statinAHTNOH) as Followup_Prscr_statinAHTNOH ),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI27f3,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI27E4,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.Followup_MedClass_statinAHTNOH=., 0, Followup_MedClass_statinAHTNOH) as Followup_MedClass_statinAHTNOH ),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/><br/>/*!!! to be deleted: <br/>&nbsp&nbsp&nbsp&nbspdelete those not covered, deceased during follow up<br/>*/<br/>%print(data=VXI)&#59<br/><br/>/*MortDate&nbsp&nbsp&nbsp&nbspDeath_Pre365&nbsp&nbsp&nbsp&nbspDeath_Post365&nbsp&nbsp&nbsp&nbspLostCov_Post365&nbsp&nbsp&nbsp&nbspDate_LostCov&nbsp&nbsp&nbsp&nbspLTCStay_Post365*/<br/>data _tmp1&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI&#59 <br/>&nbsp&nbsp&nbsp&nbspif LostCov_Post365=0&#59<br/>run&#59<br/><br/>data _tmp2&#59<br/>&nbsp&nbsp&nbsp&nbspset _tmp1&#59 <br/>&nbsp&nbsp&nbsp&nbspif Death_Post365=0&#59<br/>run&#59<br/><br/>data _tmp3&#59<br/>&nbsp&nbsp&nbsp&nbspset _tmp2&#59 <br/>&nbsp&nbsp&nbsp&nbspif LTCStay_Post365=0 and preg_post365=0 and preg_pre365 =0&#59<br/>run&#59<br/><br/>data VXI&#59<br/>&nbsp&nbsp&nbsp&nbspset _tmp3&#59<br/>run&#59<br/><br/>data VXI&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI&#59<br/>&nbsp&nbsp&nbsp&nbspif QAIPPE=. then QAIPPE=9&#59<br/>run&#59<br/><br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localTargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VXI.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VXI.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/>%exportvars(data=VXI)&#59<br/><br/>s///<br/>t///","children":[{"idx":"2748d200-0b28-4499-9d86-1f1c1850b6a2","name":"VXJ_A Physician Attrs","NodeDescription":"///t<br/>///s<br/>/*VXJ_A Physician Covariates<br/>Note: this part is only for attributes of UCPF1 and UCPW1 (the first usual care provider in follow up or from runin through followup<br/><br/>Doctor panel size<br/>Doctor workload<br/><br/>Fee for service or NFFS<br/>Familarity with statin (% of statin Rx in all Rx)<br/><br/>*/<br/><br/><br/><br/><br/>/*VXJ_A0. Preparing Source Data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXI.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXI.sas7bdat)<br/>)&#59<br/>/*from the doc mobile file, get the spec of these docs from the doc info file*/<br/>%vbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\Master_MSB_DocInfo.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(Master_MSB_DocInfo.sas7bdat)<br/>)&#59<br/><br/><br/>/*VXJ_A1. For physicians in VXI, get doc sex age education, spec from VXJ_A1*/<br/>/*VXJ_A1a. From VXI, get the first UCP in followup, and in the whole period from runin through followup<br/>&nbsp&nbsp&nbsp&nbspuse scan() to get the physician id*/<br/>data VXJ_A1a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn key_doc_num type&#59<br/>&nbsp&nbsp&nbsp&nbsplength key_doc_num $11.&#59<br/>&nbsp&nbsp&nbsp&nbspkey_doc_num = scan(UCPF1, 1, \":\")&#59 type='UCPF1'&#59 output&#59<br/>&nbsp&nbsp&nbsp&nbspkey_doc_num = scan(UCPW1, 1, \":\")&#59 type='UCPW1'&#59 output&#59&nbsp&nbsp&nbsp&nbsp<br/>run&#59<br/>/*VXJ_A21b. keep the distinct record of doc ids, as the doc properties are not time-specific*/<br/>%distinct(data=VXJ_A1a, target=VXJ_A1, vars=key_doc_num)&#59<br/><br/><br/>/*VXJ_A2. Clean up the doc properties<br/>&nbsp&nbsp&nbsp&nbspThe original file is quite messy:<br/>&nbsp&nbsp&nbsp&nbsp1) It does not seems to be time specific<br/>&nbsp&nbsp&nbsp&nbsp2) For the same docID, the field values (e.g., sex) can be missing in some records.<br/>*/<br/>/*VXJ_A2a keep records in which sex is not missing*/<br/>%macro cleanDoc(docVar=)&#59<br/>&nbsp&nbsp&nbsp&nbsp%local docVar&#59<br/>&nbsp&nbsp&nbsp&nbspData VXJ_A2a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset Master_MSB_DocInfo&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif &docVar ne ''&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif report_end =. then report_end=today()&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep key_doc_num &docVar  report_end&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp/*VXJ_A2b sort and keep the lastest record of a doc*/<br/>&nbsp&nbsp&nbsp&nbsp%sort(data=VXJ_A2a, sorter=key_doc_num report_end)&#59<br/>&nbsp&nbsp&nbsp&nbspdata VXJ_A2b&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXJ_A2a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspby key_doc_num report_end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif last.key_doc_num&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp/*VXJ_A2c, attach the selected property to the docs in VXJ_A1*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXJ_A1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXJ_A2b,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXJ_A1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.&docVar as Doc&docVar), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjvars=key_doc_num<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp%freq(data=VXJ_A1, table=Doc&docVar)&#59<br/>%mend cleanDoc&#59<br/>%cleanDoc(docVar=Sex)&#59<br/>%cleanDoc(docVar=BIRTH_YEAR)&#59<br/>%cleanDoc(docVar=grad_year)&#59<br/>%cleanDoc(docVar=GRAD_GEO_COUNTRY)&#59<br/>/*clean up the sex category, there were funny values like D, J, etc.*/<br/><br/>/*VXJ_A3. Link the cleaned properties to distinct docs appeared in the cohort*/<br/>data VXJ_A3a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_A1&#59<br/>&nbsp&nbsp&nbsp&nbspif strip(upcase(DocSex='F')) then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocSexN=1&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif strip(upcase(DocSex))='M' then DocSexN=0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse DocSexN=-1&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>run&#59<br/>/*the grad_geo see the file \"PHMB_File_Descptn.xls\", a link can be found at quincy desktop, file saved in U<br/>&nbsp&nbsp&nbsp&nbspand mailed to SHY516 on Jan 31, 2019*/<br/>data VXJ_A3&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_A3a&#59<br/>&nbsp&nbsp&nbsp&nbsplength DocGrad_Country $10.&#59<br/>&nbsp&nbsp&nbsp&nbspif DocGRAD_GEO_COUNTRY=\"\" then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocGrad_Country=\"\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocGradCountryCode=.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocGrad_CountryN=.&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp/*GRAD_GEO_COUNTRY = \"1\" to \"19\" are CANADA grads, the rest are foreign grads*/<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocGradCountryCode = input(strip(DocGRAD_GEO_COUNTRY), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif  DocGradCountryCode <= 19 then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocGrad_Country=\"CANADA\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocGrad_CountryN=1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocGrad_Country = \"FOREIGN\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocGrad_CountryN=0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdrop DocGRAD_GEO_COUNTRY&#59<br/>&nbsp&nbsp&nbsp&nbsplength docAttrs $20.&#59<br/>&nbsp&nbsp&nbsp&nbspdocAttrs = strip(docSex) || \":\" || strip(DocBirth_Year) || \":\" || strip(DocGrad_Year) || \":\" || <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspstrip(DocGradCountryCode) || \":\" || strip(DocGrad_CountryN)<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>run&#59<br/>%freq(data=VXJ_A3, table=DocGrad_Country)&#59<br/><br/><br/><br/>/*VXJ_A4, link the properties to docs in the cohort VXI. For UCPF1, add the properties into the file*/<br/>data VXJ_A4a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI&#59<br/>&nbsp&nbsp&nbsp&nbsplength key_doc_num $11.&#59<br/>&nbsp&nbsp&nbsp&nbspkey_doc_num = scan(UCPF1, 1, \":\")&#59<br/>run&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXJ_A4a,<br/>&nbsp&nbsp&nbsp&nbspt2=VXJ_A3,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXJ_A4b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifc(t2.DocAttrs='', '.:.:.:.:.', t2.DocAttrs) as DocAttrs length=20), <br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num<br/>)&#59<br/>data VXJ_A4&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_A4b&#59<br/>&nbsp&nbsp&nbsp&nbspUCPF1 =strip(UCPF1) || \":\" || strip(DocAttrs)&#59<br/>&nbsp&nbsp&nbsp&nbspdrop key_doc_num DocAttrs&#59<br/>run&#59<br/><br/>/*VXJ_A5, repeat VXJ_A4, this time, for UCPW1, add the properties into the file*/<br/>data VXJ_A5a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_A4&#59<br/>&nbsp&nbsp&nbsp&nbsplength key_doc_num $11.&#59<br/>&nbsp&nbsp&nbsp&nbspkey_doc_num = scan(UCPW1, 1, \":\")&#59<br/>run&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXJ_A5a,<br/>&nbsp&nbsp&nbsp&nbspt2=VXJ_A3,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXJ_A5b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifc(t2.DocAttrs='', '.:.:.:.:.', t2.DocAttrs) as DocAttrs length=20), <br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num<br/>)&#59<br/>data VXJ_A&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_A5b&#59<br/>&nbsp&nbsp&nbsp&nbspUCPW1 =strip(UCPW1) || \":\" || strip(DocAttrs)&#59<br/>&nbsp&nbsp&nbsp&nbspdrop key_doc_num DocAttrs&#59<br/>run&#59<br/><br/><br/><br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localTargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VXJ_A.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VXJ_A.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/><br/><br/>%exportvars(data=VXJ_A)&#59<br/><br/><br/>s///<br/>t///","children":[],"custparents":[{"idx":"CodeTask-cEu9SJeuduGAkyLp"}]},{"idx":"b44742c2-f75c-481d-8c5c-c83d22416401","name":"VXJ_B DOC_MSB_ATTRs","NodeDescription":"///t<br/>///s<br/>/*VXJ_B, Get MSB claims of GPs in VXJ_A, <br/>count % of claims as FFS/NFFS in the specified period (2 years prior and 1 year after the EntryDate) <br/>Note, the FFS/NFFS is based all doc's services to ALL patients, not only to the cohort members. <br/>&nbsp&nbsp&nbsp&nbspIt is more appropriate to count visits to ALL patients, but within the 2 year period around the entry dates. <br/>&nbsp&nbsp&nbsp&nbspe.g., the entry date is 2012-1-1, then the doc's pay type is determined by the % of FFS of this doc to all his patients<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspbetween 2011-1-1 and 2013-12-31.<br/>*/<br/><br/><br/><br/>/*VXJ_B0. Prepare source data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXJ_A.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXJ_A.sas7bdat)<br/>)&#59<br/>/*the MSB data is too big, only do it for once.*/<br/>%macro prepareMSBData&#59<br/>&nbsp&nbsp&nbsp&nbsp%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_msb_pop.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_msb_pop.sas7bdat)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp/*the original file is too big, make distinct records and make it smaller<br/>&nbsp&nbsp&nbsp&nbspThis time, claims of all spec will be kept. */<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=Master_MSB_POP,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=localt.VXJ_B0a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(key_hsn, key_doc_num, dos,  ifc(t1.mode='1', 'FFS', 'NFFS' ) as PayMode length=4),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnum_srv ne 0<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLOS NOT in ('B','2','K','9')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspMODE ne 'Z'<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsporderby=%str(key_hsn, key_doc_num,  dos, PayMode)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp/*claims of the same patient-doc-date should be treated as a unique encounter. In the above, it could be that<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthe same patient-doc-date could appear twice, each for a different paymode. <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspIn that case, keep the same patient-doc-date records of the FFS type. The reason is that at least part of such claims <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwere indicated as FFS mode*/<br/>&nbsp&nbsp&nbsp&nbspdata localt.VXJ_B0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset localt.VXJ_B0a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspby key_hsn key_doc_num dos paymode&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif first.dos&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbspproc datasets nolist lib=localt&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete VXJ_B0a&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp/*zip the file VXJ_B0, and delete the unzipped file (it is too large)*/<br/>&nbsp&nbsp&nbsp&nbsp%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=%str(&localTargetPath), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=VXJ_B0.zip, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=VXJ_B0.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcDir=&localTargetPath<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbspproc datasets nolist lib=localt&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete VXJ_B0&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>%mend prepareMSBData&#59<br/>/*%prepareMSBData&#59*/<br/><br/><br/><br/>/*VXJ_B1. Get UCPF1 and UCPW1 from VXJ_A. These doctors are specific by patient and entrydate*/<br/>/*VXJ_B1a. From VXJ_A, get the first UCP in followup, and in the whole period from runin through followup<br/>&nbsp&nbsp&nbsp&nbspuse scan() to get the physician id*/<br/>data VXJ_B1a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_A&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn entryDate key_doc_num type&#59<br/>&nbsp&nbsp&nbsp&nbsplength key_doc_num $11.&#59<br/>&nbsp&nbsp&nbsp&nbspkey_doc_num = scan(UCPF1, 1, \":\")&#59 type='UCPF1'&#59 output&#59<br/>&nbsp&nbsp&nbsp&nbspkey_doc_num = scan(UCPW1, 1, \":\")&#59 type='UCPW1'&#59 output&#59&nbsp&nbsp&nbsp&nbsp<br/>run&#59<br/>/*VXJ_B1b. keep the distinct record of period-specific doc ids*/<br/>%distinct(data=VXJ_B1a, target=VXJ_B1, vars=%str(entryDate, key_doc_num))&#59<br/><br/>/*VXJ_B2. From above, select claims of the docs between entrydate -365 and entrydate +364*/<br/>/*VXJ_B2, MSB visits within 1 year before and 1 year after entryDate<br/>&nbsp&nbsp&nbsp&nbspi.e., to have visits in each specific period defined by entrydate and doc<br/>&nbsp&nbsp&nbsp&nbspThere are millions of MSB claims, and there are 60K doc records (by specific entrydate)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspThe intermediate temp data will be huge if run by a single SQL query.<br/>&nbsp&nbsp&nbsp&nbspThe following is to bring the MSB records by quarter and aggregate the results. <br/>*/<br/><br/>%let theDocs_VXJ = VXJ_B1&#59<br/><br/>%macro makeVXJ_B2&#59<br/>&nbsp&nbsp&nbsp&nbsp%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\VXJ_B0.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXJ_B0.sas7bdat)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp%local i j k&#59<br/>&nbsp&nbsp&nbsp&nbsp%let k=0&#59<br/>/*&nbsp&nbsp&nbsp&nbsploop for each year between 2010 and 2018*/<br/>&nbsp&nbsp&nbsp&nbsp%do i = 2011 %to 2018&#59  /*should be from 2010 to 2018*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%loop for each quater*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%do j = 0 %to 0 %by 12&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*get the msb claims within the current quater*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata makeVXJ_B2_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXJ_B0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwhere year(dos) = &i and<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmonth(dos) between %eval(&j +1) and %eval(&j + 12)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*get the doc and period specific claims.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfollowing are the requirements:<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp1. count the N_encounters by physician, period, and payMode (i.e., grouped by entryDate, doc id , and paymode, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand count # encounters)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2. count the # of patients by physician and  period (i.e., grouped by entryDate, doc id,  count the # of distinct patients)<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTo save time, we'll put the 2 requirements into one omnibus.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp1) aggregate the # encounters per physician-payMode-entrydate-patient (Note that the patient here refers to<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspall patients, not only the cohort members) <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=makeVXJ_B2_tmp1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=&theDocs_VXJ,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=makeVXJ_B2_tmp3,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t2.entryDate, t1.key_doc_num, t1.PayMode, t1.key_hsn, count(t1.key_hsn) as N_Visits),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjvars=key_doc_num,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupby=%str(t2.entryDate, t1.key_doc_num, t1.PayMode, t1.key_hsn),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.dos between t2.entrydate -365 and t2.entryDate +365-1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*From the above, make sums by two ways. */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*&nbsp&nbsp&nbsp&nbspa) sum # visits by physician, period, and payMode (i.e., grouped by entryDate, doc id , and paymode, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand count # encounters)&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNote: the sum is just for the current quater. We'll need to aggregate these quarter specific sums to have<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthe # of visits per study period<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=makeVXJ_B2_tmp3,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=makeVXJ_B2_tmp4a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvar=%str(entryDate, key_doc_num, PayMode, sum(N_Visits) as N_Visits),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupby=%str(entryDate, key_doc_num, PayMode)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*  b) have a distinct list of physician-period-patient (i.e., doc id - entrydate - patientid)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspWe are not ready to count distinct patients yet, as current data is for a quarter only. We'll<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspneed to put all quarter specific data together, and then have the distinct patients*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%distinct(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata=makeVXJ_B2_tmp3,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=makeVXJ_B2_tmp4b,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(entryDate, key_doc_num, key_hsn)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>>>>>>>>>>>>>>>>>>>> Just completed: Year = &i, startmonth = %eval(&j+1)&#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*attach the results to the target data set VXJ_B2 and VXJ_B2b*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if &k=0 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*the # visits, of the first quarter, by period, physician, and paymode*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata localt.VXJ_B2a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset makeVXJ_B2_tmp4a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspyear=&i&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*the distinct patient list, of the first quarter, by period, and physician*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata localt.VXJ_B2b&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset makeVXJ_B2_tmp4b&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspyear=&i&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata localt.VXJ_B2a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset localt.VXJ_B2a makeVXJ_B2_tmp4a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspyear=&i&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata localt.VXJ_B2b&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset localt.VXJ_B2b makeVXJ_B2_tmp4b&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspyear=&i&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let k=%eval(&k+1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%beep&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>%mend makeVXJ_B2&#59<br/>/*%makeVXJ_B2&#59 Took a long time to run it....*/<br/>/*%beep&#59*/<br/>%macro sumAndZip&#59<br/>&nbsp&nbsp&nbsp&nbsp/*VXJ_B3a. the VXJ_B2a need to be further grouped and summed. Same EntryDate-doc-paymode may appear multiple times*/<br/>&nbsp&nbsp&nbsp&nbsp/*as the msb records were obtained by 3-months.  */<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=localt.VXJ_B2a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXJ_B3a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(entryDate, key_doc_num, PayMode, sum(N_Visits) as N_Visits),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupby=%str(entryDate, key_doc_num, PayMode)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp/*VXJ_B3b. count the # of distinct patients for each physician with a specific entry period*/<br/>&nbsp&nbsp&nbsp&nbsp%distinct(data=localt.VXJ_B2b, target=VXJ_B3b1, vars=%str(entryDate, key_doc_num, key_hsn))&#59<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXJ_B3b1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXJ_B3b,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(entryDate, key_doc_num, count(key_hsn) as N_Pt),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupby=%str(entryDate, key_doc_num)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*the following will overwirte the existing zip! be careful*/<br/>&nbsp&nbsp&nbsp&nbsp%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=%str(&localTargetPath), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=VXJ_B3a.zip, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=VXJ_B3a.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcDir=<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=%str(&localTargetPath), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=VXJ_B3b.zip, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=VXJ_B3b.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcDir=<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp/*zip VXJ_B3b1 and delete the unzipped file localt.VXJ_B2b (it is too big). <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspB2b contains distinct key_hsn doc and entrydate and calendar year of the service.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspB3B1 is from B2b, but further condensed by having distinct key_hsn doc and entrydate of all calendar years*/<br/>&nbsp&nbsp&nbsp&nbsp%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=%str(&localTargetPath), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=VXJ_B3b1.zip, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=VXJ_B3b1.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcDir=<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbspproc datasets nolist lib=localt&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete VXJ_B2b&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>%mend sumAndZip&#59<br/><br/>/*For # of visits by paymode, and # of patients by period-specific physicians, the data has been prepared for once, unzip the prepared data */<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXJ_B3a.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXJ_B3a.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXJ_B3b.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXJ_B3b.sas7bdat)<br/>)&#59<br/><br/>/*transpose and have N_visits by NFFS and FFS payment type in columns*/<br/>%transpose(data=VXJ_B3a, target=VXJ_B4, rowhead=key_doc_num entryDate, colhead=PayMode, contents=n_visits)&#59<br/><br/>/*<br/>&nbsp&nbsp&nbsp&nbspif the GP in VXJ_B has an FFS_CAT of (0-2), make it NFFS<br/>&nbsp&nbsp&nbsp&nbspif the GP in VXJ_B has an FFS_CAT of 8-10, make it FFS<br/>&nbsp&nbsp&nbsp&nbspif the gp in VXJ_B has an FFS_CAT of 3-7, make it unk(unknown)<br/>*/<br/>data VXJ_B5&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_B4&#59<br/>&nbsp&nbsp&nbsp&nbspif NFFS=. then NFFS=0&#59<br/>&nbsp&nbsp&nbsp&nbspif FFS=. then FFS=0&#59<br/>&nbsp&nbsp&nbsp&nbspFFSPCT=INT(FFS / sum(NFFS, FFS)*100 )&#59<br/>&nbsp&nbsp&nbsp&nbspFFS_CAT=int(FFSPCT / 10)&#59<br/>&nbsp&nbsp&nbsp&nbspformat PayType $4.&#59<br/>&nbsp&nbsp&nbsp&nbspif FFS_CAT LE 2 then PayType='NFFS'&#59<br/>&nbsp&nbsp&nbsp&nbspif FFS_CAT GE 8 then PayType='FFS'&#59<br/>&nbsp&nbsp&nbsp&nbspif 2 lt FFS_CAT LT 8 then PayType='UNKW'&#59<br/>run&#59<br/>/*%freq(data=VXJ_B5, table=FFS_CAT*PayType)&#59<br/>It shows that only a small proportion of patients whose doc is of UNKW type*/<br/><br/>/*VXJ_B6. For each period-specific physician, make a string of paymode:#visits(NFFS + FFS):#patients*/<br/>/*VXJ_B6a. For each period-specific physician, get paytype, visits, and patients from B5 and B3b*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXJ_B5,<br/>&nbsp&nbsp&nbsp&nbspt2=VXJ_B3b,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXJ_B6a,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.entryDate,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.key_doc_num,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.payType,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsum(t1.NFFS, t1.FFS) as N_Visits,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.N_Pt as N_Patients<br/>&nbsp&nbsp&nbsp&nbsp),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=entryDate key_doc_num<br/>)&#59<br/>/*VXJ_BJ6b. For each period-specific physician, make a string of paymode:#visits(NFFS + FFS):#patients*/<br/>data VXJ_B6&#59<br/>&nbsp&nbsp&nbsp&nbsplength MSBAttrStr $50.&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_B6a&#59<br/>&nbsp&nbsp&nbsp&nbspMSBAttrStr = strip(paytype) || \":\" || strip(N_Visits)  || \":\" || strip(N_Patients)&#59<br/>run&#59 <br/><br/>/*VXJ_B7.  link VXJ_B7a and VXJ_B6 to indicate the MSB related attributes for UCPF1*/<br/>/*VXJ_B7a. Get the docid for UCPF1 */<br/>data VXJ_B7a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_A&#59<br/>&nbsp&nbsp&nbsp&nbsplength key_doc_num $11. &#59<br/>&nbsp&nbsp&nbsp&nbspkey_doc_num = scan(UCPF1, 1, \":\")&#59  <br/>run&#59<br/><br/>/*VXJ_B7b. link VXJ_B7a and VXJ_B6 to indicate the MSB related attributes for UCPF1*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXJ_B7a,<br/>&nbsp&nbsp&nbsp&nbspt2=VXJ_B6,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXJ_B7b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifc(T2.MSBAttrStr=\".:.:.\", \"\", t2.MSBAttrStr) as MSBAttrStr),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num entryDate<br/>)&#59<br/><br/>/*VXJ_B7c. Append MSBAttrStr to UCPF1<br/>Note: to this step, the length of UCPF1 of 50 is not long enough, change it to 100<br/>*/<br/>Data VXJ_B7&#59<br/>&nbsp&nbsp&nbsp&nbsplength UCPF1 $100.&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_B7b&#59<br/>&nbsp&nbsp&nbsp&nbspUCPF1=strip(UCPF1) || \":\" || MSBAttrStr&#59<br/>&nbsp&nbsp&nbsp&nbspdrop MSBAttrStr key_doc_num&#59<br/>run&#59<br/><br/><br/><br/><br/><br/>/*VXJ_B8.  link VXJ_B8a and VXJ_B7 to indicate the MSB related attributes for UCPW1*/<br/>/*VXJ_B8a. Get the docid for UCPW1*/<br/>data VXJ_B8a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_B7&#59<br/>&nbsp&nbsp&nbsp&nbsplength key_doc_num $11. &#59<br/>&nbsp&nbsp&nbsp&nbspkey_doc_num = scan(UCPW1, 1, \":\")&#59  <br/>run&#59<br/><br/>/*VXJ_B8b. link VXJ_B8a and VXJ_B6 (with MSB related attributes) to indicate the MSB related attributes for UCPW1*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXJ_B8a,<br/>&nbsp&nbsp&nbsp&nbspt2=VXJ_B6,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXJ_B8b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifc(T2.MSBAttrStr=\".:.:.\", \"\", t2.MSBAttrStr) as MSBAttrStr),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num entryDate<br/>)&#59<br/><br/>/*VXJ_B8c. Append MSBAttrStr to UCPW1<br/>Note: to this step, the length of UCPF1 of 50 is not long enough, change it to 100<br/>*/<br/>Data VXJ_B&#59<br/>&nbsp&nbsp&nbsp&nbsplength UCPW1 $100.&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_B8b&#59<br/>&nbsp&nbsp&nbsp&nbspUCPW1=strip(UCPW1) || \":\" || MSBAttrStr&#59<br/>&nbsp&nbsp&nbsp&nbspdrop MSBAttrStr key_doc_num&#59<br/>run&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=%str(&localTargetPath), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=VXJ_B.zip, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=VXJ_B.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/>%exportvars(data=VXJ_B)&#59<br/><br/><br/><br/><br/>s///<br/>t///","children":[],"custparents":[{"idx":"CodeTask-RO6JSuJAejHUZYEn"},{"idx":"5e5e5c09-6792-4271-a2fb-9ccd33ab8119"},{"idx":"2748d200-0b28-4499-9d86-1f1c1850b6a2"}]},{"idx":"3b541c67-7322-4c6c-acfb-ab2000754143","name":"VXJ_C DOC_Rx_Attrs","NodeDescription":"///t<br/>///s<br/>/*VXJ_C <br/>&nbsp&nbsp&nbsp&nbspRx related attributes of each period-related physician. <br/>&nbsp&nbsp&nbsp&nbsp1. # of Rx from runin throught follow up<br/>&nbsp&nbsp&nbsp&nbsp2. # of Statin out of all Rx<br/>*/<br/><br/>data _null_&#59run&#59<br/><br/>%let localDataPath = P:\\Physician_Impact_Pro(SYao)_Bio14-143\\data&#59<br/>%let localTargetPath = P:\\Physician_Impact_Pro(SYao)_Bio14-143\\Output\\Result data&#59<br/>libname localt \"&localTargetPath\"&#59<br/>libname locald \"&localDataPath\"&#59<br/><br/>/*VXJ_C0. Prepare source data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_dp_benefit_pop_slim.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_dp_benefit_pop.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_dp_nonbenefit_pop_slim.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_dp_nonbenefit_pop.sas7bdat)<br/>)&#59<br/><br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXJ_B.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXJ_B.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_DINmap_pop.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_DINmap_pop.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_patientidmap_pop.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_patientidmap_pop.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_docidmap_pop.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_docidmap_pop.sas7bdat)<br/>)&#59<br/><br/><br/>/*VXJ_C1. Get UCPF1 and UCPW1 from VXJ_B. These doctors are specific by patient and entrydate*/<br/>/*VXJ_C1a. From VXJ_C, get the first UCP in followup, and in the whole period from runin through followup<br/>&nbsp&nbsp&nbsp&nbspuse scan() to get the physician id*/<br/>data VXJ_C1a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_B&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn entryDate key_doc_num type&#59<br/>&nbsp&nbsp&nbsp&nbsplength key_doc_num $11.&#59<br/>&nbsp&nbsp&nbsp&nbspkey_doc_num = scan(UCPF1, 1, \":\")&#59 type='UCPF1'&#59 output&#59<br/>&nbsp&nbsp&nbsp&nbspkey_doc_num = scan(UCPW1, 1, \":\")&#59 type='UCPW1'&#59 output&#59&nbsp&nbsp&nbsp&nbsp<br/>run&#59<br/>/*VXJ_C1b. keep the distinct record of period specific doc ids*/<br/>%distinct(data=VXJ_C1a, target=VXJ_C1b, vars=%str(entryDate, key_doc_num))&#59<br/>/*VXJ_C1c. add the char id: key_doc_numc*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXJ_C1b,<br/>&nbsp&nbsp&nbsp&nbspt2=master_docidmap_pop,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXJ_C1,<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.key_doc_numc)<br/>)&#59<br/><br/><br/>/*VXJ_C1. Sum by prescriber, and date, count Rx of all medications*/<br/>/*Note: the following is to use the slim files so as to be more efficient*/<br/>/*VXJ_C1a. Sum by prescriber, and date, count Rx of all medications from the benefit file*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_benefit_pop_slim,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXJ_C1a,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(Rx_DDDDD, key_doc_numc, count(DINStr) as N_Rx_AllMed),<br/>&nbsp&nbsp&nbsp&nbspgroupby=%str(Rx_DDDDD, key_doc_numc)<br/>)&#59<br/>/*VXJ_C1b. Sum by prescriber, and date, count Rx of all medications from the nonbenefit file*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_nonbenefit_pop_slim,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXJ_C1b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(Rx_DDDDD, key_doc_numc, count(DINStr) as N_Rx_AllMed),<br/>&nbsp&nbsp&nbsp&nbspgroupby=%str(Rx_DDDDD, key_doc_numc)<br/>)&#59<br/>/*combine C1a and C1b, and sum again by Rx_DDDDD, and key_doc_num*/<br/>data VXJ_C1c&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_C1a VXJ_C1b&#59<br/>run&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXJ_C1C,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXJ_C1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(Rx_DDDDD, key_doc_numc, sum(N_Rx_AllMed) as N_Rx_AllMed),<br/>&nbsp&nbsp&nbsp&nbspgroupby=%str(Rx_DDDDD, key_doc_numc)<br/>)&#59<br/><br/>/*VXJ_C2. Sum by prescriber, and date, count Rx of statin medications*/<br/>/*VXJ_C2a0. As the claim files contains DINStr, not DIN, need an additional step to map  the statin dins to dinstrs*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=locald.statindins,<br/>&nbsp&nbsp&nbsp&nbspt2=master_DINmap_pop,<br/>&nbsp&nbsp&nbsp&nbsptarget=statindinStrs,<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=din,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.dinstr)<br/>)&#59<br/><br/>/*VXJ_C2a. Sum by prescriber, and date, count Rx of statin medications from the benefit file*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_benefit_pop_slim,<br/>&nbsp&nbsp&nbsp&nbspt2=statindinStrs,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXJ_C2a,<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=dinstr,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(Rx_DDDDD, key_doc_numc, count(t1.DINstr) as N_Rx_Statin),<br/>&nbsp&nbsp&nbsp&nbspgroupby=%str(Rx_DDDDD, key_doc_numc)<br/>)&#59<br/>/*VXJ_C2b. Sum by prescriber, and date, count Rx of statin from the nonbenefit file*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_nonbenefit_pop_slim,<br/>&nbsp&nbsp&nbsp&nbspt2=statindinStrs,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXJ_C2b,<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=dinstr,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(Rx_DDDDD, key_doc_numc, count(t1.DINstr) as N_Rx_Statin),<br/>&nbsp&nbsp&nbsp&nbspgroupby=%str(Rx_DDDDD, key_doc_numc)<br/>)&#59<br/>/*combine C2a and C2b, and sum again by Rx_DDDDD, and key_doc_num*/<br/>data VXJ_C2c&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_C2a VXJ_C2b&#59<br/>run&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXJ_C2c,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXJ_C2,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(Rx_DDDDD, key_doc_numc, sum(N_Rx_Statin) as N_Rx_Statin),<br/>&nbsp&nbsp&nbsp&nbspgroupby=%str(Rx_DDDDD, key_doc_numc)<br/>)&#59<br/><br/>/*VXJ_C3. Combine C1 and C2. The result data contains # of Rx of all medicine and # of Rx of statin by prescriber's id, and by dispensation date*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXJ_C1,<br/>&nbsp&nbsp&nbsp&nbspt2=VXJ_C2,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXJ_C3,<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=Rx_DDDDD key_doc_numc,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.N_Rx_Statin=., 0, t2.N_Rx_Statin) as N_Rx_Statin)<br/>)&#59<br/><br/><br/>/*VXJ_C4. Link C3 to  VXJ_C1, for each period(entrydate) specific doc, sum the # of Rx of all medications, and # of Rx of statin<br/>&nbsp&nbsp&nbsp&nbspfrom runin through followup.*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXJ_C1,<br/>&nbsp&nbsp&nbsp&nbspt2=VXJ_C3,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXJ_C4,<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_numc,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.entryDate, t1.key_doc_num, sum(t2.N_Rx_AllMed) as N_Rx_AllMed, sum(t2.N_Rx_Statin) as N_Rx_Statin),<br/>&nbsp&nbsp&nbsp&nbspgroupby=%str(entryDate, key_doc_num),<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(Rx_ddddd between t1.entryDate - 365 and t1.entryDate +365-1)<br/>)&#59<br/><br/>/*VXJ_C5. Make a string to hold Rx related attributes, i.e., N_Rx_AllMed:N_Rx_Statin*/<br/>data VXJ_C5&#59<br/>&nbsp&nbsp&nbsp&nbsplength RxAttrStr $50.&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_C4&#59<br/>&nbsp&nbsp&nbsp&nbspRxAttrStr = strip(N_Rx_AllMed) || \":\" || strip(N_Rx_Statin) &#59<br/>run&#59 <br/><br/>/*VXJ_C6.  link VXJ_C5 and VXJ_B to indicate the Rx related attributes for UCPF1*/<br/>/*VXJ_C6a. Get the docid of UCPF1 */<br/>data VXJ_C6a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_B&#59<br/>&nbsp&nbsp&nbsp&nbsplength key_doc_num $11. &#59<br/>&nbsp&nbsp&nbsp&nbspkey_doc_num = scan(UCPF1, 1, \":\")&#59  <br/>run&#59<br/><br/>/*VXJ_C6b. link VXJ_C6a and VXJ_C5 to indicate the MSB related attributes for UCPF1*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXJ_C6a,<br/>&nbsp&nbsp&nbsp&nbspt2=VXJ_C5,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXJ_C6b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifc(T2.RxAttrStr=\".:.\", \"\", t2.RxAttrStr) as RxAttrStr),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num entryDate<br/>)&#59<br/><br/>/*VXJ_C6c. Append RxAttrStr to UCPF1*/<br/>Data VXJ_C6&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_C6b&#59<br/>&nbsp&nbsp&nbsp&nbspUCPF1=strip(UCPF1) || \":\" || RxAttrStr&#59<br/>&nbsp&nbsp&nbsp&nbspdrop RxAttrStr key_doc_num&#59<br/>run&#59<br/><br/>/*VXJ_C7.  link VXJ_C7a and VXJ_C5 to indicate the Rx related attributes for UCPW1*/<br/>/*VXJ_C7a. Get the docid for UCPW1*/<br/>data VXJ_C7a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_C6&#59<br/>&nbsp&nbsp&nbsp&nbsplength key_doc_num $11. &#59<br/>&nbsp&nbsp&nbsp&nbspkey_doc_num = scan(UCPW1, 1, \":\")&#59  <br/>run&#59<br/><br/>/*VXJ_C7b. link VXJ_C7a and VXJ_C5 (with Rx related attributes) to indicate the MSB related attributes for UCPW1*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXJ_C7a,<br/>&nbsp&nbsp&nbsp&nbspt2=VXJ_C5,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXJ_C7b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifc(T2.RxAttrStr=\".:.:.\", \"\", t2.RxAttrStr) as RxAttrStr),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num entryDate<br/>)&#59<br/><br/>/*VXJ_C7c. Append RxAttrStr to UCPW1*/<br/>Data VXJ_C&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_C7b&#59<br/>&nbsp&nbsp&nbsp&nbspUCPW1=strip(UCPW1) || \":\" || RxAttrStr&#59<br/>&nbsp&nbsp&nbsp&nbspdrop RxAttrStr key_doc_num&#59<br/>run&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=%str(&localTargetPath), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=VXJ_C.zip, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=VXJ_C.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/>%exportvars(data=VXJ_C)&#59<br/><br/><br/>s///<br/>t///","children":[{"idx":"cdc6a4ce-be19-468e-b92b-3a9429469cfe","name":"VXM_FS Adherence","NodeDescription":"///t<br/>///s<br/>data _null_&#59run&#59<br/><br/><br/>/*VXM_FS, Adherence by PDC*/<br/>/*the cohort*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXJ_C.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXJ_C.sas7bdat)<br/>)&#59<br/>/*get statin claims*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXE_F.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXE_F.sas7bdat)<br/>)&#59<br/><br/><br/><br/><br/>%let MPR80 =.8&#59<br/>%let supplyDayCol=supplyDays&#59<br/><br/><br/>data VXM_FS1&#59<br/>&nbsp&nbsp&nbsp&nbspset VXE_F&#59<br/>&nbsp&nbsp&nbsp&nbspsupplyDays=Rx_Qty_Amt&#59<br/>&nbsp&nbsp&nbsp&nbspdrugclass='STATIN'&#59<br/>run&#59<br/><br/><br/>%getAdherence(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata=VXM_FS1, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXM_FS2, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspOptAdhCutOff =&MPR80, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLenInterval =%eval(365), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN_Intervals=1, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspclass =DrugClass, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfollowStart =EntryDate, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsupCol =&supplyDayCol, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspAllowedGap=1, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptakeStartCol =, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptakeEndCol =, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspintervalCol =, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspintervalStartCol =, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspintervalEndCol =, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeepTMP=<br/>)&#59<br/><br/><br/>/*link back to the cohort VXL_L*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXJ_C,<br/>&nbsp&nbsp&nbsp&nbspt2=VXM_FS2,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXM_FS3,<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.DaysOnMed, t2.Adherence)<br/>)&#59<br/><br/>/*calculate the adjusted adherence by removing days in hopsital from both numerator and denominator*/<br/>data VXM_FS&#59<br/>&nbsp&nbsp&nbsp&nbspset VXM_FS3&#59<br/>&nbsp&nbsp&nbsp&nbspPDC_Adjust = (daysonmed -HDays_Post365) / (365-HDays_Post365)&#59<br/>&nbsp&nbsp&nbsp&nbspAdherence_Adjust=0&#59<br/>&nbsp&nbsp&nbsp&nbspif PDC_Adjust >= .8 then Adherence_Adjust =1&#59<br/>run&#59<br/>%freq(data=VXM_FS, table=Adherence_Adjust * Adherence)&#59<br/><br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localTargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VXM_FS.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VXM_FS.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/><br/>%exportvars(data=VXM_FS)&#59<br/><br/>s///<br/>t///","children":[{"idx":"85d09a80-9343-439b-91c8-7ac956b888db","name":"VXT_FS Unmatched Logistic","NodeDescription":"///t<br/>///s<br/>/*VXT_FS Unmatched logistic regression, Adherece_adjusted by COMPFS vs UPCIndxF vs CombTerm_FS*/<br/><br/>data _null_&#59run&#59<br/><br/>/*VXT_FS0. Prepare source files.*/<br/>%include \"P:\\Physician_Impact_Pro(SYao)_Bio14-143\\SAS code\\reclass.macros.v4.sas\"&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXM_FS.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXM_FS.sas7bdat)<br/>)&#59<br/>/*check the upc score*/<br/>%print(data=VXM_FS)&#59<br/>/*Define covariates*/<br/>%let covariates = &nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspage Sex  QAIPPEN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspRESITYPEN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNDINS_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNDINS_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNHOSP_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNHOSP_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHNIGHTS_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHDAYS_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHNIGHTS_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHDAYS_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_GP_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_SP_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_GP_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_SP_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_ER_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_ER_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAY_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAYPCT_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAY_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAYPCT_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspBENZO_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPSYCHO_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTIDEP_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTICHO_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspBENZO_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPSYCHO_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTIDEP_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTICHO_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_NPD_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_SA_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_PSY_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_NPD_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_SA_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_PSY_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCHARLSON_INDEX<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_ANXIETY_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_DIABETES<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HTN<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOOD_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_NS_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_ASTHMA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_COPD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AP_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOODANX<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOODANXP*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OA<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OMH*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SUBABUSE_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AMI<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CD_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HP_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_IHD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_STROKE_1POP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_WF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_1POP<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CA_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_PV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_DA_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_NONRA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_LB_PS<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_2DRUG*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_RF_PS*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_VTE_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CO_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_STROKE_2HOSP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_IB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_RA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CK_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_LV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_EPAD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_UB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SUICIDE_OLD<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SCHIZO*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SCHIZO_EVER<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_PD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_EPJR<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_ANXIETY_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_DIABETES*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HTN*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOOD_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_NS_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOODANX*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOODANXP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OMH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_ASTHMA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_COPD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HF*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AP_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_IHD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SUBABUSE_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AMI*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CD_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HP_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_STROKE_1POP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_WF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_1POP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_NONRA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CA_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CO_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_DA_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_PV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_2DRUG*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_LB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_RF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_VTE_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_STROKE_2HOSP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_IB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_RA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_LV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_EPAD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_UB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SUICIDE_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SCHIZO*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SCHIZO_EVER*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_PD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_EPJR*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPRE365_PRSCR_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPRE365_MEDCLASS_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFOLLOWUP_PRSCR_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFOLLOWUP_MEDCLASS_STATINAHTNOH&nbsp&nbsp&nbsp&nbsp*/<br/><br/>/*practice/physician related factors*/<br/>&nbsp&nbsp&nbsp&nbspdocSexN_FS<br/>&nbsp&nbsp&nbsp&nbspdocAge_FS<br/>&nbsp&nbsp&nbsp&nbspdocServiceYr_FS<br/>&nbsp&nbsp&nbsp&nbspdocEdCountry_FS<br/>&nbsp&nbsp&nbsp&nbspdocPayTypeN_FS<br/>&nbsp&nbsp&nbsp&nbspdocN_Visits_FS<br/>&nbsp&nbsp&nbsp&nbspdocNPatients_FS<br/>&nbsp&nbsp&nbsp&nbspdocStatinRxPCT_FS<br/>&#59<br/><br/><br/>/*VXT_FS1. Report distribution of UPC index*/<br/>title \"distribution of UPC Index\"&#59<br/>proc means data=VXM_FS mean std median qrange q1 q3&#59<br/>&nbsp&nbsp&nbsp&nbspvar UPCIndexF&#59<br/>&nbsp&nbsp&nbsp&nbspods output summary=VXT_FS1a&#59<br/>run&#59<br/>title&#59<br/>Data VXT_FS1&#59<br/>&nbsp&nbsp&nbsp&nbspset VXT_FS1a&#59<br/>&nbsp&nbsp&nbsp&nbspproject=&_clientProjectName&#59<br/>&nbsp&nbsp&nbsp&nbspprogram=&_clientTaskLabel&#59<br/>&nbsp&nbsp&nbsp&nbspcreateDate=date()&#59<br/>&nbsp&nbsp&nbsp&nbspformat createDate date9.&#59<br/>run&#59<br/>proc export data=VXT_FS1<br/>&nbsp&nbsp&nbsp&nbspdbms=xlsx<br/>&nbsp&nbsp&nbsp&nbspoutfile=\"&localReportPath.\\reports.xlsx\"<br/>&nbsp&nbsp&nbsp&nbspreplace&#59<br/>&nbsp&nbsp&nbsp&nbspsheet= \"Table11a_UPCIndexDist_FS\"&#59&nbsp&nbsp&nbsp&nbsp<br/>&#59<br/>run&#59<br/><br/>/*VXT_FS2. Treat up the missing values.<br/>&nbsp&nbsp&nbsp&nbspNote: two patients whose UCPF1 does not have doc covariates like age sex... <br/>*/<br/>data VXT_FS2&#59<br/>&nbsp&nbsp&nbsp&nbspset VXM_FS&#59<br/>&nbsp&nbsp&nbsp&nbspSex=1&#59<br/>&nbsp&nbsp&nbsp&nbspif sex_desc='M' then sex=0&#59<br/>&nbsp&nbsp&nbsp&nbspqaippeN = qaippe&#59<br/>&nbsp&nbsp&nbsp&nbspif qaippe = . or qaippe = 9 then qaippeN=0&#59<br/>&nbsp&nbsp&nbsp&nbspresitypeN=1&#59<br/>&nbsp&nbsp&nbsp&nbspif resitype='URBAN' then resitypeN=0&#59<br/>&nbsp&nbsp&nbsp&nbspif charlson_index=. then charlson_index=0&#59<br/>&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp/*release the practice (doc) related covariates. Note, it is named _FS,but is indeed measured from runin through follow up (2 years)*/<br/>&nbsp&nbsp&nbsp&nbspdocSex_FS = scan(UCPF1, 4, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspif docSex_FS='M' then docSexN_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspelse docSexN_FS=1&#59<br/>&nbsp&nbsp&nbsp&nbspdocBirthYr_FS= scan(UCPF1, 5, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspdocAge_FS=int(yrdif(mdy(6,30,docbirthyr_FS), entryDate, \"age\"))&#59<br/>&nbsp&nbsp&nbsp&nbspdocGradYr_FS= input(scan(UCPF1, 6, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocServiceYr_FS= year(entryDate) - docGradYr_FS&#59<br/>&nbsp&nbsp&nbsp&nbspdocEdCountry_FS = input(scan(UCPF1, 8, \":\"), 8.)&#59 /*0 for foreign*/<br/>&nbsp&nbsp&nbsp&nbspdocPayType_FS = scan(UCPF1, 9, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspif strip(docPayType_FS )='NFFS' then docPayTypeN_FS =1&#59<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif strip(docPayType_FS )='FFS' then docPayTypeN_FS =0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse docPayTypeN_FS =2&#59/*unknown*/<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdocN_Visits_FS = input(scan(UCPF1, 10, \":\"), 8.)&#59 /*N_Visits*/<br/>&nbsp&nbsp&nbsp&nbspdocNPatients_FS = input(scan(UCPF1, 11, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocNRx_FS=  input(scan(UCPF1, 12, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocNStatinRx_FS=  input(scan(UCPF1, 13, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspif docNStatinRx_FS=. then docNStatinRx_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspif docNRx_FS=. or docNRx_FS=0 or docNStatinRx_FS=0 then docStatinRxPCT_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspelse docStatinRxPCT_FS = round(docNStatinRx_FS/docNRx_FS*100, '0.01')&#59<br/>run&#59<br/><br/>/*check missing*/<br/>proc means data=VXT_FS2 missing&#59<br/>vars &covariates&#59run&#59<br/><br/>/*VXT_FS3. Check multicollinearity and report*/<br/>ods trace on&#59<br/>proc reg data=VXT_FS2&#59 <br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust =UPCIndexF CompFS &covariates /tol vif&#59<br/>&nbsp&nbsp&nbsp&nbspods output ParameterEstimates = VXT_FS3a&#59<br/>run&#59<br/>ods trace off&#59<br/>data VXT_FS3&#59<br/>&nbsp&nbsp&nbsp&nbspset VXT_FS3a&#59<br/>&nbsp&nbsp&nbsp&nbspproject=&_clientProjectName&#59<br/>&nbsp&nbsp&nbsp&nbspprogram=&_clientTaskLabel&#59<br/>&nbsp&nbsp&nbsp&nbspcreateDate=date()&#59<br/>&nbsp&nbsp&nbsp&nbspformat createDate date9.&#59<br/>run&#59<br/>proc export data=VXT_FS2<br/>&nbsp&nbsp&nbsp&nbspdbms=xlsx<br/>&nbsp&nbsp&nbsp&nbspoutfile=\"&localReportPath.\\reports.xlsx\"<br/>&nbsp&nbsp&nbsp&nbspreplace&#59<br/>&nbsp&nbsp&nbsp&nbspsheet= \"Table11a_MultiCollinearity_FS\"&#59&nbsp&nbsp&nbsp&nbsp<br/>&#59<br/>run&#59<br/><br/><br/>/*VXT_FS5. Make an empty set to hold all statistic results from the regression models.*/<br/>data VXT_FS5&#59length Var $200. label $200.&#59 delete&#59run&#59<br/>data VXT_NRI&#59 length m1 $200. m2 $200.&#59delete&#59 run&#59<br/>data VXT_CNRI&#59 length m1 $200. m2 $200.&#59delete&#59 run&#59<br/>data VXT_IDI&#59 length m1 $200. m2 $200.&#59delete&#59 run&#59<br/>/*loop for UPCCutOff, and COC measures, and for univ/multiv models*/<br/>%macro LoopUPCCutOff(UPCCutOff=)&#59<br/>&nbsp&nbsp&nbsp&nbsp%local UPCCutOff&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*VXT_FS4.  Make UPCIndex category*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata VXT_FS4&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXT_FS2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCIndexF_Cat='L'&#59/*low*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif UPCIndexF >= UPCIndexFP&UPCCutOff  then UPCIndexF_Cat='H'&#59/*high*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCombTerm_FS = strip(UPCIndexF_Cat) || strip(CompFS)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*prepare a data set to hold predict probs from multivariate models*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata VXT_m&UPCCutOff&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXT_FS4&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep key_hsn Adherence_Adjust&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*VXT_FS5a. Regression Stage 1. Univariate Models*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%macro makeUniv(theXVar=)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%local theXVar&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTitle \"&theXVar\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods results off&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc logistic data=VXT_FS4 descending&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspclass UPCIndexF_Cat (ref='L') CombTerm_FS (ref='L0') sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN') <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference truncate=200&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = &theXVar  /scale=none aggregate&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if &theXVar = CombTerm_FS %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs Lowe UPCI non COMPCOC, H1 vs L0\" CombTerm_FS 0 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, COMPCOC vs non COMPCOC, L1 vs L0\" CombTerm_FS 0 0 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs non COMPCOC, H1 vs H0\" CombTerm_FS -1 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"COMPCOC, High UPCI vs low UPCI, H1 vs L1\" CombTerm_FS 0 1 -1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"NonCOMPCOC, High UPCI vs low UPCI, H0 vs L0\" CombTerm_FS 1 0 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI but COMPCOC vs High UPCI but non-COMPCOC , L1 vs H0\" CombTerm_FS -1 0 1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"&theXVar\" &theXVar 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods output estimates =makeUniv_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods results on&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata makeUniv_tmp2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset makeUniv_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspVar = symget('theXVar')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCCutOff = &UPCCutOff&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspType='Univariate '&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*Attach results to the summary table*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata VXT_FS5&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXT_FS5 makeUniv_tmp2&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc datasets nolist&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete makeUniv_tmp:&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%mend makeUniv&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%makeUniv(theXVar = UPCIndexF_Cat)&#59 /*loop for UPCIndexF_Cat, COMPFS, and CombinedTerm_FS*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%makeUniv(theXVar = CompFS)&#59 /*loop for UPCIndexF_Cat, COMPFS, and CombinedTerm_FS*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%makeUniv(theXVar = CombTerm_FS)&#59 /*loop for UPCIndexF_Cat, COMPFS, and CombinedTerm_FS*/<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*VXT_FS5b. multivariate models*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*loop for vars*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*loop for null, UPCIndexF_Cat, COMPFS, and CombinedTerm_FS*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%macro makeMulti(theXVar=)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%local theXVar&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTitle \"&theXVar, + covariates \"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods results off&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc logistic data=VXT_FS4 descending&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspclass UPCIndexF_Cat (ref='L') CombTerm_FS (ref='L0') sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN') <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = &theXVar &covariates  /scale=none aggregate&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspROC 'M1: &theXVar + covariates' &theXVar &covariates&#59*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspROC 'M2: covariates'  &covariates&#59*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsproccontrast reference ('M2: covariates')  /estimate&#59*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if %length(&theXVar) ne 0 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if &theXVar = CombTerm_FS %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs Lowe UPCI non COMPCOC, H1 vs L0\" CombTerm_FS 0 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, COMPCOC vs non COMPCOC, L1 vs L0\" CombTerm_FS 0 0 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs non COMPCOC, H1 vs H0\" CombTerm_FS -1 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"COMPCOC, High UPCI vs low UPCI, H1 vs L1\" CombTerm_FS 0 1 -1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"NonCOMPCOC, High UPCI vs low UPCI, H0 vs L0\" CombTerm_FS 1 0 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI but COMPCOC vs High UPCI but non-COMPCOC , L1 vs H0\" CombTerm_FS -1 0 1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"&theXVar\" &theXVar 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods output estimates =makeMulti_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspoutput out=VXT_m&theXVar  (keep=key_hsn adherence_adjust prob_m&theXVar) p=prob_m&theXVar&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptitle&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods results on&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if %length(&theXVar) ne 0 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata makeMulti_tmp2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset makeMulti_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspVar = symget('theXVar')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCCutOff = &UPCCutOff&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspType='Multivariate '&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*Attach results to the summary table*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata VXT_FS5&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXT_FS5 makeMulti_tmp2&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*merge the pred values*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXT_m&UPCCutOff,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXT_m&theXVar,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXT_m&UPCCutOff, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.Prob_m&theXVar),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%mend makeMulti&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%makeMulti(theXVar =)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%makeMulti(theXVar = UPCIndexF_Cat)&#59 /*loop for UPCIndexF_Cat, COMPFS, and CombinedTerm_FS*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%makeMulti(theXVar = CompFS)&#59 /*loop for UPCIndexF_Cat, COMPFS, and CombinedTerm_FS*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%makeMulti(theXVar = CombTerm_FS)&#59 /*loop for UPCIndexF_Cat, COMPFS, and CombinedTerm_FS*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%macro makeIDINRI(probterm1=, probterm2=)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*NRI*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%local probterm1 probterm2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%NRICAT(VXT_m&UPCCutOff, 1, adherence_adjust, &probterm1, &probterm2 , 2, .5)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata makeIDINRI_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset _all_&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspm1=upcase(symget('probterm1'))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspm2=upcase(symget('probterm2'))&#59&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCCutOff = &UPCCutOff&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata VXT_NRI&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXT_NRI makeIDINRI_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*Continuous NRI*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%CONTNRI(VXT_m&UPCCutOff,1,adherence_adjust,&probterm1, &probterm2 )&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata makeIDINRI_tmp2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset _all_&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspm1=upcase(symget('probterm1'))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspm2=upcase(symget('probterm2'))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCCutOff = &UPCCutOff&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata VXT_CNRI&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXT_CNRI makeIDINRI_tmp2&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*IDI*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%IDIMacro(VXT_m&UPCCutOff, 1, adherence_adjust, &probterm1, &probterm2 )&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata makeIDINRI_tmp3&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset _IDI_&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspm1=upcase(symget('probterm1'))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspm2=upcase(symget('probterm2'))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCCutOff = &UPCCutOff&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata VXT_IDI&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXT_IDI makeIDINRI_tmp3&#59&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc datasets nolist&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete makeIDINRI_tmp:&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%mend makeIDINRI&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods results off&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%makeIDINRI(probterm1=Prob_m, probterm2=Prob_mUPCIndexF_Cat    )&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%makeIDINRI(probterm1=Prob_m, probterm2=Prob_mCompFS    )&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%makeIDINRI(probterm1=Prob_m, probterm2=Prob_mCombTerm_FS   )&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%makeIDINRI(probterm1=Prob_mUPCIndexF_Cat, probterm2=Prob_mCompFS    )&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%makeIDINRI(probterm1=Prob_mUPCIndexF_Cat, probterm2=Prob_mCombTerm_FS   )&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%makeIDINRI(probterm1=Prob_mCompFS, probterm2=Prob_mCombTerm_FS   )&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods results on&#59<br/>%mend LoopUPCCutOff&#59<br/>/*%LoopUPCCutOff(UPCCutOff =25)&#59*/<br/>%LoopUPCCutOff(UPCCutOff =50)&#59<br/>/*%LoopUPCCutOff(UPCCutOff =75)&#59*/<br/>data localt.VXT_FS&#59<br/>&nbsp&nbsp&nbsp&nbspset VXT_FS5&#59<br/>&nbsp&nbsp&nbsp&nbspproject=&_clientProjectName&#59<br/>&nbsp&nbsp&nbsp&nbspprogram=&_clientTaskLabel&#59<br/>&nbsp&nbsp&nbsp&nbspcreateDate=date()&#59<br/>&nbsp&nbsp&nbsp&nbspformat createDate date9.&#59<br/>run&#59<br/>data localt.VXT_NRI_FS&#59<br/>&nbsp&nbsp&nbsp&nbspset VXT_NRI&#59<br/>&nbsp&nbsp&nbsp&nbspproject=&_clientProjectName&#59<br/>&nbsp&nbsp&nbsp&nbspprogram=&_clientTaskLabel&#59<br/>&nbsp&nbsp&nbsp&nbspcreateDate=date()&#59<br/>&nbsp&nbsp&nbsp&nbspformat createDate date9.&#59<br/>run&#59<br/>data localt.VXT_CNRI_FS&#59<br/>&nbsp&nbsp&nbsp&nbspset VXT_CNRI&#59<br/>&nbsp&nbsp&nbsp&nbspproject=&_clientProjectName&#59<br/>&nbsp&nbsp&nbsp&nbspprogram=&_clientTaskLabel&#59<br/>&nbsp&nbsp&nbsp&nbspcreateDate=date()&#59<br/>&nbsp&nbsp&nbsp&nbspformat createDate date9.&#59<br/>run&#59<br/>data localt.VXT_IDI_FS&#59<br/>&nbsp&nbsp&nbsp&nbspset VXT_IDI&#59<br/>&nbsp&nbsp&nbsp&nbspproject=&_clientProjectName&#59<br/>&nbsp&nbsp&nbsp&nbspprogram=&_clientTaskLabel&#59<br/>&nbsp&nbsp&nbsp&nbspcreateDate=date()&#59<br/>&nbsp&nbsp&nbsp&nbspformat createDate date9.&#59<br/>run&#59<br/><br/>proc export data=localt.VXT_FS<br/>&nbsp&nbsp&nbsp&nbspdbms=xlsx<br/>&nbsp&nbsp&nbsp&nbspoutfile=\"&localReportPath.\\reports.xlsx\"<br/>&nbsp&nbsp&nbsp&nbspreplace&#59<br/>&nbsp&nbsp&nbsp&nbspsheet= \"Table12a_OddRatio_FS\"&#59&nbsp&nbsp&nbsp&nbsp<br/>&#59<br/>run&#59<br/>proc export data=localt.VXT_NRI_FS<br/>&nbsp&nbsp&nbsp&nbspdbms=xlsx<br/>&nbsp&nbsp&nbsp&nbspoutfile=\"&localReportPath.\\reports.xlsx\"<br/>&nbsp&nbsp&nbsp&nbspreplace&#59<br/>&nbsp&nbsp&nbsp&nbspsheet= \"Table13a_NRI_FS\"&#59&nbsp&nbsp&nbsp&nbsp<br/>&#59<br/>run&#59<br/>proc export data=localt.VXT_CNRI_FS<br/>&nbsp&nbsp&nbsp&nbspdbms=xlsx<br/>&nbsp&nbsp&nbsp&nbspoutfile=\"&localReportPath.\\reports.xlsx\"<br/>&nbsp&nbsp&nbsp&nbspreplace&#59<br/>&nbsp&nbsp&nbsp&nbspsheet= \"Table14a_CNRI_FS\"&#59&nbsp&nbsp&nbsp&nbsp<br/>&#59<br/>run&#59<br/>proc export data=localt.VXT_IDI_FS<br/>&nbsp&nbsp&nbsp&nbspdbms=xlsx<br/>&nbsp&nbsp&nbsp&nbspoutfile=\"&localReportPath.\\reports.xlsx\"<br/>&nbsp&nbsp&nbsp&nbspreplace&#59<br/>&nbsp&nbsp&nbsp&nbspsheet= \"Table15a_IDI_FS\"&#59&nbsp&nbsp&nbsp&nbsp<br/>&#59<br/>run&#59<br/><br/>%beep&#59<br/><br/><br/><br/>&nbsp&nbsp&nbsp&nbsp<br/><br/><br/><br/><br/><br/><br/>s///<br/>t///","children":[{"idx":"c87cb1b1-c238-48d0-b3c5-46f4020a1bf7","name":"!Q VXT","NodeDescription":"<p>///t</p><p>///s</p><p>/*</p><p>[to do]</p><p>Add interaction terms???</p><p>*/</p><p>s///</p><p>t///</p>","custparents":[{"idx":"CodeTask-dc1t3qIkzKpa3hgA"}],"children":[{"idx":"e9b32c65-e8a5-4a9f-93fc-b4e30cd65e5a","name":"UPC interaction not sig","NodeDescription":"///t<br/>///s<br/>/*Seems that when treat UPC as categorical, interaction between UPC and resitype is not significant*/<br/>%let covariates = &nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspage Sex  QAIPPEN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspRESITYPEN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNDINS_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNDINS_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNHOSP_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNHOSP_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHNIGHTS_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHDAYS_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHNIGHTS_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHDAYS_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_GP_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_SP_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_GP_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_SP_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_ER_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_ER_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAY_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAYPCT_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAY_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAYPCT_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspBENZO_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPSYCHO_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTIDEP_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTICHO_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspBENZO_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPSYCHO_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTIDEP_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTICHO_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_NPD_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_SA_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_PSY_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_NPD_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_SA_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_PSY_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCHARLSON_INDEX<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_ANXIETY_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_DIABETES<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HTN<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOOD_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_NS_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_ASTHMA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_COPD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AP_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOODANX<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOODANXP*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OA<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OMH*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SUBABUSE_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AMI<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CD_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HP_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_IHD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_STROKE_1POP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_WF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_1POP<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CA_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_PV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_DA_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_NONRA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_LB_PS<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_2DRUG*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_RF_PS*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_VTE_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CO_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_STROKE_2HOSP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_IB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_RA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CK_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_LV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_EPAD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_UB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SUICIDE_OLD<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SCHIZO*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SCHIZO_EVER<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_PD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_EPJR<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_ANXIETY_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_DIABETES*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HTN*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOOD_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_NS_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOODANX*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOODANXP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OMH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_ASTHMA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_COPD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HF*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AP_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_IHD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SUBABUSE_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AMI*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CD_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HP_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_STROKE_1POP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_WF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_1POP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_NONRA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CA_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CO_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_DA_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_PV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_2DRUG*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_LB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_RF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_VTE_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_STROKE_2HOSP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_IB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_RA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_LV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_EPAD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_UB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SUICIDE_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SCHIZO*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SCHIZO_EVER*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_PD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_EPJR*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPRE365_PRSCR_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPRE365_MEDCLASS_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFOLLOWUP_PRSCR_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFOLLOWUP_MEDCLASS_STATINAHTNOH&nbsp&nbsp&nbsp&nbsp*/<br/><br/>/*practice/physician related factors*/<br/>&nbsp&nbsp&nbsp&nbspdocSexN_FS<br/>&nbsp&nbsp&nbsp&nbspdocAge_FS<br/>&nbsp&nbsp&nbsp&nbspdocServiceYr_FS<br/>&nbsp&nbsp&nbsp&nbspdocEdCountry_FS<br/>&nbsp&nbsp&nbsp&nbspdocPayTypeN_FS<br/>&nbsp&nbsp&nbsp&nbspdocN_Visits_FS<br/>&nbsp&nbsp&nbsp&nbspdocNPatients_FS<br/>&nbsp&nbsp&nbsp&nbspdocStatinRxPCT_FS<br/>&#59<br/><br/>%let theXVar=UPCIndexF_CAT&#59<br/>%let UPCCutOff=50&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata VXTB_FS4&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXT_FS2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCIndexF_Cat='L'&#59/*low*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif UPCIndexF >= UPCIndexFP&UPCCutOff  then UPCIndexF_Cat='H'&#59/*high*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCombTerm_FS = strip(UPCIndexF_Cat) || strip(CompFS)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/><br/>%macro runit&#59<br/>ods select all&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc logistic data=VXTB_FS4 descending&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspclass UPCIndexF_Cat (ref='L') CombTerm_FS (ref='L0') sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN') <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = &theXVar &covariates &theXVar*resitypeN /scale=none aggregate&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspROC 'M1: &theXVar + covariates' &theXVar &covariates&#59*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspROC 'M2: covariates'  &covariates&#59*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsproccontrast reference ('M2: covariates')  /estimate&#59*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if %length(&theXVar) ne 0 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if &theXVar = CombTerm_FS %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs Lowe UPCI non COMPCOC, H1 vs L0\" CombTerm_FS 0 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, COMPCOC vs non COMPCOC, L1 vs L0\" CombTerm_FS 0 0 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs non COMPCOC, H1 vs H0\" CombTerm_FS -1 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"COMPCOC, High UPCI vs low UPCI, H1 vs L1\" CombTerm_FS 0 1 -1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"NonCOMPCOC, High UPCI vs low UPCI, H0 vs L0\" CombTerm_FS 1 0 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI but COMPCOC vs High UPCI but non-COMPCOC , L1 vs H0\" CombTerm_FS -1 0 1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"&theXVar, urban\" &theXVar 1 resitypeN 0 &theXVar*resitypeN 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"&theXVar, rural\" &theXVar 1 resitypeN 1 &theXVar*resitypeN 1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods output estimates =makeMulti_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspoutput out=VXTB_m&theXVar  (keep=key_hsn adherence_adjust prob_m&theXVar) p=prob_m&theXVar&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>%mend&#59<br/>%runit&#59<br/>s///<br/>t///","custparents":[{"idx":"CodeTask-dc1t3qIkzKpa3hgA"},{"idx":"c87cb1b1-c238-48d0-b3c5-46f4020a1bf7"}]},{"idx":"521f3f29-ac0c-4f11-a0d0-8bed89133583","name":"VXTB_FS Interaction","NodeDescription":"///t<br/>///s<br/>/*VXTB_FS Unmatched logistic regression, Adherece_adjusted by COMPFS vs UPCIndxF vs CombTerm_FS*/<br/><br/>data _null_&#59run&#59<br/><br/>/*VXTB_FS0. Prepare source files.*/<br/>%include \"P:\\Physician_Impact_Pro(SYao)_Bio14-143\\SAS code\\reclass.macros.v4.sas\"&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXM_FS.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXM_FS.sas7bdat)<br/>)&#59<br/>/*check the upc score*/<br/>%print(data=VXM_FS)&#59<br/>/*Define covariates*/<br/>%let covariates = &nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspage Sex  QAIPPEN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspRESITYPEN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNDINS_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNDINS_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNHOSP_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNHOSP_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHNIGHTS_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHDAYS_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHNIGHTS_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHDAYS_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_GP_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_SP_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_GP_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_SP_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_ER_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_ER_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAY_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAYPCT_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAY_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAYPCT_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspBENZO_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPSYCHO_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTIDEP_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTICHO_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspBENZO_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPSYCHO_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTIDEP_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTICHO_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_NPD_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_SA_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_PSY_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_NPD_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_SA_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_PSY_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCHARLSON_INDEX<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_ANXIETY_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_DIABETES<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HTN<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOOD_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_NS_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_ASTHMA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_COPD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AP_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOODANX<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOODANXP*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OA<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OMH*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SUBABUSE_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AMI<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CD_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HP_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_IHD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_STROKE_1POP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_WF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_1POP<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CA_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_PV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_DA_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_NONRA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_LB_PS<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_2DRUG*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_RF_PS*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_VTE_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CO_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_STROKE_2HOSP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_IB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_RA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CK_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_LV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_EPAD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_UB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SUICIDE_OLD<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SCHIZO*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SCHIZO_EVER<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_PD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_EPJR<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_ANXIETY_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_DIABETES*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HTN*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOOD_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_NS_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOODANX*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOODANXP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OMH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_ASTHMA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_COPD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HF*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AP_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_IHD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SUBABUSE_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AMI*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CD_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HP_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_STROKE_1POP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_WF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_1POP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_NONRA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CA_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CO_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_DA_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_PV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_2DRUG*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_LB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_RF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_VTE_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_STROKE_2HOSP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_IB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_RA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_LV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_EPAD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_UB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SUICIDE_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SCHIZO*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SCHIZO_EVER*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_PD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_EPJR*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPRE365_PRSCR_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPRE365_MEDCLASS_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFOLLOWUP_PRSCR_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFOLLOWUP_MEDCLASS_STATINAHTNOH&nbsp&nbsp&nbsp&nbsp*/<br/><br/>/*practice/physician related factors*/<br/>&nbsp&nbsp&nbsp&nbspdocSexN_FS<br/>&nbsp&nbsp&nbsp&nbspdocAge_FS<br/>&nbsp&nbsp&nbsp&nbspdocServiceYr_FS<br/>&nbsp&nbsp&nbsp&nbspdocEdCountry_FS<br/>&nbsp&nbsp&nbsp&nbspdocPayTypeN_FS<br/>&nbsp&nbsp&nbsp&nbspdocN_Visits_FS<br/>&nbsp&nbsp&nbsp&nbspdocNPatients_FS<br/>&nbsp&nbsp&nbsp&nbspdocStatinRxPCT_FS<br/>&#59<br/><br/><br/>/*VXTB_FS1. Report distribution of UPC index*/<br/>title \"distribution of UPC Index\"&#59<br/>proc means data=VXM_FS mean std median qrange q1 q3&#59<br/>&nbsp&nbsp&nbsp&nbspvar UPCIndexF&#59<br/>&nbsp&nbsp&nbsp&nbspods output summary=VXTB_FS1a&#59<br/>run&#59<br/>title&#59<br/>Data VXTB_FS1&#59<br/>&nbsp&nbsp&nbsp&nbspset VXTB_FS1a&#59<br/>&nbsp&nbsp&nbsp&nbspproject=&_clientProjectName&#59<br/>&nbsp&nbsp&nbsp&nbspprogram=&_clientTaskLabel&#59<br/>&nbsp&nbsp&nbsp&nbspcreateDate=date()&#59<br/>&nbsp&nbsp&nbsp&nbspformat createDate date9.&#59<br/>run&#59<br/>proc export data=VXTB_FS1<br/>&nbsp&nbsp&nbsp&nbspdbms=xlsx<br/>&nbsp&nbsp&nbsp&nbspoutfile=\"&localReportPath.\\reports.xlsx\"<br/>&nbsp&nbsp&nbsp&nbspreplace&#59<br/>&nbsp&nbsp&nbsp&nbspsheet= \"Table11a_UPCIndexDist_FS\"&#59&nbsp&nbsp&nbsp&nbsp<br/>&#59<br/>run&#59<br/><br/>/*VXTB_FS2. Treat up the missing values.<br/>&nbsp&nbsp&nbsp&nbspNote: two patients whose UCPF1 does not have doc covariates like age sex... <br/>*/<br/>data VXTB_FS2&#59<br/>&nbsp&nbsp&nbsp&nbspset VXM_FS&#59<br/>&nbsp&nbsp&nbsp&nbspSex=1&#59<br/>&nbsp&nbsp&nbsp&nbspif sex_desc='M' then sex=0&#59<br/>&nbsp&nbsp&nbsp&nbspqaippeN = qaippe&#59<br/>&nbsp&nbsp&nbsp&nbspif qaippe = . or qaippe = 9 then qaippeN=0&#59<br/>&nbsp&nbsp&nbsp&nbspresitypeN=1&#59<br/>&nbsp&nbsp&nbsp&nbspif resitype='URBAN' then resitypeN=0&#59<br/>&nbsp&nbsp&nbsp&nbspif charlson_index=. then charlson_index=0&#59<br/>&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp/*release the practice (doc) related covariates. Note, it is named _FS,but is indeed measured from runin through follow up (2 years)*/<br/>&nbsp&nbsp&nbsp&nbspdocSex_FS = scan(UCPF1, 4, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspif docSex_FS='M' then docSexN_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspelse docSexN_FS=1&#59<br/>&nbsp&nbsp&nbsp&nbspdocBirthYr_FS= scan(UCPF1, 5, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspdocAge_FS=int(yrdif(mdy(6,30,docbirthyr_FS), entryDate, \"age\"))&#59<br/>&nbsp&nbsp&nbsp&nbspdocGradYr_FS= input(scan(UCPF1, 6, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocServiceYr_FS= year(entryDate) - docGradYr_FS&#59<br/>&nbsp&nbsp&nbsp&nbspdocEdCountry_FS = input(scan(UCPF1, 8, \":\"), 8.)&#59 /*0 for foreign*/<br/>&nbsp&nbsp&nbsp&nbspdocPayType_FS = scan(UCPF1, 9, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspif strip(docPayType_FS )='NFFS' then docPayTypeN_FS =1&#59<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif strip(docPayType_FS )='FFS' then docPayTypeN_FS =0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse docPayTypeN_FS =2&#59/*unknown*/<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdocN_Visits_FS = input(scan(UCPF1, 10, \":\"), 8.)&#59 /*N_Visits*/<br/>&nbsp&nbsp&nbsp&nbspdocNPatients_FS = input(scan(UCPF1, 11, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocNRx_FS=  input(scan(UCPF1, 12, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocNStatinRx_FS=  input(scan(UCPF1, 13, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspif docNStatinRx_FS=. then docNStatinRx_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspif docNRx_FS=. or docNRx_FS=0 or docNStatinRx_FS=0 then docStatinRxPCT_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspelse docStatinRxPCT_FS = round(docNStatinRx_FS/docNRx_FS*100, '0.01')&#59<br/>run&#59<br/><br/>/*check missing*/<br/>proc means data=VXTB_FS2 missing&#59<br/>vars &covariates&#59run&#59<br/><br/>/*VXTB_FS3. Check multicollinearity and report*/<br/>ods trace on&#59<br/>proc reg data=VXTB_FS2&#59 <br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust =UPCIndexF CompFS &covariates /tol vif&#59<br/>&nbsp&nbsp&nbsp&nbspods output ParameterEstimates = VXTB_FS3a&#59<br/>run&#59<br/>ods trace off&#59<br/>data VXTB_FS3&#59<br/>&nbsp&nbsp&nbsp&nbspset VXTB_FS3a&#59<br/>&nbsp&nbsp&nbsp&nbspproject=&_clientProjectName&#59<br/>&nbsp&nbsp&nbsp&nbspprogram=&_clientTaskLabel&#59<br/>&nbsp&nbsp&nbsp&nbspcreateDate=date()&#59<br/>&nbsp&nbsp&nbsp&nbspformat createDate date9.&#59<br/>run&#59<br/>proc export data=VXTB_FS2<br/>&nbsp&nbsp&nbsp&nbspdbms=xlsx<br/>&nbsp&nbsp&nbsp&nbspoutfile=\"&localReportPath.\\reports.xlsx\"<br/>&nbsp&nbsp&nbsp&nbspreplace&#59<br/>&nbsp&nbsp&nbsp&nbspsheet= \"Table11a_MultiCollinearity_FS\"&#59&nbsp&nbsp&nbsp&nbsp<br/>&#59<br/>run&#59<br/><br/><br/>/*VXTB_FS5. Make an empty set to hold all statistic results from the regression models.*/<br/>data VXTB_FS5&#59length Var $200. label $200.&#59 delete&#59run&#59<br/>data VXTB_NRI&#59 length m1 $200. m2 $200.&#59delete&#59 run&#59<br/>data VXTB_CNRI&#59 length m1 $200. m2 $200.&#59delete&#59 run&#59<br/>data VXTB_IDI&#59 length m1 $200. m2 $200.&#59delete&#59 run&#59<br/>/*loop for UPCCutOff, and COC measures, and for univ/multiv models*/<br/>%macro LoopUPCCutOff(UPCCutOff=)&#59<br/>&nbsp&nbsp&nbsp&nbsp%local UPCCutOff&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*VXTB_FS4.  Make UPCIndex category*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata VXTB_FS4&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXTB_FS2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCIndexF_Cat='L'&#59/*low*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif UPCIndexF >= UPCIndexFP&UPCCutOff  then UPCIndexF_Cat='H'&#59/*high*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCombTerm_FS = strip(UPCIndexF_Cat) || strip(CompFS)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*prepare a data set to hold predict probs from multivariate models*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata VXTB_m&UPCCutOff&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXTB_FS4&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep key_hsn Adherence_Adjust&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*VXTB_FS5a. Regression Stage 1. Univariate Models*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%macro makeUniv(theXVar=)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%local theXVar&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTitle \"&theXVar\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods results off&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc logistic data=VXTB_FS4 descending&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspclass UPCIndexF_Cat (ref='L') CombTerm_FS (ref='L0') sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN') <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference truncate=200&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = &theXVar  /scale=none aggregate&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if &theXVar = CombTerm_FS %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs Lowe UPCI non COMPCOC, H1 vs L0\" CombTerm_FS 0 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, COMPCOC vs non COMPCOC, L1 vs L0\" CombTerm_FS 0 0 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs non COMPCOC, H1 vs H0\" CombTerm_FS -1 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"COMPCOC, High UPCI vs low UPCI, H1 vs L1\" CombTerm_FS 0 1 -1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"NonCOMPCOC, High UPCI vs low UPCI, H0 vs L0\" CombTerm_FS 1 0 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI but COMPCOC vs High UPCI but non-COMPCOC , L1 vs H0\" CombTerm_FS -1 0 1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"&theXVar\" &theXVar 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods output estimates =makeUniv_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods results on&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata makeUniv_tmp2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset makeUniv_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspVar = symget('theXVar')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCCutOff = &UPCCutOff&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspType='Univariate '&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*Attach results to the summary table*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata VXTB_FS5&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXTB_FS5 makeUniv_tmp2&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc datasets nolist&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete makeUniv_tmp:&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%mend makeUniv&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%makeUniv(theXVar = UPCIndexF_Cat)&#59 /*loop for UPCIndexF_Cat, COMPFS, and CombinedTerm_FS*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%makeUniv(theXVar = CompFS)&#59 /*loop for UPCIndexF_Cat, COMPFS, and CombinedTerm_FS*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%makeUniv(theXVar = CombTerm_FS)&#59 /*loop for UPCIndexF_Cat, COMPFS, and CombinedTerm_FS*/<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*VXTB_FS5b. multivariate models*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*loop for vars*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*loop for null, UPCIndexF_Cat, COMPFS, and CombinedTerm_FS*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%macro makeMulti(theXVar=)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%local theXVar&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTitle \"&theXVar, + covariates \"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods results off&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc logistic data=VXTB_FS4 descending&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspclass UPCIndexF_Cat (ref='L') CombTerm_FS (ref='L0') sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN') <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = &theXVar &covariates &theXVar*resitypN /scale=none aggregate&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspROC 'M1: &theXVar + covariates' &theXVar &covariates&#59*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspROC 'M2: covariates'  &covariates&#59*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsproccontrast reference ('M2: covariates')  /estimate&#59*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if %length(&theXVar) ne 0 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if &theXVar = CombTerm_FS %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs Lowe UPCI non COMPCOC, H1 vs L0\" CombTerm_FS 0 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, COMPCOC vs non COMPCOC, L1 vs L0\" CombTerm_FS 0 0 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs non COMPCOC, H1 vs H0\" CombTerm_FS -1 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"COMPCOC, High UPCI vs low UPCI, H1 vs L1\" CombTerm_FS 0 1 -1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"NonCOMPCOC, High UPCI vs low UPCI, H0 vs L0\" CombTerm_FS 1 0 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI but COMPCOC vs High UPCI but non-COMPCOC , L1 vs H0\" CombTerm_FS -1 0 1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"&theXVar\" &theXVar 1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods output estimates =makeMulti_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspoutput out=VXTB_m&theXVar  (keep=key_hsn adherence_adjust prob_m&theXVar) p=prob_m&theXVar&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptitle&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods results on&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if %length(&theXVar) ne 0 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata makeMulti_tmp2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset makeMulti_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspVar = symget('theXVar')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCCutOff = &UPCCutOff&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspType='Multivariate '&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*Attach results to the summary table*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata VXTB_FS5&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXTB_FS5 makeMulti_tmp2&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*merge the pred values*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXTB_m&UPCCutOff,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXTB_m&theXVar,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXTB_m&UPCCutOff, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.Prob_m&theXVar),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%mend makeMulti&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%makeMulti(theXVar =)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%makeMulti(theXVar = UPCIndexF_Cat)&#59 /*loop for UPCIndexF_Cat, COMPFS, and CombinedTerm_FS*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%makeMulti(theXVar = CompFS)&#59 /*loop for UPCIndexF_Cat, COMPFS, and CombinedTerm_FS*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%makeMulti(theXVar = CombTerm_FS)&#59 /*loop for UPCIndexF_Cat, COMPFS, and CombinedTerm_FS*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%macro makeIDINRI(probterm1=, probterm2=)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*NRI*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%local probterm1 probterm2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%NRICAT(VXTB_m&UPCCutOff, 1, adherence_adjust, &probterm1, &probterm2 , 2, .5)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata makeIDINRI_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset _all_&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspm1=upcase(symget('probterm1'))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspm2=upcase(symget('probterm2'))&#59&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCCutOff = &UPCCutOff&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata VXTB_NRI&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXTB_NRI makeIDINRI_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*Continuous NRI*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%CONTNRI(VXTB_m&UPCCutOff,1,adherence_adjust,&probterm1, &probterm2 )&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata makeIDINRI_tmp2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset _all_&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspm1=upcase(symget('probterm1'))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspm2=upcase(symget('probterm2'))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCCutOff = &UPCCutOff&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata VXTB_CNRI&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXTB_CNRI makeIDINRI_tmp2&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*IDI*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%IDIMacro(VXTB_m&UPCCutOff, 1, adherence_adjust, &probterm1, &probterm2 )&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata makeIDINRI_tmp3&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset _IDI_&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspm1=upcase(symget('probterm1'))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspm2=upcase(symget('probterm2'))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCCutOff = &UPCCutOff&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata VXTB_IDI&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXTB_IDI makeIDINRI_tmp3&#59&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc datasets nolist&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete makeIDINRI_tmp:&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%mend makeIDINRI&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods results off&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%makeIDINRI(probterm1=Prob_m, probterm2=Prob_mUPCIndexF_Cat    )&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%makeIDINRI(probterm1=Prob_m, probterm2=Prob_mCompFS    )&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%makeIDINRI(probterm1=Prob_m, probterm2=Prob_mCombTerm_FS   )&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%makeIDINRI(probterm1=Prob_mUPCIndexF_Cat, probterm2=Prob_mCompFS    )&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%makeIDINRI(probterm1=Prob_mUPCIndexF_Cat, probterm2=Prob_mCombTerm_FS   )&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%makeIDINRI(probterm1=Prob_mCompFS, probterm2=Prob_mCombTerm_FS   )&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods results on&#59<br/>%mend LoopUPCCutOff&#59<br/>/*%LoopUPCCutOff(UPCCutOff =25)&#59*/<br/>%LoopUPCCutOff(UPCCutOff =50)&#59<br/>/*%LoopUPCCutOff(UPCCutOff =75)&#59*/<br/>data localt.VXTB_FS&#59<br/>&nbsp&nbsp&nbsp&nbspset VXTB_FS5&#59<br/>&nbsp&nbsp&nbsp&nbspproject=&_clientProjectName&#59<br/>&nbsp&nbsp&nbsp&nbspprogram=&_clientTaskLabel&#59<br/>&nbsp&nbsp&nbsp&nbspcreateDate=date()&#59<br/>&nbsp&nbsp&nbsp&nbspformat createDate date9.&#59<br/>run&#59<br/>data localt.VXTB_NRI_FS&#59<br/>&nbsp&nbsp&nbsp&nbspset VXTB_NRI&#59<br/>&nbsp&nbsp&nbsp&nbspproject=&_clientProjectName&#59<br/>&nbsp&nbsp&nbsp&nbspprogram=&_clientTaskLabel&#59<br/>&nbsp&nbsp&nbsp&nbspcreateDate=date()&#59<br/>&nbsp&nbsp&nbsp&nbspformat createDate date9.&#59<br/>run&#59<br/>data localt.VXTB_CNRI_FS&#59<br/>&nbsp&nbsp&nbsp&nbspset VXTB_CNRI&#59<br/>&nbsp&nbsp&nbsp&nbspproject=&_clientProjectName&#59<br/>&nbsp&nbsp&nbsp&nbspprogram=&_clientTaskLabel&#59<br/>&nbsp&nbsp&nbsp&nbspcreateDate=date()&#59<br/>&nbsp&nbsp&nbsp&nbspformat createDate date9.&#59<br/>run&#59<br/>data localt.VXTB_IDI_FS&#59<br/>&nbsp&nbsp&nbsp&nbspset VXTB_IDI&#59<br/>&nbsp&nbsp&nbsp&nbspproject=&_clientProjectName&#59<br/>&nbsp&nbsp&nbsp&nbspprogram=&_clientTaskLabel&#59<br/>&nbsp&nbsp&nbsp&nbspcreateDate=date()&#59<br/>&nbsp&nbsp&nbsp&nbspformat createDate date9.&#59<br/>run&#59<br/><br/>proc export data=localt.VXTB_FS<br/>&nbsp&nbsp&nbsp&nbspdbms=xlsx<br/>&nbsp&nbsp&nbsp&nbspoutfile=\"&localReportPath.\\reports.xlsx\"<br/>&nbsp&nbsp&nbsp&nbspreplace&#59<br/>&nbsp&nbsp&nbsp&nbspsheet= \"TableB12a_OddRatio_FS\"&#59&nbsp&nbsp&nbsp&nbsp<br/>&#59<br/>run&#59<br/>proc export data=localt.VXTB_NRI_FS<br/>&nbsp&nbsp&nbsp&nbspdbms=xlsx<br/>&nbsp&nbsp&nbsp&nbspoutfile=\"&localReportPath.\\reports.xlsx\"<br/>&nbsp&nbsp&nbsp&nbspreplace&#59<br/>&nbsp&nbsp&nbsp&nbspsheet= \"TableB13a_NRI_FS\"&#59&nbsp&nbsp&nbsp&nbsp<br/>&#59<br/>run&#59<br/>proc export data=localt.VXTB_CNRI_FS<br/>&nbsp&nbsp&nbsp&nbspdbms=xlsx<br/>&nbsp&nbsp&nbsp&nbspoutfile=\"&localReportPath.\\reports.xlsx\"<br/>&nbsp&nbsp&nbsp&nbspreplace&#59<br/>&nbsp&nbsp&nbsp&nbspsheet= \"TableB14a_CNRI_FS\"&#59&nbsp&nbsp&nbsp&nbsp<br/>&#59<br/>run&#59<br/>proc export data=localt.VXTB_IDI_FS<br/>&nbsp&nbsp&nbsp&nbspdbms=xlsx<br/>&nbsp&nbsp&nbsp&nbspoutfile=\"&localReportPath.\\reports.xlsx\"<br/>&nbsp&nbsp&nbsp&nbspreplace&#59<br/>&nbsp&nbsp&nbsp&nbspsheet= \"TableB15a_IDI_FS\"&#59&nbsp&nbsp&nbsp&nbsp<br/>&#59<br/>run&#59<br/><br/>%beep&#59<br/><br/><br/><br/>&nbsp&nbsp&nbsp&nbsp<br/><br/><br/><br/><br/><br/><br/>s///<br/>t///","custparents":[{"idx":"CodeTask-dc1t3qIkzKpa3hgA"},{"idx":"c87cb1b1-c238-48d0-b3c5-46f4020a1bf7"},{"idx":"c87cb1b1-c238-48d0-b3c5-46f4020a1bf7"}]}]}],"custparents":[{"idx":"CodeTask-mqQWr8kGTH7TzB2R"}]},{"idx":"330a46ba-feb1-4ff3-9cf3-230673e086b0","name":"VXN_FS PS matching","NodeDescription":"///t<br/>///s<br/>VXN PS matching<br/>s///<br/>t///","children":[{"idx":"5d6d38f2-c523-4e99-b7f7-85519610e586","name":"VXN_FS_Propensity Score Matching_by  Exposure","NodeDescription":"///t<br/>///s<br/>/*VXN_FS_PropensityScoreMatching,  , PS by exposure, matching by expsoure*/<br/>data _null_&#59run&#59<br/><br/><br/>/*VXN_FS0-1. Prepare data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXM_FS.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXM_FS.sas7bdat)<br/>)&#59<br/>data VXN_FS1&#59<br/>&nbsp&nbsp&nbsp&nbspset VXM_FS&#59<br/>&nbsp&nbsp&nbsp&nbspqaippeN = qaippe&#59<br/>&nbsp&nbsp&nbsp&nbspif qaippe = . or qaippe = 9 then qaippeN=0&#59<br/>&nbsp&nbsp&nbsp&nbspresitypeN=1&#59<br/>&nbsp&nbsp&nbsp&nbspif resitype='URBAN' then resitypeN=0&#59<br/>&nbsp&nbsp&nbsp&nbspif charlson_index=. then charlson_index=0&#59<br/>run&#59<br/>/*Define psVars*/<br/>%let psVars = &nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspQAIPPEN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspRESITYPEN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNDINS_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNDINS_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNHOSP_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNHOSP_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHNIGHTS_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHDAYS_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHNIGHTS_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHDAYS_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_GP_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_SP_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_GP_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_SP_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_ER_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_ER_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAY_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAYPCT_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAY_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAYPCT_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspBENZO_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPSYCHO_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTIDEP_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTICHO_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspBENZO_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPSYCHO_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTIDEP_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTICHO_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_NPD_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_SA_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_PSY_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_NPD_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_SA_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_PSY_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCHARLSON_INDEX<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_ANXIETY_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_DIABETES<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HTN<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOOD_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_NS_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_ASTHMA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_COPD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AP_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOODANX<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOODANXP*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OA<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OMH*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SUBABUSE_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AMI<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CD_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HP_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_IHD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_STROKE_1POP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_WF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_1POP<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CA_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_PV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_DA_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_NONRA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_LB_PS<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_2DRUG*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_RF_PS*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_VTE_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CO_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_STROKE_2HOSP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_IB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_RA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CK_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_LV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_EPAD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_UB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SUICIDE_OLD<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SCHIZO*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SCHIZO_EVER<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_PD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_EPJR<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_ANXIETY_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_DIABETES*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HTN*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOOD_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_NS_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOODANX*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOODANXP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OMH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_ASTHMA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_COPD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HF*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AP_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_IHD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SUBABUSE_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AMI*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CD_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HP_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_STROKE_1POP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_WF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_1POP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_NONRA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CA_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CO_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_DA_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_PV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_2DRUG*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_LB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_RF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_VTE_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_STROKE_2HOSP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_IB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_RA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_LV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_EPAD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_UB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SUICIDE_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SCHIZO*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SCHIZO_EVER*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_PD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_EPJR*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPRE365_PRSCR_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPRE365_MEDCLASS_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFOLLOWUP_PRSCR_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFOLLOWUP_MEDCLASS_STATINAHTNOH&nbsp&nbsp&nbsp&nbsp*/<br/>&#59<br/><br/><br/>/*VXN_FS2-3, propensity score matching. Changed, PS score based on exposure status, and match is based on exposure*/<br/>/*VXN_FS1a, match by UPCIndexFS cutoff = 25*/<br/>ods results on&#59<br/><br/><br/><br/><br/>%let UPCCutOff=50&#59<br/>data VXN_FS2_&UPCCutOff&#59<br/>&nbsp&nbsp&nbsp&nbspset VXN_FS1&#59<br/>&nbsp&nbsp&nbsp&nbspUPCIndexF_CatN&UPCCutOff=0&#59/*low*/<br/>&nbsp&nbsp&nbsp&nbspif UPCIndexF >= UPCIndexFP&UPCCutOff  then UPCIndexF_CatN&UPCCutOff=1&#59/*high*/<br/>&nbsp&nbsp&nbsp&nbspCombTerm_FS = strip(UPCIndexF_CatN&UPCCutOff) || strip(CompFS)&#59<br/>run&#59<br/><br/>%let thisExposureVar =UPCIndexF_CatN&UPCCutOff&#59<br/><br/>%MatchByPS(<br/>&nbsp&nbsp&nbsp&nbspdata=VXN_FS2_&UPCCutOff,<br/>&nbsp&nbsp&nbsp&nbsptheExposureVar=&thisExposureVar,<br/>&nbsp&nbsp&nbsp&nbsptrimPCT=5,<br/>&nbsp&nbsp&nbsp&nbspmatchN=1,<br/>&nbsp&nbsp&nbsp&nbspcapliper=0.2,<br/>&nbsp&nbsp&nbsp&nbspkeepVarsForPart2 = key_hsn &thisExposureVar age sex_desc logit_ps entrydate,<br/>&nbsp&nbsp&nbsp&nbspexposeCondition=%quote(&thisExposureVar  = 1),<br/>&nbsp&nbsp&nbsp&nbspControlCondition=%quote(&thisExposureVar  = 0),<br/>&nbsp&nbsp&nbsp&nbspConditionsForPart2 =%quote(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspabs(t1.age-t2.age) <=1 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp|<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.sex_desc = t2.sex_desc<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp|<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspabs(t1.EntryDate-t2.EntryDate) <=365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp|<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspabs(t1.logit_ps - t2.logit_ps) <= 0.2),<br/>&nbsp&nbsp&nbsp&nbsppsdiff=psdiff,<br/>&nbsp&nbsp&nbsp&nbsppsdiffTermForPart2=%quote(,abs(t1.logit_ps-t2.logit_ps) as psDiff),<br/>&nbsp&nbsp&nbsp&nbspnoreplaceForPart2=1,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXN_FS3_&thisExposureVar.,<br/>&nbsp&nbsp&nbsp&nbspdebug=1,<br/>&nbsp&nbsp&nbsp&nbspthePSVars=&psVars &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>)&#59<br/><br/>data VXN_FS_&thisExposureVar._DATA_EXP&#59<br/>&nbsp&nbsp&nbsp&nbspset VXN_FS3_&thisExposureVar._DATA&#59<br/>Run&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localTargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VXN_FS_&thisExposureVar._DATA_EXP.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VXN_FS_&thisExposureVar._DATA_EXP.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/>data localt.VXN_FS_&thisExposureVar._Rpt_EXP&#59<br/>&nbsp&nbsp&nbsp&nbspset VXN_FS3_&thisExposureVar._Report&#59<br/>Run&#59<br/><br/><br/><br/>s///<br/>t///","children":[{"idx":"27d010ea-aa71-47b3-9da4-3a12aded94d9","name":"VXV_FS matched Logistic_Exp","NodeDescription":"///t<br/>///s<br/>/*VXV_FS Unmatched logistic regression, Adherece_adjusted by COMPFS vs UPCIndxF vs CombTerm_FS*/<br/><br/>data _null_&#59run&#59<br/><br/>%let theData =VXN_FS_UPCINDEXF_CATN50_DATA_EXP&#59<br/><br/>/*VXV_FS0. Prepare source files.*/<br/>%include \"P:\\Physician_Impact_Pro(SYao)_Bio14-143\\SAS code\\reclass.macros.v4.sas\"&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\&theData..zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(&theData..sas7bdat)<br/>)&#59<br/>/*check the upc score*/<br/>%print(data=&theData)&#59<br/>/*Define covariates*/<br/>%let covariates = &nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspage   QAIPPEN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspRESITYPEN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNDINS_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNDINS_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNHOSP_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNHOSP_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHNIGHTS_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHDAYS_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHNIGHTS_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHDAYS_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_GP_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_SP_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_GP_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_SP_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_ER_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_ER_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAY_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAYPCT_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAY_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAYPCT_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspBENZO_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPSYCHO_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTIDEP_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTICHO_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspBENZO_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPSYCHO_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTIDEP_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTICHO_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_NPD_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_SA_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_PSY_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_NPD_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_SA_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_PSY_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCHARLSON_INDEX<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_ANXIETY_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_DIABETES<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HTN<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOOD_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_NS_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_ASTHMA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_COPD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AP_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOODANX<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOODANXP*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OA<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OMH*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SUBABUSE_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AMI<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CD_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HP_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_IHD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_STROKE_1POP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_WF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_1POP<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CA_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_PV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_DA_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_NONRA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_LB_PS<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_2DRUG*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_RF_PS*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_VTE_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CO_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_STROKE_2HOSP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_IB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_RA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CK_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_LV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_EPAD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_UB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SUICIDE_OLD<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SCHIZO*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SCHIZO_EVER<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_PD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_EPJR<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_ANXIETY_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_DIABETES*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HTN*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOOD_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_NS_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOODANX*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOODANXP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OMH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_ASTHMA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_COPD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HF*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AP_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_IHD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SUBABUSE_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AMI*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CD_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HP_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_STROKE_1POP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_WF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_1POP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_NONRA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CA_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CO_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_DA_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_PV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_2DRUG*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_LB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_RF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_VTE_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_STROKE_2HOSP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_IB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_RA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_LV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_EPAD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_UB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SUICIDE_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SCHIZO*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SCHIZO_EVER*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_PD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_EPJR*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPRE365_PRSCR_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPRE365_MEDCLASS_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFOLLOWUP_PRSCR_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFOLLOWUP_MEDCLASS_STATINAHTNOH&nbsp&nbsp&nbsp&nbsp*/<br/>/*practice/physician related factors*/<br/>&nbsp&nbsp&nbsp&nbspdocSexN_FS<br/>&nbsp&nbsp&nbsp&nbspdocAge_FS<br/>&nbsp&nbsp&nbsp&nbspdocServiceYr_FS<br/>&nbsp&nbsp&nbsp&nbspdocEdCountry_FS<br/>&nbsp&nbsp&nbsp&nbspdocPayTypeN_FS<br/>&nbsp&nbsp&nbsp&nbspdocN_Visits_FS<br/>&nbsp&nbsp&nbsp&nbspdocNPatients_FS<br/>&nbsp&nbsp&nbsp&nbspdocStatinRxPCT_FS<br/>&#59<br/><br/><br/>/*VXV_FS2. Treat the missing values.*/<br/>data VXV_FS2_EXP&#59<br/>&nbsp&nbsp&nbsp&nbspset &thedata&#59<br/>&nbsp&nbsp&nbsp&nbspSex=1&#59<br/>&nbsp&nbsp&nbsp&nbspif sex_desc='M' then sex=0&#59<br/>&nbsp&nbsp&nbsp&nbspqaippeN = qaippe&#59<br/>&nbsp&nbsp&nbsp&nbspif qaippe = . or qaippe = 9 then qaippeN=6&#59<br/>&nbsp&nbsp&nbsp&nbspresitypeN=1&#59<br/>&nbsp&nbsp&nbsp&nbspif resitype='URBAN' then resitypeN=0&#59<br/>&nbsp&nbsp&nbsp&nbspif charlson_index=. then charlson_index=0&#59<br/>&nbsp&nbsp&nbsp&nbspif UPCIndexF_CatN50=1 then &nbsp&nbsp&nbsp&nbspCombTerm_FS = 'H' || strip(CompFS)&#59<br/>&nbsp&nbsp&nbsp&nbspif UPCIndexF_CatN50=0 then &nbsp&nbsp&nbsp&nbspCombTerm_FS = 'L' || strip(CompFS)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*release the practice (doc) related covariates. Note, it is named _FS,but is indeed measured from runin through follow up (2 years)*/<br/>&nbsp&nbsp&nbsp&nbspdocSex_FS = scan(UCPF1, 4, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspif docSex_FS='M' then docSexN_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspelse docSexN_FS=1&#59<br/>&nbsp&nbsp&nbsp&nbspdocBirthYr_FS= scan(UCPF1, 5, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspdocAge_FS=int(yrdif(mdy(6,30,docbirthyr_FS), entryDate, \"age\"))&#59<br/>&nbsp&nbsp&nbsp&nbspdocGradYr_FS= input(scan(UCPF1, 6, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocServiceYr_FS= year(entryDate) - docGradYr_FS&#59<br/>&nbsp&nbsp&nbsp&nbspdocEdCountry_FS = input(scan(UCPF1, 8, \":\"), 8.)&#59 /*0 for foreign*/<br/>&nbsp&nbsp&nbsp&nbspdocPayType_FS = scan(UCPF1, 9, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspif strip(docPayType_FS )='NFFS' then docPayTypeN_FS =1&#59<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif strip(docPayType_FS )='FFS' then docPayTypeN_FS =0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse docPayTypeN_FS =2&#59/*unknown*/<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdocN_Visits_FS = input(scan(UCPF1, 10, \":\"), 8.)&#59 /*N_Visits*/<br/>&nbsp&nbsp&nbsp&nbspdocNPatients_FS = input(scan(UCPF1, 11, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocNRx_FS=  input(scan(UCPF1, 12, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocNStatinRx_FS=  input(scan(UCPF1, 13, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspif docNStatinRx_FS=. then docNStatinRx_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspif docNRx_FS=. or docNRx_FS=0 or docNStatinRx_FS=0 then docStatinRxPCT_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspelse docStatinRxPCT_FS = round(docNStatinRx_FS/docNRx_FS*100, '0.01')&#59<br/>run&#59<br/><br/>data VXV_FS2x_EXP&#59<br/>&nbsp&nbsp&nbsp&nbspset VXV_FS2_EXP&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn adherence_adjust UPCIndexF_CatN50 COMPFS CombTerm_FS &covariates match_Num&#59<br/>run&#59<br/>%sort(data=VXV_FS2x_EXP, sorter=match_num descending adherence_adjust)&#59<br/><br/>/*1.UPCIndex as theVar*/<br/>%macro doUniv&#59<br/>%let  theXVar = UPCIndexF_CatN50&#59<br/>ods results off&#59<br/>proc logistic data=VXV_FS2x_EXP descending&#59<br/>&nbsp&nbsp&nbsp&nbspclass  CombTerm_FS (ref='L0') /*sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN')*/ <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspstrata match_Num&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = &theXVar &#59<br/>&nbsp&nbsp&nbsp&nbsp%if &theXVar = CombTerm_FS %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs Lowe UPCI non COMPCOC, H1 vs L0\" CombTerm_FS 0 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, COMPCOC vs non COMPCOC, L1 vs L0\" CombTerm_FS 0 0 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs non COMPCOC, H1 vs H0\" CombTerm_FS -1 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"COMPCOC, High UPCI vs low UPCI, H1 vs L1\" CombTerm_FS 0 1 -1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"NonCOMPCOC, High UPCI vs low UPCI, H0 vs L0\" CombTerm_FS 1 0 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI but COMPCOC vs High UPCI but non-COMPCOC , L1 vs H0\" CombTerm_FS -1 0 1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"&theXVar\" &theXVar 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbspods output estimates =localt.Est50EXP_U_UPC &#59<br/>&nbsp&nbsp&nbsp&nbspoutput out=localt.m50EXP_U_UPC (keep=key_hsn adherence_adjust p) p=p&#59 <br/>run&#59<br/>ods results on&#59<br/>%mend doUniv&#59<br/>%doUniv&#59<br/><br/>/*multi model without theVar*/<br/>%macro doMultiv&#59<br/>%let  theXVar = UPCIndexF_CatN50&#59<br/>/*ods results off&#59*/<br/>proc logistic data=VXV_FS2x_EXP desc&#59<br/>&nbsp&nbsp&nbsp&nbspstrata match_Num &#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') =  &covariates /maxiter=500  &#59<br/>&nbsp&nbsp&nbsp&nbspoutput out=localt.M50EXP_M_COV (keep=key_hsn adherence_adjust p) p=p&#59<br/>run&#59<br/>/*ods results on&#59*/<br/>%mend doMultiv&#59<br/>%doMultiv&#59<br/><br/>/*multi model  theVar and covariates*/<br/>%macro doMultiv&#59<br/>%let  theXVar = UPCIndexF_CatN50&#59<br/>/*ods results off&#59*/<br/>proc logistic data=VXV_FS2x_EXP desc&#59<br/>&nbsp&nbsp&nbsp&nbspstrata match_Num&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = &theXVar &covariates /maxiter=500  &#59<br/>&nbsp&nbsp&nbsp&nbsp%if &theXVar = CombTerm_FS %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs Lowe UPCI non COMPCOC, H1 vs L0\" CombTerm_FS 0 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, COMPCOC vs non COMPCOC, L1 vs L0\" CombTerm_FS 0 0 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs non COMPCOC, H1 vs H0\" CombTerm_FS -1 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"COMPCOC, High UPCI vs low UPCI, H1 vs L1\" CombTerm_FS 0 1 -1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"NonCOMPCOC, High UPCI vs low UPCI, H0 vs L0\" CombTerm_FS 1 0 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI but COMPCOC vs High UPCI but non-COMPCOC , L1 vs H0\" CombTerm_FS -1 0 1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"&theXVar\" &theXVar 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbspods output estimates =localt.Est50EXP_M_UPC&#59<br/>&nbsp&nbsp&nbsp&nbspoutput out=localt.M50EXP_M_UPC (keep=key_hsn adherence_adjust p) p=p&#59<br/>run&#59<br/>/*ods results on&#59*/<br/>%mend doMultiv&#59<br/>%doMultiv&#59<br/><br/><br/><br/>/*2.CompCOC as theVar*/<br/>/*univ*/<br/>%macro doUniv&#59<br/>%let  theXVar = COMPFS&#59<br/>ods results off&#59<br/>proc logistic data=VXV_FS2x_EXP descending&#59<br/>&nbsp&nbsp&nbsp&nbspclass  CombTerm_FS (ref='L0') /*sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN')*/ <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspstrata match_Num&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = &theXVar &#59<br/>&nbsp&nbsp&nbsp&nbsp%if &theXVar = CombTerm_FS %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs Lowe UPCI non COMPCOC, H1 vs L0\" CombTerm_FS 0 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, COMPCOC vs non COMPCOC, L1 vs L0\" CombTerm_FS 0 0 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs non COMPCOC, H1 vs H0\" CombTerm_FS -1 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"COMPCOC, High UPCI vs low UPCI, H1 vs L1\" CombTerm_FS 0 1 -1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"NonCOMPCOC, High UPCI vs low UPCI, H0 vs L0\" CombTerm_FS 1 0 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI but COMPCOC vs High UPCI but non-COMPCOC , L1 vs H0\" CombTerm_FS -1 0 1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"&theXVar\" &theXVar 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbspods output estimates =localt.Est50EXP_U_CMP &#59<br/>&nbsp&nbsp&nbsp&nbspoutput out=localt.m50EXP_U_CMP (keep=key_hsn adherence_adjust p) p=p&#59 <br/>run&#59<br/>ods results on&#59<br/>%mend doUniv&#59<br/>%doUniv&#59<br/><br/><br/>/*multi model  theVar and covariates*/<br/>%macro doMultiv&#59<br/>%let  theXVar = COMPFS&#59<br/>/*ods results off&#59*/<br/>proc logistic data=VXV_FS2x_EXP desc&#59<br/>&nbsp&nbsp&nbsp&nbspclass  CombTerm_FS (ref='L0') /*sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN')*/ <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspstrata match_Num&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = &theXVar &covariates /maxiter=500  &#59<br/>&nbsp&nbsp&nbsp&nbsp%if &theXVar = CombTerm_FS %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs Lowe UPCI non COMPCOC, H1 vs L0\" CombTerm_FS 0 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, COMPCOC vs non COMPCOC, L1 vs L0\" CombTerm_FS 0 0 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs non COMPCOC, H1 vs H0\" CombTerm_FS -1 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"COMPCOC, High UPCI vs low UPCI, H1 vs L1\" CombTerm_FS 0 1 -1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"NonCOMPCOC, High UPCI vs low UPCI, H0 vs L0\" CombTerm_FS 1 0 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI but COMPCOC vs High UPCI but non-COMPCOC , L1 vs H0\" CombTerm_FS -1 0 1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"&theXVar\" &theXVar 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbspods output estimates =localt.Est50EXP_M_CMP&#59<br/>&nbsp&nbsp&nbsp&nbspoutput out=localt.m50EXP_M_CMP (keep=key_hsn adherence_adjust p) p=p&#59 <br/>run&#59<br/>/*ods results on&#59*/<br/>%mend doMultiv&#59<br/>%doMultiv&#59<br/><br/><br/><br/><br/>/*3.Combined as theVar*/<br/>/*univ*/<br/>%macro doUniv&#59<br/>%let  theXVar = CombTerm_FS&#59<br/>ods results off&#59<br/>proc logistic data=VXV_FS2x_EXP descending&#59<br/>&nbsp&nbsp&nbsp&nbspclass  CombTerm_FS (ref='L0') /*sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN')*/ <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspstrata match_Num&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = &theXVar &#59<br/>&nbsp&nbsp&nbsp&nbsp%if &theXVar = CombTerm_FS %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs Lowe UPCI non COMPCOC, H1 vs L0\" CombTerm_FS 0 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, COMPCOC vs non COMPCOC, L1 vs L0\" CombTerm_FS 0 0 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs non COMPCOC, H1 vs H0\" CombTerm_FS -1 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"COMPCOC, High UPCI vs low UPCI, H1 vs L1\" CombTerm_FS 0 1 -1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"NonCOMPCOC, High UPCI vs low UPCI, H0 vs L0\" CombTerm_FS 1 0 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI but COMPCOC vs High UPCI but non-COMPCOC , L1 vs H0\" CombTerm_FS -1 0 1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"&theXVar\" &theXVar 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbspods output estimates =localt.Est50EXP_U_CMB &#59<br/>&nbsp&nbsp&nbsp&nbspoutput out=localt.m50EXP_U_CMB (keep=key_hsn adherence_adjust p) p=p&#59 <br/>run&#59<br/>ods results on&#59<br/>%mend doUniv&#59<br/>%doUniv&#59<br/><br/><br/>/*multi model  theVar and covariates*/<br/>%macro doMultiv&#59<br/>%let  theXVar = CombTerm_FS&#59<br/>/*ods results off&#59*/<br/>proc logistic data=VXV_FS2x_EXP desc&#59<br/>&nbsp&nbsp&nbsp&nbspclass  CombTerm_FS (ref='L0') /*sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN')*/ <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspstrata match_Num&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = &theXVar &covariates /maxiter=500  &#59<br/>&nbsp&nbsp&nbsp&nbsp%if &theXVar = CombTerm_FS %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs Lowe UPCI non COMPCOC, H1 vs L0\" CombTerm_FS 0 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, COMPCOC vs non COMPCOC, L1 vs L0\" CombTerm_FS 0 0 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs non COMPCOC, H1 vs H0\" CombTerm_FS -1 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"COMPCOC, High UPCI vs low UPCI, H1 vs L1\" CombTerm_FS 0 1 -1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"NonCOMPCOC, High UPCI vs low UPCI, H0 vs L0\" CombTerm_FS 1 0 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI but COMPCOC vs High UPCI but non-COMPCOC , L1 vs H0\" CombTerm_FS -1 0 1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"&theXVar\" &theXVar 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbspods output estimates =localt.Est50EXP_M_CMB&#59<br/>&nbsp&nbsp&nbsp&nbspoutput out=localt.m50EXP_M_CMB (keep=key_hsn adherence_adjust p) p=p&#59 <br/>run&#59<br/>/*ods results on&#59*/<br/>%mend doMultiv&#59<br/>%doMultiv&#59<br/><br/><br/><br/>%beep&#59<br/><br/><br/>s///<br/>t///","custparents":[{"idx":"CodeTask-Z6vsD95pYbwlYlSz"}]}],"custparents":[{"idx":"CodeTask-wDXjQfBcd6Neqhu6"}]},{"idx":"579393cb-abbc-4b39-bdeb-799525c0f083","name":"VXN_FS_PS by Outcome Matching by exp","NodeDescription":"///t<br/>///s<br/>/*VXN_FS_PropensityScoreMatching,  , PS by outcome, matching by expsore*/<br/><br/>data _null_&#59run&#59<br/><br/><br/>/*VXN_FS0-1. Prepare data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXM_FS.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXM_FS.sas7bdat)<br/>)&#59<br/>data VXN_FS1&#59<br/>&nbsp&nbsp&nbsp&nbspset VXM_FS&#59<br/>&nbsp&nbsp&nbsp&nbspqaippeN = qaippe&#59<br/>&nbsp&nbsp&nbsp&nbspif qaippe = . or qaippe = 9 then qaippeN=0&#59<br/>&nbsp&nbsp&nbsp&nbspresitypeN=1&#59<br/>&nbsp&nbsp&nbsp&nbspif resitype='URBAN' then resitypeN=0&#59<br/>&nbsp&nbsp&nbsp&nbspif charlson_index=. then charlson_index=0&#59<br/>run&#59<br/>/*Define psVars*/<br/>%let psVars = &nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspQAIPPEN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspRESITYPEN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNDINS_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNDINS_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNHOSP_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNHOSP_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHNIGHTS_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHDAYS_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHNIGHTS_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHDAYS_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_GP_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_SP_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_GP_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_SP_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_ER_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_ER_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAY_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAYPCT_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAY_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAYPCT_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspBENZO_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPSYCHO_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTIDEP_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTICHO_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspBENZO_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPSYCHO_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTIDEP_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTICHO_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_NPD_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_SA_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_PSY_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_NPD_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_SA_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_PSY_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCHARLSON_INDEX<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_ANXIETY_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_DIABETES<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HTN<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOOD_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_NS_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_ASTHMA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_COPD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AP_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOODANX<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOODANXP*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OA<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OMH*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SUBABUSE_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AMI<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CD_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HP_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_IHD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_STROKE_1POP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_WF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_1POP<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CA_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_PV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_DA_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_NONRA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_LB_PS<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_2DRUG*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_RF_PS*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_VTE_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CO_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_STROKE_2HOSP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_IB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_RA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CK_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_LV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_EPAD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_UB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SUICIDE_OLD<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SCHIZO*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SCHIZO_EVER<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_PD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_EPJR<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_ANXIETY_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_DIABETES*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HTN*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOOD_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_NS_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOODANX*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOODANXP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OMH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_ASTHMA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_COPD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HF*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AP_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_IHD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SUBABUSE_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AMI*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CD_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HP_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_STROKE_1POP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_WF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_1POP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_NONRA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CA_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CO_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_DA_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_PV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_2DRUG*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_LB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_RF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_VTE_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_STROKE_2HOSP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_IB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_RA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_LV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_EPAD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_UB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SUICIDE_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SCHIZO*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SCHIZO_EVER*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_PD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_EPJR*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPRE365_PRSCR_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPRE365_MEDCLASS_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFOLLOWUP_PRSCR_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFOLLOWUP_MEDCLASS_STATINAHTNOH&nbsp&nbsp&nbsp&nbsp*/<br/>&#59<br/><br/><br/>/*VXN_FS2-3, propensity score matching. Changed, PS score not based on exposure status, but on adherence outcome!<br/>&nbsp&nbsp&nbsp&nbspHowever, the match is based on exposure*/<br/>/*VXN_FS1a, match by UPCIndexFS cutoff = 25*/<br/>ods results on&#59<br/><br/><br/><br/><br/>%let UPCCutOff=50&#59<br/>data VXN_FS2_&UPCCutOff&#59<br/>&nbsp&nbsp&nbsp&nbspset VXN_FS1&#59<br/>&nbsp&nbsp&nbsp&nbspUPCIndexF_CatN&UPCCutOff=0&#59/*low*/<br/>&nbsp&nbsp&nbsp&nbspif UPCIndexF >= UPCIndexFP&UPCCutOff  then UPCIndexF_CatN&UPCCutOff=1&#59/*high*/<br/>&nbsp&nbsp&nbsp&nbspCombTerm_FS = strip(UPCIndexF_CatN&UPCCutOff) || strip(CompFS)&#59<br/>run&#59<br/><br/>%let thisExposureVar =UPCIndexF_CatN&UPCCutOff&#59<br/><br/>%MatchByOutcomePS(<br/>&nbsp&nbsp&nbsp&nbspdata=VXN_FS2_&UPCCutOff,<br/>&nbsp&nbsp&nbsp&nbsptheExposureVar=&thisExposureVar,<br/>&nbsp&nbsp&nbsp&nbsptheOutcomeVar=ADherence_adjust,<br/>&nbsp&nbsp&nbsp&nbsptrimPCT=5,<br/>&nbsp&nbsp&nbsp&nbspmatchN=1,<br/>&nbsp&nbsp&nbsp&nbspcapliper=0.2,<br/>&nbsp&nbsp&nbsp&nbspkeepVarsForPart2 = key_hsn ADherence_adjust &thisExposureVar age sex_desc logit_ps entrydate,<br/>&nbsp&nbsp&nbsp&nbspexposeCondition=%quote(&thisExposureVar  = 1),<br/>&nbsp&nbsp&nbsp&nbspControlCondition=%quote(&thisExposureVar  = 0),<br/>&nbsp&nbsp&nbsp&nbspConditionsForPart2 =%quote(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspabs(t1.age-t2.age) <=1 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp|<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.sex_desc = t2.sex_desc<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp|<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspabs(t1.EntryDate-t2.EntryDate) <=365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp|<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspabs(t1.logit_ps - t2.logit_ps) <= 0.2),<br/>&nbsp&nbsp&nbsp&nbsppsdiff=psdiff,<br/>&nbsp&nbsp&nbsp&nbsppsdiffTermForPart2=%quote(,abs(t1.logit_ps-t2.logit_ps) as psDiff),<br/>&nbsp&nbsp&nbsp&nbspnoreplaceForPart2=1,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXN_FS3_&thisExposureVar.,<br/>&nbsp&nbsp&nbsp&nbspdebug=1,<br/>&nbsp&nbsp&nbsp&nbspthePSVars=&psVars &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>)&#59<br/><br/>data VXN_FS_&thisExposureVar._DATA_OCM&#59<br/>&nbsp&nbsp&nbsp&nbspset VXN_FS3_&thisExposureVar._DATA&#59<br/>Run&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localTargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VXN_FS_&thisExposureVar._DATA_OCM.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VXN_FS_&thisExposureVar._DATA_OCM.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/>data localt.VXN_FS_&thisExposureVar._Rpt_OCM&#59<br/>&nbsp&nbsp&nbsp&nbspset VXN_FS3_&thisExposureVar._Report&#59<br/>Run&#59<br/><br/><br/><br/>s///<br/>t///","children":[{"idx":"c3e4b1b9-85ee-4a18-85e3-16b0e12fa240","name":"MatchByPS_Outcome","NodeDescription":"///t<br/>///s<br/>/*<br/>[to do]<br/>copy MatchByOutcomePS, getPSScore_part1_outcome, and getPSSCore_Part3 to mymacros<br/><br/>*/<br/><br/>/*Propensity score matching, PS score by outcome<br/>&nbsp&nbsp&nbsp&nbspthis part is achieved by 3 macros, each as a step for PS matching<br/>&nbsp&nbsp&nbsp&nbspstep 1. calculate the propensity score (logit_ps, and ps). This part is done by a logistic model (%getPSScore_part1)<br/>&nbsp&nbsp&nbsp&nbspstep2. matching the expose/control group by certain vars, e.g., age within 1 year, same sex, entrydate within 1 year, ps score<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(%getPSScore_part2)<br/>&nbsp&nbsp&nbsp&nbspstep3. compare the standard diff of means between matched and unmatched method (%getPSScore_part3)<br/>example:<br/>%MatchByOutcomePS(<br/>&nbsp&nbsp&nbsp&nbspdata=VZD1,<br/>&nbsp&nbsp&nbsp&nbsptheExposureVar=var_CMEPF,<br/>&nbsp&nbsp&nbsp&nbsptrimPCT=5,<br/><br/>&nbsp&nbsp&nbsp&nbspmatchN=5, (1 exposure matching 5 controls)<br/>&nbsp&nbsp&nbsp&nbspcapliper=0.2,<br/>&nbsp&nbsp&nbsp&nbspkeepVarsForPart2 = key_hsn var_CMEPF age sex_desc logit_ps entrydate,<br/>&nbsp&nbsp&nbsp&nbspexposeCondition=%str(var_CMEPF  = 1),<br/>&nbsp&nbsp&nbsp&nbspControlCondition=%str(var_CMEPF  = 0),<br/>&nbsp&nbsp&nbsp&nbspConditionsForPart2 =%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspabs(t1.age-t2.age) <=1 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp|<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.sex_desc = t2.sex_desc<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp|<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspabs(t1.EntryDate-t2.EntryDate) <=365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp|<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspabs(t1.logit_ps - t2.logit_ps) <= &caliper<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp),<br/>&nbsp&nbsp&nbsp&nbsppsdiff=psdiff,<br/>&nbsp&nbsp&nbsp&nbsppsdiffTermForPart2=%str(,abs(t1.logit_ps-t2.logit_ps) as psDiff),<br/>&nbsp&nbsp&nbsp&nbspnoreplaceForPart2=1,<br/><br/>&nbsp&nbsp&nbsp&nbsptarget=VZD2,<br/>&nbsp&nbsp&nbsp&nbspdebug=1,<br/>&nbsp&nbsp&nbsp&nbspthePSVars= <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_DIABETES <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_HTN <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_NPD_Pre365 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_SA_Pre365 CC_Pre365_ASTHMA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_COPD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_HF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_SUBABUSE_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_AMI<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_IHD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_OA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_STROKE_1POP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_OSTEO_1POP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_MOODANX<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_AD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_EPAD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_RA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_SCHIZO<br/>)&#59<br/><br/><br/>*/<br/><br/><br/>%macro MatchByOutcomePS(<br/>&nbsp&nbsp&nbsp&nbspdata=,<br/>&nbsp&nbsp&nbsp&nbsptheExposureVar=,<br/>&nbsp&nbsp&nbsp&nbsptheOutcomeVar=,<br/>&nbsp&nbsp&nbsp&nbsptrimPCT=,<br/>&nbsp&nbsp&nbsp&nbspmatchN=,<br/>&nbsp&nbsp&nbsp&nbspcapliper=,<br/>&nbsp&nbsp&nbsp&nbspkeepVarsForPart2 = ,<br/>&nbsp&nbsp&nbsp&nbspexposeCondition=,<br/>&nbsp&nbsp&nbsp&nbspControlCondition=,<br/>&nbsp&nbsp&nbsp&nbspConditionsForPart2 =,<br/>&nbsp&nbsp&nbsp&nbsppsdiff=,<br/>&nbsp&nbsp&nbsp&nbsppsdiffTermForPart2=,<br/>&nbsp&nbsp&nbsp&nbspnoreplaceForPart2=,<br/>&nbsp&nbsp&nbsp&nbsptarget=,<br/>&nbsp&nbsp&nbsp&nbspdebug=,<br/>&nbsp&nbsp&nbsp&nbspthePSVars=<br/>)&#59<br/>&nbsp&nbsp&nbsp&nbsp%local data theExposureVar  trimPCT matchN capliper keepVarsForPart2 exposeCondition ControlCondition<br/>&nbsp&nbsp&nbsp&nbspConditionsForPart2 psdiff psdiffTermForPart2 noreplaceForPart2 target debug thePSVars theOutcomeVar<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%getPSScore_part1_outcome(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata=&data, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheExposureVar=&theExposureVar,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheOutcomeVar=&theOutcomeVar, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptrimPCT=&trimPCT, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthePSVars=&thePSVars, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=MatchByOutcomePS_tmp1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdebug=&debug<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%GetPSScore_Part2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata=MatchByOutcomePS_tmp1, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=&target._data, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmatchN=&matchN, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcapliper=&capliper,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep=&keepVarsForPart2,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspexposeCondition=&exposeCondition,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspControlCondition=&ControlCondition, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspconditions=%str(&ConditionsForPart2), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsppsdiff=&psdiff,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsppsdiffTerm=%str(&psdiffTermForPart2),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdebug=&debug,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnoreplace=&noreplaceForPart2<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%getPSSCore_Part3 (<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata=&target._data,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspexposeCondition=&exposeCondition,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspControlCondition=&ControlCondition,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheExposureVar=&theExposureVar,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthePSVars=&thePSVars,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=&target._report,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdebug=&debug<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if &debug ne 1 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc datasets nolist&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete MatchByOutcomePS_tmp:&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>%mend MatchByOutcomePS&#59<br/><br/><br/><br/><br/>/*get propensity scrore by outcome, trim observations if at the upper/lower n percentile of ps score, or if the ps score does not overlap <br/>&nbsp&nbsp&nbsp&nbspwith the opposit group<br/>example:<br/>%getPSScore_part1(<br/>&nbsp&nbsp&nbsp&nbspdata=VZC3, <br/>&nbsp&nbsp&nbsp&nbsptheExposureVar=var_CMEPF, <br/>&nbsp&nbsp&nbsp&nbsptheOutcomeVar=adherence_adjust,<br/>&nbsp&nbsp&nbsp&nbsptrimPCT=5, <br/>&nbsp&nbsp&nbsp&nbspthePSVars=<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_DIABETES CC_Pre365_HTN CAMH_NPD_Pre365 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_SA_Pre365 CC_Pre365_ASTHMA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_COPD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_HF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_OMH<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_SUBABUSE_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_AMI<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_IHD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_OA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_STROKE_1POP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_OSTEO_1POP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_MOODANX<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_AD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_EPAD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_RA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_SCHIZO<br/>)&#59<br/><br/>*/<br/>%macro getPSScore_part1_outcome(data=, theExposureVar=, theOutcomeVar=, trimPCT=, thePSVars=, target=, debug=)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%local min_c1 max_c1 min_c0 max_c0 data theExposureVar trimPCT thePSVars<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsppercent_trim_L percent_trim_u debug target&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*step1. Calculate the propensity score*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc logistic data=&data descending&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmodel &theOutcomeVar = &thePSVars &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspoutput out= getPSScore_part1_tmp1 p=ps xbeta= logit_ps&#59 /*get the probability and logit of probability*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*step2. Grouped by the exposure status, sort the ps values in order.*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc sort data=getPSScore_part1_tmp1 out=getPSScore_part1_tmp2a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspby &theExposureVar ps&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata getPSScore_part1_tmp2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset getPSScore_part1_tmp2a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspby &theExposureVar&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgetPSScore_part1_orderN + 1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif first.&theExposureVar then getPSScore_part1_orderN=1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgetPSScore_part1_colC='c' || strip (&theExposureVar)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%transpose(data = getPSScore_part1_tmp2, target=getPSScore_part1_tmp2b, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprowhead=getPSScore_part1_orderN, colhead=getPSScore_part1_colC, contents=ps)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*make histograms on # of cases by exposure group*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods results on&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptitle \"PS Core before match, before trimming\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc sgplot data=getPSScore_part1_tmp2b&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsphistogram c0 / transparency=0.75 fillattrs=(color=red)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplegendlabel=\"&theExposureVar=0\" scale=count binwidth=0.025&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsphistogram c1 /  transparency=0.75 fillattrs=(color=blue)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplegendlabel=\"&theExposureVar=1\" scale=count binwidth=0.025&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspxaxis label='propensity score' values=(0 to 1 by 0.1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspyaxis label='count' integer&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeylegend / location = outside position=bottom&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods results off&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptitle&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*step3. trim the min and max n% of cases*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let percent_trim_L=&trimPCT&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let percent_trim_u=%eval(99-&percent_trim_L)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc rank data=getPSScore_part1_tmp2 groups=100 out=getPSScore_part1_tmp3a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvar ps&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspranks ps_percentile&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata getPSScore_part1_tmp3&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset getPSScore_part1_tmp3a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwhere  ps_percentile between &percent_trim_L and  &percent_trim_u&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*step4. further trim those not in overlapping groups, i.e., <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp1) get the max ps value between the min ps of the exposure groups,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2) get the min ps value between the max ps of the exposure groups,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp3) only keep those with a ps value within the ps range of 1) and 2)*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*get the min and max*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc univariate data=getPSScore_part1_tmp3 noprint&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp      by getPSScore_part1_colC&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp      var ps&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp      output out=getPSScore_part1_tmp4a min=min max=max&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata _null_&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset getPSScore_part1_tmp4a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif getPSScore_part1_colC='c1' then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcall symput(\"min_c1\",min)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcall symput(\"max_c1\",max)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcall symput(\"min_c0\",min)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcall symput(\"max_c0\",max)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata getPSScore_part1_tmp5&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp      set getPSScore_part1_tmp3&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp   &nbsp&nbsp&nbsp&nbsp      if ps >= max(&min_c1, &min_c0) and ps <= min(&max_c1, &max_c0)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp   run&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp   data &target&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp      set getPSScore_part1_tmp5&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  drop getPSScore_part1_orderN getPSScore_part1_colC&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp   run&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp   &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*from tmp2b, get those with an getPSScore_part1_orderN in target*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp   &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=getPSScore_part1_tmp2b,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=getPSScore_part1_tmp5,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdistinction=1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=getPSScore_part1_tmp4b,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjvars=getPSScore_part1_orderN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp   /*make histograms again after trimming*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods results on&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptitle \"PS Core before match, after trimming\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc sgplot data=getPSScore_part1_tmp4b&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsphistogram c0 / transparency=0.75 fillattrs=(color=red)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplegendlabel=\"&theExposureVar=0\" scale=count binwidth=0.025&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsphistogram c1 /  transparency=0.75 fillattrs=(color=blue)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplegendlabel=\"&theExposureVar=1\" scale=count binwidth=0.025&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspxaxis label='propensity score' values=(0 to 1 by 0.1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspyaxis label='count' integer&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeylegend / location = outside position=bottom&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods results off&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptitle&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if &debug ne 1 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc datasets nolist&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete getPSScore_part1_tmp:&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>%mend getPSScore_part1_outcome&#59<br/><br/><br/>/*<br/>getPSSCore_Part3, compare the standard diff of PS var means by matched/unmatched method<br/>example:<br/><br/>%getPSSCore_Part3 (<br/>&nbsp&nbsp&nbsp&nbspdata=test12,<br/>&nbsp&nbsp&nbsp&nbspexposeCondition=%str(var_CMEPF  = 1),<br/>&nbsp&nbsp&nbsp&nbspControlCondition=%str(var_CMEPF  = 0),<br/>&nbsp&nbsp&nbsp&nbsptheExposureVar=var_CMEPF,<br/>&nbsp&nbsp&nbsp&nbspthePSVars=CC_Pre365_DIABETES CC_Pre365_HTN CAMH_NPD_Pre365 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_SA_Pre365 CC_Pre365_ASTHMA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_COPD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_HF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_OMH<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_SUBABUSE_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_AMI<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_IHD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_OA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_STROKE_1POP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_OSTEO_1POP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_MOODANX<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_AD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_EPAD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_RA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_SCHIZO,<br/>&nbsp&nbsp&nbsp&nbsptarget=test15,<br/>&nbsp&nbsp&nbsp&nbspdebug=<br/>)&#59<br/><br/>*/<br/><br/>%macro getPSSCore_Part3 (<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspexposeCondition=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspControlCondition=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheExposureVar=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthePSVars=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdebug=)&#59<br/>&nbsp&nbsp&nbsp&nbsp%local data exposeCondition ControlCondition theExposureVar thePSVars target debug&#59<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp/*make a histogram to compare the ps score in the exposed and matched group*/<br/>&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*split the data into exposure and nonexposure*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata getPSSCore_Part3_tmp0a1 getPSSCore_Part3_tmp0a2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset &data&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif &theExposureVar = 1 then output getPSSCore_Part3_tmp0a1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif &theExposureVar = 0 then output getPSSCore_Part3_tmp0a2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sort(data=getPSSCore_Part3_tmp0a1, sorter=ps)&#59%sort(data=getPSSCore_Part3_tmp0a2, sorter=ps)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata getPSSCore_Part3_tmp0a3&#59set getPSSCore_Part3_tmp0a1&#59rename ps=ps1&#59keep ps&#59run&#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata getPSSCore_Part3_tmp0a4&#59set getPSSCore_Part3_tmp0a2&#59rename ps=ps0&#59keep ps&#59run&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata getPSSCore_Part3_tmp0a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmerge getPSSCore_Part3_tmp0a3 getPSSCore_Part3_tmp0a4&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*make histograms on # of cases by exposure group*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods results on&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptitle \"PS Core after match\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc sgplot data=getPSSCore_Part3_tmp0a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsphistogram ps1 / transparency=0.75 fillattrs=(color=red)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplegendlabel=\"&theExposureVar=0\" scale=count binwidth=0.025&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsphistogram ps0 /  transparency=0.75 fillattrs=(color=blue)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplegendlabel=\"&theExposureVar=1\" scale=count binwidth=0.025&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspxaxis label='propensity score' values=(0 to 1 by 0.1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspyaxis label='count' integer&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeylegend / location = outside position=bottom&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods results off&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptitle&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*check the ps difference and std before and after matching*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*make an empty target set*/&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata &target&#59delete&#59 run&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*Compare the balance in covariates between the exposed and the unexposed<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspin the matched group. Ref. Austin (2011)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspBasically, the idea is to compare the standard difference between the exposed and the control group<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthe standard difference is about the mean of the PSVar. <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthe formulas involved in this macro only suite for vars (e.g., CC_Pre365_DIABETES) having a dichotomas <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvalue (e.g., 1 or 0). For continuous variables, other formulas may apply (Ref. Austin 2011). &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> 1. set weight for unmatched analysis&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata getPSSCore_Part3_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp &nbsp&nbsp&nbsp&nbspset &data&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> 2. set weight for matched analysis&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> 2a. counting the number of match_num&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=getPSSCore_Part3_tmp1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=getPSSCore_Part3_tmp2a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(match_num, count(Match_num)-1 as MatchCNT), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*count(Match_num) includes the exposed case, which should be deducted */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspGroupby=%str(Match_num)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> 2b. attach the MatchCNT back to getPSSCore_Part3_tmp1. For exposed cases, weight_matched =1, otherwise = inverse of matched controls&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=getPSSCore_Part3_tmp1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=getPSSCore_Part3_tmp2a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=getPSSCore_Part3_tmp2,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp1 as Weight_unmatched,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspifn(%str(&exposeCondition), 1, 1/(t2.MatchCNT)) as Weight_matched),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=left join,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjvars=Match_num<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> 3. estimate the stdDif&#59<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let dlmt=&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let i=1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%do %until(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%length(%scan(&thePSVars, &i &dlmt))=0<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*get the current element in the string*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let thePSVar=%scan(&thePSVars, &i &dlmt)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> 3.a get means of &thePSVar by exposure group&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sort(data=getPSSCore_Part3_tmp2, sorter=  &theExposureVar)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*Weight_matched*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc means mean data=getPSSCore_Part3_tmp2 noprint&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspclass &thePSVar&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvar &thePSVar&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspweight Weight_matched&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspby &theExposureVar&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspoutput out=getPSSCore_Part3_tmp3a1a (keep= &theExposureVar mean) mean=mean&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*Weight_unmatched*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp   proc means mean data=getPSSCore_Part3_tmp2 noprint&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspclass &thePSVar&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvar &thePSVar&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspweight Weight_unmatched&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspby &theExposureVar&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspoutput out=getPSSCore_Part3_tmp3a1b (keep= &theExposureVar mean) mean=mean&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> 3.b put means of &theExposureVar exposure and control groups into separate sets&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*Weight_matched*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata getPSSCore_Part3_tmp3b1a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset getPSSCore_Part3_tmp3a1a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif &controlCondition&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmean_control=mean&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep mean_control&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*Weight_unmatched*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata getPSSCore_Part3_tmp3b1b&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset getPSSCore_Part3_tmp3a1b&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif &controlCondition&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmean_control=mean&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep mean_control&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*Weight_matched*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata getPSSCore_Part3_tmp3b2a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset getPSSCore_Part3_tmp3a1a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif &exposeCondition&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmean_expose=mean&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep mean_expose&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*Weight_unmatched*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbspdata getPSSCore_Part3_tmp3b2b&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset getPSSCore_Part3_tmp3a1b&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif &exposeCondition&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmean_expose=mean&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep mean_expose&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*Weight_matched*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata getPSSCore_Part3_tmp3b3a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplength disease $40.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmerge getPSSCore_Part3_tmp3b1a (obs=1) getPSSCore_Part3_tmp3b2a (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspd_matched=(mean_expose - mean_control) / sqrt((mean_expose * (1-mean_expose) + mean_control * (1-mean_control)) /2 )&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspstdiff_matched=abs(d_matched)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdisease=upcase(strip(symget('thePSVar')))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcategory='matched'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep d_matched stdiff_matched disease &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*Weight_unmatched*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata getPSSCore_Part3_tmp3b3b&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplength disease $40. &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmerge getPSSCore_Part3_tmp3b1b (obs=1) getPSSCore_Part3_tmp3b2b (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspd_unmatched=(mean_expose - mean_control) / sqrt((mean_expose * (1-mean_expose) + mean_control * (1-mean_control)) /2 )&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspstdiff_unmatched=abs(d_unmatched)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdisease=upcase(strip(symget('thePSVar')))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep d_unmatched stdiff_unmatched disease &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata getPSSCore_Part3_tmp3b&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmerge getPSSCore_Part3_tmp3b3a getPSSCore_Part3_tmp3b3b&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspby disease&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> 4. append stddiff of &thePSVar to the final table&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata &target&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset &target getPSSCore_Part3_tmp3b&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif d_unmatched=. then d_unmatched=0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif d_matched=. then d_matched=0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let i =%eval(&i+1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> 5. Plot ps diff<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*make histograms on # of cases by exposure group*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods results on&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptitle \"PS Diff before and after match\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc sgplot data=&target&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsphbar disease  / response=d_unmatched transparency=0.75 fillattrs=(color=Blue)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplegendlabel=\"unmatched\" <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcategoryorder=respdesc&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsphbar disease  / response=d_matched transparency=0.75 fillattrs=(color=Red)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplegendlabel=\"matched\"  <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspxaxis label='propensity score' values=(-.3 to .3 by 0.1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspyaxis label='count' integer&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeylegend / location = outside position=bottom&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods results off&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptitle&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if &debug ne 1 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc datasets nolist&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete getPSSCore_Part3_tmp:&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>%mend getPSSCore_Part3&#59<br/><br/><br/><br/>s///<br/>t///","custparents":[{"idx":"CodeTask-GeKgpf61zi1a5WjA"}]},{"idx":"cafe8180-8eb4-4279-997a-02f05ca59218","name":"VXV_FS matched LogisticOutcomex","NodeDescription":"///t<br/>///s<br/>/*VXV_FS Unmatched logistic regression, Adherece_adjusted by COMPFS vs UPCIndxF vs CombTerm_FS*/<br/><br/>data _null_&#59run&#59<br/>%let theData =VXN_FS_UPCINDEXF_CATN50_DATA_OCM&#59<br/><br/>/*VXV_FS0. Prepare source files.*/<br/>%include \"P:\\Physician_Impact_Pro(SYao)_Bio14-143\\SAS code\\reclass.macros.v4.sas\"&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\&theData..zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(&theData..sas7bdat)<br/>)&#59<br/>/*check the upc score*/<br/>%print(data=&theData)&#59<br/>/*Define covariates*/<br/>%let covariates = &nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspage   QAIPPEN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspRESITYPEN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNDINS_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNDINS_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNHOSP_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNHOSP_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHNIGHTS_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHDAYS_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHNIGHTS_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHDAYS_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_GP_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_SP_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_GP_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_SP_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_ER_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_ER_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAY_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAYPCT_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAY_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAYPCT_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspBENZO_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPSYCHO_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTIDEP_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTICHO_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspBENZO_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPSYCHO_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTIDEP_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTICHO_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_NPD_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_SA_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_PSY_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_NPD_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_SA_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_PSY_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCHARLSON_INDEX<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_ANXIETY_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_DIABETES<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HTN<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOOD_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_NS_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_ASTHMA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_COPD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AP_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOODANX<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOODANXP*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OA<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OMH*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SUBABUSE_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AMI<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CD_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HP_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_IHD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_STROKE_1POP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_WF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_1POP<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CA_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_PV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_DA_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_NONRA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_LB_PS<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_2DRUG*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_RF_PS*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_VTE_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CO_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_STROKE_2HOSP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_IB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_RA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CK_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_LV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_EPAD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_UB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SUICIDE_OLD<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SCHIZO*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SCHIZO_EVER<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_PD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_EPJR<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_ANXIETY_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_DIABETES*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HTN*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOOD_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_NS_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOODANX*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOODANXP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OMH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_ASTHMA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_COPD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HF*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AP_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_IHD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SUBABUSE_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AMI*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CD_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HP_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_STROKE_1POP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_WF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_1POP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_NONRA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CA_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CO_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_DA_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_PV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_2DRUG*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_LB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_RF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_VTE_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_STROKE_2HOSP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_IB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_RA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_LV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_EPAD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_UB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SUICIDE_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SCHIZO*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SCHIZO_EVER*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_PD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_EPJR*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPRE365_PRSCR_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPRE365_MEDCLASS_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFOLLOWUP_PRSCR_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFOLLOWUP_MEDCLASS_STATINAHTNOH&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*practice/physician related factors*/<br/>&nbsp&nbsp&nbsp&nbspdocSexN_FS<br/>&nbsp&nbsp&nbsp&nbspdocAge_FS<br/>&nbsp&nbsp&nbsp&nbspdocServiceYr_FS<br/>&nbsp&nbsp&nbsp&nbspdocEdCountry_FS<br/>&nbsp&nbsp&nbsp&nbspdocPayTypeN_FS<br/>&nbsp&nbsp&nbsp&nbspdocN_Visits_FS<br/>&nbsp&nbsp&nbsp&nbspdocNPatients_FS<br/>&nbsp&nbsp&nbsp&nbspdocStatinRxPCT_FS<br/>&#59<br/><br/><br/>/*VXV_FS2. Treat the missing values.*/<br/>data VXV_FS2_OCM&#59<br/>&nbsp&nbsp&nbsp&nbspset &thedata&#59<br/>&nbsp&nbsp&nbsp&nbspSex=1&#59<br/>&nbsp&nbsp&nbsp&nbspif sex_desc='M' then sex=0&#59<br/>&nbsp&nbsp&nbsp&nbspqaippeN = qaippe&#59<br/>&nbsp&nbsp&nbsp&nbspif qaippe = . or qaippe = 9 then qaippeN=6&#59<br/>&nbsp&nbsp&nbsp&nbspresitypeN=1&#59<br/>&nbsp&nbsp&nbsp&nbspif resitype='URBAN' then resitypeN=0&#59<br/>&nbsp&nbsp&nbsp&nbspif charlson_index=. then charlson_index=0&#59<br/>&nbsp&nbsp&nbsp&nbspif UPCIndexF_CatN50=1 then &nbsp&nbsp&nbsp&nbspCombTerm_FS = 'H' || strip(CompFS)&#59<br/>&nbsp&nbsp&nbsp&nbspif UPCIndexF_CatN50=0 then &nbsp&nbsp&nbsp&nbspCombTerm_FS = 'L' || strip(CompFS)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*release the practice (doc) related covariates. Note, it is named _FS,but is indeed measured from runin through follow up (2 years)*/<br/>&nbsp&nbsp&nbsp&nbspdocSex_FS = scan(UCPF1, 4, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspif docSex_FS='M' then docSexN_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspelse docSexN_FS=1&#59<br/>&nbsp&nbsp&nbsp&nbspdocBirthYr_FS= scan(UCPF1, 5, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspdocAge_FS=int(yrdif(mdy(6,30,docbirthyr_FS), entryDate, \"age\"))&#59<br/>&nbsp&nbsp&nbsp&nbspdocGradYr_FS= input(scan(UCPF1, 6, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocServiceYr_FS= year(entryDate) - docGradYr_FS&#59<br/>&nbsp&nbsp&nbsp&nbspdocEdCountry_FS = input(scan(UCPF1, 8, \":\"), 8.)&#59 /*0 for foreign*/<br/>&nbsp&nbsp&nbsp&nbspdocPayType_FS = scan(UCPF1, 9, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspif strip(docPayType_FS )='NFFS' then docPayTypeN_FS =1&#59<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif strip(docPayType_FS )='FFS' then docPayTypeN_FS =0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse docPayTypeN_FS =2&#59/*unknown*/<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdocN_Visits_FS = input(scan(UCPF1, 10, \":\"), 8.)&#59 /*N_Visits*/<br/>&nbsp&nbsp&nbsp&nbspdocNPatients_FS = input(scan(UCPF1, 11, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocNRx_FS=  input(scan(UCPF1, 12, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocNStatinRx_FS=  input(scan(UCPF1, 13, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspif docNStatinRx_FS=. then docNStatinRx_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspif docNRx_FS=. or docNRx_FS=0 or docNStatinRx_FS=0 then docStatinRxPCT_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspelse docStatinRxPCT_FS = round(docNStatinRx_FS/docNRx_FS*100, '0.01')&#59<br/>run&#59<br/><br/>data VXV_FS2x_OCM&#59<br/>&nbsp&nbsp&nbsp&nbspset VXV_FS2_OCM&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn adherence_adjust UPCIndexF_CatN50 COMPFS CombTerm_FS &covariates match_Num&#59<br/>run&#59<br/>%sort(data=VXV_FS2x_OCM, sorter=match_num descending adherence_adjust)&#59<br/><br/>/*1.UPCIndex as theVar*/<br/>%macro doUniv&#59<br/>%let  theXVar = UPCIndexF_CatN50&#59<br/>ods results off&#59<br/>proc logistic data=VXV_FS2x_OCM descending&#59<br/>&nbsp&nbsp&nbsp&nbspclass  CombTerm_FS (ref='L0') /*sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN')*/ <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspstrata match_Num&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = &theXVar &#59<br/>&nbsp&nbsp&nbsp&nbsp%if &theXVar = CombTerm_FS %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs Lowe UPCI non COMPCOC, H1 vs L0\" CombTerm_FS 0 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, COMPCOC vs non COMPCOC, L1 vs L0\" CombTerm_FS 0 0 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs non COMPCOC, H1 vs H0\" CombTerm_FS -1 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"COMPCOC, High UPCI vs low UPCI, H1 vs L1\" CombTerm_FS 0 1 -1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"NonCOMPCOC, High UPCI vs low UPCI, H0 vs L0\" CombTerm_FS 1 0 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI but COMPCOC vs High UPCI but non-COMPCOC , L1 vs H0\" CombTerm_FS -1 0 1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"&theXVar\" &theXVar 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbspods output estimates =localt.Est50OCMX_U_UPC &#59<br/>&nbsp&nbsp&nbsp&nbspoutput out=localt.m50OCMX_U_UPC (keep=key_hsn adherence_adjust p) p=p&#59 <br/>run&#59<br/>ods results on&#59<br/>%mend doUniv&#59<br/>%doUniv&#59<br/><br/>/*multi model without theVar*/<br/>%macro doMultiv&#59<br/>%let  theXVar = UPCIndexF_CatN50&#59<br/>/*ods results off&#59*/<br/>proc logistic data=VXV_FS2x_OCM desc&#59<br/>&nbsp&nbsp&nbsp&nbspstrata match_Num &#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') =  &covariates /maxiter=500  &#59<br/>&nbsp&nbsp&nbsp&nbspoutput out=localt.M50OCMX_M_COV (keep=key_hsn adherence_adjust p) p=p&#59<br/>run&#59<br/>/*ods results on&#59*/<br/>%mend doMultiv&#59<br/>%doMultiv&#59<br/><br/>/*multi model  theVar and covariates*/<br/>%macro doMultiv&#59<br/>%let  theXVar = UPCIndexF_CatN50&#59<br/>/*ods results off&#59*/<br/>proc logistic data=VXV_FS2x_OCM desc&#59<br/>&nbsp&nbsp&nbsp&nbspstrata match_Num&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = &theXVar &covariates /maxiter=500  &#59<br/>&nbsp&nbsp&nbsp&nbsp%if &theXVar = CombTerm_FS %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs Lowe UPCI non COMPCOC, H1 vs L0\" CombTerm_FS 0 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, COMPCOC vs non COMPCOC, L1 vs L0\" CombTerm_FS 0 0 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs non COMPCOC, H1 vs H0\" CombTerm_FS -1 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"COMPCOC, High UPCI vs low UPCI, H1 vs L1\" CombTerm_FS 0 1 -1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"NonCOMPCOC, High UPCI vs low UPCI, H0 vs L0\" CombTerm_FS 1 0 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI but COMPCOC vs High UPCI but non-COMPCOC , L1 vs H0\" CombTerm_FS -1 0 1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"&theXVar\" &theXVar 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbspods output estimates =localt.Est50OCMX_M_UPC&#59<br/>&nbsp&nbsp&nbsp&nbspoutput out=localt.M50OCMX_M_UPC (keep=key_hsn adherence_adjust p) p=p&#59<br/>run&#59<br/>/*ods results on&#59*/<br/>%mend doMultiv&#59<br/>%doMultiv&#59<br/><br/><br/><br/>/*2.CompCOC as theVar*/<br/>/*univ*/<br/>%macro doUniv&#59<br/>%let  theXVar = COMPFS&#59<br/>ods results off&#59<br/>proc logistic data=VXV_FS2x_OCM descending&#59<br/>&nbsp&nbsp&nbsp&nbspclass  CombTerm_FS (ref='L0') /*sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN')*/ <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspstrata match_Num&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = &theXVar &#59<br/>&nbsp&nbsp&nbsp&nbsp%if &theXVar = CombTerm_FS %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs Lowe UPCI non COMPCOC, H1 vs L0\" CombTerm_FS 0 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, COMPCOC vs non COMPCOC, L1 vs L0\" CombTerm_FS 0 0 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs non COMPCOC, H1 vs H0\" CombTerm_FS -1 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"COMPCOC, High UPCI vs low UPCI, H1 vs L1\" CombTerm_FS 0 1 -1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"NonCOMPCOC, High UPCI vs low UPCI, H0 vs L0\" CombTerm_FS 1 0 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI but COMPCOC vs High UPCI but non-COMPCOC , L1 vs H0\" CombTerm_FS -1 0 1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"&theXVar\" &theXVar 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbspods output estimates =localt.Est50OCMX_U_CMP &#59<br/>&nbsp&nbsp&nbsp&nbspoutput out=localt.m50OCMX_U_CMP (keep=key_hsn adherence_adjust p) p=p&#59 <br/>run&#59<br/>ods results on&#59<br/>%mend doUniv&#59<br/>%doUniv&#59<br/><br/><br/>/*multi model  theVar and covariates*/<br/>%macro doMultiv&#59<br/>%let  theXVar = COMPFS&#59<br/>/*ods results off&#59*/<br/>proc logistic data=VXV_FS2x_OCM desc&#59<br/>&nbsp&nbsp&nbsp&nbspclass  CombTerm_FS (ref='L0') /*sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN')*/ <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspstrata match_Num&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = &theXVar &covariates /maxiter=500  &#59<br/>&nbsp&nbsp&nbsp&nbsp%if &theXVar = CombTerm_FS %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs Lowe UPCI non COMPCOC, H1 vs L0\" CombTerm_FS 0 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, COMPCOC vs non COMPCOC, L1 vs L0\" CombTerm_FS 0 0 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs non COMPCOC, H1 vs H0\" CombTerm_FS -1 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"COMPCOC, High UPCI vs low UPCI, H1 vs L1\" CombTerm_FS 0 1 -1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"NonCOMPCOC, High UPCI vs low UPCI, H0 vs L0\" CombTerm_FS 1 0 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI but COMPCOC vs High UPCI but non-COMPCOC , L1 vs H0\" CombTerm_FS -1 0 1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"&theXVar\" &theXVar 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbspods output estimates =localt.Est50OCMX_M_CMP&#59<br/>&nbsp&nbsp&nbsp&nbspoutput out=localt.m50OCMX_M_CMP (keep=key_hsn adherence_adjust p) p=p&#59 <br/>run&#59<br/>/*ods results on&#59*/<br/>%mend doMultiv&#59<br/>%doMultiv&#59<br/><br/><br/><br/><br/>/*3.Combined as theVar*/<br/>/*univ*/<br/>%macro doUniv&#59<br/>%let  theXVar = CombTerm_FS&#59<br/>ods results off&#59<br/>proc logistic data=VXV_FS2x_OCM descending&#59<br/>&nbsp&nbsp&nbsp&nbspclass  CombTerm_FS (ref='L0') /*sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN')*/ <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspstrata match_Num&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = &theXVar &#59<br/>&nbsp&nbsp&nbsp&nbsp%if &theXVar = CombTerm_FS %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs Lowe UPCI non COMPCOC, H1 vs L0\" CombTerm_FS 0 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, COMPCOC vs non COMPCOC, L1 vs L0\" CombTerm_FS 0 0 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs non COMPCOC, H1 vs H0\" CombTerm_FS -1 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"COMPCOC, High UPCI vs low UPCI, H1 vs L1\" CombTerm_FS 0 1 -1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"NonCOMPCOC, High UPCI vs low UPCI, H0 vs L0\" CombTerm_FS 1 0 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI but COMPCOC vs High UPCI but non-COMPCOC , L1 vs H0\" CombTerm_FS -1 0 1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"&theXVar\" &theXVar 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbspods output estimates =localt.Est50OCMX_U_CMB &#59<br/>&nbsp&nbsp&nbsp&nbspoutput out=localt.m50OCMX_U_CMB (keep=key_hsn adherence_adjust p) p=p&#59 <br/>run&#59<br/>ods results on&#59<br/>%mend doUniv&#59<br/>%doUniv&#59<br/><br/><br/>/*multi model  theVar and covariates*/<br/>%macro doMultiv&#59<br/>%let  theXVar = CombTerm_FS&#59<br/>/*ods results off&#59*/<br/>proc logistic data=VXV_FS2x_OCM desc&#59<br/>&nbsp&nbsp&nbsp&nbspclass  CombTerm_FS (ref='L0') /*sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN')*/ <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspstrata match_Num&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = &theXVar &covariates /maxiter=500  &#59<br/>&nbsp&nbsp&nbsp&nbsp%if &theXVar = CombTerm_FS %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs Lowe UPCI non COMPCOC, H1 vs L0\" CombTerm_FS 0 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, COMPCOC vs non COMPCOC, L1 vs L0\" CombTerm_FS 0 0 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs non COMPCOC, H1 vs H0\" CombTerm_FS -1 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"COMPCOC, High UPCI vs low UPCI, H1 vs L1\" CombTerm_FS 0 1 -1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"NonCOMPCOC, High UPCI vs low UPCI, H0 vs L0\" CombTerm_FS 1 0 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI but COMPCOC vs High UPCI but non-COMPCOC , L1 vs H0\" CombTerm_FS -1 0 1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"&theXVar\" &theXVar 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbspods output estimates =localt.Est50OCMX_M_CMB&#59<br/>&nbsp&nbsp&nbsp&nbspoutput out=localt.m50OCMX_M_CMB (keep=key_hsn adherence_adjust p) p=p&#59 <br/>run&#59<br/>/*ods results on&#59*/<br/>%mend doMultiv&#59<br/>%doMultiv&#59<br/><br/><br/><br/>%beep&#59<br/><br/><br/>s///<br/>t///","children":[{"idx":"fb8aeae8-b952-47e6-a42e-76deb314ddf6","name":"! Q VXV","NodeDescription":"///t<br/>///s<br/>/*<br/>[to do]<br/>1. Why err in ps part 3, why there are values like 2.xxx which is greater than 1<br/><br/>2. Add a ps by outcome and match also by outcome. check the status<br/>Done<br/><br/><br/>3. using macro to calculate c-index?<br/><br/>4. It is extremely slow to get the output pred for the conditional logistic model. <br/>&nbsp&nbsp&nbsp&nbspNo solutions for now.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspMannually it is impossible as there is no intercept, and cannot calculate the xbeta (expeced logit or Y ) <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp?? other solutions?<br/>*/<br/>s///<br/>t///","custparents":[{"idx":"CodeTask-6e52I67wL2YkUrUf"}]},{"idx":"2a704d31-261a-49f5-8b81-e8840de4a38a","name":"VXV_FS matched Logistic - Copy","NodeDescription":"///t<br/>///s<br/>/*VXV_FS PS matched conditional logistic regression, Adherece_adjusted by COMPFS vs UPCIndxF vs CombTerm_FS*/<br/><br/>data _null_&#59run&#59<br/><br/><br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXN_FS.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXN_FS.sas7bdat)<br/>)&#59<br/>/*check the upc score*/<br/>%print(data=VXN_FS)&#59<br/><br/>/*UPCIndexF_Cat*/<br/>data VXV_FS1&#59<br/>&nbsp&nbsp&nbsp&nbspset VXN_FS&#59<br/>&nbsp&nbsp&nbsp&nbspUPCIndexF_Cat='L'&#59/*low*/<br/>&nbsp&nbsp&nbsp&nbspif UPCIndexF >= UPCIndexFP25  then UPCIndexF_Cat='H'&#59/*high*/<br/>&nbsp&nbsp&nbsp&nbspCombTerm_FS = strip(UPCIndexF_Cat) || strip(CompFS)&#59<br/>run&#59<br/><br/>%freq(data=VXV_FS1, table = CombTerm_FS)&#59 <br/><br/>/*univariate*/<br/>proc logistic data=VXV_FS1 descending&#59<br/>&nbsp&nbsp&nbsp&nbspclass CombTerm_FS (ref='L0') sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN') <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspstrata match_Num&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = CombTerm_FS  &#59<br/>&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, Perfect vs non prefect COC, L1 vs L0\" CombTerm_FS 0 0 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, Perfect vs non prefect COC, H1 vs H0\" CombTerm_FS -1 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI but prefect COC vs High UPCI but non-Perfect , L1 vs H0\" CombTerm_FS -1 0 1 /exp cl&#59<br/>run&#59<br/><br/><br/>%let covariates = &nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspage sex_desc  QAIPPE<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspRESITYPE<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNDINS_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNDINS_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNHOSP_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNHOSP_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHNIGHTS_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHDAYS_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHNIGHTS_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHDAYS_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_GP_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_SP_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_GP_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_SP_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_ER_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_ER_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAY_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAYPCT_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAY_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAYPCT_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspBENZO_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPSYCHO_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTIDEP_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTICHO_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspBENZO_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPSYCHO_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTIDEP_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTICHO_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_NPD_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_SA_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_PSY_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_NPD_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_SA_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_PSY_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCHARLSON_INDEX<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_ANXIETY_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_DIABETES<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HTN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOOD_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_NS_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_ASTHMA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_COPD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AP_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOODANX<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOODANXP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OMH<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SUBABUSE_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AMI<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CD_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HP_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_IHD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_STROKE_1POP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_WF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_1POP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CA_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_PV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_DA_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_NONRA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_LB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_2DRUG<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AK_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_RF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_VTE_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CO_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_STROKE_2HOSP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_IB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_RA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CK_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_LV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_EPAD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_UB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SUICIDE_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SCHIZO<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SCHIZO_EVER<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_PD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_EPJR<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_ANXIETY_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_DIABETES<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HTN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOOD_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_NS_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOODANX<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOODANXP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OMH<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_ASTHMA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_COPD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AP_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_IHD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SUBABUSE_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AMI<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CD_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HP_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_STROKE_1POP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_WF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_1POP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_NONRA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CA_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CK_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CO_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_DA_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_PV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_2DRUG<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_LB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AK_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_RF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_VTE_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_STROKE_2HOSP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_IB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_RA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_LV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_EPAD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_UB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SUICIDE_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SCHIZO<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SCHIZO_EVER<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_PD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_EPJR<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPRE365_PRSCR_STATINAHTNOH<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPRE365_MEDCLASS_STATINAHTNOH<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFOLLOWUP_PRSCR_STATINAHTNOH<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFOLLOWUP_MEDCLASS_STATINAHTNOH&nbsp&nbsp&nbsp&nbsp&#59<br/><br/>/*multivariate*/<br/>proc logistic data=VXV_FS1 descending&#59<br/>&nbsp&nbsp&nbsp&nbspclass CombTerm_FS (ref='L0') sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN') <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspstrata match_Num&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = CombTerm_FS &covariates  /aggregate&#59<br/>&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, Perfect vs non prefect COC, L1 vs L0\" CombTerm_FS 0 0 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, Perfect vs non prefect COC, H1 vs H0\" CombTerm_FS -1 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI but prefect COC vs High UPCI but non-Perfect , L1 vs H0\" CombTerm_FS -1 0 1 /exp cl&#59<br/>run&#59<br/><br/><br/>/*change of c index*/<br/><br/>ods graphics on&#59<br/>ods select ROCAssociation Estimates&#59<br/>proc logistic data=VXV_FS1 descending plots (only only) = ROC (id=cutpoint)&#59<br/>&nbsp&nbsp&nbsp&nbspclass UPCIndexF_Cat (ref='L') sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN') <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspstrata match_Num&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence (ref='0') = UPCIndexF_Cat &covariates / aggregate&#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"UPCIndexF\" UPCIndexF_Cat 1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbspoutput out=m1 p=prob_m1&#59<br/>run&#59<br/>ods select all&#59<br/>ods graphics off&#59<br/><br/><br/><br/>ods graphics on&#59<br/>ods select ROCAssociation Estimates&#59<br/>proc logistic data=VXV_FS1 descending plots (only only) = ROC (id=cutpoint)&#59<br/>&nbsp&nbsp&nbsp&nbspclass CompFS (ref='0') sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN') <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspstrata match_Num&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence (ref='0') = CompFS &covariates / aggregate&#59&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspestimate \"UPCIndexF\" CompFS 1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbspoutput out=m2 p=prob_m2&#59<br/>run&#59<br/>ods select all&#59<br/>ods graphics off&#59<br/><br/><br/>ods graphics on&#59<br/>ods select ROCAssociation Estimates&#59<br/>proc logistic data=VXV_FS1 descending plots (only only) = ROC (id=cutpoint)&#59<br/>&nbsp&nbsp&nbsp&nbspclass CombTerm_FS (ref='L0') sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN') <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence (ref='0') = CombTerm_FS &covariates /scale=none aggregate&#59<br/>&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, Perfect vs Lowe UPCI non prefect COC, H1 vs L0\" CombTerm_FS 0 1 0 /exp cl&#59<br/><br/>&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, Perfect vs non prefect COC, L1 vs L0\" CombTerm_FS 0 0 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, Perfect vs non prefect COC, H1 vs H0\" CombTerm_FS -1 1 0 /exp cl&#59<br/><br/>&nbsp&nbsp&nbsp&nbspestimate \"Perfect, High UPCI vs low UPCI, H1 vs L1\" CombTerm_FS 0 1 -1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"NonPerfect, High UPCI vs low UPCI, H0 vs L0\" CombTerm_FS 1 0 0 /exp cl&#59<br/><br/>&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI but prefect COC vs High UPCI but non-Perfect , L1 vs H0\" CombTerm_FS -1 0 1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbspoutput out=m3 p=prob_m3&#59<br/>run&#59<br/>ods select all&#59<br/>ods graphics off&#59<br/><br/>%beep&#59<br/><br/><br/><?xml version=\"1.0\" encoding=\"utf-16\"?><Collection><Elements><Element Type=\"SAS.EG.ProjectElements.CodeTask\" IsSelected=\"true\" PosX=\"204\" PosY=\"1380\"><Element><Label>VXT_FS Unmatched Logistic</Label><Type>TASK</Type><Container>PFD-AnQJoqYfYi6Tk8RB</Container><ID>CodeTask-dc1t3qIkzKpa3hgA</ID><CreatedOn>636909135162330308</CreatedOn><ModifiedOn>637109776480070706</ModifiedOn><ModifiedBy>Shenzhen Yao</ModifiedBy><ModifiedByEGID>syao</ModifiedByEGID><ModifiedByEGVer>7.100.1.2711</ModifiedByEGVer><HasSerializationError>False</HasSerializationError><InputIDs /></Element><SubmitableElement><UseGlobalOptions>True</UseGlobalOptions><Server>Local</Server><HASERROR>False</HASERROR><HASWARNING>True</HASWARNING><HtmlActiveOverride>false</HtmlActiveOverride><RtfActiveOverride>false</RtfActiveOverride><PdfActiveOverride>false</PdfActiveOverride><SasReportActiveOverride>true</SasReportActiveOverride><ListingActiveOverride>false</ListingActiveOverride><AutoDisplayActiveOverride>true</AutoDisplayActiveOverride><PdfStyleOverride>Pearl</PdfStyleOverride><RtfStyleOverride>Rtf</RtfStyleOverride><HtmlStyleNameOverride>HtmlBlue</HtmlStyleNameOverride><HtmlStyleCategoryOverride>BuiltIn</HtmlStyleCategoryOverride><HtmlStyleUrlOverride>C:\\Program Files\\SASHome\\SASEnterpriseGuide\\7.1\\Styles\\HtmlBlue.css</HtmlStyleUrlOverride><SasReportStyleNameOverride>HtmlBlue</SasReportStyleNameOverride><SasReportStyleCategoryOverride>BuiltIn</SasReportStyleCategoryOverride><SasReportStyleUrlOverride>C:\\Program Files\\SASHome\\SASEnterpriseGuide\\7.1\\Styles\\HtmlBlue.css</SasReportStyleUrlOverride><GraphDeviceOverride>ActiveX</GraphDeviceOverride><UseProjectSubmitOptions>true</UseProjectSubmitOptions><SubmitToGrid>false</SubmitToGrid><QueueSubmitsForServer>true</QueueSubmitsForServer><ExpectedOutputDataList><DataDescriptor><PATHTYPE>Libref</PATHTYPE><ServerName>Local</ServerName><LibraryName>WORK</LibraryName><Label>NRI</Label><Member>NRI</Member></DataDescriptor><DataDescriptor><PATHTYPE>Libref</PATHTYPE><ServerName>Local</ServerName><LibraryName>WORK</LibraryName><Label>NRI1</Label><Member>NRI1</Member></DataDescriptor><DataDescriptor><PATHTYPE>Libref</PATHTYPE><ServerName>Local</ServerName><LibraryName>WORK</LibraryName><Label>IDI1</Label><Member>IDI1</Member></DataDescriptor><DataDescriptor><PATHTYPE>Libref</PATHTYPE><ServerName>Local</ServerName><LibraryName>WORK</LibraryName><Label>IDIDAT</Label><Member>IDIDAT</Member></DataDescriptor><DataDescriptor><PATHTYPE>Libref</PATHTYPE><ServerName>Local</ServerName><LibraryName>WORK</LibraryName><Label>TREND2</Label><Member>TREND2</Member></DataDescriptor><DataDescriptor><PATHTYPE>Libref</PATHTYPE><ServerName>Local</ServerName><LibraryName>WORK</LibraryName><Label>IDI2</Label><Member>IDI2</Member></DataDescriptor><DataDescriptor><PATHTYPE>Libref</PATHTYPE><ServerName>Local</ServerName><LibraryName>WORK</LibraryName><Label>TREND</Label><Member>TREND</Member></DataDescriptor><DataDescriptor><PATHTYPE>Libref</PATHTYPE><ServerName>Local</ServerName><LibraryName>WORK</LibraryName><Label>TSTATS</Label><Member>TSTATS</Member></DataDescriptor><DataDescriptor><PATHTYPE>Libref</PATHTYPE><ServerName>Local</ServerName><LibraryName>WORK</LibraryName><Label>UNISTATS</Label><Member>UNISTATS</Member></DataDescriptor><DataDescriptor><PATHTYPE>Libref</PATHTYPE><ServerName>Local</ServerName><LibraryName>WORK</LibraryName><Label>CHISQ</Label><Member>CHISQ</Member></DataDescriptor><DataDescriptor><PATHTYPE>Libref</PATHTYPE><ServerName>Local</ServerName><LibraryName>WORK</LibraryName><Label>CHISQ2</Label><Member>CHISQ2</Member></DataDescriptor><DataDescriptor><PATHTYPE>Libref</PATHTYPE><ServerName>Local</ServerName><LibraryName>WORK</LibraryName><Label>_IDI_</Label><Member>_IDI_</Member></DataDescriptor><DataDescriptor><PATHTYPE>Libref</PATHTYPE><ServerName>Local</ServerName><LibraryName>WORK</LibraryName><Label>_ALL_</Label><Member>_ALL_</Member></DataDescriptor><DataDescriptor><PATHTYPE>Libref</PATHTYPE><ServerName>Local</ServerName><LibraryName>WORK</LibraryName><Label>FREQS</Label><Member>FREQS</Member></DataDescriptor></ExpectedOutputDataList><Parameters /><ExecutionTimeSpan>PT3.198S</ExecutionTimeSpan><JobRecipe><JobRecipe><log>Log-WgjyhkKnzWFsw2Nh</log><code>Code-6zUpd3xSrrTXG96E</code><OutputDataList><ID>ShortCutToData-GcByolOPqOdsmjEd</ID><ID>ShortCutToData-yqewwXzbA5Z4hksA</ID><ID>ShortCutToData-ZYg9LT6AqO4SQoQ4</ID><ID>ShortCutToData-55ufk4qCqFg9EIu1</ID><ID>ShortCutToData-pcz4eQdlGxROw8AB</ID><ID>ShortCutToData-fhelYzTbBgyYyNzO</ID><ID>ShortCutToData-ohCxlsEeiCywpkWq</ID><ID>ShortCutToData-NLpjU1sRjLO4VoAi</ID><ID>ShortCutToData-MsFRnbVVMkGSvfRK</ID><ID>ShortCutToData-eaJrWTpZftQuxRqG</ID><ID>ShortCutToData-dPRWE8k4tYJDILci</ID><ID>ShortCutToData-KLcKFovaJ4YTAP9v</ID><ID>ShortCutToData-POeb42NdUdngFLcz</ID><ID>ShortCutToData-pb2K3ruMXFo2rdFP</ID></OutputDataList><ODSResultsList><ID>ODSResult-9jvUh77OGwiNA5Qt</ID></ODSResultsList></JobRecipe></JobRecipe></SubmitableElement><CodeTask IsClipboardXML=\"True\"><IncludeWrapper>True</IncludeWrapper><Embedded>True</Embedded><Code>/*Compare the measures of AAA and UPC score during follow up*/<br/><br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&amp&#59localTargetPath.\\VXM_FS.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXM_FS.sas7bdat)<br/>)&#59<br/>/*check the upc score*/<br/>%print(data=VXM_FS)&#59<br/><br/><br/>/*UPCIndexF_Cat*/<br/>data VXT_FS1&#59<br/>&nbsp&nbsp&nbsp&nbspset VXM_FS&#59<br/>&nbsp&nbsp&nbsp&nbspUPCIndexF_Cat='L'&#59/*low*/<br/>&nbsp&nbsp&nbsp&nbspif UPCIndexF &gt&#59= UPCIndexFP50  then UPCIndexF_Cat='H'&#59/*high*/<br/>&nbsp&nbsp&nbsp&nbspCombTerm_FS = strip(UPCIndexF_Cat) || strip(CompFS)&#59<br/>&nbsp&nbsp&nbsp&nbspif adherence ne .&#59<br/>run&#59<br/><br/>%freq(data=VXT_FS1, table = CombTerm_FS)&#59 <br/><br/>/*univariate*/<br/>proc logistic data=VXT_FS1 descending&#59<br/>&nbsp&nbsp&nbsp&nbspclass CombTerm_FS (ref='L0') sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN') <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = CombTerm_FS  /scale=none aggregate&#59<br/>&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, Perfect vs non prefect COC, L1 vs L0\" CombTerm_FS 0 0 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, Perfect vs non prefect COC, H1 vs H0\" CombTerm_FS -1 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI but prefect COC vs High UPCI but non-Perfect , L1 vs H0\" CombTerm_FS -1 0 1 /exp cl&#59<br/>run&#59<br/><br/><br/>%let covariates = &nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspage sex_desc  QAIPPE<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspRESITYPE<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNDINS_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNDINS_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNHOSP_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNHOSP_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHNIGHTS_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHDAYS_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHNIGHTS_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHDAYS_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_GP_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_SP_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_GP_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_SP_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_ER_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_ER_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAY_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAYPCT_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAY_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAYPCT_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspBENZO_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPSYCHO_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTIDEP_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTICHO_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspBENZO_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPSYCHO_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTIDEP_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTICHO_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_NPD_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_SA_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_PSY_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_NPD_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_SA_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_PSY_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCHARLSON_INDEX<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_ANXIETY_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_DIABETES<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HTN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOOD_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_NS_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_ASTHMA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_COPD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AP_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOODANX<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOODANXP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OMH<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SUBABUSE_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AMI<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CD_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HP_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_IHD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_STROKE_1POP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_WF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_1POP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CA_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_PV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_DA_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_NONRA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_LB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_2DRUG<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AK_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_RF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_VTE_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CO_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_STROKE_2HOSP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_IB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_RA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CK_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_LV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_EPAD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_UB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SUICIDE_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SCHIZO<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SCHIZO_EVER<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_PD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_EPJR<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_ANXIETY_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_DIABETES<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HTN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOOD_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_NS_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOODANX<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOODANXP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OMH<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_ASTHMA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_COPD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AP_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_IHD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SUBABUSE_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AMI<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CD_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HP_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_STROKE_1POP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_WF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_1POP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_NONRA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CA_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CK_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CO_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_DA_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_PV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_2DRUG<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_LB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AK_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_RF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_VTE_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_STROKE_2HOSP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_IB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_RA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_LV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_EPAD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_UB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SUICIDE_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SCHIZO<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SCHIZO_EVER<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_PD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_EPJR<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPRE365_PRSCR_STATINAHTNOH<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPRE365_MEDCLASS_STATINAHTNOH<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFOLLOWUP_PRSCR_STATINAHTNOH<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFOLLOWUP_MEDCLASS_STATINAHTNOH&nbsp&nbsp&nbsp&nbsp&#59<br/><br/>/*multivariate*/<br/>proc logistic data=VXT_FS1 descending&#59<br/>&nbsp&nbsp&nbsp&nbspclass CombTerm_FS (ref='L0') sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN') <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = CombTerm_FS &amp&#59covariates  /scale=none aggregate&#59<br/>&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, Perfect vs non prefect COC, L1 vs L0\" CombTerm_FS 0 0 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, Perfect vs non prefect COC, H1 vs H0\" CombTerm_FS -1 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI but prefect COC vs High UPCI but non-Perfect , L1 vs H0\" CombTerm_FS -1 0 1 /exp cl&#59<br/>run&#59<br/><br/><br/>/*change of c index*/<br/><br/>ods graphics on&#59<br/>ods select ROCAssociation Estimates&#59<br/>proc logistic data=VXT_FS1 descending plots (only only) = ROC (id=cutpoint)&#59<br/>&nbsp&nbsp&nbsp&nbspclass UPCIndexF_Cat (ref='L') sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN') <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence (ref='0') = UPCIndexF_Cat &amp&#59covariates /scale=none aggregate&#59<br/>&nbsp&nbsp&nbsp&nbspROC 'M1: UPCIndexF + covariates' UPCIndexF_Cat &amp&#59covariates&#59<br/>&nbsp&nbsp&nbsp&nbspROC 'M2: covariates'  &amp&#59covariates&#59<br/>&nbsp&nbsp&nbsp&nbsproccontrast reference ('M2: covariates')  /estimate&#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"UPCIndexF\" UPCIndexF_Cat 1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbspoutput out=m1 p=prob_m1&#59<br/>run&#59<br/>ods select all&#59<br/>ods graphics off&#59<br/><br/><br/><br/>ods graphics on&#59<br/>ods select ROCAssociation Estimates&#59<br/>proc logistic data=VXT_FS1 descending plots (only only) = ROC (id=cutpoint)&#59<br/>&nbsp&nbsp&nbsp&nbspclass CompFS (ref='0') sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN') <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence (ref='0') = CompFS &amp&#59covariates /scale=none aggregate&#59<br/>&nbsp&nbsp&nbsp&nbspROC 'M1: CompFS + covariates' CompFS &amp&#59covariates&#59<br/>&nbsp&nbsp&nbsp&nbspROC 'M2: covariates'  &amp&#59covariates&#59<br/>&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbspestimate \"CompFS\" CompFS 1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsproccontrast reference ('M2: covariates')  /estimate&#59<br/>&nbsp&nbsp&nbsp&nbspoutput out=m2 p=prob_m2&#59<br/>run&#59<br/>ods select all&#59<br/>ods graphics off&#59<br/><br/><br/>ods graphics on&#59<br/>ods select ROCAssociation Estimates&#59<br/>proc logistic data=VXT_FS1 descending plots (only only) = ROC (id=cutpoint)&#59<br/>&nbsp&nbsp&nbsp&nbspclass CombTerm_FS (ref='L0') sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN') <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence (ref='0') = CombTerm_FS &amp&#59covariates /scale=none aggregate&#59<br/>&nbsp&nbsp&nbsp&nbspROC 'M1: CombTerm_FS + covariates' CombTerm_FS &amp&#59covariates&#59<br/>&nbsp&nbsp&nbsp&nbspROC 'M2: covariates'  &amp&#59covariates&#59<br/>&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, Perfect vs Lowe UPCI non prefect COC, H1 vs L0\" CombTerm_FS 0 1 0 /exp cl&#59<br/><br/>&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, Perfect vs non prefect COC, L1 vs L0\" CombTerm_FS 0 0 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, Perfect vs non prefect COC, H1 vs H0\" CombTerm_FS -1 1 0 /exp cl&#59<br/><br/>&nbsp&nbsp&nbsp&nbspestimate \"Perfect, High UPCI vs low UPCI, H1 vs L1\" CombTerm_FS 0 1 -1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"NonPerfect, High UPCI vs low UPCI, H0 vs L0\" CombTerm_FS 1 0 0 /exp cl&#59<br/><br/>&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI but prefect COC vs High UPCI but non-Perfect , L1 vs H0\" CombTerm_FS -1 0 1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsproccontrast reference ('M2: covariates')  /estimate&#59<br/>&nbsp&nbsp&nbsp&nbspoutput out=m3 p=prob_m3&#59<br/>run&#59<br/>ods select all&#59<br/>ods graphics off&#59<br/><br/><br/><br/>%include \"P:\\Physician_Impact_Pro(SYao)_Bio14-143\\SAS code\\reclass.macros.v4.sas\"&#59<br/>/*merge the 3 out sets */<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=m1,<br/>&nbsp&nbsp&nbsp&nbspt2=m2,<br/>&nbsp&nbsp&nbsp&nbsptarget=_tmp, <br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.COMPFS, t1.Prob_m1, t2.Prob_m2),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=_tmp,<br/>&nbsp&nbsp&nbsp&nbspt2=m3,<br/>&nbsp&nbsp&nbsp&nbsptarget=m, <br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.Prob_m3),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/><br/>ods results on&#59<br/>title 'M1 vs m2'&#59<br/>%NRICAT(m, 1, compfs, Prob_m1, Prob_m2, 4,0.05,0.10,0.20)&#59<br/>%CONTNRI(m,1,compfs,Prob_m1,Prob_m2)&#59<br/>%NRICAT(m, 1, compfs, Prob_m1, Prob_m2, 4,0.05,0.10,0.20)&#59<br/>%IDIMacro(m, 1, compfs, Prob_m1, Prob_m2)&#59<br/><br/>title 'M1 vs m3'&#59<br/>%NRICAT(m, 1, compfs, Prob_m1, Prob_m3, 4,0.05,0.10,0.20)&#59<br/>%CONTNRI(m,1,compfs,Prob_m1,Prob_m3)&#59<br/>%IDIMacro(m, 1, compfs, Prob_m1, Prob_m3)&#59<br/><br/>title 'M2 vs m3'&#59<br/>%NRICAT(m, 1, compfs, Prob_m2, Prob_m3, 4,0.05,0.10,0.20)&#59<br/>%CONTNRI(m,1,compfs,Prob_m2,Prob_m3)&#59<br/>%IDIMacro(m, 1, compfs, Prob_m2, Prob_m3)&#59<br/>title&#59<br/>ods results off&#59<br/><br/><br/><br/><br/><br/><br/>s///<br/>t///","custparents":[{"idx":"CodeTask-6e52I67wL2YkUrUf"}]},{"idx":"5b12fe9f-c914-4880-862a-c5f2a64c0683","name":"VXV_FS matched Logistic","NodeDescription":"///t<br/>///s<br/>/*Pilot PS matched conditional logistic regression, Adherece_adjusted by COMPFS vs UPCIndxF vs CombTerm_FS*/<br/><br/>data _null_&#59run&#59<br/><br/><br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXN_FS.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXN_FS.sas7bdat)<br/>)&#59<br/>/*check the upc score*/<br/>%print(data=VXN_FS)&#59<br/><br/>/*UPCIndexF_Cat*/<br/>data VXV_FS1&#59<br/>&nbsp&nbsp&nbsp&nbspset VXN_FS&#59<br/>&nbsp&nbsp&nbsp&nbspUPCIndexF_Cat='L'&#59/*low*/<br/>&nbsp&nbsp&nbsp&nbspif UPCIndexF >= UPCIndexFP25  then UPCIndexF_Cat='H'&#59/*high*/<br/>&nbsp&nbsp&nbsp&nbspCombTerm_FS = strip(UPCIndexF_Cat) || strip(CompFS)&#59<br/>run&#59<br/><br/>%freq(data=VXV_FS1, table = CombTerm_FS)&#59 <br/><br/>/*univariate*/<br/>proc logistic data=VXV_FS1 descending&#59<br/>&nbsp&nbsp&nbsp&nbspclass CombTerm_FS (ref='L0') sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN') <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspstrata match_Num&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = CombTerm_FS  &#59<br/>&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, Perfect vs non prefect COC, L1 vs L0\" CombTerm_FS 0 0 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, Perfect vs non prefect COC, H1 vs H0\" CombTerm_FS -1 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI but prefect COC vs High UPCI but non-Perfect , L1 vs H0\" CombTerm_FS -1 0 1 /exp cl&#59<br/>run&#59<br/><br/><br/>%let covariates = &nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspage sex_desc  QAIPPE<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspRESITYPE<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNDINS_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNDINS_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNHOSP_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNHOSP_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHNIGHTS_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHDAYS_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHNIGHTS_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHDAYS_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_GP_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_SP_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_GP_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_SP_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_ER_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_ER_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAY_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAYPCT_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAY_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAYPCT_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspBENZO_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPSYCHO_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTIDEP_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTICHO_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspBENZO_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPSYCHO_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTIDEP_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTICHO_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_NPD_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_SA_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_PSY_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_NPD_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_SA_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_PSY_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCHARLSON_INDEX<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_ANXIETY_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_DIABETES<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HTN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOOD_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_NS_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_ASTHMA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_COPD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AP_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOODANX<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOODANXP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OMH<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SUBABUSE_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AMI<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CD_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HP_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_IHD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_STROKE_1POP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_WF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_1POP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CA_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_PV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_DA_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_NONRA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_LB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_2DRUG<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AK_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_RF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_VTE_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CO_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_STROKE_2HOSP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_IB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_RA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CK_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_LV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_EPAD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_UB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SUICIDE_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SCHIZO<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SCHIZO_EVER<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_PD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_EPJR<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_ANXIETY_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_DIABETES<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HTN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOOD_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_NS_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOODANX<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOODANXP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OMH<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_ASTHMA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_COPD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AP_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_IHD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SUBABUSE_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AMI<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CD_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HP_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_STROKE_1POP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_WF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_1POP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_NONRA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CA_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CK_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CO_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_DA_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_PV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_2DRUG<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_LB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AK_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_RF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_VTE_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_STROKE_2HOSP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_IB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_RA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_LV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_EPAD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_UB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SUICIDE_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SCHIZO<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SCHIZO_EVER<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_PD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_EPJR<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPRE365_PRSCR_STATINAHTNOH<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPRE365_MEDCLASS_STATINAHTNOH<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFOLLOWUP_PRSCR_STATINAHTNOH<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFOLLOWUP_MEDCLASS_STATINAHTNOH&nbsp&nbsp&nbsp&nbsp&#59<br/><br/>/*multivariate*/<br/>proc logistic data=VXV_FS1 descending&#59<br/>&nbsp&nbsp&nbsp&nbspclass CombTerm_FS (ref='L0') sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN') <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspstrata match_Num&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = CombTerm_FS &covariates  /aggregate&#59<br/>&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, Perfect vs non prefect COC, L1 vs L0\" CombTerm_FS 0 0 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, Perfect vs non prefect COC, H1 vs H0\" CombTerm_FS -1 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI but prefect COC vs High UPCI but non-Perfect , L1 vs H0\" CombTerm_FS -1 0 1 /exp cl&#59<br/>run&#59<br/><br/><br/>/*change of c index*/<br/><br/>ods graphics on&#59<br/>ods select ROCAssociation Estimates&#59<br/>proc logistic data=VXV_FS1 descending plots (only only) = ROC (id=cutpoint)&#59<br/>&nbsp&nbsp&nbsp&nbspclass UPCIndexF_Cat (ref='L') sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN') <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspstrata match_Num&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence (ref='0') = UPCIndexF_Cat &covariates / aggregate&#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"UPCIndexF\" UPCIndexF_Cat 1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbspoutput out=m1 p=prob_m1&#59<br/>run&#59<br/>ods select all&#59<br/>ods graphics off&#59<br/><br/><br/><br/>ods graphics on&#59<br/>ods select ROCAssociation Estimates&#59<br/>proc logistic data=VXV_FS1 descending plots (only only) = ROC (id=cutpoint)&#59<br/>&nbsp&nbsp&nbsp&nbspclass CompFS (ref='0') sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN') <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspstrata match_Num&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence (ref='0') = CompFS &covariates / aggregate&#59&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspestimate \"UPCIndexF\" CompFS 1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbspoutput out=m2 p=prob_m2&#59<br/>run&#59<br/>ods select all&#59<br/>ods graphics off&#59<br/><br/><br/>ods graphics on&#59<br/>ods select ROCAssociation Estimates&#59<br/>proc logistic data=VXV_FS1 descending plots (only only) = ROC (id=cutpoint)&#59<br/>&nbsp&nbsp&nbsp&nbspclass CombTerm_FS (ref='L0') sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN') <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence (ref='0') = CombTerm_FS &covariates /scale=none aggregate&#59<br/>&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, Perfect vs Lowe UPCI non prefect COC, H1 vs L0\" CombTerm_FS 0 1 0 /exp cl&#59<br/><br/>&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, Perfect vs non prefect COC, L1 vs L0\" CombTerm_FS 0 0 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, Perfect vs non prefect COC, H1 vs H0\" CombTerm_FS -1 1 0 /exp cl&#59<br/><br/>&nbsp&nbsp&nbsp&nbspestimate \"Perfect, High UPCI vs low UPCI, H1 vs L1\" CombTerm_FS 0 1 -1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"NonPerfect, High UPCI vs low UPCI, H0 vs L0\" CombTerm_FS 1 0 0 /exp cl&#59<br/><br/>&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI but prefect COC vs High UPCI but non-Perfect , L1 vs H0\" CombTerm_FS -1 0 1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbspoutput out=m3 p=prob_m3&#59<br/>run&#59<br/>ods select all&#59<br/>ods graphics off&#59<br/><br/>%beep&#59<br/><br/><br/><?xml version=\"1.0\" encoding=\"utf-16\"?><Collection><Elements><Element Type=\"SAS.EG.ProjectElements.CodeTask\" IsSelected=\"true\" PosX=\"204\" PosY=\"1380\"><Element><Label>VXT_FS Unmatched Logistic</Label><Type>TASK</Type><Container>PFD-AnQJoqYfYi6Tk8RB</Container><ID>CodeTask-dc1t3qIkzKpa3hgA</ID><CreatedOn>636909135162330308</CreatedOn><ModifiedOn>637109776480070706</ModifiedOn><ModifiedBy>Shenzhen Yao</ModifiedBy><ModifiedByEGID>syao</ModifiedByEGID><ModifiedByEGVer>7.100.1.2711</ModifiedByEGVer><HasSerializationError>False</HasSerializationError><InputIDs /></Element><SubmitableElement><UseGlobalOptions>True</UseGlobalOptions><Server>Local</Server><HASERROR>False</HASERROR><HASWARNING>True</HASWARNING><HtmlActiveOverride>false</HtmlActiveOverride><RtfActiveOverride>false</RtfActiveOverride><PdfActiveOverride>false</PdfActiveOverride><SasReportActiveOverride>true</SasReportActiveOverride><ListingActiveOverride>false</ListingActiveOverride><AutoDisplayActiveOverride>true</AutoDisplayActiveOverride><PdfStyleOverride>Pearl</PdfStyleOverride><RtfStyleOverride>Rtf</RtfStyleOverride><HtmlStyleNameOverride>HtmlBlue</HtmlStyleNameOverride><HtmlStyleCategoryOverride>BuiltIn</HtmlStyleCategoryOverride><HtmlStyleUrlOverride>C:\\Program Files\\SASHome\\SASEnterpriseGuide\\7.1\\Styles\\HtmlBlue.css</HtmlStyleUrlOverride><SasReportStyleNameOverride>HtmlBlue</SasReportStyleNameOverride><SasReportStyleCategoryOverride>BuiltIn</SasReportStyleCategoryOverride><SasReportStyleUrlOverride>C:\\Program Files\\SASHome\\SASEnterpriseGuide\\7.1\\Styles\\HtmlBlue.css</SasReportStyleUrlOverride><GraphDeviceOverride>ActiveX</GraphDeviceOverride><UseProjectSubmitOptions>true</UseProjectSubmitOptions><SubmitToGrid>false</SubmitToGrid><QueueSubmitsForServer>true</QueueSubmitsForServer><ExpectedOutputDataList><DataDescriptor><PATHTYPE>Libref</PATHTYPE><ServerName>Local</ServerName><LibraryName>WORK</LibraryName><Label>NRI</Label><Member>NRI</Member></DataDescriptor><DataDescriptor><PATHTYPE>Libref</PATHTYPE><ServerName>Local</ServerName><LibraryName>WORK</LibraryName><Label>NRI1</Label><Member>NRI1</Member></DataDescriptor><DataDescriptor><PATHTYPE>Libref</PATHTYPE><ServerName>Local</ServerName><LibraryName>WORK</LibraryName><Label>IDI1</Label><Member>IDI1</Member></DataDescriptor><DataDescriptor><PATHTYPE>Libref</PATHTYPE><ServerName>Local</ServerName><LibraryName>WORK</LibraryName><Label>IDIDAT</Label><Member>IDIDAT</Member></DataDescriptor><DataDescriptor><PATHTYPE>Libref</PATHTYPE><ServerName>Local</ServerName><LibraryName>WORK</LibraryName><Label>TREND2</Label><Member>TREND2</Member></DataDescriptor><DataDescriptor><PATHTYPE>Libref</PATHTYPE><ServerName>Local</ServerName><LibraryName>WORK</LibraryName><Label>IDI2</Label><Member>IDI2</Member></DataDescriptor><DataDescriptor><PATHTYPE>Libref</PATHTYPE><ServerName>Local</ServerName><LibraryName>WORK</LibraryName><Label>TREND</Label><Member>TREND</Member></DataDescriptor><DataDescriptor><PATHTYPE>Libref</PATHTYPE><ServerName>Local</ServerName><LibraryName>WORK</LibraryName><Label>TSTATS</Label><Member>TSTATS</Member></DataDescriptor><DataDescriptor><PATHTYPE>Libref</PATHTYPE><ServerName>Local</ServerName><LibraryName>WORK</LibraryName><Label>UNISTATS</Label><Member>UNISTATS</Member></DataDescriptor><DataDescriptor><PATHTYPE>Libref</PATHTYPE><ServerName>Local</ServerName><LibraryName>WORK</LibraryName><Label>CHISQ</Label><Member>CHISQ</Member></DataDescriptor><DataDescriptor><PATHTYPE>Libref</PATHTYPE><ServerName>Local</ServerName><LibraryName>WORK</LibraryName><Label>CHISQ2</Label><Member>CHISQ2</Member></DataDescriptor><DataDescriptor><PATHTYPE>Libref</PATHTYPE><ServerName>Local</ServerName><LibraryName>WORK</LibraryName><Label>_IDI_</Label><Member>_IDI_</Member></DataDescriptor><DataDescriptor><PATHTYPE>Libref</PATHTYPE><ServerName>Local</ServerName><LibraryName>WORK</LibraryName><Label>_ALL_</Label><Member>_ALL_</Member></DataDescriptor><DataDescriptor><PATHTYPE>Libref</PATHTYPE><ServerName>Local</ServerName><LibraryName>WORK</LibraryName><Label>FREQS</Label><Member>FREQS</Member></DataDescriptor></ExpectedOutputDataList><Parameters /><ExecutionTimeSpan>PT3.198S</ExecutionTimeSpan><JobRecipe><JobRecipe><log>Log-WgjyhkKnzWFsw2Nh</log><code>Code-6zUpd3xSrrTXG96E</code><OutputDataList><ID>ShortCutToData-GcByolOPqOdsmjEd</ID><ID>ShortCutToData-yqewwXzbA5Z4hksA</ID><ID>ShortCutToData-ZYg9LT6AqO4SQoQ4</ID><ID>ShortCutToData-55ufk4qCqFg9EIu1</ID><ID>ShortCutToData-pcz4eQdlGxROw8AB</ID><ID>ShortCutToData-fhelYzTbBgyYyNzO</ID><ID>ShortCutToData-ohCxlsEeiCywpkWq</ID><ID>ShortCutToData-NLpjU1sRjLO4VoAi</ID><ID>ShortCutToData-MsFRnbVVMkGSvfRK</ID><ID>ShortCutToData-eaJrWTpZftQuxRqG</ID><ID>ShortCutToData-dPRWE8k4tYJDILci</ID><ID>ShortCutToData-KLcKFovaJ4YTAP9v</ID><ID>ShortCutToData-POeb42NdUdngFLcz</ID><ID>ShortCutToData-pb2K3ruMXFo2rdFP</ID></OutputDataList><ODSResultsList><ID>ODSResult-9jvUh77OGwiNA5Qt</ID></ODSResultsList></JobRecipe></JobRecipe></SubmitableElement><CodeTask IsClipboardXML=\"True\"><IncludeWrapper>True</IncludeWrapper><Embedded>True</Embedded><Code>/*Compare the measures of AAA and UPC score during follow up*/<br/><br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&amp&#59localTargetPath.\\VXM_FS.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXM_FS.sas7bdat)<br/>)&#59<br/>/*check the upc score*/<br/>%print(data=VXM_FS)&#59<br/><br/><br/>/*UPCIndexF_Cat*/<br/>data VXT_FS1&#59<br/>&nbsp&nbsp&nbsp&nbspset VXM_FS&#59<br/>&nbsp&nbsp&nbsp&nbspUPCIndexF_Cat='L'&#59/*low*/<br/>&nbsp&nbsp&nbsp&nbspif UPCIndexF &gt&#59= UPCIndexFP50  then UPCIndexF_Cat='H'&#59/*high*/<br/>&nbsp&nbsp&nbsp&nbspCombTerm_FS = strip(UPCIndexF_Cat) || strip(CompFS)&#59<br/>&nbsp&nbsp&nbsp&nbspif adherence ne .&#59<br/>run&#59<br/><br/>%freq(data=VXT_FS1, table = CombTerm_FS)&#59 <br/><br/>/*univariate*/<br/>proc logistic data=VXT_FS1 descending&#59<br/>&nbsp&nbsp&nbsp&nbspclass CombTerm_FS (ref='L0') sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN') <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = CombTerm_FS  /scale=none aggregate&#59<br/>&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, Perfect vs non prefect COC, L1 vs L0\" CombTerm_FS 0 0 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, Perfect vs non prefect COC, H1 vs H0\" CombTerm_FS -1 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI but prefect COC vs High UPCI but non-Perfect , L1 vs H0\" CombTerm_FS -1 0 1 /exp cl&#59<br/>run&#59<br/><br/><br/>%let covariates = &nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspage sex_desc  QAIPPE<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspRESITYPE<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNDINS_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNDINS_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNHOSP_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNHOSP_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHNIGHTS_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHDAYS_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHNIGHTS_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHDAYS_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_GP_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_SP_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_GP_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_SP_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_ER_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_ER_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAY_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAYPCT_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAY_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAYPCT_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspBENZO_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPSYCHO_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTIDEP_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTICHO_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspBENZO_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPSYCHO_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTIDEP_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTICHO_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_NPD_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_SA_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_PSY_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_NPD_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_SA_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_PSY_POST365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCHARLSON_INDEX<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_ANXIETY_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_DIABETES<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HTN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOOD_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_NS_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_ASTHMA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_COPD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AP_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOODANX<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOODANXP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OMH<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SUBABUSE_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AMI<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CD_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HP_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_IHD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_STROKE_1POP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_WF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_1POP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CA_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_PV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_DA_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_NONRA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_LB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_2DRUG<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AK_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_RF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_VTE_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CO_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_STROKE_2HOSP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_IB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_RA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CK_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_LV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_EPAD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_UB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SUICIDE_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SCHIZO<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SCHIZO_EVER<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_PD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_EPJR<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_ANXIETY_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_DIABETES<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HTN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOOD_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_NS_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOODANX<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOODANXP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OMH<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_ASTHMA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_COPD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AP_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_IHD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SUBABUSE_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AMI<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CD_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HP_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_STROKE_1POP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_WF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_1POP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_NONRA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CA_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CK_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CO_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_DA_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_PV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_2DRUG<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_LB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AK_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_RF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_VTE_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_STROKE_2HOSP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_IB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_RA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_LV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_EPAD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_UB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SUICIDE_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SCHIZO<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SCHIZO_EVER<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_PD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_EPJR<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPRE365_PRSCR_STATINAHTNOH<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPRE365_MEDCLASS_STATINAHTNOH<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFOLLOWUP_PRSCR_STATINAHTNOH<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFOLLOWUP_MEDCLASS_STATINAHTNOH&nbsp&nbsp&nbsp&nbsp&#59<br/><br/>/*multivariate*/<br/>proc logistic data=VXT_FS1 descending&#59<br/>&nbsp&nbsp&nbsp&nbspclass CombTerm_FS (ref='L0') sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN') <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = CombTerm_FS &amp&#59covariates  /scale=none aggregate&#59<br/>&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, Perfect vs non prefect COC, L1 vs L0\" CombTerm_FS 0 0 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, Perfect vs non prefect COC, H1 vs H0\" CombTerm_FS -1 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI but prefect COC vs High UPCI but non-Perfect , L1 vs H0\" CombTerm_FS -1 0 1 /exp cl&#59<br/>run&#59<br/><br/><br/>/*change of c index*/<br/><br/>ods graphics on&#59<br/>ods select ROCAssociation Estimates&#59<br/>proc logistic data=VXT_FS1 descending plots (only only) = ROC (id=cutpoint)&#59<br/>&nbsp&nbsp&nbsp&nbspclass UPCIndexF_Cat (ref='L') sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN') <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence (ref='0') = UPCIndexF_Cat &amp&#59covariates /scale=none aggregate&#59<br/>&nbsp&nbsp&nbsp&nbspROC 'M1: UPCIndexF + covariates' UPCIndexF_Cat &amp&#59covariates&#59<br/>&nbsp&nbsp&nbsp&nbspROC 'M2: covariates'  &amp&#59covariates&#59<br/>&nbsp&nbsp&nbsp&nbsproccontrast reference ('M2: covariates')  /estimate&#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"UPCIndexF\" UPCIndexF_Cat 1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbspoutput out=m1 p=prob_m1&#59<br/>run&#59<br/>ods select all&#59<br/>ods graphics off&#59<br/><br/><br/><br/>ods graphics on&#59<br/>ods select ROCAssociation Estimates&#59<br/>proc logistic data=VXT_FS1 descending plots (only only) = ROC (id=cutpoint)&#59<br/>&nbsp&nbsp&nbsp&nbspclass CompFS (ref='0') sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN') <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence (ref='0') = CompFS &amp&#59covariates /scale=none aggregate&#59<br/>&nbsp&nbsp&nbsp&nbspROC 'M1: CompFS + covariates' CompFS &amp&#59covariates&#59<br/>&nbsp&nbsp&nbsp&nbspROC 'M2: covariates'  &amp&#59covariates&#59<br/>&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbspestimate \"CompFS\" CompFS 1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsproccontrast reference ('M2: covariates')  /estimate&#59<br/>&nbsp&nbsp&nbsp&nbspoutput out=m2 p=prob_m2&#59<br/>run&#59<br/>ods select all&#59<br/>ods graphics off&#59<br/><br/><br/>ods graphics on&#59<br/>ods select ROCAssociation Estimates&#59<br/>proc logistic data=VXT_FS1 descending plots (only only) = ROC (id=cutpoint)&#59<br/>&nbsp&nbsp&nbsp&nbspclass CombTerm_FS (ref='L0') sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN') <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence (ref='0') = CombTerm_FS &amp&#59covariates /scale=none aggregate&#59<br/>&nbsp&nbsp&nbsp&nbspROC 'M1: CombTerm_FS + covariates' CombTerm_FS &amp&#59covariates&#59<br/>&nbsp&nbsp&nbsp&nbspROC 'M2: covariates'  &amp&#59covariates&#59<br/>&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, Perfect vs Lowe UPCI non prefect COC, H1 vs L0\" CombTerm_FS 0 1 0 /exp cl&#59<br/><br/>&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, Perfect vs non prefect COC, L1 vs L0\" CombTerm_FS 0 0 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, Perfect vs non prefect COC, H1 vs H0\" CombTerm_FS -1 1 0 /exp cl&#59<br/><br/>&nbsp&nbsp&nbsp&nbspestimate \"Perfect, High UPCI vs low UPCI, H1 vs L1\" CombTerm_FS 0 1 -1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"NonPerfect, High UPCI vs low UPCI, H0 vs L0\" CombTerm_FS 1 0 0 /exp cl&#59<br/><br/>&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI but prefect COC vs High UPCI but non-Perfect , L1 vs H0\" CombTerm_FS -1 0 1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsproccontrast reference ('M2: covariates')  /estimate&#59<br/>&nbsp&nbsp&nbsp&nbspoutput out=m3 p=prob_m3&#59<br/>run&#59<br/>ods select all&#59<br/>ods graphics off&#59<br/><br/><br/><br/>%include \"P:\\Physician_Impact_Pro(SYao)_Bio14-143\\SAS code\\reclass.macros.v4.sas\"&#59<br/>/*merge the 3 out sets */<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=m1,<br/>&nbsp&nbsp&nbsp&nbspt2=m2,<br/>&nbsp&nbsp&nbsp&nbsptarget=_tmp, <br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.COMPFS, t1.Prob_m1, t2.Prob_m2),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=_tmp,<br/>&nbsp&nbsp&nbsp&nbspt2=m3,<br/>&nbsp&nbsp&nbsp&nbsptarget=m, <br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.Prob_m3),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/><br/>ods results on&#59<br/>title 'M1 vs m2'&#59<br/>%NRICAT(m, 1, compfs, Prob_m1, Prob_m2, 4,0.05,0.10,0.20)&#59<br/>%CONTNRI(m,1,compfs,Prob_m1,Prob_m2)&#59<br/>%NRICAT(m, 1, compfs, Prob_m1, Prob_m2, 4,0.05,0.10,0.20)&#59<br/>%IDIMacro(m, 1, compfs, Prob_m1, Prob_m2)&#59<br/><br/>title 'M1 vs m3'&#59<br/>%NRICAT(m, 1, compfs, Prob_m1, Prob_m3, 4,0.05,0.10,0.20)&#59<br/>%CONTNRI(m,1,compfs,Prob_m1,Prob_m3)&#59<br/>%IDIMacro(m, 1, compfs, Prob_m1, Prob_m3)&#59<br/><br/>title 'M2 vs m3'&#59<br/>%NRICAT(m, 1, compfs, Prob_m2, Prob_m3, 4,0.05,0.10,0.20)&#59<br/>%CONTNRI(m,1,compfs,Prob_m2,Prob_m3)&#59<br/>%IDIMacro(m, 1, compfs, Prob_m2, Prob_m3)&#59<br/>title&#59<br/>ods results off&#59<br/><br/><br/><br/><br/><br/><br/>s///<br/>t///","custparents":[{"idx":"CodeTask-6e52I67wL2YkUrUf"}]},{"idx":"28feb6b3-0cb3-49f6-8cc8-d0692f8d2c24","name":"tryIDINRI","NodeDescription":"///t<br/>///s<br/><br/> <br/>%include \"P:\\Physician_Impact_Pro(SYao)_Bio14-143\\SAS code\\reclass.macros.v4.sas\"&#59<br/><br/><br/>/*proc logistic data=VXV_FS2x desc&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspstrata match_Num&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = &theXVar &covariates /maxiter=500  &#59*/<br/>/*&nbsp&nbsp&nbsp&nbspestimate \"&theXVar\" &theXVar 1/exp cl&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspods output estimates =_tmp2&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspoutput out=localt.m1_OCM (keep=key_hsn adherence_adjust prob_m1_OCM) p=prob_m1_OCM&#59*/<br/>/*run&#59*/<br/>/*%beep&#59*/<br/><br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=localt.M50exp_M_UPC,<br/>&nbsp&nbsp&nbsp&nbspt2=localt.M50exp_M_CMP,<br/>&nbsp&nbsp&nbsp&nbsptarget=_tmpxx, <br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.adherence_adjust, t1.p as m0, t2.p as m1),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(t1.p ne . and t2.p ne .)<br/>)&#59<br/><br/>ods results on&#59<br/>title 'M0 vs m1'&#59<br/>%NRICAT(_tmpxx, 1, adherence_adjust, m0, m1, 2, .5)&#59<br/>%CONTNRI(_tmpxx,1,adherence_adjust,m0, m1)&#59<br/>%IDIMacro(_tmpxx, 1, adherence_adjust, m0, m1)&#59<br/>/*weired IDI results*/<br/><br/><br/><br/><br/><br/>s///<br/>t///","custparents":[{"idx":"CodeTask-6e52I67wL2YkUrUf"}]}],"custparents":[{"idx":"CodeTask-GeKgpf61zi1a5WjA"}]},{"idx":"301571cb-038e-4efb-95fd-42372a465b23","name":"Q VXN","NodeDescription":"///t<br/>///s<br/>/*There are much fewer obs in matched cohort. This is because after 1:1 match, the cohort contains all cases adh=1, and matched controls.*/<br/>/*As adh is of minority in the original cohort, the result cohort is of few people*/<br/><br/>/*The MSMatch Macro is a revised one<br/>&nbsp&nbsp&nbsp&nbspThe PS is based on likelihood of outcome (Adherence), not exposure (UCPIndex or CompCOC)<br/>&nbsp&nbsp&nbsp&nbspHowever, the match is based on exposure<br/><br/>&nbsp&nbsp&nbsp&nbspSpecifically, the match for dichotomous UPCIndex(H/L) should be based on different cut off (25, median, 75 quintile)<br/>&nbsp&nbsp&nbsp&nbspThe combined model is based on match by CompCOC (otherwise how to match for multiple levels?)<br/><br/>&nbsp&nbsp&nbsp&nbspThe ps macro is set that the exposure has to be 1 or 0, cannot be characters....<br/><br/><br/>1. if set the UPCINDEX to 25 percentile, 75% of patients will be classified as exposure = 1 (High UPCIndex)<br/>&nbsp&nbsp&nbsp&nbspHowever, as there is only 25% of patients to be matched (no replacement allowed), the eventual matched cohort <br/>&nbsp&nbsp&nbsp&nbspwill only have 50% of the cohort (25% for exp and 25% for matched)<br/><br/>2. It seems that the outcome match is worse than the exposure match<br/><br/>3. Outcome match is to calculate PS based on outcome. However, the match is still using exposed group, <br/>&nbsp&nbsp&nbsp&nbspand matched with unexposed, right?<br/>*/<br/>s///<br/>t///","custparents":[{"idx":"CodeTask-GeKgpf61zi1a5WjA"}]}],"custparents":[{"idx":"CodeTask-wDXjQfBcd6Neqhu6"}]},{"idx":"5872f63a-d9c5-4642-a5aa-674140387e32","name":"VXN_FS_PS Matching PS and Match all by Exp","NodeDescription":"///t<br/>///s<br/>/*VXN_FS_PropensityScoreMatching , PS by outcome, matching by outcome*/<br/><br/><br/><br/>data _null_&#59run&#59<br/><br/><br/>/*VXN_FS0-1. Prepare data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXM_FS.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXM_FS.sas7bdat)<br/>)&#59<br/>data VXN_FS1&#59<br/>&nbsp&nbsp&nbsp&nbspset VXM_FS&#59<br/>&nbsp&nbsp&nbsp&nbspqaippeN = qaippe&#59<br/>&nbsp&nbsp&nbsp&nbspif qaippe = . or qaippe = 9 then qaippeN=0&#59<br/>&nbsp&nbsp&nbsp&nbspresitypeN=1&#59<br/>&nbsp&nbsp&nbsp&nbspif resitype='URBAN' then resitypeN=0&#59<br/>&nbsp&nbsp&nbsp&nbspif charlson_index=. then charlson_index=0&#59<br/>run&#59<br/>/*Define psVars*/<br/>%let psVars = &nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspQAIPPEN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspRESITYPEN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNDINS_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNDINS_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNHOSP_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNHOSP_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHNIGHTS_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHDAYS_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHNIGHTS_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHDAYS_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_GP_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_SP_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_GP_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_SP_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_ER_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_ER_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAY_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAYPCT_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAY_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAYPCT_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspBENZO_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPSYCHO_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTIDEP_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTICHO_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspBENZO_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPSYCHO_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTIDEP_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTICHO_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_NPD_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_SA_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_PSY_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_NPD_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_SA_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_PSY_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCHARLSON_INDEX<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_ANXIETY_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_DIABETES<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HTN<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOOD_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_NS_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_ASTHMA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_COPD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AP_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOODANX<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOODANXP*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OA<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OMH*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SUBABUSE_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AMI<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CD_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HP_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_IHD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_STROKE_1POP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_WF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_1POP<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CA_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_PV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_DA_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_NONRA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_LB_PS<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_2DRUG*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_RF_PS*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_VTE_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CO_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_STROKE_2HOSP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_IB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_RA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CK_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_LV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_EPAD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_UB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SUICIDE_OLD<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SCHIZO*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SCHIZO_EVER<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_PD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_EPJR<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_ANXIETY_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_DIABETES*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HTN*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOOD_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_NS_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOODANX*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOODANXP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OMH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_ASTHMA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_COPD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HF*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AP_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_IHD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SUBABUSE_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AMI*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CD_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HP_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_STROKE_1POP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_WF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_1POP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_NONRA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CA_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CO_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_DA_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_PV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_2DRUG*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_LB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_RF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_VTE_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_STROKE_2HOSP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_IB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_RA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_LV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_EPAD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_UB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SUICIDE_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SCHIZO*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SCHIZO_EVER*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_PD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_EPJR*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPRE365_PRSCR_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPRE365_MEDCLASS_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFOLLOWUP_PRSCR_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFOLLOWUP_MEDCLASS_STATINAHTNOH&nbsp&nbsp&nbsp&nbsp*/<br/>&#59<br/><br/><br/>/*VXN_FS2-3, propensity score matching. PS score not based on exposure status, but on adherence outcome!<br/>&nbsp&nbsp&nbsp&nbspthe match is based also on outcome*/<br/>/*VXN_FS1a, match by UPCIndexFS cutoff = 50*/<br/>ods results on&#59<br/><br/><br/><br/><br/>%let UPCCutOff=50&#59<br/>data VXN_FS2_&UPCCutOff&#59<br/>&nbsp&nbsp&nbsp&nbspset VXN_FS1&#59<br/>&nbsp&nbsp&nbsp&nbspUPCIndexF_CatN&UPCCutOff=0&#59/*low*/<br/>&nbsp&nbsp&nbsp&nbspif UPCIndexF >= UPCIndexFP&UPCCutOff  then UPCIndexF_CatN&UPCCutOff=1&#59/*high*/<br/>&nbsp&nbsp&nbsp&nbspCombTerm_FS = strip(UPCIndexF_CatN&UPCCutOff) || strip(CompFS)&#59<br/>run&#59<br/><br/>%let thisExposureVar =adherence_adjust&#59<br/><br/>%MatchByPS(<br/>&nbsp&nbsp&nbsp&nbspdata=VXN_FS2_&UPCCutOff,<br/>&nbsp&nbsp&nbsp&nbsptheExposureVar=&thisExposureVar,<br/>&nbsp&nbsp&nbsp&nbsptrimPCT=5,<br/>&nbsp&nbsp&nbsp&nbspmatchN=1,<br/>&nbsp&nbsp&nbsp&nbspcapliper=0.2,<br/>&nbsp&nbsp&nbsp&nbspkeepVarsForPart2 = key_hsn &thisExposureVar age sex_desc logit_ps entrydate,<br/>&nbsp&nbsp&nbsp&nbspexposeCondition=%quote(&thisExposureVar  = 1),<br/>&nbsp&nbsp&nbsp&nbspControlCondition=%quote(&thisExposureVar  = 0),<br/>&nbsp&nbsp&nbsp&nbspConditionsForPart2 =%quote(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspabs(t1.age-t2.age) <=1 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp|<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.sex_desc = t2.sex_desc<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp|<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspabs(t1.EntryDate-t2.EntryDate) <=365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp|<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspabs(t1.logit_ps - t2.logit_ps) <= 0.2),<br/>&nbsp&nbsp&nbsp&nbsppsdiff=psdiff,<br/>&nbsp&nbsp&nbsp&nbsppsdiffTermForPart2=%quote(,abs(t1.logit_ps-t2.logit_ps) as psDiff),<br/>&nbsp&nbsp&nbsp&nbspnoreplaceForPart2=1,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXN_FS3_ADH,<br/>&nbsp&nbsp&nbsp&nbspdebug=1,<br/>&nbsp&nbsp&nbsp&nbspthePSVars=&psVars &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>)&#59<br/><br/>data VXN_FS_ADH_DATA_EXP&#59<br/>&nbsp&nbsp&nbsp&nbspset VXN_FS3_ADH_DATA&#59<br/>Run&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localTargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VXN_FS_ADH_DATA_EXP.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VXN_FS_ADH_DATA_EXP.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/>data localt.VXN_FS_ADH_Rpt_EXP&#59<br/>&nbsp&nbsp&nbsp&nbspset VXN_FS3_ADH_Report&#59<br/>Run&#59<br/><br/><br/><br/>s///<br/>t///","children":[{"idx":"1d2857dd-fb7b-4956-8239-b9cf0c0159c5","name":"VXV_FS matched LogisticOutcome","NodeDescription":"///t<br/>///s<br/>/*VXV_FS matched logistic regression, Adherece_adjusted by COMPFS vs UPCIndxF vs CombTerm_FS*/<br/><br/>data _null_&#59run&#59<br/><br/>%let theData =VXN_FS_ADH_DATA_EXP&#59<br/><br/>/*VXV_FS0. Prepare source files.*/<br/>%include \"P:\\Physician_Impact_Pro(SYao)_Bio14-143\\SAS code\\reclass.macros.v4.sas\"&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\&theData..zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(&theData..sas7bdat)<br/>)&#59<br/>/*check the upc score*/<br/>%print(data=&theData)&#59<br/>/*Define covariates*/<br/>%let covariates = &nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspage   QAIPPEN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspRESITYPEN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNDINS_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNDINS_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNHOSP_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNHOSP_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHNIGHTS_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHDAYS_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHNIGHTS_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHDAYS_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_GP_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_SP_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_GP_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_SP_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_ER_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_ER_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAY_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAYPCT_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAY_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAYPCT_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspBENZO_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPSYCHO_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTIDEP_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTICHO_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspBENZO_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPSYCHO_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTIDEP_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTICHO_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_NPD_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_SA_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_PSY_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_NPD_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_SA_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_PSY_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCHARLSON_INDEX<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_ANXIETY_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_DIABETES<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HTN<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOOD_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_NS_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_ASTHMA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_COPD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AP_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOODANX<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOODANXP*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OA<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OMH*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SUBABUSE_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AMI<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CD_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HP_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_IHD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_STROKE_1POP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_WF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_1POP<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CA_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_PV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_DA_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_NONRA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_LB_PS<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_2DRUG*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_RF_PS*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_VTE_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CO_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_STROKE_2HOSP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_IB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_RA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CK_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_LV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_EPAD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_UB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SUICIDE_OLD<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SCHIZO*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SCHIZO_EVER<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_PD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_EPJR<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_ANXIETY_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_DIABETES*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HTN*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOOD_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_NS_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOODANX*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOODANXP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OMH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_ASTHMA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_COPD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HF*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AP_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_IHD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SUBABUSE_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AMI*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CD_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HP_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_STROKE_1POP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_WF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_1POP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_NONRA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CA_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CO_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_DA_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_PV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_2DRUG*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_LB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_RF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_VTE_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_STROKE_2HOSP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_IB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_RA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_LV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_EPAD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_UB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SUICIDE_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SCHIZO*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SCHIZO_EVER*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_PD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_EPJR*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPRE365_PRSCR_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPRE365_MEDCLASS_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFOLLOWUP_PRSCR_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFOLLOWUP_MEDCLASS_STATINAHTNOH&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>/*practice/physician related factors*/<br/>&nbsp&nbsp&nbsp&nbspdocSexN_FS<br/>&nbsp&nbsp&nbsp&nbspdocAge_FS<br/>&nbsp&nbsp&nbsp&nbspdocServiceYr_FS<br/>&nbsp&nbsp&nbsp&nbspdocEdCountry_FS<br/>&nbsp&nbsp&nbsp&nbspdocPayTypeN_FS<br/>&nbsp&nbsp&nbsp&nbspdocN_Visits_FS<br/>&nbsp&nbsp&nbsp&nbspdocNPatients_FS<br/>&nbsp&nbsp&nbsp&nbspdocStatinRxPCT_FS<br/>&#59<br/><br/><br/>/*VXV_FS2. Treat the missing values.*/<br/>data VXV_FS2_ADH&#59<br/>&nbsp&nbsp&nbsp&nbspset &thedata&#59<br/>&nbsp&nbsp&nbsp&nbspSex=1&#59<br/>&nbsp&nbsp&nbsp&nbspif sex_desc='M' then sex=0&#59<br/>&nbsp&nbsp&nbsp&nbspqaippeN = qaippe&#59<br/>&nbsp&nbsp&nbsp&nbspif qaippe = . or qaippe = 9 then qaippeN=6&#59<br/>&nbsp&nbsp&nbsp&nbspresitypeN=1&#59<br/>&nbsp&nbsp&nbsp&nbspif resitype='URBAN' then resitypeN=0&#59<br/>&nbsp&nbsp&nbsp&nbspif charlson_index=. then charlson_index=0&#59<br/>&nbsp&nbsp&nbsp&nbspif UPCIndexF_CatN50=1 then &nbsp&nbsp&nbsp&nbspCombTerm_FS = 'H' || strip(CompFS)&#59<br/>&nbsp&nbsp&nbsp&nbspif UPCIndexF_CatN50=0 then &nbsp&nbsp&nbsp&nbspCombTerm_FS = 'L' || strip(CompFS)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*release the practice (doc) related covariates. Note, it is named _FS,but is indeed measured from runin through follow up (2 years)*/<br/>&nbsp&nbsp&nbsp&nbspdocSex_FS = scan(UCPF1, 4, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspif docSex_FS='M' then docSexN_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspelse docSexN_FS=1&#59<br/>&nbsp&nbsp&nbsp&nbspdocBirthYr_FS= scan(UCPF1, 5, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspdocAge_FS=int(yrdif(mdy(6,30,docbirthyr_FS), entryDate, \"age\"))&#59<br/>&nbsp&nbsp&nbsp&nbspdocGradYr_FS= input(scan(UCPF1, 6, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocServiceYr_FS= year(entryDate) - docGradYr_FS&#59<br/>&nbsp&nbsp&nbsp&nbspdocEdCountry_FS = input(scan(UCPF1, 8, \":\"), 8.)&#59 /*0 for foreign*/<br/>&nbsp&nbsp&nbsp&nbspdocPayType_FS = scan(UCPF1, 9, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspif strip(docPayType_FS )='NFFS' then docPayTypeN_FS =1&#59<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif strip(docPayType_FS )='FFS' then docPayTypeN_FS =0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse docPayTypeN_FS =2&#59/*unknown*/<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdocN_Visits_FS = input(scan(UCPF1, 10, \":\"), 8.)&#59 /*N_Visits*/<br/>&nbsp&nbsp&nbsp&nbspdocNPatients_FS = input(scan(UCPF1, 11, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocNRx_FS=  input(scan(UCPF1, 12, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocNStatinRx_FS=  input(scan(UCPF1, 13, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspif docNStatinRx_FS=. then docNStatinRx_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspif docNRx_FS=. or docNRx_FS=0 or docNStatinRx_FS=0 then docStatinRxPCT_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspelse docStatinRxPCT_FS = round(docNStatinRx_FS/docNRx_FS*100, '0.01')&#59<br/><br/>run&#59<br/><br/>data VXV_FS2x_ADH&#59<br/>&nbsp&nbsp&nbsp&nbspset VXV_FS2_ADH&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn adherence_adjust UPCIndexF_CatN50 COMPFS CombTerm_FS &covariates match_Num&#59<br/>run&#59<br/>%sort(data=VXV_FS2x_ADH, sorter=match_num descending adherence_adjust)&#59<br/><br/>/*1.UPCIndex as theVar*/<br/>%macro doUniv&#59<br/>%let  theXVar = UPCIndexF_CatN50&#59<br/>ods results off&#59<br/>proc logistic data=VXV_FS2x_ADH descending&#59<br/>&nbsp&nbsp&nbsp&nbspclass  CombTerm_FS (ref='L0') /*sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN')*/ <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspstrata match_Num&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = &theXVar &#59<br/>&nbsp&nbsp&nbsp&nbsp%if &theXVar = CombTerm_FS %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs Lowe UPCI non COMPCOC, H1 vs L0\" CombTerm_FS 0 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, COMPCOC vs non COMPCOC, L1 vs L0\" CombTerm_FS 0 0 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs non COMPCOC, H1 vs H0\" CombTerm_FS -1 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"COMPCOC, High UPCI vs low UPCI, H1 vs L1\" CombTerm_FS 0 1 -1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"NonCOMPCOC, High UPCI vs low UPCI, H0 vs L0\" CombTerm_FS 1 0 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI but COMPCOC vs High UPCI but non-COMPCOC , L1 vs H0\" CombTerm_FS -1 0 1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"&theXVar\" &theXVar 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbspods output estimates =localt.Est50ADH_U_UPC &#59<br/>&nbsp&nbsp&nbsp&nbspoutput out=localt.m50ADH_U_UPC (keep=key_hsn adherence_adjust p) p=p&#59 <br/>run&#59<br/>ods results on&#59<br/>%mend doUniv&#59<br/>%doUniv&#59<br/><br/>/*multi model without theVar*/<br/>%macro doMultiv&#59<br/>%let  theXVar = UPCIndexF_CatN50&#59<br/>/*ods results off&#59*/<br/>proc logistic data=VXV_FS2x_ADH desc&#59<br/>&nbsp&nbsp&nbsp&nbspstrata match_Num &#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') =  &covariates /maxiter=500  &#59<br/>&nbsp&nbsp&nbsp&nbspoutput out=localt.M50ADH_M_COV (keep=key_hsn adherence_adjust p) p=p&#59<br/>run&#59<br/>/*ods results on&#59*/<br/>%mend doMultiv&#59<br/>%doMultiv&#59<br/><br/>/*multi model  theVar and covariates*/<br/>%macro doMultiv&#59<br/>%let  theXVar = UPCIndexF_CatN50&#59<br/>/*ods results off&#59*/<br/>proc logistic data=VXV_FS2x_ADH desc&#59<br/>&nbsp&nbsp&nbsp&nbspstrata match_Num&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = &theXVar &covariates /maxiter=500  &#59<br/>&nbsp&nbsp&nbsp&nbsp%if &theXVar = CombTerm_FS %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs Lowe UPCI non COMPCOC, H1 vs L0\" CombTerm_FS 0 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, COMPCOC vs non COMPCOC, L1 vs L0\" CombTerm_FS 0 0 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs non COMPCOC, H1 vs H0\" CombTerm_FS -1 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"COMPCOC, High UPCI vs low UPCI, H1 vs L1\" CombTerm_FS 0 1 -1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"NonCOMPCOC, High UPCI vs low UPCI, H0 vs L0\" CombTerm_FS 1 0 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI but COMPCOC vs High UPCI but non-COMPCOC , L1 vs H0\" CombTerm_FS -1 0 1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"&theXVar\" &theXVar 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbspods output estimates =localt.Est50ADH_M_UPC&#59<br/>&nbsp&nbsp&nbsp&nbspoutput out=localt.M50ADH_M_UPC (keep=key_hsn adherence_adjust p) p=p&#59<br/>run&#59<br/>/*ods results on&#59*/<br/>%mend doMultiv&#59<br/>%doMultiv&#59<br/><br/><br/><br/>/*2.CompCOC as theVar*/<br/>/*univ*/<br/>%macro doUniv&#59<br/>%let  theXVar = COMPFS&#59<br/>ods results off&#59<br/>proc logistic data=VXV_FS2x_ADH descending&#59<br/>&nbsp&nbsp&nbsp&nbspclass  CombTerm_FS (ref='L0') /*sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN')*/ <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspstrata match_Num&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = &theXVar &#59<br/>&nbsp&nbsp&nbsp&nbsp%if &theXVar = CombTerm_FS %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs Lowe UPCI non COMPCOC, H1 vs L0\" CombTerm_FS 0 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, COMPCOC vs non COMPCOC, L1 vs L0\" CombTerm_FS 0 0 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs non COMPCOC, H1 vs H0\" CombTerm_FS -1 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"COMPCOC, High UPCI vs low UPCI, H1 vs L1\" CombTerm_FS 0 1 -1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"NonCOMPCOC, High UPCI vs low UPCI, H0 vs L0\" CombTerm_FS 1 0 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI but COMPCOC vs High UPCI but non-COMPCOC , L1 vs H0\" CombTerm_FS -1 0 1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"&theXVar\" &theXVar 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbspods output estimates =localt.Est50ADH_U_CMP &#59<br/>&nbsp&nbsp&nbsp&nbspoutput out=localt.m50ADH_U_CMP (keep=key_hsn adherence_adjust p) p=p&#59 <br/>run&#59<br/>ods results on&#59<br/>%mend doUniv&#59<br/>%doUniv&#59<br/><br/><br/>/*multi model  theVar and covariates*/<br/>%macro doMultiv&#59<br/>%let  theXVar = COMPFS&#59<br/>/*ods results off&#59*/<br/>proc logistic data=VXV_FS2x_ADH desc&#59<br/>&nbsp&nbsp&nbsp&nbspclass  CombTerm_FS (ref='L0') /*sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN')*/ <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspstrata match_Num&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = &theXVar &covariates /maxiter=500  &#59<br/>&nbsp&nbsp&nbsp&nbsp%if &theXVar = CombTerm_FS %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs Lowe UPCI non COMPCOC, H1 vs L0\" CombTerm_FS 0 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, COMPCOC vs non COMPCOC, L1 vs L0\" CombTerm_FS 0 0 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs non COMPCOC, H1 vs H0\" CombTerm_FS -1 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"COMPCOC, High UPCI vs low UPCI, H1 vs L1\" CombTerm_FS 0 1 -1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"NonCOMPCOC, High UPCI vs low UPCI, H0 vs L0\" CombTerm_FS 1 0 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI but COMPCOC vs High UPCI but non-COMPCOC , L1 vs H0\" CombTerm_FS -1 0 1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"&theXVar\" &theXVar 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbspods output estimates =localt.Est50ADH_M_CMP&#59<br/>&nbsp&nbsp&nbsp&nbspoutput out=localt.m50ADH_M_CMP (keep=key_hsn adherence_adjust p) p=p&#59 <br/>run&#59<br/>/*ods results on&#59*/<br/>%mend doMultiv&#59<br/>%doMultiv&#59<br/><br/><br/><br/><br/>/*3.Combined as theVar*/<br/>/*univ*/<br/>%macro doUniv&#59<br/>%let  theXVar = CombTerm_FS&#59<br/>ods results off&#59<br/>proc logistic data=VXV_FS2x_ADH descending&#59<br/>&nbsp&nbsp&nbsp&nbspclass  CombTerm_FS (ref='L0') /*sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN')*/ <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspstrata match_Num&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = &theXVar &#59<br/>&nbsp&nbsp&nbsp&nbsp%if &theXVar = CombTerm_FS %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs Lowe UPCI non COMPCOC, H1 vs L0\" CombTerm_FS 0 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, COMPCOC vs non COMPCOC, L1 vs L0\" CombTerm_FS 0 0 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs non COMPCOC, H1 vs H0\" CombTerm_FS -1 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"COMPCOC, High UPCI vs low UPCI, H1 vs L1\" CombTerm_FS 0 1 -1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"NonCOMPCOC, High UPCI vs low UPCI, H0 vs L0\" CombTerm_FS 1 0 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI but COMPCOC vs High UPCI but non-COMPCOC , L1 vs H0\" CombTerm_FS -1 0 1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"&theXVar\" &theXVar 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbspods output estimates =localt.Est50ADH_U_CMB &#59<br/>&nbsp&nbsp&nbsp&nbspoutput out=localt.m50ADH_U_CMB (keep=key_hsn adherence_adjust p) p=p&#59 <br/>run&#59<br/>ods results on&#59<br/>%mend doUniv&#59<br/>%doUniv&#59<br/><br/><br/>/*multi model  theVar and covariates*/<br/>%macro doMultiv&#59<br/>%let  theXVar = CombTerm_FS&#59<br/>/*ods results off&#59*/<br/>proc logistic data=VXV_FS2x_ADH desc&#59<br/>&nbsp&nbsp&nbsp&nbspclass  CombTerm_FS (ref='L0') /*sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN')*/ <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspstrata match_Num&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = &theXVar &covariates /maxiter=500  &#59<br/>&nbsp&nbsp&nbsp&nbsp%if &theXVar = CombTerm_FS %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs Lowe UPCI non COMPCOC, H1 vs L0\" CombTerm_FS 0 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, COMPCOC vs non COMPCOC, L1 vs L0\" CombTerm_FS 0 0 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs non COMPCOC, H1 vs H0\" CombTerm_FS -1 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"COMPCOC, High UPCI vs low UPCI, H1 vs L1\" CombTerm_FS 0 1 -1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"NonCOMPCOC, High UPCI vs low UPCI, H0 vs L0\" CombTerm_FS 1 0 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI but COMPCOC vs High UPCI but non-COMPCOC , L1 vs H0\" CombTerm_FS -1 0 1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"&theXVar\" &theXVar 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbspods output estimates =localt.Est50ADH_M_CMB&#59<br/>&nbsp&nbsp&nbsp&nbspoutput out=localt.m50ADH_M_CMB (keep=key_hsn adherence_adjust p) p=p&#59 <br/>run&#59<br/>/*ods results on&#59*/<br/>%mend doMultiv&#59<br/>%doMultiv&#59<br/><br/><br/><br/>%beep&#59<br/><br/><br/>s///<br/>t///","custparents":[{"idx":"CodeTask-MhDm6v3S3xuch5pB"}]}],"custparents":[{"idx":"CodeTask-wDXjQfBcd6Neqhu6"}]}],"custparents":[{"idx":"CodeTask-mqQWr8kGTH7TzB2R"},{"idx":"cdc6a4ce-be19-468e-b92b-3a9429469cfe"}]},{"idx":"2874ebf5-a353-4939-9543-17e88141aff0","name":"Q_VXM","NodeDescription":"///t<br/>///s<br/>/*The days in hospital were removed in calculating adjusted PDC and adherence<br/><br/>Is it over estimated by counting the amount? Nope, slightly higher than 50%<br/>*/<br/>s///<br/>t///","custparents":[{"idx":"CodeTask-mqQWr8kGTH7TzB2R"},{"idx":"cdc6a4ce-be19-468e-b92b-3a9429469cfe"}]}],"custparents":[{"idx":"CodeTask-QdgwMbLyrBc2zchU"}]},{"idx":"e4db72ce-71b6-4fbe-b5c4-3981d25638b7","name":"VXK_FS UCPIndexF predictors Poisson &amp; report","NodeDescription":"///t<br/>///s<br/>/*localt.VXK_FS. UPC Index predictors*/<br/><br/>data _null_&#59run&#59<br/><br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXJ_C.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXJ_C.sas7bdat)<br/>)&#59<br/>data VXK_FS1&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_C&#59<br/>/*add doc related factors*/<br/>&nbsp&nbsp&nbsp&nbsp/*release the practice (doc) related covariates. Note, it is named _FS,but is indeed measured from runin through follow up (2 years)*/<br/>&nbsp&nbsp&nbsp&nbspdocSex_FS = scan(UCPF1, 4, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspif docSex_FS='M' then docSexN_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspelse docSexN_FS=1&#59<br/>&nbsp&nbsp&nbsp&nbspdocBirthYr_FS= scan(UCPF1, 5, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspdocAge_FS=int(yrdif(mdy(6,30,docbirthyr_FS), entryDate, \"age\"))&#59<br/>&nbsp&nbsp&nbsp&nbspdocGradYr_FS= input(scan(UCPF1, 6, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocServiceYr_FS= year(entryDate) - docGradYr_FS&#59<br/>&nbsp&nbsp&nbsp&nbspdocEdCountry_FS = input(scan(UCPF1, 8, \":\"), 8.)&#59 /*0 for foreign*/<br/>&nbsp&nbsp&nbsp&nbspdocPayType_FS = scan(UCPF1, 9, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspif strip(docPayType_FS )='NFFS' then docPayTypeN_FS =1&#59<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif strip(docPayType_FS )='FFS' then docPayTypeN_FS =0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse docPayTypeN_FS =2&#59/*unknown*/<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdocN_Visits_FS = input(scan(UCPF1, 10, \":\"), 8.)&#59 /*N_Visits*/<br/>&nbsp&nbsp&nbsp&nbspdocNPatients_FS = input(scan(UCPF1, 11, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocNRx_FS=  input(scan(UCPF1, 12, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocNStatinRx_FS=  input(scan(UCPF1, 13, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspif docNStatinRx_FS=. then docNStatinRx_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspif docNRx_FS=. or docNRx_FS=0 or docNStatinRx_FS=0 then docStatinRxPCT_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspelse docStatinRxPCT_FS = round(docNStatinRx_FS/docNRx_FS*100, '0.01')&#59<br/>Run&#59<br/><br/>/*Univariate models betwen VXK_FS1 and a factor<br/>&nbsp&nbsp&nbsp&nbspa more complete macro for poission/netbin model can be found in VHF of the ultrasound program<br/>&nbsp&nbsp&nbsp&nbspthat one can handle mean of estimations. <br/>*/<br/><br/>/*create an empty set to hold results*/<br/>data localt.VXK_FS&#59 length Level1 $50. parameter $50.&#59  delete&#59run&#59<br/>%macro UniPoission(data=, n_events=, n_total=, theVar=, classref=, target=, debug=)&#59<br/>&nbsp&nbsp&nbsp&nbsp%local data theVar n_events n_total classref DispersionWaldCLSign model&#59<br/>&nbsp&nbsp&nbsp&nbsp/*Start from negbin*/<br/>&nbsp&nbsp&nbsp&nbsp%let model=negbin&#59<br/><br/>&nbsp&nbsp&nbsp&nbspdata UniPoission_tmp0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset &data&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspoffset = log(&n_total/100)&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%if &debug ne 1 %then %do&#59 ods results off&#59 %end&#59<br/>&nbsp&nbsp&nbsp&nbspproc genmod data = UniPoission_tmp0 &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if %length(&classref) ne 0 %then %do&#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspclass &theVar (ref=&classRef) /param=reference&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmodel &n_events = &theVar /dist=negbin type3 offset= offset &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods output ParameterEstimates = UniPoission_tmp1 &#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp%if &debug ne 1 %then %do&#59 ods results on&#59%end&#59<br/>&nbsp&nbsp&nbsp&nbsp/*if dispersion 95%CI contains 0, go back to poission regression*/<br/>&nbsp&nbsp&nbsp&nbsp/*get lower waldCI of dispersion*/<br/>&nbsp&nbsp&nbsp&nbspdata UniPoission_tmp2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset UniPoission_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif parameter = 'Dispersion'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheSign=-1&#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*round the WaldCL, it is meaning less if it is close to 0*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLowerWaldCL=round(LowerWaldCL, '0.0001')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUpperWaldCL=round(UpperWaldCL, '0.0001')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif LowerWaldCL * UpperWaldCL > 0 then theSign=1&#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcall symput ('DispersionWaldCLSign', theSign)&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp%put >>> DispersionWaldCLSign = &DispersionWaldCLSign&#59<br/>&nbsp&nbsp&nbsp&nbsp/*if dispersion 95%CI contains 0, it must be that LowerWaldCL and  UpperLowerWaldCL are of the opposite sign, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi.e., their production is of a negative Sign. In that case, go back to poission regression*/<br/>&nbsp&nbsp&nbsp&nbsp%if %eval(&DispersionWaldCLSign = -1) %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let model = poisson&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if &debug ne 1 %then %do&#59 ods results off&#59 %end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc genmod data = UniPoission_tmp0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if %length(&classref) ne 0 %then %do&#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspclass &theVar (ref=&classRef) /param=reference&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmodel &n_events = &theVar /dist=poisson type3 scale = pearson  offset= offset&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods output ParameterEstimates = UniPoission_tmp1 &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if &debug ne 1 %then %do&#59 ods results on&#59%end&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*from UniPoission_tmp1, get the estimate (beta) of the var*/<br/>&nbsp&nbsp&nbsp&nbspdata UniPoission_tmp3&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplength parameter $50.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset UniPoission_tmp1 (firstobs=2 obs=2)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspOR = Exp(Estimate)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspORL= Exp(LowerWaldCL)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspORU=Exp(UpperWaldCL)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*the parameter from the ods table is truncated to the max length of 20, therefore is incomplete. Replace it by theVar*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspParameter = upcase(symget('theVar'))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplength model $10.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmodel = symget('model')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspProject=&_clientProjectName&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspProgram=&_clientTaskLabel&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcreateDate=Date()&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat createDate date9.&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspdata &target&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset &target UniPoission_tmp3&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%if &debug ne 1 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc datasets nolist&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete UniPoission_tmp:&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>%mend UniPoission&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=sex_Desc, classref=%str('M'), target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=age, classref=, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=qaippe, classref=%str('1'),  target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=resiType, classref=%str('URBAN'),  target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=COMPFS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=NDINS_Pre365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=NDINS_Post365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=NHosp_Pre365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=NHosp_Post365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=HNights_Pre365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=HDays_Pre365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=HNights_Post365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=HDays_Post365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=NVisits_GP_Pre365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=NVisits_SP_Pre365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=NVisits_GP_Post365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=NVisits_SP_Post365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=NVisits_ER_Pre365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=NVisits_ER_Post365, target=localt.VXK_FS)&#59<br/><br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=ThirdPartyPay_Pre365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=ThirdPartyPayPCT_Pre365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=ThirdPartyPay_Post365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=ThirdPartyPayPCT_Post365, target=localt.VXK_FS)&#59<br/><br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=BENZO_Pre365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=PSYCHO_Pre365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=ANTIDEP_Pre365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=ANTICHO_Pre365, target=localt.VXK_FS)&#59<br/><br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=BENZO_Post365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=PSYCHO_Post365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=ANTIDEP_Post365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=ANTICHO_Post365, target=localt.VXK_FS)&#59<br/><br/><br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CAMH_NPD_Pre365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CAMH_SA_Pre365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CAMH_PSY_Pre365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CAMH_NPD_Post365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CAMH_SA_Post365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CAMH_PSY_Post365, target=localt.VXK_FS)&#59<br/><br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=Charlson_Index, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_ANXIETY_OLD, target=localt.VXK_FS)&#59<br/><br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_DIABETES, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_HTN, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_MOOD_OLD, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_NS_PS, target=localt.VXK_FS)&#59<br/><br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_ASTHMA, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_COPD, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_HF, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_AP_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_MOODANX, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_MOODANXP, target=localt.VXK_FS)&#59<br/><br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_OA, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_OMH, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_SUBABUSE_OLD, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_AF_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_AMI, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_CD_PS, target=localt.VXK_FS)&#59<br/><br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_CV_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_HP_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_IHD, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_STROKE_1POP, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_WF_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_OSTEO_1POP, target=localt.VXK_FS)&#59<br/><br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_OSTEO_OLD, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_OB_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_CA_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_PV_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_DA_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_NONRA, target=localt.VXK_FS)&#59<br/><br/><br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_LB_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_OSTEO_2DRUG, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_AK_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_RF_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_VTE_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_CO_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_STROKE_2HOSP, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_IB_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_RA, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_CK_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_LV_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_EPAD, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_UB_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_AD, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_SUICIDE_OLD, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_SCHIZO, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_SCHIZO_EVER, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_PD, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_MS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_EPJR, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_ANXIETY_OLD, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_DIABETES, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_HTN, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_MOOD_OLD, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_NS_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_MOODANX, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_MOODANXP, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_OMH, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_ASTHMA, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_COPD, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_HF, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_AP_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_IHD, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_OA, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_SUBABUSE_OLD, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_AF_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_AMI, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_CD_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_CV_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_HP_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_STROKE_1POP, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_WF_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_OSTEO_1POP, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_OSTEO_OLD, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_NONRA, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_OB_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_CA_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_CK_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_CO_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_DA_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_PV_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_OSTEO_2DRUG, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_LB_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_AK_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_RF_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_VTE_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_STROKE_2HOSP, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_IB_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_RA, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_LV_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_EPAD, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_UB_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_AD, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_SUICIDE_OLD, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_SCHIZO, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_SCHIZO_EVER, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_PD, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_MS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_EPJR, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=Pre365_Prscr_statinAHTNOH, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=Pre365_MedClass_statinAHTNOH, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=Followup_Prscr_statinAHTNOH, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=Followup_MedClass_statinAHTNOH, target=localt.VXK_FS)&#59<br/>/*docrelated*/<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=docSexN_FS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=docAge_FS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=docServiceYr_FS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=docEdCountry_FS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=docPayTypeN_FS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=docN_Visits_FS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=docNPatients_FS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=docStatinRxPCT_FS, target=localt.VXK_FS)&#59<br/><br/>proc export data=localt.VXK_FS<br/>&nbsp&nbsp&nbsp&nbspdbms=xlsx<br/>&nbsp&nbsp&nbsp&nbspoutfile=\"&localReportPath.\\reports.xlsx\"<br/>&nbsp&nbsp&nbsp&nbspreplace&#59<br/>&nbsp&nbsp&nbsp&nbspsheet= \"T8Za UnivPoisson\"&#59&nbsp&nbsp&nbsp&nbsp<br/>&#59<br/>run&#59<br/><br/>%beep&#59<br/><br/>s///<br/>t///","custparents":[{"idx":"CodeTask-QdgwMbLyrBc2zchU"}]},{"idx":"b8821210-bf15-446c-970c-1fea2ce0aee3","name":"VXL_FS UCPIndexF predictors -Logistic &amp; Report","NodeDescription":"///t<br/>///s<br/>/*localt.VXL_FS. UPC Index predictors*/<br/><br/>data _null_&#59run&#59<br/><br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXJ_C.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXL_FS1.sas7bdat)<br/>)&#59<br/><br/>/*Univariate models betwen VXJ_C and a factor<br/>&nbsp&nbsp&nbsp&nbspa more complete macro for poission/netbin model can be found in VHF of the ultrasound program<br/>&nbsp&nbsp&nbsp&nbspthat one can handle mean of estimations. <br/>*/<br/>/*Add doc related covariates*/<br/><br/>data VXL_FS1&#59<br/>&nbsp&nbsp&nbsp&nbspset VXL_FS1&#59<br/>/*add doc related factors*/<br/>&nbsp&nbsp&nbsp&nbsp/*release the practice (doc) related covariates. Note, it is named _FS,but is indeed measured from runin through follow up (2 years)*/<br/>&nbsp&nbsp&nbsp&nbspdocSex_FS = scan(UCPF1, 4, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspif docSex_FS='M' then docSexN_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspelse docSexN_FS=1&#59<br/>&nbsp&nbsp&nbsp&nbspdocBirthYr_FS= scan(UCPF1, 5, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspdocAge_FS=int(yrdif(mdy(6,30,docbirthyr_FS), entryDate, \"age\"))&#59<br/>&nbsp&nbsp&nbsp&nbspdocGradYr_FS= input(scan(UCPF1, 6, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocServiceYr_FS= year(entryDate) - docGradYr_FS&#59<br/>&nbsp&nbsp&nbsp&nbspdocEdCountry_FS = input(scan(UCPF1, 8, \":\"), 8.)&#59 /*0 for foreign*/<br/>&nbsp&nbsp&nbsp&nbspdocPayType_FS = scan(UCPF1, 9, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspif strip(docPayType_FS )='NFFS' then docPayTypeN_FS =1&#59<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif strip(docPayType_FS )='FFS' then docPayTypeN_FS =0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse docPayTypeN_FS =2&#59/*unknown*/<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdocN_Visits_FS = input(scan(UCPF1, 10, \":\"), 8.)&#59 /*N_Visits*/<br/>&nbsp&nbsp&nbsp&nbspdocNPatients_FS = input(scan(UCPF1, 11, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocNRx_FS=  input(scan(UCPF1, 12, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocNStatinRx_FS=  input(scan(UCPF1, 13, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspif docNStatinRx_FS=. then docNStatinRx_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspif docNRx_FS=. or docNRx_FS=0 or docNStatinRx_FS=0 then docStatinRxPCT_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspelse docStatinRxPCT_FS = round(docNStatinRx_FS/docNRx_FS*100, '0.01')&#59<br/>Run&#59<br/><br/><br/>/*create an empty set to hold results*/<br/>data localt.VXL_FS&#59 length Level1 $50. parameter $50. outcomeVar $50. CutOffVar $50.&#59  delete&#59run&#59<br/>%macro UniLogistic(data=, Outcome=, CutOffVar=, theVar=, classref=, target=, debug=)&#59<br/>&nbsp&nbsp&nbsp&nbsp%local data theVar Outcome CutOffVar classref DispersionWaldCLSign model&#59<br/>&nbsp&nbsp&nbsp&nbsp/*Start from negbin*/<br/>&nbsp&nbsp&nbsp&nbsp%let model=negbin&#59<br/><br/>&nbsp&nbsp&nbsp&nbspdata UniLogistic_tmp0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset &data&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspOutcome=0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif &Outcome >= &CutOffVar  then Outcome =1&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%if &debug ne 1 %then %do&#59 ods results off&#59 %end&#59<br/>&nbsp&nbsp&nbsp&nbspproc genmod data = UniLogistic_tmp0 desc&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if %length(&classref) ne 0 %then %do&#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspclass &theVar (ref=&classRef) /param=reference&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmodel Outcome = &theVar /dist=bin link=logit type3  &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods output ParameterEstimates = UniLogistic_tmp1 &#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp%if &debug ne 1 %then %do&#59 ods results on&#59%end&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*from UniLogistic_tmp1, get the estimate (beta) of the var*/<br/>&nbsp&nbsp&nbsp&nbspdata UniLogistic_tmp3&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset UniLogistic_tmp1 (firstobs=2 obs=2)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspOR = Exp(Estimate)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspORL= Exp(LowerWaldCL)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspORU=Exp(UpperWaldCL)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*the parameter from the ods table is truncated to the max length of 20, therefore is incomplete. Replace it by theVar*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspParameter = upcase(symget('theVar'))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplength model $10.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmodel = symget('model')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspProject=&_clientProjectName&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspProgram=&_clientTaskLabel&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcreateDate=Date()&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat createDate date9.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspoutcomeVar = upcase(strip(symget('Outcome')))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcutoffVar = upcase(strip(symget('cutoffVar')))&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspdata &target&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset &target UniLogistic_tmp3&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%if &debug ne 1 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc datasets nolist&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete UniLogistic_tmp:&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>%mend UniLogistic&#59<br/><br/>%macro UniLogistic_batchVars(OutcomeVar =,  cutoffVar=)&#59<br/>&nbsp&nbsp&nbsp&nbsp%local outcomeVar cutoffvar&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=sex_Desc, classref=%str('M'), target=localt.VXL_FS, debug=1)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=age, classref=, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=qaippe, classref=%str('1'),  target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=resiType, classref=%str('URBAN'),  target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=COMPFS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=NDINS_Pre365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=NDINS_Post365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=NHosp_Pre365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=NHosp_Post365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=HNights_Pre365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=HDays_Pre365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=HNights_Post365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=HDays_Post365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=NVisits_GP_Pre365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=NVisits_SP_Pre365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=NVisits_GP_Post365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=NVisits_SP_Post365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=NVisits_ER_Pre365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=NVisits_ER_Post365, target=localt.VXL_FS)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=ThirdPartyPay_Pre365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=ThirdPartyPayPCT_Pre365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=ThirdPartyPay_Post365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=ThirdPartyPayPCT_Post365, target=localt.VXL_FS)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=BENZO_Pre365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=PSYCHO_Pre365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=ANTIDEP_Pre365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=ANTICHO_Pre365, target=localt.VXL_FS)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=BENZO_Post365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=PSYCHO_Post365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=ANTIDEP_Post365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=ANTICHO_Post365, target=localt.VXL_FS)&#59<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CAMH_NPD_Pre365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CAMH_SA_Pre365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CAMH_PSY_Pre365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CAMH_NPD_Post365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CAMH_SA_Post365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CAMH_PSY_Post365, target=localt.VXL_FS)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=Charlson_Index, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_ANXIETY_OLD, target=localt.VXL_FS)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_DIABETES, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_HTN, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_MOOD_OLD, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_NS_PS, target=localt.VXL_FS)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_ASTHMA, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_COPD, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_HF, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_AP_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_MOODANX, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_MOODANXP, target=localt.VXL_FS)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_OA, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_OMH, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_SUBABUSE_OLD, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_AF_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_AMI, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_CD_PS, target=localt.VXL_FS)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_CV_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_HP_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_IHD, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_STROKE_1POP, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_WF_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_OSTEO_1POP, target=localt.VXL_FS)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_OSTEO_OLD, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_OB_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_CA_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_PV_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_DA_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_NONRA, target=localt.VXL_FS)&#59<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_LB_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_OSTEO_2DRUG, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_AK_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_RF_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_VTE_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_CO_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_STROKE_2HOSP, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_IB_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_RA, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_CK_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_LV_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_EPAD, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_UB_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_AD, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_SUICIDE_OLD, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_SCHIZO, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_SCHIZO_EVER, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_PD, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_MS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_EPJR, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_ANXIETY_OLD, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_DIABETES, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_HTN, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_MOOD_OLD, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_NS_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_MOODANX, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_MOODANXP, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_OMH, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_ASTHMA, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_COPD, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_HF, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_AP_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_IHD, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_OA, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_SUBABUSE_OLD, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_AF_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_AMI, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_CD_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_CV_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_HP_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_STROKE_1POP, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_WF_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_OSTEO_1POP, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_OSTEO_OLD, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_NONRA, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_OB_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_CA_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_CK_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_CO_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_DA_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_PV_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_OSTEO_2DRUG, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_LB_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_AK_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_RF_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_VTE_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_STROKE_2HOSP, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_IB_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_RA, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_LV_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_EPAD, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_UB_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_AD, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_SUICIDE_OLD, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_SCHIZO, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_SCHIZO_EVER, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_PD, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_MS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_EPJR, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=Pre365_Prscr_statinAHTNOH, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=Pre365_MedClass_statinAHTNOH, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=Followup_Prscr_statinAHTNOH, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=Followup_MedClass_statinAHTNOH, target=localt.VXL_FS)&#59<br/>/**Docrelated*/<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=docSexN_FS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=docAge_FS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=docServiceYr_FS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=docEdCountry_FS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=docPayTypeN_FS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=docN_Visits_FS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=docNPatients_FS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=docStatinRxPCT_FS, target=localt.VXL_FS)&#59<br/><br/>%mend UniLogistic_batchVars&#59<br/>%UniLogistic_batchVars(OutcomeVar =UPCIndexF,  cutoffVar=UPCIndexFP75)&#59<br/>%UniLogistic_batchVars(OutcomeVar =UPCIndexF,  cutoffVar=UPCIndexFP50)&#59<br/>%UniLogistic_batchVars(OutcomeVar =UPCIndexF,  cutoffVar=UPCIndexFP25)&#59<br/><br/><br/>proc export data=localt.VXL_FS<br/>&nbsp&nbsp&nbsp&nbspdbms=xlsx<br/>&nbsp&nbsp&nbsp&nbspoutfile=\"&localReportPath.\\reports.xlsx\"<br/>&nbsp&nbsp&nbsp&nbspreplace&#59<br/>&nbsp&nbsp&nbsp&nbspsheet= \"T8Za UnivLogistic\"&#59&nbsp&nbsp&nbsp&nbsp<br/>&#59<br/>run&#59<br/><br/>%beep&#59<br/><br/><br/><br/>s///<br/>t///","custparents":[{"idx":"CodeTask-QdgwMbLyrBc2zchU"}]}],"custparents":[{"idx":"CodeTask-U7plDj8VHBhFWJGm"},{"idx":"5e5e5c09-6792-4271-a2fb-9ccd33ab8119"},{"idx":"b44742c2-f75c-481d-8c5c-c83d22416401"}]},{"idx":"11a764e8-0479-4cdf-91cd-dcdbd1708f64","name":"Q VXI same Macro VarExist","NodeDescription":"///t<br/>///s<br/>/*<br/>The charlson score need a HQC macro 'VarExist.sas', which is of the same name as another macro in MyMacros.sas<br/>These two macros have conflict.<br/>After running charlson score, reload MyMacros.sas to overwrite that HQC macro<br/>*/<br/>s///<br/>t///","custparents":[{"idx":"CodeTask-cEu9SJeuduGAkyLp"},{"idx":"5e5e5c09-6792-4271-a2fb-9ccd33ab8119"},{"idx":"5e5e5c09-6792-4271-a2fb-9ccd33ab8119"}]}],"custparents":[{"idx":"CodeTask-IWAU2bsojMFEwy3C"},{"idx":"dc626e99-ad26-47da-a62a-85eed65a3adb"}]},{"idx":"1023b02b-7ba1-4053-8817-f4050fe7bc86","name":"VXH_RT6a(FS) Table 6A","NodeDescription":"///t<br/>///s<br/>/*VXH_RT6A_ Report of Table 6A (UCPF, USPF, CMEPF)*/<br/><br/>data _null_&#59run&#59<br/>/*%freq(data=VXH_FS, table=UPCIndexF_Cat * NMax_VisitsPerDocF_Cat )&#59*/<br/>%freq(data=VXH_FS noprint, table= NMax_VisitsPerDocF_Cat *UPCIndexF_Cat, option=%str(out=localt.VXH_RT6A))&#59<br/><br/>proc export data=localt.VXH_RT6A<br/>&nbsp&nbsp&nbsp&nbspdbms=xlsx<br/>&nbsp&nbsp&nbsp&nbspoutfile=\"&localReportPath.\\reports.xlsx\"<br/>&nbsp&nbsp&nbsp&nbspreplace&#59<br/>&nbsp&nbsp&nbsp&nbspsheet= \"Table6a_FS\"&#59&nbsp&nbsp&nbsp&nbsp<br/>&#59<br/>run&#59<br/>s///<br/>t///","custparents":[{"idx":"CodeTask-IWAU2bsojMFEwy3C"},{"idx":"dc626e99-ad26-47da-a62a-85eed65a3adb"}]},{"idx":"9fe80fa4-0c0b-4380-8e7e-b2cc2e4096d8","name":"VXH_RT7a(FS) Table7A","NodeDescription":"///t<br/>///s<br/>/*VXH_RT7A_ Report of Table 7A (UCPF, USPF, CMEPF)*/<br/><br/>data _null_&#59run&#59<br/>%Sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXH_FS,<br/>&nbsp&nbsp&nbsp&nbsptarget=localt.VXH_RT7A,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCIndexF_Cat, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsum(Same_UCPFUSPF) as Same_UCPFUSPF,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsum(Same_UCPFCMEPF) as Same_UCPFCMEPF,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsum(COMPFS) as COMPFS,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcount(key_hsn) as GroupSubtotal<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp),<br/>&nbsp&nbsp&nbsp&nbspgroupby = %str(UPCIndexF_Cat)<br/>)&#59<br/><br/>proc export data=localt.VXH_RT7A<br/>&nbsp&nbsp&nbsp&nbspdbms=xlsx<br/>&nbsp&nbsp&nbsp&nbspoutfile=\"&localReportPath.\\reports.xlsx\"<br/>&nbsp&nbsp&nbsp&nbspreplace&#59<br/>&nbsp&nbsp&nbsp&nbspsheet= \"Table7a_FS\"&#59&nbsp&nbsp&nbsp&nbsp<br/>&#59<br/>run&#59<br/>s///<br/>t///","custparents":[{"idx":"CodeTask-IWAU2bsojMFEwy3C"},{"idx":"dc626e99-ad26-47da-a62a-85eed65a3adb"}]}],"custparents":[{"idx":"CodeTask-boFlAYB8FDL9uTfe"}]},{"idx":"d9e5f78c-66c3-4c38-ab01-23958a02e57c","name":"VXG_RT3A (FS) Table3a","NodeDescription":"///t<br/>///s<br/>/*VXG_RT3a_ Report of Table 3a (UCPF, USPF, CMEPF)*/<br/><br/>data _null_&#59run&#59<br/><br/><br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXG,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXG_RT3a_1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp'Total' as Role,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcount(key_hsn) as NPatients<br/>&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXG,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXG_RT3a_2,<br/>&nbsp&nbsp&nbsp&nbspvars=%str('UCPF' as Role, count(key_hsn) as NPatients),<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(UCPF1 ne '')<br/>)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXG,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXG_RT3a_3,<br/>&nbsp&nbsp&nbsp&nbspvars=%str('USPF' as Role, count(key_hsn) as NPatients),<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(USPF1 ne '')<br/>)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXG,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXG_RT3a_4,<br/>&nbsp&nbsp&nbsp&nbspvars=%str('CMEPF' as Role, count(key_hsn) as NPatients),<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(CMEPF1 ne '')<br/>)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXG,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXG_RT3a_5,<br/>&nbsp&nbsp&nbsp&nbspvars=%str('COMPFS' as Role, count(key_hsn) as NPatients),<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(COMPFS =1)<br/>)&#59<br/><br/>data localt.VXG_RT3A&#59<br/>&nbsp&nbsp&nbsp&nbspset VXG_RT3a_1-VXG_RT3a_5&#59<br/>run&#59<br/><br/><br/>proc export data=localt.VXG_RT3A<br/>&nbsp&nbsp&nbsp&nbspdbms=xlsx<br/>&nbsp&nbsp&nbsp&nbspoutfile=\"&localReportPath.\\reports.xlsx\"<br/>&nbsp&nbsp&nbsp&nbspreplace&#59<br/>&nbsp&nbsp&nbsp&nbspsheet= \"T3a. NPatient_Role_CompFS\"&#59&nbsp&nbsp&nbsp&nbsp<br/>&#59<br/>run&#59<br/>s///<br/>t///","custparents":[{"idx":"CodeTask-boFlAYB8FDL9uTfe"},{"idx":"ccb59e79-57c6-4519-bf01-43e592686719"}]},{"idx":"a740f2f8-6d2d-43a6-8e01-d9a747ca3d69","name":"VXG_RT4a (FS) Table4A","NodeDescription":"///t<br/>///s<br/>/*VXG_RT4A_ Report of Table 4A (UCPF, USPF, CMEPF)*/<br/><br/>data _null_&#59run&#59<br/><br/><br/>/*%freq(data=VXG, table=COMPFS)&#59*/<br/>/*%freq(data=VXG, table=COMPFW)&#59*/<br/>/*%freq(data=VXG, table=COMPWW)&#59*/<br/><br/>%freq(data=VXG, table=COMPFS_Pattern, order=freq, option=%str(out=localt.VXG_RT4A))&#59<br/><br/>proc export data=localt.VXG_RT4A<br/>&nbsp&nbsp&nbsp&nbspdbms=xlsx<br/>&nbsp&nbsp&nbsp&nbspoutfile=\"&localReportPath.\\reports.xlsx\"<br/>&nbsp&nbsp&nbsp&nbspreplace&#59<br/>&nbsp&nbsp&nbsp&nbspsheet= \"T4a. NPatient_COMPFS_Pattern\"&#59&nbsp&nbsp&nbsp&nbsp<br/>&#59<br/>run&#59<br/>s///<br/>t///","custparents":[{"idx":"CodeTask-boFlAYB8FDL9uTfe"},{"idx":"ccb59e79-57c6-4519-bf01-43e592686719"},{"idx":"ccb59e79-57c6-4519-bf01-43e592686719"}]},{"idx":"f2b3078c-4b93-4cfd-84dc-a0714b81e31e","name":"To do Make table 5","NodeDescription":"<p>///t</p><p>///s</p><p>[to do]</p><p>to make table 5</p><p>s///</p><p>t///</p>","custparents":[{"idx":"CodeTask-boFlAYB8FDL9uTfe"},{"idx":"ccb59e79-57c6-4519-bf01-43e592686719"}]}],"custparents":[{"idx":"CodeTask-4fxB3KstnXLlVbvv"},{"idx":"e065be0e-5a79-458f-91f6-c8375d3b97b4"}]}],"custparents":[{"idx":"CodeTask-j6dtk9XKc4xrGUMh"},{"idx":"CodeTask-Wbu1Aj8u8JEC2ijL"},{"idx":"98f3a85b-f112-41d6-b28a-7a0f21078375"}]},{"idx":"8fbb938d-d27e-44cc-a6c4-f8747e279fa6","name":"VXF_WW UWPW in Followup","NodeDescription":"///t<br/>///s<br/>/*VXF_WW: UWPW, usual prescriber of all (whole) medications from runin through followup*/<br/><br/>data _null_&#59run&#59<br/><br/>/*VXF_WW0. prepare source data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXF_FW.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXF_FW.sas7bdat)<br/>)&#59<br/>/*get all medication claims*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localdataPath.\\VXE_WW.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXE_WW.sas7bdat)<br/>)&#59<br/><br/><br/>/*VXF_WW1. all medication claims from runin through followup*/<br/>data VXF_WW1&#59<br/>&nbsp&nbsp&nbsp&nbspset VXE_WW&#59<br/>&nbsp&nbsp&nbsp&nbspwhere rx_ddddd between EntryDate - &RunInDays and EntryDate + &Followdays -1&#59<br/>run&#59&nbsp&nbsp&nbsp&nbsp<br/><br/><br/>/*calculate the Rx Freq from statin drug claims in follow up*/<br/>/*the macro getUPCIndex works for MSB claim data, and other data<br/>&nbsp&nbsp&nbsp&nbspfor MSB claim data, the LOS, MODE, SPEC, and NUM_SRV must be provided<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthe excluding LOC, excluding MODE, and including SPEC must be provided<br/>&nbsp&nbsp&nbsp&nbspfor other data (like in this case, the episodes have been prepared, or like prescription data)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspspecify the claimType as others, and do not need to specify LOS,MODE exclusion, and SPEC<br/><br/>&nbsp&nbsp&nbsp&nbspunlike UPC in MSB, here it is fine even if the combination of same patient-doc-rx_ddddd repeat<br/><br/>&nbsp&nbsp&nbsp&nbspBy default, the target file contains the doc with the max rx Freq<br/>&nbsp&nbsp&nbsp&nbspbut this is not what is wanted here. <br/>&nbsp&nbsp&nbsp&nbspFor this analysis, it is expected to keep all docs, from which those as PCP, and with Max rx Freq will be kept<br/>&nbsp&nbsp&nbsp&nbspso the interested data set is not the target, but the tmp5 file created by the macro&nbsp&nbsp&nbsp&nbsp<br/><br/>*/<br/>/*VXF_WW2. Use the macro UPC to identify the most freq prescriber of Statin during follow up, <br/>&nbsp&nbsp&nbsp&nbspunlike UPC in MSB, here it is fine even if the combination of same patient-doc-rx_ddddd repeat<br/>&nbsp&nbsp&nbsp&nbspNote: those with a unknown doc number are excluded<br/>*/<br/><br/>%getUPCIndex(<br/>&nbsp&nbsp&nbsp&nbspdata=VXF_WW1, <br/>&nbsp&nbsp&nbsp&nbsptarget=notintersted,<br/>&nbsp&nbsp&nbsp&nbspInPatientLOS = , <br/>&nbsp&nbsp&nbsp&nbspoutProvMode = ,<br/>&nbsp&nbsp&nbsp&nbspInterestedSPEC =,<br/>&nbsp&nbsp&nbsp&nbspdocIDCol = key_prscr_num,<br/>&nbsp&nbsp&nbsp&nbspdoscol=rx_ddddd,<br/>&nbsp&nbsp&nbsp&nbspclaimType=dp,<br/>&nbsp&nbsp&nbsp&nbspdebug=1<br/>)&#59<br/>data VXF_WW2&#59<br/>&nbsp&nbsp&nbsp&nbspset getUPC_tmp5&#59<br/>&nbsp&nbsp&nbsp&nbsprename <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkey_prscr_num = key_doc_num<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN_visits=NRx_MaxPerDocWW<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspT_Visits=TRxWW<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCIndex = RxIndexWW<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbspwhere key_prscr_num ne 'unknown'&#59 <br/>run&#59<br/>%sort(data=VXF_WW2, sorter=key_hsn descending RxIndexWW)&#59<br/><br/>/*VXF_WW3. For each patient, keep  the highest Rx index*/<br/>data VXF_WW3&#59<br/>&nbsp&nbsp&nbsp&nbspset VXF_WW2&#59<br/>&nbsp&nbsp&nbsp&nbspby key_hsn descending RxIndexWW&#59<br/>&nbsp&nbsp&nbsp&nbspif first.key_hsn&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn RxIndexWW&#59<br/>run&#59<br/><br/>/*VXF_WW4. Link the highest Rx index back to VXF_WW1 to keep patient-doc links with the highest UPC index<br/>(there could be multiple physicians with tie index values for a single patient)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXF_WW2,<br/>&nbsp&nbsp&nbsp&nbspt2=VXF_WW3,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXF_WW4,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars= key_hsn RxIndexWW,<br/>&nbsp&nbsp&nbsp&nbsporderby=%str(key_hsn, key_doc_num) <br/>)&#59<br/><br/>/*VXF_WW5. determine the UP. In case of tie, get UP1, UP2, ....<br/>&nbsp&nbsp&nbsp&nbsp in case of tie, there will be multiple UPs<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocNumer, NRx_MaxPerDoc, RxIndex, these are all specific by each USP <br/>&nbsp&nbsp&nbsp&nbspand we'll need these values for each USP<br/>&nbsp&nbsp&nbsp&nbspFollowing is a smart idea:<br/>&nbsp&nbsp&nbsp&nbsp1) putting values of these doc-specifc variables into a string (theStr), with the dlmt \"&#59\"<br/>&nbsp&nbsp&nbsp&nbsp2) make a tag of USP1, 2, etc<br/>*/<br/>data VXF_WW5&#59<br/>&nbsp&nbsp&nbsp&nbspset VXF_WW4&#59<br/>&nbsp&nbsp&nbsp&nbspformat RxIndexWW 6.2&#59<br/>&nbsp&nbsp&nbsp&nbspby key_hsn &#59<br/>&nbsp&nbsp&nbsp&nbspif first.key_hsn then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi =1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUWPW='UWPW' || strip(i)&#59&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi+1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUWPW='UWPW' || strip(i)&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdrop i&#59<br/>&nbsp&nbsp&nbsp&nbsp/*combine the var values together*/<br/>&nbsp&nbsp&nbsp&nbsplength theStr $50.&#59 <br/>&nbsp&nbsp&nbsp&nbsptheStr = catx(':', key_doc_num, NRx_MaxPerDocWW, put(RxIndexWW, 6.2))&#59<br/>run&#59<br/><br/>/*VXF_WW6. Now we can transpose the string in theStr into columsn of USP1, 2, ...<br/>&nbsp&nbsp&nbsp&nbspThe values will stay there. Later we can use scan(var, # of word, dlmt) to get the values<br/>&nbsp&nbsp&nbsp&nbsp(i.e., scan(USP1, 1, \":\") is the key_doc_num of USP1, scan(USP1, 2, \"&#59\") is the n_visits of USP1, etc<br/>*/<br/><br/>%transpose(data = VXF_WW5, target=VXF_WW6, <br/>&nbsp&nbsp&nbsp&nbsprowhead =key_hsn NRx_MaxPerDocWW    TRxWW     RxIndexWW ,<br/>&nbsp&nbsp&nbsp&nbspcolhead=UWPW,<br/>&nbsp&nbsp&nbsp&nbspcontents= theStr<br/>)&#59<br/>/*example to get upcindex of UWPW1*/<br/>/*<br/>data test&#59<br/>&nbsp&nbsp&nbsp&nbspset VXF_WW5 (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbspRxIndex_UWPW1= scan(UWPW1, 3, ':')&#59<br/>run&#59<br/>*/<br/><br/>/*VXF_WW7. The docs in VXF_WW5 are USPs, link them back to VXF_FS (the cohort)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXF_FW,<br/>&nbsp&nbsp&nbsp&nbspt2=VXF_WW6,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXF_WW,<br/>&nbsp&nbsp&nbsp&nbspvars=*,<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localTargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VXF_WW.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VXF_WW.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/>/*data test&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspset VXF_WW&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspUSP=1&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspif USP = '' then USP=0&#59*/<br/>/*run&#59*/<br/>/*%freq(data=test, table= USP)&#59*/<br/><br/>%exportvars(data=VXF_WW)&#59<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>s///<br/>t///","children":[],"custparents":[{"idx":"CodeTask-QcJtnJf6FAp2OE7D"},{"idx":"CodeTask-Wbu1Aj8u8JEC2ijL"},{"idx":"98f3a85b-f112-41d6-b28a-7a0f21078375"},{"idx":"4e26d943-bcea-40f8-9805-dd1148a08779"}]}],"custparents":[{"idx":"CodeTask-qfcAXJSXk3TTi6Wu"},{"idx":"CodeTask-WOlheZQueJ48Okz7"},{"idx":"b3b83945-1cf9-4a9f-87c2-fdc4b3037eea"}]}],"custparents":[{"idx":"CodeTask-rXaW7KfQgzQfcx1V"}]}],"custparents":[{"idx":"MY043c6d28-3e77-4035-8f61-8ea6497d8f23"},{"idx":"MY043c6d28-3e77-4035-8f61-8ea6497d8f23"},{"idx":"MY043c6d28-3e77-4035-8f61-8ea6497d8f23"}]}]},{"idx":"MY84805d1e-a9a8-4034-ad9d-bb995777ec44","name":"Existing analyses","custparents":[{"idx":"ProjectCollection-cmSbt48MqRzD7t79"},{"idx":"ProjectCollection-cmSbt48MqRzD7t79"},{"idx":"ProjectCollection-cmSbt48MqRzD7t79"},{"idx":"ProjectCollection-cmSbt48MqRzD7t79"}],"children":[{"idx":"CodeTask-pzOsKgUBMFRexTrx","name":"ZZA NFFS Anlayses","type":"TASK","NodeDescription":"///t<br/>///s<br/>/*ZZA<br/>*/<br/><br/>/*All statin new users*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\vxa.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(vxa.sas7bdat)<br/>)&#59<br/><br/>/*zza1 patient-entrydate*/<br/>%distinct(data=vxa, target=zza1, vars=%str(key_hsn, entryDate))&#59<br/><br/>/*ZZA2. For statin new users (zza1), find statin prescribers within the followup period (365 days since the entryDate)*/<br/>/*ZZA2a. Get all statin claims within follow up*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\vxf.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(vxf.sas7bdat)<br/>)&#59<br/>/*%print(data=vxf)&#59*/<br/>/*ZZA2b. get a list of entryDate specific doc ID, excluding those of unknown ids or slush numbers*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=vxf,<br/>&nbsp&nbsp&nbsp&nbspt2=zza1, <br/>&nbsp&nbsp&nbsp&nbsptarget=zza2,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_prscr_num as key_doc_num, t2.entryDate), <br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(rx_ddddd between t2.Entrydate and t2.EntryDate +364 and docSlushCode = 'N')<br/>)&#59<br/><br/>/*ZZA3. For statin new users (zza1), find physician service providers within the followup period (365 days since the entryDate)*/<br/>/*ZZA3a. Get all service claims of the new statin users within follow up*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_msb.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_msb.sas7bdat)<br/>)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_msb,<br/>&nbsp&nbsp&nbsp&nbspt2=zza1, <br/>&nbsp&nbsp&nbsp&nbsptarget=zza3,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_doc_num, t2.entryDate), <br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(dos between t2.Entrydate and t2.EntryDate +364 and docSlushCode = 'N')<br/>)&#59<br/><br/>/*ZZA4. combine ZZA2 and ZZA3 (docs as prescribers/care providers during follow up , specified by entry date)*/<br/>data ZZA4a&#59<br/>&nbsp&nbsp&nbsp&nbspset zza2 &#59<br/>&nbsp&nbsp&nbsp&nbspRole = 'prescriber'&#59 <br/>run&#59<br/>data ZZA4b&#59<br/>&nbsp&nbsp&nbsp&nbspset ZZa3&#59<br/>&nbsp&nbsp&nbsp&nbspRole='careprovider'&#59<br/>run&#59<br/>data ZZA4&#59<br/>&nbsp&nbsp&nbsp&nbspset ZZA4a ZZA4b&#59<br/>&nbsp&nbsp&nbsp&nbspcnt=1&#59<br/>run&#59<br/>%DISTINCT(data=ZZA4, target=ZZA5, vars=%str(key_doc_num, entrydate, Role, cnt))&#59<br/>%transpose(data=ZZA5, target=ZZA6, rowhead=key_doc_num entrydate, colhead=role, contents=cnt)&#59<br/>data localt.ZZA&#59<br/>&nbsp&nbsp&nbsp&nbspset ZZA6&#59<br/>&nbsp&nbsp&nbsp&nbspformat Role $20.&#59<br/>&nbsp&nbsp&nbsp&nbspif prescriber=1 and careprovid=1 then Role='both'&#59<br/>&nbsp&nbsp&nbsp&nbspif prescriber=1 and careprovid=. then Role='prescriber'&#59<br/>&nbsp&nbsp&nbsp&nbspif prescriber=. and careprovid=1 then Role='careprovider'&#59<br/>&nbsp&nbsp&nbsp&nbspif prescriber=. and careprovid=. then Role='none'&#59<br/>&nbsp&nbsp&nbsp&nbspdrop prescriber careprovid&#59<br/>run&#59<br/>%freq(data=localt.zza, table=Role)&#59<br/><br/><br/><br/>s///<br/>t///","children":[{"idx":"CodeTask-xSZTFg8HW5n1nVcn","name":"H_FFS Doc","type":"TASK","NodeDescription":"///t<br/>///s<br/>/*H For the most freq prescriber, how many are fee-for-service(ffs), how many non-ffs*/<br/>/*Those does not have service claims within the follow up*/<br/><br/>/*%VbsUnzip(*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localdataPath.\\master_msb.zip),*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_msb.sas7bdat)*/<br/>/*)&#59*/<br/><br/>/*Get the prescriber by index date*/<br/>%print(data=localt.g)&#59<br/>%distinct(data=localt.G, target=h1, vars=%str(StatinDoc_FW365, dqdate, monotonic() as ID), filters=%str(statinDoc_Fw365 ne \"\"))&#59<br/><br/>/*for each doc-index, get the MSB claims of the same doc between 1 year before and after the index*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=h1,<br/>&nbsp&nbsp&nbsp&nbspt2=master_msb,<br/>&nbsp&nbsp&nbsp&nbsptarget=h2,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(*),<br/>&nbsp&nbsp&nbsp&nbspjtype=left, <br/>&nbsp&nbsp&nbsp&nbspjterm=%str(t1.StatinDoc_Fw365 = t2.key_doc_num),<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(t2.dos between t1.dqdate -365 and t1.dqdate +364)<br/>)&#59<br/><br/>/*%vbsZip(*/<br/>/*&nbsp&nbsp&nbsp&nbsptgtDir=%str(&localTargetPath), */<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=h2.zip, */<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=h2.sas7bdat, */<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcDir=*/<br/>/*)&#59*/<br/><br/>/*%VbsUnzip(*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\h2.zip),*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(h2.sas7bdat)*/<br/>/*)&#59*/<br/><br/>/*count the number of claims for each specific doc-index case (# of claims within 2 years around index)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=H2,<br/>&nbsp&nbsp&nbsp&nbsptarget=h3,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.ID, t1.StatinDoc_Fw365, t1.dqDate, count(t1.StatinDoc_Fw365) as N_DocVisits),<br/>&nbsp&nbsp&nbsp&nbspgroupby=%str(t1.ID, t1.StatinDoc_Fw365, t1.dqDate),<br/>&nbsp&nbsp&nbsp&nbsporderby=%str(t1.ID, t1.StatinDoc_Fw365, t1.dqDate)<br/>)&#59<br/><br/>/*distribution of N_DocVisits by each doc-index case*/<br/>proc univariate data=h3&#59<br/>&nbsp&nbsp&nbsp&nbsphistogram N_DocVisits /normal&#59<br/>run&#59<br/><br/>data h4&#59<br/>&nbsp&nbsp&nbsp&nbspset h3&#59<br/>&nbsp&nbsp&nbsp&nbsprename StatinDoc_Fw365=key_hsn&#59<br/>run&#59<br/>%GetMeanStats(<br/>&nbsp&nbsp&nbsp&nbspdata=h4,<br/>&nbsp&nbsp&nbsp&nbspwhere=,<br/>&nbsp&nbsp&nbsp&nbspgroupVars=,<br/>&nbsp&nbsp&nbsp&nbsptheVar=N_DocVisits,<br/>&nbsp&nbsp&nbsp&nbsptheStats=min max mean std median p25 p50 p75 qrange,<br/>&nbsp&nbsp&nbsp&nbspdebug=<br/>)&#59<br/><br/>/*From H2, get the number of doc visits by mode (1 a FFS, others as NFFS)<br/>*/<br/><br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=H2,<br/>&nbsp&nbsp&nbsp&nbsptarget=h3a,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.ID, t1.StatinDoc_Fw365, t1.dqDate, t1.Mode, count(t1.StatinDoc_Fw365) as N_DocClaims),<br/>&nbsp&nbsp&nbsp&nbspgroupby=%str(t1.ID, t1.StatinDoc_Fw365, t1.dqDate, t1.Mode),<br/>&nbsp&nbsp&nbsp&nbsporderby=%str(t1.ID, t1.StatinDoc_Fw365, t1.dqDate, t1.Mode)<br/>)&#59<br/><br/>/*from above, recode the Modes, mode =1 as FFS, others as NFFS*/<br/>data H3b&#59<br/>&nbsp&nbsp&nbsp&nbspset H3a&#59<br/>&nbsp&nbsp&nbsp&nbspif Mode = \"1\" then FFS='FFS1'&#59 else FFS='FFS0'&#59<br/>run&#59<br/><br/>/*sum the doc claims by FFS*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=H3b,<br/>&nbsp&nbsp&nbsp&nbsptarget=h3c,<br/>&nbsp&nbsp&nbsp&nbspvars=%str( t1.StatinDoc_Fw365, t1.FFS, sum(t1.N_DocClaims) as N_DocClaims, count(ID) as Cases),<br/>&nbsp&nbsp&nbsp&nbspgroupby=%str( t1.StatinDoc_Fw365,t1.FFS),<br/>&nbsp&nbsp&nbsp&nbsporderby=%str( t1.StatinDoc_Fw365, t1.FFS)<br/>)&#59<br/>/*N_DocClaims / Cases to have mean docClaims */<br/>data H3d&#59<br/>&nbsp&nbsp&nbsp&nbspset h3c&#59<br/>&nbsp&nbsp&nbsp&nbspMean_DocClaims = int(N_DocClaims / Cases)&#59<br/>&nbsp&nbsp&nbsp&nbspdrop N_DocClaims Cases&#59<br/>run&#59<br/>/*transpose to put FFS 1 and 0 at the same row*/<br/>%transpose(data=h3d, target=h3e, RowHead=StatinDoc_Fw365, ColHead=ffs, Contents=Mean_DocClaims, keepAllCol=)&#59<br/>data h3f&#59<br/>&nbsp&nbsp&nbsp&nbspset h3e&#59<br/>&nbsp&nbsp&nbsp&nbspif ffs0=. then ffs0=0&#59<br/>&nbsp&nbsp&nbsp&nbspif ffs1=. then ffs1=0&#59<br/>&nbsp&nbsp&nbsp&nbspFFSPCT = int (FFS1/sum(FFS0, FFS1) *100)&#59<br/>run&#59<br/>/*have a histogram of % FFS for each doc*/<br/>proc univariate data=h3f&#59<br/>&nbsp&nbsp&nbsp&nbsphistogram FFSPCT /normal&#59<br/>&nbsp&nbsp&nbsp&nbspods output histogramBins = H3g&#59<br/>run&#59<br/>/*seems that 60% having 99% of their services as FFS. 27% having 3% or less services as FFS. Others are in between<br/>&nbsp&nbsp&nbsp&nbspSeems a good way to identify the FFS physicians<br/>*/<br/><br/><br/>/*# docs and pct of 'AAAA' (the fw365 doc)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=localt.g,<br/>&nbsp&nbsp&nbsp&nbsptarget=h15a,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(doc_fw365, count(Key_hsn) as NPt ),<br/>&nbsp&nbsp&nbsp&nbspgroupby=doc_fw365,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(doc_fw365 ne \"\" and docPatterns='AAAA')<br/>)&#59<br/><br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=localt.g,<br/>&nbsp&nbsp&nbsp&nbsptarget=h15b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(doc_fw365, count(Key_hsn) as NPt ),<br/>&nbsp&nbsp&nbsp&nbspgroupby=doc_fw365,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(doc_fw365 ne \"\" and adherence=1)<br/>)&#59<br/><br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=localt.g,<br/>&nbsp&nbsp&nbsp&nbsptarget=h16,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(doc_fw365, count(key_hsn) as TPt ),<br/>&nbsp&nbsp&nbsp&nbspgroupby=doc_fw365,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(doc_fw365 ne \"\"  )<br/>)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=h15a,<br/>&nbsp&nbsp&nbsp&nbspt2=h16,<br/>&nbsp&nbsp&nbsp&nbsptarget=h17,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.doc_fw365, t1.Npt, t2.TPt,  t1.Npt / t2.TPt *100 format 8.2 as AAAAPCT ),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=doc_fw365<br/>)&#59<br/><br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=h17,<br/>&nbsp&nbsp&nbsp&nbspt2=h15b,<br/>&nbsp&nbsp&nbsp&nbsptarget=h18,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.Npt as Npt_adh,  t2.Npt / t1.TPt *100 format 8.2 as AdhPCT ),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=doc_fw365<br/>)&#59<br/><br/><br/><br/>proc univariate data=h18&#59<br/>&nbsp&nbsp&nbsp&nbsphistogram AdhPCT AAAAPCT/normal&#59<br/>run&#59<br/>proc univariate data=h17&#59<br/>&nbsp&nbsp&nbsp&nbsphistogram AdhPCT /normal&#59<br/>run&#59<br/><br/>/*the % of AAAA patients are quite skewed (there are a bunch of Drs having higher than average % of AAAA patients)*/<br/>/*poisson? what predicts AAAA patients among doctors?*/<br/>s///<br/>t///","custparents":[{"idx":"CodeTask-pzOsKgUBMFRexTrx"}]},{"idx":"EGTask-mNdzSqhm2Bn1Jy5q","name":"Copy Statin Prscr to Remote","type":"TASK","children":[{"idx":"CodeTask-Aci5BDMMgR9LhbzQ","name":"ZZB MSB Claims Remote","type":"TASK","NodeDescription":"///t<br/>///s<br/>/*<br/>ZZB MSB claims of docs in ZZA<br/>*/<br/>data _null_&#59run&#59<br/>%nobs(data=remotes.zza)&#59<br/>%distinct(data=remotes.zza, target=zzb1, vars=key_doc_num)&#59<br/><br/>/*create an empty dataset*/<br/><br/>%macro getMSB(theYear=, theStart=, theEnd=, debug=)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%local theYear theStart theEnd debug&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%Extract_MSB(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspxtrc_start_dt=&Xtrc_Start_MSB,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspxtrc_end_dt=&Xtrc_End_MSB, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspds_out=getMSB_tmp1, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsphsn_list=, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsphsn_file= , <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdiagcode=, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdostart=&theStart, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdosend=&theEnd, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfscode=<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=getMSB_tmp1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=zzb1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=t1.*,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=%str(getMSB_tmp2 (rename =(dos_1 = DOS))), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjvars=key_doc_num<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if &theYear = 2009 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata msbzzb&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset getMSB_tmp2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata msbzzb&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset msbzzb getMSB_tmp2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if &debug ne 1 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc datasets nolist&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete getMSB_tmp:&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>%mend getMSB&#59<br/>%getMSB(theYear=2009, theStart='01jan2009'd, theEnd='31dec2017'd, debug=1)&#59<br/><br/>%UnixZip(<br/>&nbsp&nbsp&nbsp&nbspsPath=, <br/>&nbsp&nbsp&nbsp&nbspsource=, <br/>&nbsp&nbsp&nbsp&nbspdata=msbzzb, <br/>&nbsp&nbsp&nbsp&nbsptPath=&remoteTargetPath, <br/>&nbsp&nbsp&nbsp&nbsptarget=msbzzb.zip, <br/>&nbsp&nbsp&nbsp&nbspdebug=<br/>)&#59<br/><br/><br/><br/><br/>s///<br/>t///","children":[{"idx":"EGTask-SF7U4hFBpxtTrllt","name":"Copy MSBZips from Remote","type":"TASK","children":[{"idx":"CodeTask-kpvpcTvUPzprxvZV","name":"ZZC GPs","type":"TASK","NodeDescription":"///t<br/>///s<br/>/*ZZC*/<br/><br/><br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\msbzzb.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(msbzzb.sas7bdat)<br/>)&#59<br/>/*%print(data=msbzzb)&#59*/<br/><br/>/*ZZC1, get a unique list of entrydate specific docs by SPEC from the MSB claims<br/>&nbsp&nbsp&nbsp&nbspwithin 2 year before and 1 year after the entryDate*/<br/>/*the following is very inefficient, so prepare a compact data set first*/<br/>%distinct(data=msbzzb, target=ZZC0, vars=%str(key_doc_num, dos, SPEC))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*how many doctors acting as GP, NGP, missing on the same date*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata test1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset zzc0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat Doctype $3.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif SPEC in: (\"B\") then DocType = \"GP\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif SPEC =\"\" then DocType = \"NN\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif SPEC not in:(\"B\") and SPEC ne \"\" then DocType=\"NGP\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcnt=1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=test1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=test2,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_doc_num, t1.dos, sum(Doctype=\"GP\") as GP, sum(Doctype=\"NN\") as NN, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsum(Doctype=\"NGP\") as NGP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupby=%str(key_doc_num, dos)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*check the patterns*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata test3&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset test2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif GP =0 then p1=\"\"&#59else P1=\"G\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif NGP=0 then p2=\"\"&#59else p2=\"N\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif NN=0 then p3=\"\"&#59else p3=\"_\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocPattern=cats(p1,p2,p3)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdrop p1 p2 p3&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%freq(data=test3, table=docPattern)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*it is quite rare that a doc was acting as both GP and NGP on the same date*/<br/><br/><br/><br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=zzc0,<br/>&nbsp&nbsp&nbsp&nbspt2=localt.ZZA,<br/>&nbsp&nbsp&nbsp&nbsptarget=zzc1,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_doc_num, t2.entryDate, SPEC,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspifn(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsubstr(strip(SPEC), 1,1)=\"B\", 1, 2   <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp) as order<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num,<br/>&nbsp&nbsp&nbsp&nbsporderby = %str(key_doc_num,entryDate, order),<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(t1.dos between t2.entryDate - 365*2 and t2.entryDate+365-1)<br/>)&#59<br/>/*%freq(data=zzc1, table=spec)&#59*/<br/>/*Note: there are records missing SPEC values*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*Aummarized by specific study periods (2 years before and 1 year after entryDate), how is the doc pattern?<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata test1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset zzc1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat Doctype $3.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif SPEC in: (\"B\") then DocType = \"GP\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif SPEC =\"\" then DocType = \"NN\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif SPEC not in:(\"B\") and SPEC ne \"\" then DocType=\"NGP\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcnt=1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=test1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=test2,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_doc_num, t1.entryDate, sum(Doctype=\"GP\") as GP, sum(Doctype=\"NN\") as NN, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsum(Doctype=\"NGP\") as NGP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupby=%str(key_doc_num, entryDate)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*check the patterns*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata test3&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset test2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif GP =0 then p1=\"\"&#59else P1=\"G\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif NGP=0 then p2=\"\"&#59else p2=\"N\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif NN=0 then p3=\"\"&#59else p3=\"_\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocPattern=cats(p1,p2,p3)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdrop p1 p2 p3&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%freq(data=test3, table=docPattern)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*Again, it is quite rare that a doc was acting as both GP and NGP on the same date<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/><br/>/*It seems OK to be more restrict, as there is not a lot of hybrid docs to lose.<br/>The decision is to indicate docs as NGP if there is at lease 1 claim as NGP<br/>That way, the remaining docs only have GP claims. These docs are pure GPs.<br/>*/<br/><br/>/*<br/>ZZC2<br/>The goal is to identify GPs from docs in zzc1<br/>*/<br/>/*zzc2a. for entryDate-specific Docs in localt.ZZA, if  they are in ZZC1 as missing SPEC, or NGPs,  they are determined as NGPs<br/>*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=localt.ZZA,<br/>&nbsp&nbsp&nbsp&nbspt2=ZZC1, <br/>&nbsp&nbsp&nbsp&nbsptarget=ZZC2a,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_doc_num, t1.entryDate, 'ngp'  as docType length=3, 'msb' as docSRC), <br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num EntryDate,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsubstr(strip(t2.spec), 1,1) ne \"B\"<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor strip(t2.SPEC) = \"\"<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/>/*zzc2b. entryDate-specific Docs from localt.ZZA, in ZZC1 as GPs, and not in ZZC2a are GPs.<br/>&nbsp&nbsp&nbsp&nbsp[_Note] These docs only have pure GP claims in the database within the study period<br/>cat() similar to ||<br/>catt() removing the trailing spaces<br/>cats() removing both heading and trailing spaces<br/>catx() insert a delimiter between concatenated values<br/>*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=localt.ZZA,<br/>&nbsp&nbsp&nbsp&nbspt2=ZZC1, <br/>&nbsp&nbsp&nbsp&nbsptarget=ZZC2b,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_doc_num, t1.entryDate, 'gp'  as docType length=3, 'msb' as docSRC), <br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num EntryDate,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsubstr(strip(t2.spec), 1,1) = \"B\" <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcatx(\",\", t1.key_doc_num, t1.EntryDate) not in (select catx(\",\", key_doc_num, EntryDate) from ZZC2a)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*The docs in ZZC2b should only act as GPs within the interested period*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*Test*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp %sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=zzc1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=zzc2b,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=test31,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t2.key_doc_num, t2.entryDate, t1.SPEC),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjvars=key_doc_num entryDate<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%freq(data=test31, table=spec)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*for these docs, there should be no claims as NGPs within the study period*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=zzc0,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=zzc2b,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=test32,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_doc_num, SPEC),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjvars=key_doc_num,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str(t1.dos between t2.entryDate - 365*2 and t2.entryDate+365-1)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%freq(data=test32, table=spec)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*confirmed*/<br/><br/><br/>/*zzc3. next is to check doctors not appeared in the MSB claims<br/>... but it is not very useful. <br/>Althout there are docs not having msb claims, but are indeed GPs, how to estimate their missing claims? no clue.<br/>It is valuable to check the proportion of doctors identified/not identified though<br/>*/<br/>data _null_&#59run&#59<br/>/*ZZA contains all docs as statin prescribers, or service providers to the cohort member within the follow up period*/<br/>%print(data=localt.zza)&#59<br/>/*From ZZA, those identified as GPs*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=localt.zza,<br/>&nbsp&nbsp&nbsp&nbspt2=ZZC2b,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZZC3a,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_doc_num, t1.entryDate, 'GP' as DocType length=3),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num entryDate<br/>)&#59<br/>/*From ZZA, those identified as NGPs*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=localt.zza,<br/>&nbsp&nbsp&nbsp&nbspt2=ZZC2a,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZZC3b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_doc_num, t1.entryDate, 'NGP'  as DocType length=3),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num entryDate<br/>)&#59<br/>/*From ZZA, those docs can be found in MSB claims (ZZC0), but does not have MSB claims within 2 years before, <br/>and 1 year after the entryDate*/<br/>/*From ZZA, docs in ZZC0*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=zzc0,<br/>&nbsp&nbsp&nbsp&nbspt2=localt.zza,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsptarget=zzc3c1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_doc_num),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num<br/>)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=zzc3c1,<br/>&nbsp&nbsp&nbsp&nbspt2=localt.zza,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsptarget=zzc3c2,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t2.key_doc_num, t2.entryDate),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num<br/>)&#59<br/>%beep&#59<br/>/*from above, those not in ZZC3a, nor in ZZC3b (not identified as a GP/NGP within the period, i.e., not having any claims <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwithin the period)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=zzc3c2,<br/>&nbsp&nbsp&nbsp&nbsptarget=zzc3c3,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_doc_num, t1.entryDate), <br/>&nbsp&nbsp&nbsp&nbspfilters=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcatx(\",\", t1.key_doc_num, t1.EntryDate) not in (select catx(\",\", key_doc_num, EntryDate) from ZZC3a)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=zzc3c3,<br/>&nbsp&nbsp&nbsp&nbsptarget=zzc3c,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_doc_num, t1.entryDate, 'NO' as DocType), <br/>&nbsp&nbsp&nbsp&nbspfilters=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcatx(\",\", t1.key_doc_num, t1.EntryDate) not in (select catx(\",\", key_doc_num, EntryDate) from ZZC3b)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/>/*The above three (ZZC3a, 3b, 3c) are docs that can be found in MSB claims. 3a and 3b are GP/NGPs, 3c are those<br/>&nbsp&nbsp&nbsp&nbsphaving physician service claims out of the specified period(2 years before and 1 year after the entryDate), but not having<br/>&nbsp&nbsp&nbsp&nbspphysician service claims within the specific period*/<br/>/*The rest in ZZA are those not have any physician service claims*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=localt.zza,<br/>&nbsp&nbsp&nbsp&nbsptarget=zzc3d,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_doc_num, t1.entryDate, '__' as DocType length=3), <br/>&nbsp&nbsp&nbsp&nbspfilters=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkey_doc_num not in (select key_doc_num from ZZC0)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/>/*ZZC4, assembly ZZC3a-d. by doc type*/<br/>data ZZC4&#59<br/>&nbsp&nbsp&nbsp&nbspformat DocType $3.&#59<br/>&nbsp&nbsp&nbsp&nbspset ZZC3a ZZC3b ZZC3c ZZC3d&#59<br/>run&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=ZZC4,<br/>&nbsp&nbsp&nbsp&nbspt2=localt.zza,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsptarget=localT.ZZC,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.Role),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num entryDate<br/>)&#59<br/>%freq(data=localt.ZZC, table=Role* doctype)&#59<br/>%nobs(data=localt.ZZA)&#59<br/><br/>/*the table shows that it is very rare to have doc-entryDate cases who did not have any msb claims within the specified period<br/>Conclusion: the current method is good to include most of the docs (either a statin prescriber, or a service provider of for  <br/>&nbsp&nbsp&nbsp&nbspcohort members during follow up<br/>*/<br/><br/><br/>s///<br/>t///","children":[{"idx":"CodeTask-ViasKREJ44R4uJVe","name":"ZZD FFS NFFS","type":"TASK","NodeDescription":"///t<br/>///s<br/>/*ZZD. For msbzzb, get MSB claims of GPs in ZZC, count % of claims as FFS/NFFS in the specified period (2 years prior and 1 year after the EntryDate */<br/><br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\msbzzb.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(msbzzb.sas7bdat)<br/>)&#59<br/>/*note: do not use such as format $4. as paymode. Won't work. will have a length of 200!*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=msbzzb,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZZD0,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(key_hsn, key_doc_num, dos,  ifc(t1.mode='1', 'FFS', 'NFFS' ) as PayMode length=4),<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(num_srv ne 0<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLOS NOT in ('B','2','K','9')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspMODE ne 'Z'<br/>&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/><br/>/*Note, the FFS/NFFS is based all doc's services to ALL patients, not only to the cohort members. <br/>&nbsp&nbsp&nbsp&nbspIf it were to the cohort members, many will have 0 visits, and FFS/NFFS cannot be determined.<br/>&nbsp&nbsp&nbsp&nbspIt is more appropriate to count visits to ALL patients, but within the 2 year period around the entry dates. <br/>&nbsp&nbsp&nbsp&nbspe.g., the entry date is 2002-1-1, then the doc's pay type is determined by the % of FFS of this doc to all his patients<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspbetween 2001-1-1 and 2003-12-31.<br/>*/<br/>/*ZZD1a, unique GPs from ZZC*/<br/>%distinct(data=localt.zzc, target=zzd1a, vars=key_doc_num, filters=%str(DocType=\"GP\"))&#59<br/><br/>/*zzd1b, from ZZD0, encounters of gps in ZZD1a*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=zzd0,<br/>&nbsp&nbsp&nbsp&nbspt2=zzd1a,<br/>&nbsp&nbsp&nbsp&nbsptarget=zzd1b,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=t1.*,<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num<br/>)&#59<br/><br/>%sort(data=zzd1b, sorter=key_hsn dos key_doc_num PayMode)&#59<br/><br/>/*ZZD1c, the above may have same visits with diff pay type. The following is to keep the last one, which gives priority to NFFS service*/<br/>Data ZZd1c&#59<br/>&nbsp&nbsp&nbsp&nbspset ZZD1b&#59<br/>&nbsp&nbsp&nbsp&nbspby key_hsn dos key_doc_num PayMode&#59<br/>&nbsp&nbsp&nbsp&nbspif last.key_doc_num&#59<br/>run&#59<br/><br/><br/>/*ZZD1d From above, select claims between entrydate -365 and entrydate +364*/<br/>/*zzd1d, statin users and entrydate*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\vxa.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(vxa.sas7bdat)<br/>)&#59<br/>%distinct(data=vxa, target=zzd1d, vars=entryDate)&#59<br/><br/>/*zzd2, MSB visits within 1 year before and 1 year after entryDate<br/>&nbsp&nbsp&nbsp&nbspi.e., to have visits in each specific period defined by entrydate and doc<br/>*/<br/><br/>/*%distinct(data=zzd1c, target=test, vars=%str(year(dos) as year))&#59 */<br/>/*2009-2017*/<br/>%macro makeZZD2a&#59<br/>&nbsp&nbsp&nbsp&nbsp%local i j k&#59<br/>&nbsp&nbsp&nbsp&nbsp%let k=0&#59<br/>/*&nbsp&nbsp&nbsp&nbsp%do i = 2012 %to 2012&#59 */<br/>&nbsp&nbsp&nbsp&nbsp%do i = 2010 %to 2017&#59 <br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%do j = 0 %to 0 %by 3&#59*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%do j = 0 %to 9 %by 3&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata makeZZD2a_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset zzd1c&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwhere year(dos) = &i and<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmonth(dos) between %eval(&j +1) and %eval(&j + 3)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59 <br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata makeZZD2a_tmp2&#59*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset zzd1d&#59*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif %eval(&i-1) le year(EntryDate) le %eval(&i+1)&#59*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=makeZZD2a_tmp1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=zzd1d,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=makeZZD2a_tmp3,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t2.entryDate, t1.key_doc_num, t1.PayMode,t1.dos),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=cross,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.dos between t2.entrydate -365 and t2.entryDate +365-1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=makeZZD2a_tmp3,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=makeZZD2a_tmp4,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(entryDate, key_doc_num, PayMode, count(t1.dos) as N_Visits),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupby=%str(entryDate, key_doc_num, PayMode)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if &k=0 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata ZZD2a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset makeZZD2a_tmp4&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata ZZD2a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset ZZD2a makeZZD2a_tmp4&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let k=%eval(&k+1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>%mend&#59<br/>%makeZZD2a&#59<br/><br/>/* the ZZD2a need to be further grouped and summed. Same EntryDate-doc-paymode may appear multiple times*/<br/>/*as the msb records were obtained by 3-months.  */<br/>data ZZD2a2&#59set ZZD2a&#59run&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=ZZD2a2,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZZD2a,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(entryDate, key_doc_num, PayMode, sum(N_Visits) as N_Visits),<br/>&nbsp&nbsp&nbsp&nbspgroupby=%str(entryDate, key_doc_num, PayMode)<br/>)&#59<br/><br/>/*the following will overwirte the existing zip! be careful*/<br/>/*%vbsZip(*/<br/>/*&nbsp&nbsp&nbsp&nbsptgtDir=%str(&localTargetPath), */<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=zzd2a.zip, */<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=zzd2a.sas7bdat, */<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcDir=*/<br/>/*)&#59*/<br/><br/><br/><br/>/*%print(data=ZZd2)&#59*/<br/><br/>/*transpose and have N_visits by NFFS and FFS payment type in columns*/<br/>%transpose(data=zzd2a, target=zzd2b, rowhead=key_doc_num entryDate, colhead=PayMode, contents=n_visits)&#59<br/><br/>/*<br/>&nbsp&nbsp&nbsp&nbspif the GP in ZZC has an FFS_CAT of (0-2), make it NFFS<br/>&nbsp&nbsp&nbsp&nbspif the GP in ZZC has an FFS_CAT of 8-10, make it FFS<br/>&nbsp&nbsp&nbsp&nbspif the gp in zzc has an FFS_CAT of 3-7, make it unk(unknown)<br/>*/<br/>data ZZD2&#59<br/>&nbsp&nbsp&nbsp&nbspset ZZD2b&#59<br/>&nbsp&nbsp&nbsp&nbspif NFFS=. then NFFS=0&#59<br/>&nbsp&nbsp&nbsp&nbspif FFS=. then FFS=0&#59<br/>&nbsp&nbsp&nbsp&nbspFFSPCT=INT(FFS / sum(NFFS, FFS)*100 )&#59<br/>&nbsp&nbsp&nbsp&nbspFFS_CAT=int(FFSPCT / 10)&#59<br/>&nbsp&nbsp&nbsp&nbspformat PayType $4.&#59<br/>&nbsp&nbsp&nbsp&nbspif FFS_CAT LE 2 then PayType='NFFS'&#59<br/>&nbsp&nbsp&nbsp&nbspif FFS_CAT GE 8 then PayType='FFS'&#59<br/>&nbsp&nbsp&nbsp&nbspif 2 lt FFS_CAT LT 8 then PayType='UNKW'&#59<br/>run&#59<br/><br/>/*%freq(data=zzd2, table=FFS_CAT*PayType)&#59<br/>It shows that only a small proportion of patients whose doc is of UNKW type*/<br/><br/>/*ZZD3 link pay type to ZZC*/<br/>/*link to zzc*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=localt.ZZC,<br/>&nbsp&nbsp&nbsp&nbspt2=ZZD2,<br/>&nbsp&nbsp&nbsp&nbsptarget=localt.ZZD,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifc(t2.PayType=\"\", \"NMSB\", t2.PayType) as PayType length=4, T2.FFS_CAT),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num entryDate,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(t1.DocType=\"GP\")<br/>)&#59<br/>%freq(data=localt.zzd, table=paytype*role)&#59<br/><br/><br/><br/>s///<br/>t///","children":[{"idx":"CodeTask-kpt49up7VUF9xXPg","name":"ZZE Missing MSB Claims for RX","type":"TASK","NodeDescription":"///t<br/>///s<br/>/*ZZE This program is to determine the missing service claims.<br/>&nbsp&nbsp&nbsp&nbspQuestion: why using the MSBZZb file (claims of all doc's patients, not only those to cohort patients)<br/>&nbsp&nbsp&nbsp&nbspwhy not using the master_msb file (claims of the cohort patients, which is way smaller)<br/>*/<br/><br/>data _null_&#59run&#59<br/><br/>/*ZZE1. Get all statin claims of prescribers in ZZD to cohort members within the follow up period*/<br/>/*ZZE1a. Get distinct statin dispensation dates within follow up*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\vxf.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(vxf.sas7bdat)<br/>)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=vxf,<br/>&nbsp&nbsp&nbsp&nbspt2=localt.zzd,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZZE1,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.entryDate, t2.key_doc_num, t1.rx_ddddd),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjterm=%str(t1.key_prscr_num = t2.key_doc_num),<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(t1.rx_ddddd between t1.entrydate and t1.entrydate + 364)<br/>)&#59<br/><br/>/*ZZE2. Determin whether there is a visit claim within 30 days prior to the RxDate*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_msb.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_msb.sas7bdat)<br/>)&#59<br/><br/>/*from zzd, get a distinct list of docs*/<br/>%distinct(data=localt.zzd, target=zzE2a1, vars=key_doc_num)&#59<br/>/*zze2a, get distinct visits for patients in zzd*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_msb,<br/>&nbsp&nbsp&nbsp&nbspt2=zzE2a1,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZZE2a,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.key_doc_num, t1.dos),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num<br/>)&#59<br/>/*zze2b, join zze1 and zze2a,  determine whether there is a visit claim within 30 60 90 180 days prior to the Date of statin dispensation*/<br/>%macro analysisZZE&#59<br/>&nbsp&nbsp&nbsp&nbsp%local lookbackClaims&#59<br/>&nbsp&nbsp&nbsp&nbsp%do lookbackClaims = 30 %to 180 %by 30&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if &lookbackClaims = 120 or &lookbackClaims = 150 %then %goto SkipToNext&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=ZZE1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=zze2a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=zze2b,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.entryDate, t1.key_doc_num, t1.rx_ddddd, ifc(t2.key_hsn=\"\", '_1', '_0') as MissVisitClaim),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm=%str(t1.key_hsn = t2.key_hsn and t1.key_doc_num = t2.key_doc_num and t2.dos between t1.rx_ddddd -&lookbackClaims and t1.rx_ddddd)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*%freq(data=zze2b, table=MissVisitClaim)&#59*/<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*%print(data = localt.zzd)*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*link the hasvisitclaim records (ZZE2b) with entryDate-specific doc paytype (ZZD)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspso as to have the prescriber's pay type on the claim date<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif the specific entrydate-doc combination in zze2b cannot be found in zzd, indicate the PayType is 'UNKW' (unknown)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*in ZZE2, there are docs who cannot be identified for PayTYpe on the specific entryDate (i.e., there were no <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspphysician service claims within 1 year before and 1 year after the entryDate). These could be NFFS doctors,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspBut these could also be FFS doctors, who knows. <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=zze2b,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=localt.zzd,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=zze2,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspifc(t2.Role=\"\", \"prescriber\", t2.role) as Role length=20 , <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspifc(t2.PayType=\"\", \"UNKW\", t2.PayType) as PayType length=20, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.FFS_CAT),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjvars=entrydate key_doc_num,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str(t2.paytype ne 'NMSB')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*%freq(data=zze2, table=Role * PayType)&#59*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%print(data =zze2)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%nobs(data=zze2b)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%nobs(data=zze2)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*To this step, a logistic model can be applied to estimate the impact of paytype to the outcome of missing visit claims.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspAs the records are repeated by patient and doc, the two vars can be used for repeat terms in GEE models<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(patient nested in doc, 2 levels)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTitle \"GEE, binary of missing service claim, repeated by doc nested patient levels\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc genmod data=zze2 desc &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspclass PayType(ref='FFS') key_doc_num key_hsn /param=reference &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmodel MissVisitClaim = PayType /type3 dist=bin link=logit covb&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"NFFS vs FFS\" PayType 1 0/exp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"UNKW vs FFS\" PayType 0 1/exp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprepeated subject=key_doc_num ( key_hsn) /type=exch printmle ecovb&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*repeated or strata? levels or paired?*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspstrata key_doc_num key_hsn / missing&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/><br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*Next, the missing cases are summerized by doctor. */<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*zze3, summary # of Rx, by doc, PayType, HasVisitClaim */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=zze2,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=zze3a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_doc_num, t1.payType, t1.MissVisitClaim, count(Rx_ddddd) as NRx),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupby=%str(t1.key_doc_num, t1.payType,  t1.MissVisitClaim)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%transpose(data=zze3a, target=zze3b, rowhead = key_doc_num paytype , colhead = MissVisitClaim, contents=NRX)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%macro GEE_1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%local MissingPCTCutOff&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%do MissingPCTCutOff=1 %to 10&#59 /*missing xx% of claims*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata zze3&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset zze3b&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif _1=. then _1=0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif _0=. then _0=0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptotal = sum(_1, _0)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspMiss_PCT= int(_1/total*100)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspMiss_CAT = int(Miss_PCT/10)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif Miss_CAT ge &MissingPCTCutOff then Miss_Bin = 1&#59 else  Miss_Bin=0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*proc freq data=zze3&#59*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*&nbsp&nbsp&nbsp&nbsptable Miss_Bin * paytype /chisq norow nocol nopct&#59*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*run&#59*/<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*The following model is to estimate the OR of Missing 80% of the service claims of a patient <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspby a doc of NFFS type vs FFS type<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTitle \"Binary of doc missing y% service claims , MissingPCTCutOff=&MissingPCTCutOff\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc genmod data=zze3 desc &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspclass PayType(ref='FFS') key_doc_num  /param=ref &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmodel Miss_Bin = PayType /type3 dist=bin link=logit covb&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"NFFS vs FFS\" PayType 1 0 /exp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"UNKW vs FFS\" PayType  0 1/exp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprepeated subject=key_doc_num /type=exch printmle&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*It seems that the OR is not stable. It ranges fro 3 to 0.5 when the missing PCT cut off changes from 10% to 100%. */<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if &MissingPCTCutOff=10 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*alternatively, a poisson model to estimate the rate of missing service claims<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthe rate is estimated as # of missing claims out of the total claims<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata ZZe4&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset zze3&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplog_total = log(total)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*proc univariate data=zze4&#59*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*&nbsp&nbsp&nbsp&nbsphistogram Miss_PCT&#59*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*run&#59*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptitle \"Poisson model,MissingPCTCutOff=&MissingPCTCutOff \"&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc genmod data=zze4  &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspclass PayType (ref='FFS') key_doc_num  /param=ref  &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmodel _1 = PayType /type3 dist=negbin  offset=log_total&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"NFFS vs FFS\" PayType 1 0/exp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"UNKW vs FFS\" PayType 0 1 /exp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprepeated subject=key_doc_num /type=exch modelse printmle&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%mend GEE_1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%GEE_1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*If checking the rate of missing claims at doc level (summarizing all missing phycisian service cases out of all statin Rx), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspRate of missing service claim are 1.5 times higher among NFFS vs FFS &nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>%SkipToNext:<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59/*end of loop for lookbackclaim days*/<br/>%mend analysisZZE&#59<br/>%analysisZZE&#59<br/>/*alternatively, at patient level, check the rate of missing service claims by patient. <br/>&nbsp&nbsp&nbsp&nbspSee whether it can be determined by tpe of patient's usual prescriber(s): i.e., FFS/NFFS/UNKW/Mixed<br/>&nbsp&nbsp&nbsp&nbspBut... what is the point of doing that?<br/>*/<br/><br/><br/><br/>s///<br/>t///","children":[{"idx":"CodeTask-47QaLlwY1h7Q44wY","name":"ZZF OR of being UPCPF FFS vs NFFS","type":"TASK","NodeDescription":"///t<br/>///s<br/>/*ZZF, <br/> &nbsp&nbsp&nbsp&nbspThis progam is to test the hypothesis:<br/>&nbsp&nbsp&nbsp&nbspNFFS doctors are less likely to be the cohort member's usual CARE PROVIDER during follow up.  &nbsp&nbsp&nbsp&nbsp<br/>*/<br/><br/>/*msb claim docs of the cohort members during follow up*/<br/>/*msb claims*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_msb.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_msb.sas7bdat)<br/>)&#59<br/><br/>/*cohort memebers*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\vzc.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(vzc.sas7bdat)<br/>)&#59<br/><br/>/*distinct docs of msb claims of cohort memebers within follow up<br/>&nbsp&nbsp&nbsp&nbspthese claims including doctors identified in zzb (as GPs by FFS/NFFS type)<br/>&nbsp&nbsp&nbsp&nbspalso include doctors not identified in zzb <br/>*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_msb,<br/>&nbsp&nbsp&nbsp&nbspt2=vzc,<br/>&nbsp&nbsp&nbsp&nbsptarget=zzf1,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t2.entryDate, t1.key_doc_num),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn, <br/>&nbsp&nbsp&nbsp&nbspfilters=%str(t1.dos between t2.entrydate and t2.entrydate +364)<br/>)&#59<br/>/*%print(data=vzc)&#59*/<br/>/*%print(data=localt.zzd)&#59*/<br/>/*From above, determine whether a FFS/NFFS doc is identified*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=zzf1,<br/>&nbsp&nbsp&nbsp&nbspt2=localt.zzd,<br/>&nbsp&nbsp&nbsp&nbsptarget=zzf2,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.entryDate, t1.key_doc_num, t2.paytype),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num entryDate,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(t2.paytype ne 'UNKW' and t2.paytype ne 'NMSB')<br/>)&#59<br/><br/>/*patients and their UGPFs (usual GP during follow up)*/<br/>data ZZF3&#59<br/>&nbsp&nbsp&nbsp&nbspset VZC&#59format upcpfdocid $11.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUGPF=1&#59<br/>&nbsp&nbsp&nbsp&nbsparray upcpfs upcpf:&#59<br/>&nbsp&nbsp&nbsp&nbspdo i = 1 to dim(upcpfs)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspupcpfdocid= scan(upcpfs(i),1,\":\")&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif upcpfdocid ne 'na' then output&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn entrydate upcpfdocid UGPF&#59<br/>run&#59<br/><br/><br/>/*link zzf3 to zzf2, check if the very doc in zzf2 is identified as the usual provider*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=zzf2,<br/>&nbsp&nbsp&nbsp&nbspt2=zzf3,<br/>&nbsp&nbsp&nbsp&nbsptarget=zzf4,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.ugpf=., 0, 1) as UGPF),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjterm=%str(t1.key_hsn = t2.key_hsn and t2.upcpfdocid = t1.key_doc_num)<br/>)&#59<br/><br/>/*what is this? there is a cross over here<br/>&nbsp&nbsp&nbsp&nbsppatient a may see doc 1 and 2<br/>&nbsp&nbsp&nbsp&nbsppatient b may also see doc 1 and 2<br/>&nbsp&nbsp&nbsp&nbsp...<br/>*/<br/>proc genmod data=zzf4 desc&#59<br/>&nbsp&nbsp&nbsp&nbspclass paytype (ref='FFS') key_doc_num  key_hsn /param=reference &#59<br/>&nbsp&nbsp&nbsp&nbspmodel UGPF = paytype  /link=logit dist=bin type3&#59<br/>&nbsp&nbsp&nbsp&nbsprepeated subject= key_doc_num (key_hsn)  /type=exch&#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"NFFS vs FFS\" paytype 1 /exp &#59<br/>run&#59<br/><br/>/*It makes more sense to count the number of patients by doc<br/>&nbsp&nbsp&nbsp&nbspfor number of patients being UGPF, and for total number of patients<br/>*/<br/>/*%print(data=zzf4)&#59*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=zzf4,<br/>&nbsp&nbsp&nbsp&nbsptarget=zzf5,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_doc_num, t1.payType,  <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcount(key_hsn) as Total,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsum(UGPF) as N_UGPF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp),<br/>&nbsp&nbsp&nbsp&nbspgroupby=%str(key_doc_num, payType),<br/>&nbsp&nbsp&nbsp&nbsporderby = %str(key_doc_num, payType)<br/>)&#59<br/>/*for docs acting both as a FFS and a NFFS for diff time periods, */<br/>%transpose(data=ZZF5, target=ZZF6a, rowhead=key_doc_num, colhead=paytype, contents=total)&#59<br/>data ZZF7a&#59<br/>&nbsp&nbsp&nbsp&nbspset ZZF6a&#59<br/>&nbsp&nbsp&nbsp&nbspif nffs=. and ffs ne . then PayClass='0f'&#59<br/>&nbsp&nbsp&nbsp&nbspif nffs ne . and ffs =. then Payclass='1n'&#59<br/>&nbsp&nbsp&nbsp&nbspif nffs ne . and ffs ne . then Payclass='2b'&#59<br/>&nbsp&nbsp&nbsp&nbspif nffs=. and ffs =. then PayClass='3_'&#59<br/>&nbsp&nbsp&nbsp&nbspTotal =sum(nffs, ffs)&#59<br/>run&#59<br/>%freq(data=zzf7a, table=PayClass)&#59<br/>%transpose(data=ZZF5, target=ZZF6b, rowhead=key_doc_num, colhead=paytype, contents=N_UGPF)&#59<br/>data ZZF7b&#59<br/>&nbsp&nbsp&nbsp&nbspset ZZF6b&#59<br/>&nbsp&nbsp&nbsp&nbspif nffs=. and ffs ne . then PayClass='0f'&#59<br/>&nbsp&nbsp&nbsp&nbspif nffs ne . and ffs =. then Payclass='1n'&#59<br/>&nbsp&nbsp&nbsp&nbspif nffs ne . and ffs ne . then Payclass='2b'&#59<br/>&nbsp&nbsp&nbsp&nbspif nffs=. and ffs =. then PayClass='3_'&#59<br/>&nbsp&nbsp&nbsp&nbspN_UGPF =sum(nffs, ffs)&#59<br/>run&#59<br/>%freq(data=zzf7b, table=PayClass)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=zzf7a,<br/>&nbsp&nbsp&nbsp&nbspt2=zzf7b,<br/>&nbsp&nbsp&nbsp&nbsptarget=zzf7,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_doc_num, t1.payclass, t2.N_UGPF, t1.Total),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num payclass<br/>)&#59<br/><br/>/*A poisson model to est rate ratio of being UGPF*/<br/>data ZZF8&#59<br/>&nbsp&nbsp&nbsp&nbspset zzF7&#59<br/>&nbsp&nbsp&nbsp&nbsplog_total = log(total)&#59<br/>&nbsp&nbsp&nbsp&nbspPCT_UGPF = int(N_UGPF / Total * 10)&#59<br/>run&#59<br/><br/>%freq(data=zzf8, table=pct_ugpf *payClass)&#59<br/><br/>title \"Poisson model \"&#59<br/><br/>proc genmod data=zzf8  &#59<br/>&nbsp&nbsp&nbsp&nbspclass payClass (ref='0f') key_doc_num  /param=effect desc &#59<br/>&nbsp&nbsp&nbsp&nbspmodel N_UGPF = payClass /type3 dist=negbin  offset=log_total&#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"NFFS vs FFS\" payClass 0 1 -1 /exp&#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"Both vs FFS\" payClass 1 0 -1 /exp&#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"NFFS + Both vs FFS\" payClass 1 1 -2 /exp&#59<br/>run&#59<br/><br/><br/>/*What about those docs both act as FFS and NFFS?*/<br/>data ZZF9&#59<br/>&nbsp&nbsp&nbsp&nbspset ZZF8&#59<br/>&nbsp&nbsp&nbsp&nbspif payClass='2b'&#59<br/>run&#59<br/>/*get the payType specfic data*/<br/><br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=zzf4,<br/>&nbsp&nbsp&nbsp&nbspt2=zzf9,<br/>&nbsp&nbsp&nbsp&nbsptarget=zzf10,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, year(entryDate) as year),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num,<br/>&nbsp&nbsp&nbsp&nbsporderby=%str(key_doc_num, paytype, year, key_hsn)<br/>)&#59<br/>/*dose this make sense? It is a GEE binary analysis<br/>&nbsp&nbsp&nbsp&nbspon whether or not being Usual GP<br/>&nbsp&nbsp&nbsp&nbspby paytype<br/>&nbsp&nbsp&nbsp&nbsprepeated by patient<br/>&nbsp&nbsp&nbsp&nbspstratified by key_doc_num (being both NFFS, FFS),<br/>&nbsp&nbsp&nbsp&nbspnot a lot of cases though<br/>*/<br/>proc genmod data=zzf10 desc&#59<br/>&nbsp&nbsp&nbsp&nbspclass paytype (ref='FFS') key_doc_num  key_hsn /param=reference desc&#59<br/>&nbsp&nbsp&nbsp&nbspmodel UGPF = paytype  /link=logit dist=bin type3&#59<br/>&nbsp&nbsp&nbsp&nbsprepeated subject= key_hsn  /type=exch ecovb&#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"NFFS vs FFS\" paytype 1 /exp &#59<br/>&nbsp&nbsp&nbsp&nbspstrata key_doc_num &#59<br/>run&#59<br/>/*the result is really weird and difficult to explain, the OR >1*/<br/><br/><br/>/*Poisson? for these cross over group?*/<br/><br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=zzf10,<br/>&nbsp&nbsp&nbsp&nbsptarget=zzf11,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_doc_num, t1.payType,  <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcount(key_hsn) as Total,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsum(UGPF) as N_UGPF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp),<br/>&nbsp&nbsp&nbsp&nbspgroupby=%str(key_doc_num, payType),<br/>&nbsp&nbsp&nbsp&nbsporderby = %str(key_doc_num, payType)<br/>)&#59<br/>data ZZF12&#59<br/>&nbsp&nbsp&nbsp&nbspset zzF11&#59<br/>&nbsp&nbsp&nbsp&nbsplog_total = log(total)&#59<br/>&nbsp&nbsp&nbsp&nbspPCT_UGPF = int(N_UGPF / Total * 10)&#59<br/>run&#59<br/><br/>%freq(data=zzf12, table=pct_ugpf *payClass)&#59<br/><br/>title \"Poisson model \"&#59<br/><br/>proc genmod data=zzf12  &#59<br/>&nbsp&nbsp&nbsp&nbspclass payType (ref='FFS') key_doc_num  /param=ref desc &#59<br/>&nbsp&nbsp&nbsp&nbspmodel N_UGPF = payType /type3 dist=negbin  offset=log_total&#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"NFFS vs FFS\" payType 1 /exp&#59<br/>&nbsp&nbsp&nbsp&nbspstrata key_doc_num&#59<br/>run&#59<br/>/*even stranger. it is kind of before-after analysis. Those turned to NFFS are more likely to be UGPF!*/<br/>s///<br/>t///","children":[{"idx":"CodeTask-xeAw1hpjIYgwn1R4","name":"ZZG UPR being UPCPF FFS vs NFFS","type":"TASK","NodeDescription":"///t<br/>///s<br/>/*Usual prescribers, UPRs of FFS/NFFS type, and likelihood of being a UGPF (UPCPF)*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\vzc.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(vzc.sas7bdat)<br/>)&#59<br/>%print(data=vzc)&#59<br/><br/>/*1. get all UPRs of cohort memebers. Some patients had multiple UPRs*/<br/>data ZZG1&#59<br/>&nbsp&nbsp&nbsp&nbspset VZC&#59<br/>&nbsp&nbsp&nbsp&nbspformat UGPPRDocID $11.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUGPPR=1&#59<br/>&nbsp&nbsp&nbsp&nbsparray UPRs UPR1 - UPR6&#59<br/>&nbsp&nbsp&nbsp&nbspdo i = 1 to dim(UPRs)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUGPPRDocID= scan(UPRs(i),1,\":\")&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif UGPPRDocID ne 'na' and UGPPRDocID ne 'unknown'  then output&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn entryDate UGPPRDocID UGPPR&#59<br/>&nbsp&nbsp&nbsp&nbsp/*if strip(UGPPRDocID) ne 'unknown'&#59 why those unknow is not deleted if the condition is put here, instead of in the 2 lines above*/<br/>run&#59<br/><br/>/*The UPRs in 1) may have missing claims. And because of that, they may not be identified as UPCPs. <br/>&nbsp&nbsp&nbsp&nbspAmong them, some are of paytype FFS, some of NFFS. <br/>&nbsp&nbsp&nbsp&nbspThe question is:<br/>&nbsp&nbsp&nbsp&nbspIs it true that being an NFFS prescriber is more likely not to be identified as an UPCPF?<br/>*/<br/><br/>/*<br/>&nbsp&nbsp&nbsp&nbspTo answer this question. the next step is to indicate the paytype for UPRs identified in 1)<br/>2. */<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=ZZG1,<br/>&nbsp&nbsp&nbsp&nbspt2=localt.zzd,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZZG2,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.paytype),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjterm=%str(t1.UGPPRDocID = t2.key_doc_num and t1.entryDate = t2.entryDate),<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(t2.paytype ne 'UNKW' and t2.paytype ne 'NMSB')<br/>)&#59<br/><br/>/*3. from vzc, get UPCPFs of the cohort patients*/<br/>data ZZg3&#59<br/>&nbsp&nbsp&nbsp&nbspset VZC&#59format upcpfdocid $11.&#59<br/>&nbsp&nbsp&nbsp&nbspIsUPCPF=1&#59<br/>&nbsp&nbsp&nbsp&nbsparray upcpfs upcpf:&#59<br/>&nbsp&nbsp&nbsp&nbspdo i = 1 to dim(upcpfs)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspupcpfdocid= scan(upcpfs(i),1,\":\")&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif upcpfdocid ne 'na' and upcpfdocid ne 'unknown' then output&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn upcpfdocid IsUPCPF&#59<br/>run&#59<br/><br/>/*4. link 2 and 3,for each UPR in 2), determine whether or not the UPR is identified as UPCPF*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=zzg2,<br/>&nbsp&nbsp&nbsp&nbspt2=zzg3,<br/>&nbsp&nbsp&nbsp&nbsptarget=zzg4,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.IsUPCPF=., 0, 1) as IsUPCPF),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjterm=%str(t1.key_hsn = t2.key_hsn and t1.UGPPRDocID = t2.upcpfdocid)<br/>)&#59<br/><br/><br/><br/>/*what is this? there is a cross over here<br/>&nbsp&nbsp&nbsp&nbsppatient a may see doc 1 and 2<br/>&nbsp&nbsp&nbsp&nbsppatient b may also see doc 1 and 2<br/>&nbsp&nbsp&nbsp&nbsp...<br/>*/<br/>proc genmod data=zzg4 desc&#59<br/>&nbsp&nbsp&nbsp&nbspclass paytype (ref='FFS') UGPPRDocID  key_hsn /param=reference &#59<br/>&nbsp&nbsp&nbsp&nbspmodel IsUPCPF = paytype  /link=logit dist=bin type3&#59<br/>&nbsp&nbsp&nbsp&nbsprepeated subject= UGPPRDocID (key_hsn)  /type=exch&#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"NFFS vs FFS\" paytype 1 /exp &#59<br/>&nbsp&nbsp&nbsp&nbspstrata UGPPRDocID key_hsn&#59<br/>run&#59<br/><br/>/*It makes more sense to count the number of patients by doc<br/>&nbsp&nbsp&nbsp&nbspfor number of patients being UGPF, and for total number of patients<br/>*/<br/>%print(data=zzg4)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=zzg4,<br/>&nbsp&nbsp&nbsp&nbsptarget=zzg5,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.UGPPRDocID, t1.payType,  <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcount(key_hsn) as Total,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsum(IsUPCPF) as N_UGPF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp),<br/>&nbsp&nbsp&nbsp&nbspgroupby=%str(UGPPRDocID, payType),<br/>&nbsp&nbsp&nbsp&nbsporderby = %str(UGPPRDocID, payType)<br/>)&#59<br/>/*for docs acting both as a FFS and a NFFS for diff time periods, */<br/>%transpose(data=ZZG5, target=ZZG6a, rowhead=UGPPRDocID, colhead=paytype, contents=total)&#59<br/>data ZZG7a&#59<br/>&nbsp&nbsp&nbsp&nbspset ZZG6a&#59<br/>&nbsp&nbsp&nbsp&nbspif nffs=. and ffs ne . then PayClass='0f'&#59<br/>&nbsp&nbsp&nbsp&nbspif nffs ne . and ffs =. then Payclass='1n'&#59<br/>&nbsp&nbsp&nbsp&nbspif nffs ne . and ffs ne . then Payclass='2b'&#59<br/>&nbsp&nbsp&nbsp&nbspif nffs=. and ffs =. then PayClass='3_'&#59<br/>&nbsp&nbsp&nbsp&nbspTotal =sum(nffs, ffs)&#59<br/>run&#59<br/>%freq(data=zzG7a, table=PayClass)&#59<br/>%transpose(data=ZZG5, target=ZZG6b, rowhead=UGPPRDocID, colhead=paytype, contents=N_UGPF)&#59<br/>data ZZG7b&#59<br/>&nbsp&nbsp&nbsp&nbspset ZZG6b&#59<br/>&nbsp&nbsp&nbsp&nbspif nffs=. and ffs ne . then PayClass='0f'&#59<br/>&nbsp&nbsp&nbsp&nbspif nffs ne . and ffs =. then Payclass='1n'&#59<br/>&nbsp&nbsp&nbsp&nbspif nffs ne . and ffs ne . then Payclass='2b'&#59<br/>&nbsp&nbsp&nbsp&nbspif nffs=. and ffs =. then PayClass='3_'&#59<br/>&nbsp&nbsp&nbsp&nbspN_UGPF =sum(nffs, ffs)&#59<br/>run&#59<br/>%freq(data=zzg7b, table=PayClass)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=zzg7a,<br/>&nbsp&nbsp&nbsp&nbspt2=zzg7b,<br/>&nbsp&nbsp&nbsp&nbsptarget=zzg7,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.UGPPRDocID, t1.payclass, t2.N_UGPF, t1.Total),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=UGPPRDocID payclass<br/>)&#59<br/><br/>/*A poisson model to est rate ratio of being UGPF*/<br/>data ZZg8&#59<br/>&nbsp&nbsp&nbsp&nbspset zzg7&#59<br/>&nbsp&nbsp&nbsp&nbsplog_total = log(total)&#59<br/>&nbsp&nbsp&nbsp&nbspPCT_UGPF = int(N_UGPF / Total * 10)&#59<br/>run&#59<br/><br/>%freq(data=zzg8, table=pct_ugpf *payClass)&#59<br/><br/>title \"Poisson model \"&#59<br/><br/>proc genmod data=zzg8  &#59<br/>&nbsp&nbsp&nbsp&nbspclass payClass (ref='0f') UGPPRDocID  /param=effect desc &#59<br/>&nbsp&nbsp&nbsp&nbspmodel N_UGPF = payClass /type3 dist=negbin  offset=log_total&#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"NFFS vs FFS\" payClass 0 1 -1 /exp&#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"Both vs FFS\" payClass 1 0 -1 /exp&#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"NFFS + Both vs FFS\" payClass 1 1 -2 /exp&#59<br/>run&#59<br/><br/><br/>/*What about those docs both act as FFS and NFFS?*/<br/>data ZZg9&#59<br/>&nbsp&nbsp&nbsp&nbspset ZZg8&#59<br/>&nbsp&nbsp&nbsp&nbspif payClass='2b'&#59<br/>run&#59<br/>/*get the payType specfic data*/<br/><br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=zzg4,<br/>&nbsp&nbsp&nbsp&nbspt2=zzg9,<br/>&nbsp&nbsp&nbsp&nbsptarget=zzg10,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, year(entryDate) as year),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=UGPPRDocID,<br/>&nbsp&nbsp&nbsp&nbsporderby=%str(UGPPRDocID, paytype, year, key_hsn)<br/>)&#59<br/>/*dose this make sense? It is a GEE binary analysis<br/>&nbsp&nbsp&nbsp&nbspon whether or not being Usual GP<br/>&nbsp&nbsp&nbsp&nbspby paytype<br/>&nbsp&nbsp&nbsp&nbsprepeated by patient<br/>&nbsp&nbsp&nbsp&nbspstratified by key_doc_num (being both NFFS, FFS),<br/>&nbsp&nbsp&nbsp&nbspnot a lot of cases though<br/>*/<br/>proc genmod data=zzg10 desc&#59<br/>&nbsp&nbsp&nbsp&nbspclass paytype (ref='FFS') UGPPRDocID  key_hsn /param=reference desc&#59<br/>&nbsp&nbsp&nbsp&nbspmodel IsUPCPF = paytype  /link=logit dist=bin type3&#59<br/>&nbsp&nbsp&nbsp&nbsprepeated subject= key_hsn  /type=exch ecovb&#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"NFFS vs FFS\" paytype 1 /exp &#59<br/>&nbsp&nbsp&nbsp&nbspstrata UGPPRDocID &#59<br/>run&#59<br/>/*the result is interesting. Being a ususal prescriber of NFFS is way unlikely to be a usual care provider<br/>&nbsp&nbsp&nbsp&nbspsuggesting that many claims are missing....<br/>*/<br/><br/><br/>/*Poisson? for these cross over group?*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=zzg10,<br/>&nbsp&nbsp&nbsp&nbsptarget=zzg11,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.UGPPRDocID, t1.payType,  <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcount(key_hsn) as Total,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsum(IsUPCPF) as N_UGPF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp),<br/>&nbsp&nbsp&nbsp&nbspgroupby=%str(UGPPRDocID, payType),<br/>&nbsp&nbsp&nbsp&nbsporderby = %str(UGPPRDocID, payType)<br/>)&#59<br/>data ZZG12&#59<br/>&nbsp&nbsp&nbsp&nbspset zzG11&#59<br/>&nbsp&nbsp&nbsp&nbsplog_total = log(total)&#59<br/>&nbsp&nbsp&nbsp&nbspPCT_UGPF = int(N_UGPF / Total * 10)&#59<br/>run&#59<br/><br/>%freq(data=zzg12, table=pct_ugpf *payType)&#59<br/><br/>title \"Poisson model \"&#59<br/><br/>proc genmod data=zzg12  &#59<br/>&nbsp&nbsp&nbsp&nbspclass payType (ref='FFS') UGPPRDocID  /param=ref desc &#59<br/>&nbsp&nbsp&nbsp&nbspmodel N_UGPF = payType /type3 dist=negbin  offset=log_total&#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"NFFS vs FFS\" payType 1 /exp&#59<br/>&nbsp&nbsp&nbsp&nbspstrata UGPPRDocID /missing&#59<br/>run&#59<br/>/*Prescribers of NFFS type are way less likely to be UGPF!*/<br/><br/><br/>s///<br/>t///","children":[{"idx":"CodeTask-glcbbQCJxljMInFi","name":"ZZH Usual prescriber's PayType to ADH","type":"TASK","NodeDescription":"///t<br/>///s<br/>/*does prescriber's pay type NFFS/FFS predict nonadherence?*/<br/><br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\vzc.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(vzc.sas7bdat)<br/>)&#59<br/><br/><br/><br/>/*1. get all UPRs of cohort memebers. Some patients had multiple UPRs*/<br/>data ZZH1&#59<br/>&nbsp&nbsp&nbsp&nbspset VZC&#59<br/>&nbsp&nbsp&nbsp&nbspformat UGPPRDocID $11.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUGPPR=1&#59<br/>&nbsp&nbsp&nbsp&nbsparray UPRs UPR1 - UPR6&#59<br/>&nbsp&nbsp&nbsp&nbspdo i = 1 to dim(UPRs)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUGPPRDocID= scan(UPRs(i),1,\":\")&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif UGPPRDocID ne 'na'  then output&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn entrydate UGPPRDocID UGPPR&#59<br/>&nbsp&nbsp&nbsp&nbsp/*if strip(UGPPRDocID) ne 'unknown'&#59 why those unknow is not deleted if the condition is put here, instead of in the 2 lines above*/<br/>run&#59<br/><br/>/*<br/>2. the next step is to indicate the paytype for UPRs identified in 1)<br/> */<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=ZZH1,<br/>&nbsp&nbsp&nbsp&nbspt2=localt.zzd,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZZH2,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.paytype),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjterm=%str(t1.UGPPRDocID = t2.key_doc_num and t1.entryDate = t2.entryDate),<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(t2.paytype ne 'UNKW' and t2.paytype ne 'NMSB')<br/>)&#59<br/><br/>/*3. from 2. get a distinct list of patients by whether or not having FFS NFFS docs (can be both)*/<br/>%distinct(data=ZZH2, target =ZZH3, vars=%str(key_hsn, PayType, UGPPR))&#59<br/>%transpose(data=zzh3, target=zzh4, rowhead=key_hsn, colhead=PayType, contents=UGPPR)&#59<br/>data ZZH5&#59<br/>&nbsp&nbsp&nbsp&nbspset ZZH4&#59<br/>&nbsp&nbsp&nbsp&nbspif ffs =1 and nffs=. then PayClass = 'f'&#59<br/>&nbsp&nbsp&nbsp&nbspif ffs=. and nffs=1 then payclass='n'&#59<br/>&nbsp&nbsp&nbsp&nbspif ffs=1 and nffs=1 then PayClass = 'b'&#59<br/>&nbsp&nbsp&nbsp&nbspif ffs=. and nffs=. then PayClass ='_'&#59<br/>run&#59<br/>%freq(data=zzh5, table=Payclass)&#59<br/><br/>/*link back to cohort*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=vzc,<br/>&nbsp&nbsp&nbsp&nbspt2=ZZH5,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZZH,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifc(t2.PayClass=\"\", \"u\", t2.PayClass) as PayClass_UPR),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>data test2&#59<br/>&nbsp&nbsp&nbsp&nbspset ZZH&#59<br/>&nbsp&nbsp&nbsp&nbspif RHA>10 then Northern=1&#59else Northern=0&#59<br/>&nbsp&nbsp&nbsp&nbspif Never_Changed=1 then any_changed=0&#59 else any_changed=1&#59<br/>&nbsp&nbsp&nbsp&nbspPre365NRxDocSAO = Pre365_Prscr_statinAHTNOH&#59<br/>&nbsp&nbsp&nbsp&nbspif Pre365NRxDocSAO> 4 then Pre365NRxDocSAO=5&#59<br/>&nbsp&nbsp&nbsp&nbspFollowUpNRXDocSAO=Followup_Prscr_statinAHTNOH&#59<br/>&nbsp&nbsp&nbsp&nbspif FollowUpNRXDocSAO> 4 then FollowUpNRXDocSAO=4&#59<br/>run&#59<br/><br/>proc genmod data=test2 desc&#59<br/>&nbsp&nbsp&nbsp&nbspclass PayClass_UPR (ref='f')  key_hsn /param=reference &#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence =PayClass_UPR/link=logit dist=bin&#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"both vs ffs \" PayClass_UPR 1 0 0 /exp &#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"nffs vs ffs \" PayClass_UPR 0 1 0 /exp &#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"unknown vs ffs \" PayClass_UPR  0 0 1 /exp &#59<br/>run&#59<br/><br/>/*macro test_ZZH is for not matched,using the not matched cohort (VZC)*/<br/>%macro test_ZZH (data=, theVar=, where=)&#59<br/>&nbsp&nbsp&nbsp&nbsp%local data theVar where&#59<br/>&nbsp&nbsp&nbsp&nbspods select parameterEstimates Estimates type3&#59<br/>&nbsp&nbsp&nbsp&nbspTitle \"&theVar\"&#59<br/>&nbsp&nbsp&nbsp&nbspproc genmod data= &data desc&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwhere &where&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspclass &theVar (ref='0') sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN') <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnorthern(ref='0') PayClass_UPR(ref='f')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPre365NRxDocSAO (ref='1')<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFollowUpNRXDocSAO(ref='1')*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmodel adherence (ref='0') = &theVar northern &theVar *northern<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspage sex_desc  qaippe resitype &theVar * resitype <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPre365NRxDocSAO<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPre365_Medclass_statinAHTNOH<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPayClass_UPR<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFollowUpNRXDocSAO*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFollowup_Medclass_statinAHTNOH*/<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNDINS_Pre365 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNHosp_Pre365 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVisits_SP_Pre365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVisits_ER_Pre365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspThirdPartyPay_Pre365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspBENZO_Pre365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPSYCHO_Pre365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTIDEP_Pre365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTICHO_Pre365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_NPD_Pre365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_SA_Pre365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_PSY_Pre365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCharlson_Index<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_ANXIETY_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_DIABETES<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_HTN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_MOOD_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_ASTHMA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_COPD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_HF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_OMH<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_SUBABUSE_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_AMI<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_IHD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_OA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_STROKE_1POP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_OSTEO_1POP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_OSTEO_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_MOODANX<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_MOODANXP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_AD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_NONRA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_OSTEO_2DRUG<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_STROKE_2HOSP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_EPAD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_RA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_SCHIZO<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_SCHIZO_EVER<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_SUICIDE_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_PD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_MS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_EPJR&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/type3 dist=bin link=logit&#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"&theVar 1 vs 0\" &theVar 1/exp&#59<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"&theVar 10 vs 00\" &theVar 0 1 0 /exp&#59*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"&theVar 11 vs 00\" &theVar 0 0 1 /exp&#59*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Northern 1 vs 0\" Northern 1 /exp&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbspods select all&#59<br/>&nbsp&nbsp&nbsp&nbsptitle&#59<br/>%mend test_ZZH&#59<br/><br/><br/>%test_ZZH(data=test2, theVar=any_changed )&#59<br/>s///<br/>t///","children":[{"idx":"CodeTask-B7bSZ43FyDvRf1Kd","name":"ZZI UPCPF's  pay type to adh","type":"TASK","NodeDescription":"///t<br/>///s<br/>/*ZZI PayTYpe to adherence */<br/>/*does prescriber's pay type NFFS/FFS predict nonadherence?*/<br/><br/>/*%VbsUnzip(*/<br/>/*&nbsp&nbsp&nbsp&nbsptgtDir=,*/<br/>/*&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\vzc.zip),*/<br/>/*&nbsp&nbsp&nbsp&nbspsrcFile=%str(vzc.sas7bdat)*/<br/>/*)&#59*/<br/><br/>%print(data=vzc)&#59<br/><br/>/*1. get all UPRs of cohort memebers. Some patients had multiple UPRs*/<br/>data ZZI1&#59<br/>&nbsp&nbsp&nbsp&nbspset VZC&#59<br/>&nbsp&nbsp&nbsp&nbspformat UGPFDocID $11.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUGPF=1&#59<br/>&nbsp&nbsp&nbsp&nbsparray UGPS UPCPF:&#59<br/>&nbsp&nbsp&nbsp&nbspdo i = 1 to dim(UGPS)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUGPFDocID= scan(UGPS(i),1,\":\")&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif UGPFDocID ne 'na' and strip(UGPFDocID) ne 'unknown' then output&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn entryDate UGPFDocID UGPF&#59<br/>&nbsp&nbsp&nbsp&nbsp/*if strip(UGPFDocID) ne 'unknown'&#59 why those unknow is not deleted if the condition is put here, instead of in the 2 lines above*/<br/>run&#59<br/><br/>/*<br/>2. the next step is to indicate the paytype for UGPs identified in 1)<br/> */<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=ZZI1,<br/>&nbsp&nbsp&nbsp&nbspt2=localt.zzd,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZZI2,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.paytype),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjterm=%str(t1.UGPFDocID = t2.key_doc_num and t1.entryDate = t2.entryDate),<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(t2.paytype ne 'UNKW' and t2.paytype ne 'NMSB')<br/>)&#59<br/><br/>/*3. from 2. get a distinct list of patients by whether or not having FFS NFFS docs (can be both)*/<br/>%distinct(data=ZZI2, target =ZZI3, vars=%str(key_hsn, PayType, UGPF))&#59<br/>%transpose(data=zzI3, target=zzI4, rowhead=key_hsn, colhead=PayType, contents=UGPF)&#59<br/>data ZZI5&#59<br/>&nbsp&nbsp&nbsp&nbspset ZZI4&#59<br/>&nbsp&nbsp&nbsp&nbspif ffs =1 and nffs=. then PayClass_UGPF = 'f'&#59<br/>&nbsp&nbsp&nbsp&nbspif ffs=. and nffs=1 then PayClass_UGPF='n'&#59<br/>&nbsp&nbsp&nbsp&nbspif ffs=1 and nffs=1 then PayClass_UGPF = 'b'&#59<br/>&nbsp&nbsp&nbsp&nbspif ffs=. and nffs=. then PayClass_UGPF ='_'&#59<br/>run&#59<br/>%freq(data=zzI5, table=PayClass_UGPF)&#59<br/><br/>/*link back to cohort*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=vzc,<br/>&nbsp&nbsp&nbsp&nbspt2=ZZI5,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZZI,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifc(t2.PayClass_UGPF=\"\", \"u\", t2.PayClass_UGPF) as PayClass_UGPF),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>data test2&#59<br/>&nbsp&nbsp&nbsp&nbspset ZZI&#59<br/>&nbsp&nbsp&nbsp&nbspif RHA>10 then Northern=1&#59else Northern=0&#59<br/>&nbsp&nbsp&nbsp&nbspif Never_Changed=1 then any_changed=0&#59 else any_changed=1&#59<br/>&nbsp&nbsp&nbsp&nbspPre365NRxDocSAO = Pre365_Prscr_statinAHTNOH&#59<br/>&nbsp&nbsp&nbsp&nbspif Pre365NRxDocSAO> 4 then Pre365NRxDocSAO=5&#59<br/>&nbsp&nbsp&nbsp&nbspFollowUpNRXDocSAO=Followup_Prscr_statinAHTNOH&#59<br/>&nbsp&nbsp&nbsp&nbspif FollowUpNRXDocSAO> 4 then FollowUpNRXDocSAO=4&#59<br/>run&#59<br/>%freq(data=test2, table=PayClass_UGPF * adherence)&#59<br/>proc genmod data=test2 desc&#59<br/>&nbsp&nbsp&nbsp&nbspclass PayClass_UGPF (ref='f')  key_hsn /param=reference &#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence =PayClass_UGPF/link=logit dist=bin&#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"both vs ffs \" PayClass_UGPF 1 0 0 /exp &#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"nffs vs ffs \" PayClass_UGPF 0 1 0 /exp &#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"unknown vs ffs \" PayClass_UGPF  0 0 1 /exp &#59<br/>run&#59<br/><br/>/*macro test_ZZI is for not matched,using the not matched cohort (VZC)*/<br/>%macro test_ZZI (data=, theVar=, where=)&#59<br/>&nbsp&nbsp&nbsp&nbsp%local data theVar where&#59<br/>&nbsp&nbsp&nbsp&nbspods select parameterEstimates Estimates type3&#59<br/>&nbsp&nbsp&nbsp&nbspTitle \"&theVar\"&#59<br/>&nbsp&nbsp&nbsp&nbspproc genmod data= &data desc&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwhere &where&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspclass &theVar (ref='0') sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN') <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnorthern(ref='0') PayClass_UGPF(ref='f')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPre365NRxDocSAO (ref='1')<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFollowUpNRXDocSAO(ref='1')*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmodel adherence (ref='0') = &theVar northern &theVar *northern<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspage sex_desc  qaippe resitype &theVar * resitype <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPre365NRxDocSAO<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPre365_Medclass_statinAHTNOH<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPayClass_UGPF<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFollowUpNRXDocSAO*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFollowup_Medclass_statinAHTNOH*/<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNDINS_Pre365 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNHosp_Pre365 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVisits_SP_Pre365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVisits_ER_Pre365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspThirdPartyPay_Pre365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspBENZO_Pre365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPSYCHO_Pre365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTIDEP_Pre365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTICHO_Pre365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_NPD_Pre365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_SA_Pre365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_PSY_Pre365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCharlson_Index<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_ANXIETY_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_DIABETES<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_HTN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_MOOD_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_ASTHMA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_COPD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_HF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_OMH<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_SUBABUSE_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_AMI<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_IHD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_OA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_STROKE_1POP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_OSTEO_1POP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_OSTEO_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_MOODANX<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_MOODANXP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_AD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_NONRA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_OSTEO_2DRUG<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_STROKE_2HOSP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_EPAD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_RA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_SCHIZO<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_SCHIZO_EVER<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_SUICIDE_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_PD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_MS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_EPJR&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/type3 dist=bin link=logit&#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"&theVar 1 vs 0\" &theVar 1/exp&#59<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"&theVar 10 vs 00\" &theVar 0 1 0 /exp&#59*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"&theVar 11 vs 00\" &theVar 0 0 1 /exp&#59*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Northern 1 vs 0\" Northern 1 /exp&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbspods select all&#59<br/>&nbsp&nbsp&nbsp&nbsptitle&#59<br/>%mend test_ZZI&#59<br/><br/><br/>%test_ZZI(data=test2, theVar=any_changed )&#59<br/>s///<br/>t///","custparents":[{"idx":"CodeTask-glcbbQCJxljMInFi"}]}],"custparents":[{"idx":"CodeTask-xeAw1hpjIYgwn1R4"}]}],"custparents":[{"idx":"CodeTask-47QaLlwY1h7Q44wY"}]}],"custparents":[{"idx":"CodeTask-kpt49up7VUF9xXPg"}]}],"custparents":[{"idx":"CodeTask-ViasKREJ44R4uJVe"}]}],"custparents":[{"idx":"CodeTask-kpvpcTvUPzprxvZV"}]}],"custparents":[{"idx":"EGTask-SF7U4hFBpxtTrllt"}]}],"custparents":[{"idx":"CodeTask-Aci5BDMMgR9LhbzQ"}]}],"custparents":[{"idx":"EGTask-mNdzSqhm2Bn1Jy5q"}]}],"custparents":[{"idx":"CodeTask-pzOsKgUBMFRexTrx"}]}],"custparents":[{"idx":"MY84805d1e-a9a8-4034-ad9d-bb995777ec44"},{"idx":"MY84805d1e-a9a8-4034-ad9d-bb995777ec44"}]},{"idx":"CodeTask-4YLbT4wXqqOCfBYD","name":"To be classified","type":"TASK","NodeDescription":"///t<br/>///s<br/>/*Other analyses, to be classified*/<br/>s///<br/>t///","children":[{"idx":"CodeTask-tJhKkouTVvdrtAk4","name":"E_MSB UPC claims","type":"TASK","NodeDescription":"///t<br/>///s<br/>/*Attach physicians to patients*/<br/>data _null_ &#59run&#59<br/>/*%VbsUnzip(*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localdataPath.\\master_msb.zip),*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_msb.sas7bdat)*/<br/>/*)&#59*/<br/><br/>/*1. MSB claims of patients in the cohort*/<br/>/*%VbsUnzip(*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_cohort.zip),*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_cohort.sas7bdat)*/<br/>/*&nbsp&nbsp&nbsp&nbsp)&#59*/<br/>/*%print(data=master_cohort)&#59*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_msb,<br/>&nbsp&nbsp&nbsp&nbspt2=master_cohort,<br/>&nbsp&nbsp&nbsp&nbsptarget=E1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.dqdate, t2.birth, t2.Qaippe, t2.resitype, t2.sex_desc),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/><br/>/*2. from above, get claims not missing doc number, and not from a slush code*/<br/>data E2&#59<br/>&nbsp&nbsp&nbsp&nbspset E1&#59<br/>&nbsp&nbsp&nbsp&nbspwhere key_doc_num ne '' and DocSlushCode ne \"Y\"&#59<br/>run&#59<br/><br/>/*test. check data, is the any slush codes<br/>&nbsp&nbsp&nbsp&nbspthe following has been tested, using the slushdoc from the physicina panel project<br/>&nbsp&nbsp&nbsp&nbspnone of the slush code were included in E2<br/>*/<br/>/*<br/>%let slushdoc='76925314678', '36825374671', '52825354677', '66925324672', '38825384673', '52825354672', <br/>'35925334677', '00825374673', '32825384674', '79825354677', '42925314672', '14925324671', '74825384673', <br/>'95825354670', '86825364672', '95925344676', '03925304670', '59925304677', '96925314677', '36925314674', <br/>'96925314672', '62825364671', '28925304679', '82825394672', '43925314674', '13825364672', '31925324677', <br/>'48925314670', '05825364678', '17825354674', '13925304670', '82825384679', '27825354670', '19825374671', <br/>'45925304670', '07925304677', '05925344673', '64925344674', '25925304675', '95925314671', '05825354679', <br/>'64925304678', '26925334671', '80925334670', '87925304678', '53825394678', '17825344678', '52925304678', <br/>'61825384670', '17825374676', '31825374679', '29825354679', '41925304676', '01825374674', '24825364678', <br/>'11345384672', '91925324677', '87825394671', '81925304678', '74925304674', '78925334671', '01825354674', <br/>'58825374670', '83925324670', '34825364677', '58925324670', '53825384670', '27825344678', '48925314676', <br/>'37825364674', '31925324675', '56925304672', '95925344670', '02825384671', '81825354676', '22925304670', <br/>'51825394672', '95925304677', '84825354674', '74925314673', '06825384675', '39825344678', '99825374677', <br/>'35925304676', '73825364675', '14925304678', '14825354671', '14925314673', '76825364676', '88925314677', <br/>'76825374677', '23825374672', '74825384670', '07925334671', '71825364676', '24925304677', '11925324678', <br/>'49925334678', '31925324674', '80925314677', '91825364675', '11825374679', '55925324679', '99925304678', <br/>'35825374676', '10925314671', '22825394677', '93825394679', '26925314679', '59825344671', '27825384672', <br/>'12925304677', '42925304671', '16825364671', '24925304679', '82925314676', '17925314671', '04825394674', <br/>'16825344676', '33925344675', '01825394671', '28925314674', '18825354679', '25925344671', '01825354670', <br/>'93925304677', '47925334678', '37925334676', '01825364673', '75925324675', '85925314673', '35925334678', <br/>'24825364679', '90925304671', '73925324677', '76825374671', '83825354675', '74825374672', '77925314672', <br/>'50925324674', '05925324670', '20925304670', '06825354674', '42825364678', '88825354673', '81825364678', <br/>'23925314673', '24925334677', '99825394677', '94825374674', '08825374674', '87925324675', '06925304678', <br/>'84825384672', '19825344672', '28825394679', '53925334671', '05925334676', '81925314671', '64825354676', <br/>'28825394673', '22925314674', '38825394679', '57925324671', '46925334672', '92925334678'&#59<br/>*/<br/>/*<br/>data test&#59<br/>&nbsp&nbsp&nbsp&nbspset E2&#59<br/>&nbsp&nbsp&nbsp&nbspwhere key_doc_num in (&slushdoc) and DocSlushCode = 'N&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn key_doc_num&#59<br/>run&#59<br/>*/<br/><br/>/*3a. From above, get claims with 365 days prior to the index(dqdate) */<br/>data E3a&#59<br/>&nbsp&nbsp&nbsp&nbspset E2&#59<br/>&nbsp&nbsp&nbsp&nbspwhere DOS between dqdate - 365 and dqdate -1&#59<br/>run&#59<br/><br/>/*3b. calculate the UPC index*/<br/>%getUPCIndex(<br/>&nbsp&nbsp&nbsp&nbspdata=E3a, <br/>&nbsp&nbsp&nbsp&nbsptarget=E3,<br/>&nbsp&nbsp&nbsp&nbspInPatientLOS = %str('B', '2', 'K', '9'), <br/>&nbsp&nbsp&nbsp&nbspoutProvMode = %str('Z'),<br/>&nbsp&nbsp&nbsp&nbspInterestedSPEC = %str('B', 'CL', 'WB')<br/>)&#59<br/><br/>/*4a. From above, get claims with 365 days since the index(dqdate) */<br/>data E4a&#59<br/>&nbsp&nbsp&nbsp&nbspset E2&#59<br/>&nbsp&nbsp&nbsp&nbspwhere DOS between dqdate  and dqdate + 365&#59<br/>run&#59<br/><br/>/*4b. calculate the UPC index*/<br/>%getUPCIndex(<br/>&nbsp&nbsp&nbsp&nbspdata=E4a, <br/>&nbsp&nbsp&nbsp&nbsptarget=E4,<br/>&nbsp&nbsp&nbsp&nbspInPatientLOS = %str('B', '2', 'K', '9'), <br/>&nbsp&nbsp&nbsp&nbspoutProvMode = %str('Z'),<br/>&nbsp&nbsp&nbsp&nbspInterestedSPEC = %str('B', 'CL', 'WB')<br/>)&#59<br/><br/>/*5. combine E3 and E4*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=E3,<br/>&nbsp&nbsp&nbsp&nbspt2=E4,<br/>&nbsp&nbsp&nbsp&nbsptarget=localt.E,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.key_hsn,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.dqdate,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.key_doc_num as doc_pre365,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.spec as spec_pre365,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.N_visits as N_visits_pre365,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.T_visits as T_Visits_pre365,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.UpcIndex as UPCIndex_pre365,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.key_doc_num as doc_fw365,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.spec as spec_fw365,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.N_visits as N_visits_fw365,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.T_visits as T_Visits_fw365,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.UpcIndex as UPCIndex_fw365, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspifn(t1.key_doc_num = t2.key_doc_num, 1,0) as sameDocPreFw<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp),&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn&nbsp&nbsp&nbsp&nbsp<br/>)&#59<br/>%freq(data=localt.E, table=sameDocPreFw)&#59<br/><br/><br/>s///<br/>t///","children":[{"idx":"CodeTask-WFWjsbb3S4nUSJrU","name":"F_MSB_PE_Provider","type":"TASK","NodeDescription":"///t<br/>///s<br/>/*F. the annual physician examination provider<br/>&nbsp&nbsp&nbsp&nbspthe FSC codes for annual physician examination are<br/>&nbsp&nbsp&nbsp&nbsp'B003' 'B064' 'B052' 'B004'<br/>*/<br/>%let PEFeeCodes =&nbsp&nbsp&nbsp&nbsp'B003' 'B064' 'B052' 'B004'&#59<br/><br/>/*%VbsUnzip(*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localdataPath.\\master_msb.zip),*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_msb.sas7bdat)*/<br/>/*)&#59*/<br/><br/>/*1. MSB claims of patients in the cohort*/<br/>/*%VbsUnzip(*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_cohort.zip),*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_cohort.sas7bdat)*/<br/>/*&nbsp&nbsp&nbsp&nbsp)&#59*/<br/>/*%print(data=master_cohort)&#59*/<br/><br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_msb,<br/>&nbsp&nbsp&nbsp&nbspt2=master_cohort,<br/>&nbsp&nbsp&nbsp&nbsptarget=F1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.dqdate),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(key_doc_num ne '' and DocSlushCode ne \"Y\")<br/>)&#59<br/><br/>/*From above, select claims before the index date (DQdate). These are MSB claims <br/>&nbsp&nbsp&nbsp&nbspwithin 1 years prior to the index*/<br/>data F2&#59<br/>&nbsp&nbsp&nbsp&nbspset F1&#59<br/>&nbsp&nbsp&nbsp&nbspif dqdate -365 le dos < dqdate&#59<br/>run&#59<br/><br/>/*From above select claims for annual physical check up*/<br/>data F3&#59<br/>&nbsp&nbsp&nbsp&nbspset F2&#59<br/>&nbsp&nbsp&nbsp&nbspif FSC in (&PEFeeCodes)&#59<br/>run&#59<br/><br/>/*sort by DOS and keep the physician who submitted the last PE check up for the cohort patient*/<br/>%sort(data=F3, sorter=key_hsn descending dos)&#59<br/>data F4a&#59<br/>&nbsp&nbsp&nbsp&nbspset F3&#59<br/>&nbsp&nbsp&nbsp&nbspby key_hsn descending dos&#59<br/>&nbsp&nbsp&nbsp&nbspif first.key_hsn then PEOrder=1&#59<br/>&nbsp&nbsp&nbsp&nbspelse PEOrder +1&#59<br/>run&#59<br/>data F4&#59<br/>&nbsp&nbsp&nbsp&nbspset F4a&#59<br/>&nbsp&nbsp&nbsp&nbspif PEOrder=1&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn key_doc_num dos&#59<br/>&nbsp&nbsp&nbsp&nbsprename key_doc_num = LastPEDoc_Pre365 dos=lastPEDate_prior&#59<br/>run&#59<br/><br/>/*link to localT.E, to add the last PE doc <br/>&nbsp&nbsp&nbsp&nbspthe target set contains the most frequently visited doc prior to the index, during follow up, and the last PE<br/>*/<br/>%print(data=localt.E)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=localT.E,<br/>&nbsp&nbsp&nbsp&nbspt2=F4,<br/>&nbsp&nbsp&nbsp&nbsptarget=F5,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.LastPEDoc_Pre365, t2.LastPEDate_Prior),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn <br/>)&#59<br/><br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=F5,<br/>&nbsp&nbsp&nbsp&nbspt2=master_cohort,<br/>&nbsp&nbsp&nbsp&nbsptarget=F6,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.dqdate, t2.birth, t2.Qaippe, t2.resitype, t2.sex_desc),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn <br/>)&#59<br/><br/>/*&nbsp&nbsp&nbsp&nbspindicate the most freq visited docs in prior365, during follow up, and the last PE provider*/<br/>data localt.F&#59<br/>&nbsp&nbsp&nbsp&nbspset F6&#59<br/>&nbsp&nbsp&nbsp&nbspif doc_pre365 =\"\" then Doc1=\"_\"&#59<br/>&nbsp&nbsp&nbsp&nbspelse Doc1=\"A\"&#59<br/>&nbsp&nbsp&nbsp&nbspif doc_fw365 = \"\" then Doc2=\"_\"&#59<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif doc_fw365 = doc_pre365 then Doc2=\"A\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse Doc2=\"B\"&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>if LastPEDoc_Pre365=\"\" then Doc3=\"_\"&#59<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif LastPEDoc_Pre365 = doc_pre365 then Doc3=\"A\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif LastPEDoc_Pre365 = doc_fw365 then Doc3=\"B\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse Doc3=\"C\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspDocPatterns = strip(Doc1) || Strip(Doc2) || Strip(Doc3)&#59<br/>&nbsp&nbsp&nbsp&nbspdrop doc1 doc2 doc3&#59<br/>run&#59<br/>%freq(data = localt.F, table=DocPatterns)&#59<br/><br/>s///<br/>t///","children":[{"idx":"CodeTask-IhdPqAjfbHPMkPbn","name":"L_LogisticModels - Copy","type":"TASK","NodeDescription":"///t<br/>///s<br/>%print(data=localt.g)&#59<br/>%print(data=localt.d)&#59<br/>proc logistic data=localt.G desc&#59<br/>&nbsp&nbsp&nbsp&nbspwhere N_visits_fw365 > 1 and N_visits_pre365 > 1 and N_StatinRx_fw365 >1&#59<br/>&nbsp&nbsp&nbsp&nbspclass DocPatterns (ref='AAAA') /param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence (ref='0') = DocPatterns upcIndex_pre365 t_visits_pre365 t_visits_fw365 upcIndex_fw365 upRindex_fw365&#59 <br/>run&#59<br/><br/>proc genmod data=localt.G desc&#59<br/>&nbsp&nbsp&nbsp&nbspwhere N_visits_fw365 > 1 and N_visits_pre365 > 1 and N_StatinRx_fw365 >1&#59<br/>&nbsp&nbsp&nbsp&nbspclass DocPatterns (ref='AAAA') doc_Pre365 /param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence (ref='0') = DocPatterns upcIndex_pre365 t_visits_pre365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt_visits_fw365 upcIndex_fw365 upRindex_fw365 /type3 dist=bin link=logit&#59 <br/>&nbsp&nbsp&nbsp&nbsprepeated subject=doc_Pre365&#59<br/>run&#59<br/><br/>proc genmod data=localt.G desc&#59<br/>&nbsp&nbsp&nbsp&nbspwhere N_visits_fw365 > 1 and N_visits_pre365 > 1 and N_StatinRx_fw365 >1 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand doc_fw365 ne ''&#59<br/>&nbsp&nbsp&nbsp&nbspclass DocPatterns (ref='AAAA') doc_fw365 /param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence (ref='0') = DocPatterns upcIndex_pre365 t_visits_pre365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt_visits_fw365 upcIndex_fw365 upRindex_fw365 /type3 dist=bin link=logit&#59 <br/>&nbsp&nbsp&nbsp&nbsprepeated subject=doc_fw365&#59<br/>run&#59<br/><br/>proc genmod data=localt.G desc&#59<br/>&nbsp&nbsp&nbsp&nbspwhere N_visits_fw365 > 1 and N_visits_pre365 > 1 and N_StatinRx_fw365 >1 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand LastPEDoc_Pre365 ne ''&#59<br/>&nbsp&nbsp&nbsp&nbspclass DocPatterns (ref='AAAA') LastPEDoc_Pre365 /param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence (ref='0') = DocPatterns upcIndex_pre365 t_visits_pre365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt_visits_fw365 upcIndex_fw365 upRindex_fw365  /type3 dist=bin link=logit&#59 <br/>&nbsp&nbsp&nbsp&nbsprepeated subject=LastPEDoc_Pre365&#59<br/>run&#59<br/><br/><br/>proc genmod data=localt.G desc&#59<br/>&nbsp&nbsp&nbsp&nbspwhere N_visits_fw365 > 1 and N_visits_pre365 > 1 and N_StatinRx_fw365 >1 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand StatinDoc_FW365 ne ''&#59<br/>&nbsp&nbsp&nbsp&nbspclass DocPatterns (ref='AAAA') StatinDoc_FW365 /param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence (ref='0') = DocPatterns upcIndex_pre365 t_visits_pre365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt_visits_fw365 upcIndex_fw365 upRindex_fw365 t_statinRx_fw365 /type3 dist=bin link=logit&#59 <br/>&nbsp&nbsp&nbsp&nbsprepeated subject=StatinDoc_FW365&#59<br/>run&#59<br/>%print(data=localt.g)&#59<br/>%freq(data=localt.g, filters=%str(docPatterns='AAAA' and N_visits_fw365 > 1 and N_visits_pre365 > 1 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand N_Statinrx_fw365 >1 and StatinDoc_FW365 ne ''), table=adherence)&#59<br/><br/>data L11&#59<br/>&nbsp&nbsp&nbsp&nbspset localt.g&#59<br/>&nbsp&nbsp&nbsp&nbspif docPatterns = 'AACD' and adherence=0&#59<br/>run&#59<br/><br/>%freq(data=L11, table=PrscrPattern)&#59<br/><br/><br/>data L12&#59<br/>&nbsp&nbsp&nbsp&nbspset localt.g&#59<br/>&nbsp&nbsp&nbsp&nbspif docPatterns = 'ABAA' and adherence=0&#59<br/>run&#59<br/><br/>%freq(data=L12, table=PrscrPattern)&#59<br/><br/>/*Poisson model*/<br/>data L20&#59<br/>&nbsp&nbsp&nbsp&nbspset localt.G&#59<br/>&nbsp&nbsp&nbsp&nbsplogTime = log(daysOnmed + daysOffmed)&#59<br/>run&#59<br/>proc genmod data=L20 desc&#59<br/>&nbsp&nbsp&nbsp&nbspwhere N_visits_fw365 > 1 and N_visits_pre365 > 1 and N_Statinrx_fw365 >1 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand StatinDoc_FW365 ne ''&#59<br/>&nbsp&nbsp&nbsp&nbspclass DocPatterns (ref='AAAA') StatinDoc_FW365 doc_fw365 /param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspmodel daysOnMed (ref='0') = DocPatterns upcIndex_pre365 t_visits_pre365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt_visits_fw365 upcIndex_fw365 upRindex_fw365 /*t_statinRx_fw365*/ <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/type3 dist=negbin offset=logTime  &#59 <br/>&nbsp&nbsp&nbsp&nbsprepeated subject=doc_fw365  &#59<br/>run&#59<br/><br/>/*What predicts the pattern 'AAAA'*/<br/>data L31&#59<br/>&nbsp&nbsp&nbsp&nbspset localt.G&#59<br/>&nbsp&nbsp&nbsp&nbspif DocPatterns = 'AAAA' then PatternOutcome = 1&#59 else PatternOutcome=0&#59<br/>&nbsp&nbsp&nbsp&nbspage = int(yrdif(birth, dqdate, \"AGE\"))&#59<br/>run&#59<br/>%print(data=L31)&#59<br/>proc genmod data=L31 desc&#59<br/>&nbsp&nbsp&nbsp&nbspwhere N_visits_fw365 > 1 and N_visits_pre365 > 1 and N_StatinRx_fw365 >1 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand StatinDoc_FW365 ne ''&#59<br/>&nbsp&nbsp&nbsp&nbspclass DocPatterns (ref='AAAA') doc_fw365 sex_desc (ref='M') qaippe (ref='1')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspresitype (ref='URBAN')/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspmodel PatternOutcome (ref='0') =  age sex_desc qaippe resitype /type3 dist=bin link=logit&#59 <br/>&nbsp&nbsp&nbsp&nbsprepeated subject=doc_fw365&#59<br/>run&#59<br/><br/>proc genmod data=L31 desc&#59<br/>&nbsp&nbsp&nbsp&nbspwhere N_visits_fw365 > 1 and N_visits_pre365 > 1 and N_StatinRx_fw365 >1 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand StatinDoc_FW365 ne ''&#59<br/>&nbsp&nbsp&nbsp&nbspclass DocPatterns (ref='AAAA') StatinDoc_FW365 sex_desc (ref='M') qaippe (ref='1')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspresitype (ref='URBAN')<br/>/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence (ref='0') = DocPatterns upcIndex_pre365 t_visits_pre365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt_visits_fw365 upcIndex_fw365 upRindex_fw365  <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspage sex_desc qaippe resitype&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/type3 dist=bin link=logit&#59 <br/>&nbsp&nbsp&nbsp&nbsprepeated subject=StatinDoc_FW365&#59<br/>run&#59<br/><br/><br/>s///<br/>t///","custparents":[{"idx":"CodeTask-WFWjsbb3S4nUSJrU"}]}],"custparents":[{"idx":"CodeTask-tJhKkouTVvdrtAk4"}]}],"custparents":[{"idx":"CodeTask-4YLbT4wXqqOCfBYD"}]}],"custparents":[{"idx":"MY84805d1e-a9a8-4034-ad9d-bb995777ec44"},{"idx":"MY84805d1e-a9a8-4034-ad9d-bb995777ec44"}]},{"idx":"CodeTask-CljcMilWauaTBrim","name":"Tools and Preparation","type":"TASK","NodeDescription":"///t<br/>///s<br/><br/>s///<br/>t///","children":[{"idx":"CodeTask-bcqKjfzgshVbRL4v","name":"studyOHDINs","type":"TASK","NodeDescription":"///t<br/>///s<br/>/*Making Study DINS*/<br/>data _null_&#59 run&#59<br/>/*Oral Hyperglycermics (OH) (AHFS 68:20:20, and with statin in the generic names)*/<br/><br/>/*get all DINs from the cleanned allDIN file*/<br/>/*the problem is that in both of the following file, there is no AHFS class (maybe because AHFS class is not unique <br/>&nbsp&nbsp&nbsp&nbspand will cause dup of DINs)*/<br/>/*%print(data = clean18.alldin_4_jas18_15oct2018)&#59*/<br/>/*%print(data = hqc.dp_drug)&#59*/<br/>/*%print(data=hqc.dp_claim)&#59*/<br/><br/>/*get the dins from dp_claim, if with AHFS of 68:20:20*/<br/>%distinct(source=hqc.dp_claim, target=_tmp1, vars=DIN, filters=%str(mjr_clss = '068' and mnr_clss='20' and sub_clss='20'))&#59<br/>/*get the dins from dp_claim_non_ben, if with AHFS of 68:20:20*/<br/>%distinct(source=hqc.dp_claim_non_ben, target=_tmp2, vars=DIN, filters=%str(mjr_clss = '068' and mnr_clss='20' and sub_clss='20'))&#59<br/>/*merge the above two to have a distince DIN list*/<br/>data _tmp3&#59<br/>&nbsp&nbsp&nbsp&nbspset _tmp1 _tmp2&#59<br/>run&#59<br/>%distinct(data=_tmp3, target=_tmp4, vars=DIN)&#59<br/><br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1= clean18.alldin_4_jas18_15oct2018,<br/>&nbsp&nbsp&nbsp&nbspt2=_tmp4,<br/>&nbsp&nbsp&nbsp&nbsptarget=remoteT.ohdins,<br/>&nbsp&nbsp&nbsp&nbspvars=t1.*,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspjvars=DIN,<br/>&nbsp&nbsp&nbsp&nbspjtype=inner<br/>)&#59<br/>/*167*/<br/><br/>/*double check to ensure that there is no dup dins in remotetT.AHTNDINs*/<br/>%distinct(data=remoteT.ohdins, target=_tmp5, vars=DIN)&#59<br/>%freq(data=remoteT.ohdins, table=gen_name)&#59<br/>/*n=167, there is no dup DINs*/<br/><br/>s///<br/>t///","children":[{"idx":"EGTask-OC42bAXMm7V8rMsY","name":"CopyDINS_ohdins","type":"TASK","custparents":[{"idx":"CodeTask-bcqKjfzgshVbRL4v"}]}],"custparents":[{"idx":"CodeTask-CljcMilWauaTBrim"}]},{"idx":"CodeTask-cb1xaxfzL97QcEcF","name":"StudyAHTNDINs","type":"TASK","NodeDescription":"///t<br/>///s<br/>/*Making Study DINS, the blood pressure lowering agents<br/>&nbsp&nbsp&nbsp&nbspin the AEC-I, and ARB class<br/>*/<br/>data _null_&#59run&#59<br/><br/>/*AEC-I and ARBs (AHFS 24:08:00, and with 'pril' 'sartan' in the generic names)*/<br/><br/>/*get all DINs from the cleanned allDIN file*/<br/>/*the problem is that in both of the following file, there is no AHFS class (maybe because AHFS class is not unique <br/>&nbsp&nbsp&nbsp&nbspand will cause dup of DINs)*/<br/>/*%print(data = clean18.alldin_4_jas18_15oct2018)&#59*/<br/>/*%print(data = hqc.dp_drug)&#59*/<br/>/*%print(data=hqc.dp_claim)&#59*/<br/><br/>/*get the dins from dp_claim, if with AHFS of 24:08*/<br/>%distinct(source=hqc.dp_claim, target=AHTNDINs_tmp1, vars=DIN, filters=%str(mjr_clss = '024' and mnr_clss='08'))&#59<br/>/*get the dins from dp_claim_non_ben, if with AHFS of 24:08*/<br/>%distinct(source=hqc.dp_claim_non_ben, target=AHTNDINs_tmp2, vars=DIN, filters=%str(mjr_clss = '024' and mnr_clss='08'))&#59<br/>/*merge the above two to have a distince DIN list*/<br/>data AHTNDINs_tmp3&#59<br/>&nbsp&nbsp&nbsp&nbspset AHTNDINs_tmp1 AHTNDINs_tmp2&#59<br/>run&#59<br/>%distinct(data=AHTNDINs_tmp3, target=AHTNDINs_tmp4, vars=DIN)&#59<br/><br/><br/>/*the above DINS are of AHFS 24:08, but not all are ACEI/ARB, those ARCE/ARB <br/>&nbsp&nbsp&nbsp&nbspmust have a genetic name containing 'pril' or 'sartan'*/<br/>/*get the DINs if the generic name contains statin*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1= clean18.alldin_4_jas18_15oct2018,<br/>&nbsp&nbsp&nbsp&nbspt2=AHTNDINs_tmp4,<br/>&nbsp&nbsp&nbsp&nbsptarget=remoteT.AHTNDINs,<br/>&nbsp&nbsp&nbsp&nbspvars=t1.*,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspjvars=DIN,<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(index(upcase(gen_name), \"PRIL\") ne 0<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspindex(upcase(gen_name), \"SARTAN\") ne 0<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/>/*n=723*/<br/>/*double check to ensure that there is no dup dins in remotetT.AHTNDINs*/<br/>%distinct(data=remoteT.AHTNDINs, target=AHTNDINs_tmp5, vars=DIN)&#59<br/>%freq(data=remoteT.AHTNDINs, table=gen_name)&#59<br/>/*n=723, there is no dup DINs*/<br/>s///<br/>t///","children":[{"idx":"EGTask-rdbuB2eZxzMerMhF","name":"CopyDINS_AHTNs","type":"TASK","custparents":[{"idx":"CodeTask-cb1xaxfzL97QcEcF"}]}],"custparents":[{"idx":"CodeTask-CljcMilWauaTBrim"}]},{"idx":"CodeTask-7bnUtUXU7R2nqpvh","name":"make PIMs","type":"TASK","NodeDescription":"///t<br/>///s<br/>/*Make PIM DINs*/<br/>/*&nbsp&nbsp&nbsp&nbspthese drugs including, Anticholinergics, antipsychotics, antidepressants, Benzodiazpines<br/>&nbsp&nbsp&nbsp&nbspDINs were provided by Laura in the dropbox, also copied to P:\\Frailty(MaxwellC)_Bio43\\Documentation\\Doc from ON team\\PIM and ChEI DINS<br/>&nbsp&nbsp&nbsp&nbspDINS were imported by the program makePIMs&nbsp&nbsp&nbsp&nbsp<br/>*/<br/>data _null_&#59run&#59<br/><br/>/*Antidepressants*/<br/>%let thePIMxlsFile =%str(P:\\Frailty(MaxwellC)_Bio43\\Documentation\\Doc from ON team\\PIM and ChEI DINS\\DIN List Antidepressants.xlsx)&#59<br/>data PIMs1&#59<br/>&nbsp&nbsp&nbsp&nbspformat DIN1 8. genName $100. DIN $8. class $100.&#59<br/>&nbsp&nbsp&nbsp&nbspdelete&#59<br/>run&#59<br/>proc import datafile=\"&thePIMxlsFile\"<br/>&nbsp&nbsp&nbsp&nbspDBMS=excel<br/>&nbsp&nbsp&nbsp&nbspout=PIMs1 (<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep= DIN genname class<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>&nbsp&nbsp&nbsp&nbspreplace<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>getnames=yes&#59<br/>sheet=\"Drugs\"&#59<br/>run&#59<br/>%print (data=PIMs1)&#59<br/><br/>/*BENZO*/<br/>%let thePIMxlsFile =%str(P:\\Frailty(MaxwellC)_Bio43\\Documentation\\Doc from ON team\\PIM and ChEI DINS\\PIM drugs in dementia - Beers 2015 for Sask.xlsx)&#59<br/>data PIMs2&#59<br/>&nbsp&nbsp&nbsp&nbspformat DIN1 8. genName $100. DIN $8. class $100.&#59<br/>&nbsp&nbsp&nbsp&nbspdelete&#59<br/>run&#59<br/>proc import datafile=\"&thePIMxlsFile\"<br/>&nbsp&nbsp&nbsp&nbspDBMS=excel<br/>&nbsp&nbsp&nbsp&nbspout=PIMs2 (<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep= DIN genname class<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>&nbsp&nbsp&nbsp&nbspreplace<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>getnames=yes&#59<br/>sheet=\"BENZO\"&#59<br/>run&#59<br/>%print (data=PIMs2)&#59<br/><br/>/*PSYCHO*/<br/>%let thePIMxlsFile =%str(P:\\Frailty(MaxwellC)_Bio43\\Documentation\\Doc from ON team\\PIM and ChEI DINS\\PIM drugs in dementia - Beers 2015 for Sask.xlsx)&#59<br/>data PIMs3&#59<br/>&nbsp&nbsp&nbsp&nbspformat DIN1 8. genName $100. DIN $8. class $100.&#59<br/>&nbsp&nbsp&nbsp&nbspdelete&#59<br/>run&#59<br/>proc import datafile=\"&thePIMxlsFile\"<br/>&nbsp&nbsp&nbsp&nbspDBMS=excel<br/>&nbsp&nbsp&nbsp&nbspout=PIMs3 (<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep= DIN genname class<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>&nbsp&nbsp&nbsp&nbspreplace<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>getnames=yes&#59<br/>sheet=\"PSYCHO\"&#59<br/>run&#59<br/>%print (data=PIMs3)&#59<br/><br/>/*ANTICHO*/<br/>%let thePIMxlsFile =%str(P:\\Frailty(MaxwellC)_Bio43\\Documentation\\Doc from ON team\\PIM and ChEI DINS\\PIM drugs in dementia - Beers 2015 for Sask.xlsx)&#59<br/>data PIMs4&#59<br/>&nbsp&nbsp&nbsp&nbspformat DIN1 8. genName $100. DIN $8. class $100.&#59<br/>&nbsp&nbsp&nbsp&nbspdelete&#59<br/>run&#59<br/>proc import datafile=\"&thePIMxlsFile\"<br/>&nbsp&nbsp&nbsp&nbspDBMS=excel<br/>&nbsp&nbsp&nbsp&nbspout=PIMs4(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep= DIN genname class<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>&nbsp&nbsp&nbsp&nbspreplace<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>getnames=yes&#59<br/>sheet=\"ANTICHO\"&#59<br/>run&#59<br/>%print (data=PIMs4)&#59<br/><br/>data PIMS_all&#59<br/>&nbsp&nbsp&nbsp&nbspset PIMs1  PIMs2 PIMs3 PIMs4&#59<br/>run&#59<br/><br/>/*sort and remove the dup DINS per class*/<br/>%sort(data=PIMS_all, sorter=class DIN)&#59<br/>data localt.PIMs&#59<br/>&nbsp&nbsp&nbsp&nbspset PIMS_all&#59<br/>&nbsp&nbsp&nbsp&nbspby class DIN&#59<br/>&nbsp&nbsp&nbsp&nbspif first.DIN&#59<br/>run&#59<br/><br/>s///<br/>t///","custparents":[{"idx":"CodeTask-CljcMilWauaTBrim"}]},{"idx":"CodeTask-fugAN6WsoMWNgKfZ","name":"StudyDINs","type":"TASK","NodeDescription":"///t<br/>///s<br/>/*Making Study DINS*/<br/>data _null_&#59 run&#59<br/>/*Statin (AHFS 24:06:00, and with statin in the generic names)*/<br/><br/>/*get all DINs from the cleanned allDIN file*/<br/>/*the problem is that in both of the following file, there is no AHFS class (maybe because AHFS class is not unique <br/>&nbsp&nbsp&nbsp&nbspand will cause dup of DINs)*/<br/>/*%print(data = clean18.alldin_4_jas18_15oct2018)&#59*/<br/>/*%print(data = hqc.dp_drug)&#59*/<br/>/*%print(data=hqc.dp_claim)&#59*/<br/><br/>/*get the dins from dp_claim, if with AHFS of 24:06*/<br/>%distinct(source=hqc.dp_claim, target=_tmp1, vars=DIN, filters=%str(mjr_clss = '024' and mnr_clss='06'))&#59<br/>/*get the dins from dp_claim_non_ben, if with AHFS of 24:06*/<br/>%distinct(source=hqc.dp_claim_non_ben, target=_tmp2, vars=DIN, filters=%str(mjr_clss = '024' and mnr_clss='06'))&#59<br/>/*merge the above two to have a distince DIN list*/<br/>data _tmp3&#59<br/>&nbsp&nbsp&nbsp&nbspset _tmp1 _tmp2&#59<br/>run&#59<br/>%distinct(data=_tmp3, target=_tmp4, vars=DIN)&#59<br/><br/><br/>/*the above DINS are of AHFS 24:06, but not all are Statins, those statins must have a genetic name containing 'statin'*/<br/>/*get the DINs if the generic name contains statin*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1= clean18.alldin_4_jas18_15oct2018,<br/>&nbsp&nbsp&nbsp&nbspt2=_tmp4,<br/>&nbsp&nbsp&nbsp&nbsptarget=remoteT.StatinDINs,<br/>&nbsp&nbsp&nbsp&nbspvars=t1.*,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspjvars=DIN,<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(index(upcase(gen_name), \"STATIN\") ne 0)<br/>)&#59<br/>/*n=301 as of 20191120*/<br/>/*double check to ensure that there is no dup dins in remotetT.StatinDINs*/<br/>%distinct(data=remoteT.StatinDINs, target=_tmp5, vars=DIN)&#59<br/>/*n=301, there is no dup DINs*/<br/>s///<br/>t///","children":[{"idx":"EGTask-CV6ZbaPGihGVgjE1","name":"CopyDINS to Local","type":"TASK","custparents":[{"idx":"CodeTask-fugAN6WsoMWNgKfZ"}]}],"custparents":[{"idx":"CodeTask-CljcMilWauaTBrim"}]},{"idx":"CodeTask-lm45gKn6MFkGPZo4","name":"Local Settings","type":"TASK","NodeDescription":"///t<br/>///s<br/>/*include macro tools in drive S<br/>&nbsp&nbsp&nbsp&nbsp/LRECL to allow the length of a statement line to be 32767 bytes instead of the default 256<br/>*/<br/>%include \"S:\\Collaborative_researchers\\Shenzhen\\My Project\\Projects\\DoNotDelete Common Macros\\MyMacros.sas\" /LRECL=32767&#59<br/>%INCLUDE 'R:\\Macros\\StatAnal\\ICD9_E_CH_dxtype.sas' /LRECL=32767&#59<br/>%INCLUDE 'R:\\Macros\\StatAnal\\ICD9_E_EX_dxtype.sas' /LRECL=32767&#59<br/>%INCLUDE 'R:\\Macros\\StatAnal\\ICD10_CH_dxtype.sas' /LRECL=32767&#59 <br/>%INCLUDE 'R:\\Macros\\StatAnal\\ICD10_EX_dxtype.sas' /LRECL=32767&#59<br/>%INCLUDE 'R:\\Macros\\Util\\ExpandLst.sas' /LRECL=32767&#59<br/>%include 'R:\\Macros\\Util\\VarExist.sas' /LRECL=32767&#59<br/>%include 'R:\\Macros\\Util\\IsEmptyDS.sas' /LRECL=32767&#59<br/><br/><br/>%global settingsXls h_Infoxls AnalyticalReport DataReport dicXls&#59<br/><br/>/*assign the address for the exchange folder between local and remote*/<br/>%let exchangeDir = S:\\Shenzhen\\Exchange_Local_Remote&#59<br/>libname transLib \"&exchangeDir\"&#59 <br/><br/>/*the xlsx file with import information*/<br/>%let settingsXls =Z:\\My Project\\Projects\\PhD Thesis\\StatinCohort\\Input\\Forms\\InputForm_StatinCohortPhD.xlsm&#59<br/>%let h_Infoxls = %str(R:\\Data Warehouse\\Data Manuals\\Hospital %(CIHI DAD%)\\cihi_hosps_master_file.xlsx)&#59<br/><br/>/*the target files in local drive S<br/>&nbsp&nbsp&nbsp&nbspsee A_import_settings<br/>&nbsp&nbsp&nbsp&nbspthe local data, target, reports path are input from the xls file<br/>*/<br/><br/>/*the target files in local drive S*/<br/>/*%let localTargetPath=S:\\Shenzhen\\Projects\\NewCohortCreating\\Target&#59*/<br/>/*%let localDataPath=S:\\Shenzhen\\Projects\\NewCohortCreating\\Data&#59 /*the folder to save requested raw data files*/*/<br/>/*libname localT \"&localTargetPath\"&#59*/<br/><br/>/*the report in local drive S*/<br/>%let localReportPath=S:\\Shenzhen\\Projects\\NewCohortCreating\\Reports&#59<br/>/*libname localR \"&localReportPath\"&#59*/<br/>%let AnalyticalReport=Analytical_Report_StatinCohortPhD.xlsx&#59<br/>%let DataReport=DataSum_Report_StatinCohortPhD.xlsx&#59<br/><br/>/*The following steps are to import file and var description in the data dictionary *******/<br/>%let dicXls = S:\\Reference\\Data Warehouse\\Data Manuals\\General Information\\HQC_MOH_DW_data_dictionary.xlsx&#59<br/><br/>%put >>> the local work directory is at %sysfunc(pathname(work))&#59<br/><br/>%let theChronicConditionDataPath=P:\\Chronics_SKPop(YaoS)_142\\Output\\Result data&#59<br/>%let theChronicConditionData = popdata_allepi_26mar19&#59<br/><br/><br/><br/>s///<br/>t///","children":[{"idx":"EGTask-oyLU9215za4Elsgd","name":"Copy Macro file to Remote Server","type":"TASK","children":[{"idx":"CodeTask-8XQczBciSUyozSiJ","name":"Remote settings","type":"TASK","NodeDescription":"///t<br/>///s<br/>/*what is the diff between msb_doctor, and msb_doctor_mobility*/<br/><br/><br/>%include \"/sasdata/hisc/shared_data/HQC_share/Shenzhen/Projects/DoNotDelete Common Macros/MyMacros.sas\" /LRECL=32767&#59<br/>%INCLUDE '/SAS_data/dw0/HQC_share/Clean/library_dw0.sas' /LRECL=32767&#59<br/>%INCLUDE '/SAS_data/dw0/HQC_Data_Lab/Macros/DataManip/Extract_MSB.sas' /LRECL=32767&#59<br/>%INCLUDE '/SAS_data/dw0/HQC_Data_Lab/Macros/StatAnal/ICD9_E_CH_dxtype.sas' /LRECL=32767&#59<br/>%INCLUDE '/SAS_data/dw0/HQC_Data_Lab/Macros/StatAnal/ICD9_E_EX_dxtype.sas' /LRECL=32767&#59<br/>%INCLUDE '/SAS_data/dw0/HQC_Data_Lab/Macros/StatAnal/ICD10_CH_dxtype.sas' /LRECL=32767&#59 <br/>%INCLUDE '/SAS_data/dw0/HQC_Data_Lab/Macros/StatAnal/ICD10_EX_dxtype.sas' /LRECL=32767&#59<br/>%INCLUDE '/SAS_data/dw0/HQC_Data_Lab/Macros/Util/ExpandLst.sas' /LRECL=32767&#59<br/>%include '/SAS_data/dw0/HQC_Data_Lab/Macros/Util/VarExist.sas' /LRECL=32767&#59<br/>%include '/SAS_data/dw0/HQC_Data_Lab/Macros/Util/IsEmptyDS.sas' /LRECL=32767&#59<br/><br/>libname Clean \"/sasdata/hisc/shared_data/HQC_share/Clean\"&#59<br/><br/>libname Clean17 \"/sasdata/hisc/shared_data/HQC_share/Clean/2017 Data/Clean files\"&#59<br/>libname Clean18 \"/sasdata/hisc/shared_data/HQC_share/Clean/2018 Data/Clean files\"&#59<br/><br/>/*do not use the folder 'exchange'. That one is quite confusing*/<br/><br/>/*assign the address for the exchange folder between local and remote<br/>&nbsp&nbsp&nbsp&nbsptheexChangeDir is the LOCAL exchange folder<br/>*/<br/>%let exchangeDir = S:\\Shenzhen\\Exchange_Local_Remote&#59<br/>libname transLib \"&exchangeDir\"&#59 <br/><br/>%let Rexchange =  /sasdata/hisc/shared_data/HQC_share/Shenzhen/FileExchangeBetweenLocalAndRemote&#59<br/>libname RexLib \"&RExchange\"&#59<br/><br/>/*%let localDataPath=S:\\Shenzhen\\Projects\\NewCohortCreating\\Data&#59*/ /* the folder to save requested raw data files*/<br/><br/>/*set raw file names*/<br/>%global<br/>&nbsp&nbsp&nbsp&nbspexchangeDir Rexchange  dp_benefitFile dp_nonbenefitFile dp_specFile ed_a2012File ed_b2012File<br/>&nbsp&nbsp&nbsp&nbsphospitalFile MSBFile MSB_DFile MSB_DocInfoFile PHRS_InfoFile PHRS_CovFile PHRS_RSDCFile PHRS_ArrvFile<br/>&nbsp&nbsp&nbsp&nbspPHRS_ResiFile PHRS_Resi_cleanFile PHRS_retrFile VerfMortFile MDS_LTC_File AnalyticalReport DataReport alldinfile<br/>&#59<br/><br/>%let dp_benefitFile=hqc.dp_claim&#59<br/>%let dp_nonbenefitFile=hqc.dp_claim_non_ben&#59<br/>%let dp_specFile = hqc.dp_drug&#59<br/><br/>%let ed_a2012File=hqc.ED_F_2012&#59<br/>%let ed_b2012File=hqc.nacrs&#59<br/><br/>%let hospitalFile=clean18.cihi_eoc_3_jfm18_01aug2018&#59<br/><br/>%let MSBFile=hqc.MSB_BILLING&#59<br/>%let MSB_DFile=hqc.MSB_Doctor&#59<br/>%let MSB_DocInfoFile=hqc.MSB_DOCTOR_MOBILITY&#59<br/><br/>%let PHRS_InfoFile = hqc.PHRS_PERS_INFO&#59<br/>%let PHRS_CovFile = hqc.PHRS_PERS_PROG&#59<br/>%let PHRS_RSDCFile=hqc.phrs_pers_rsdc&#59<br/>%let PHRS_ArrvFile = HQC.phrs_pers_arrv&#59<br/>%let PHRS_ResiFile = HQC.phrs_pers_resc&#59<br/>%let PHRS_Resi_cleanFile=clean17.PHRS_PERS_RESC_3_AMJ17_02NOV2017&#59 /*this is the last file with income quintile, AMJ = Apr May Jun*/<br/>%let PHRS_retrFile = HQC.PHRS.PERS_RETR&#59<br/>%let VerfMortFile = clean18.phrs_dths_3_jfm18_15aug2018&#59<br/>%let MDS_LTC_File = hqc.MDS_ASSESSMENT_F_2015&#59<br/><br/>%let AnalyticalReport=Analytical_Report_StatinCohortPhD.xlsx&#59<br/>%let DataReport=DataSum_Report_StatinCohortPhD.xlsx&#59<br/><br/>/*see B_remote setting, the folder is defined in and input from the input xls file*/<br/><br/>/*the source files on remote server*/<br/>/*%let remoteSourcePath=/sasdata/hisc/shared_data/HQC_share/Shenzhen/Projects/NewCohortCreating/Source&#59*/<br/>/*libname remoteS \"&remoteSourcePath\"&#59*/<br/>/*the target files on remote server*/<br/>/*%let remoteTargetPath=/sasdata/hisc/shared_data/HQC_share/Shenzhen/Projects/NewCohortCreating/Target&#59*/<br/>/*libname remoteT \"&remoteTargetPath\"&#59*/<br/><br/>/*the report on remote server*/<br/>/*%let remoteReportPath=/sasdata/hisc/shared_data/HQC_share/Shenzhen/Projects/NewCohortCreating/Reports&#59*/<br/>/*libname remoteR \"&remoteReportPath\"&#59*/<br/><br/>/*include the raw file extracing macros*/<br/>%let alldinfile=clean17.alldin_4_jas17_03oct2017&#59<br/>%INCLUDE '/SAS_data/dw0/HQC_Data_Lab/Macros/DataManip/Extract_CIHI.sas' /LRECL=32767&#59<br/>%INCLUDE '/SAS_data/dw0/HQC_Data_Lab/Macros/DataManip/Extract_MSB.sas' /LRECL=32767&#59<br/>%INCLUDE '/SAS_data/dw0/HQC_Data_Lab/Macros/DataManip/Extract_Drug.sas' /LRECL=32767&#59<br/>%INCLUDE '/SAS_data/dw0/HQC_Data_Lab/Macros/DataManip/demog_assign.sas' /LRECL=32767&#59<br/>%INCLUDE '/SAS_data/dw0/HQC_Data_Lab/Macros/DataManip/Extract_Drug_non_ben_test.sas' /LRECL=32767&#59<br/>%INCLUDE '/SAS_data/dw0/HQC_Data_Lab/Macros/Util/Addquotes.sas' /LRECL=32767&#59<br/>%INCLUDE '/SAS_data/dw0/HQC_Data_Lab/Macros/Util/reformat_datevars.sas' /LRECL=32767&#59<br/>%include '/SAS_data/dw0/HQC_Data_Lab/Macros/DataManip/Extract_Drug_non_ben_test.sas' /LRECL=32767&#59<br/>%include '/SAS_data/dw0/HQC_share/Xinya/Macros/GEO_INCQTL_assign.sas' /LRECL=32767&#59<br/><br/>/*the following is for calculating the Charlson-elixer score*/<br/>%INCLUDE '/SAS_data/dw0/HQC_share/Clean/library_dw0.sas' /LRECL=32767&#59<br/>%INCLUDE '/SAS_data/dw0/HQC_Data_Lab/Macros/DataManip/Extract_MSB.sas' /LRECL=32767&#59<br/>%INCLUDE '/SAS_data/dw0/HQC_Data_Lab/Macros/StatAnal/ICD9_E_CH_dxtype.sas' /LRECL=32767&#59<br/>%INCLUDE '/SAS_data/dw0/HQC_Data_Lab/Macros/StatAnal/ICD9_E_EX_dxtype.sas' /LRECL=32767&#59<br/>%INCLUDE '/SAS_data/dw0/HQC_Data_Lab/Macros/StatAnal/ICD10_CH_dxtype.sas' /LRECL=32767&#59 <br/>%INCLUDE '/SAS_data/dw0/HQC_Data_Lab/Macros/StatAnal/ICD10_EX_dxtype.sas' /LRECL=32767&#59<br/>%INCLUDE '/SAS_data/dw0/HQC_Data_Lab/Macros/Util/ExpandLst.sas' /LRECL=32767&#59<br/>%include '/SAS_data/dw0/HQC_Data_Lab/Macros/Util/VarExist.sas' /LRECL=32767&#59<br/>%include '/SAS_data/dw0/HQC_Data_Lab/Macros/Util/IsEmptyDS.sas' /LRECL=32767&#59<br/><br/>%put >>> the remote work directory is at %sysfunc(pathname(work))&#59<br/><br/><br/>s///<br/>t///","children":[{"idx":"CodeTask-kdXNatjk26MJ53wd","name":"A_import settings","type":"TASK","NodeDescription":"///t<br/>///s<br/>/*Import settings from the setting xls file (&settingXls)*/<br/>data _null_&#59run&#59<br/><br/>%global  localParentFolder localDataFolder localReportFolder localTargetPath localDataPath localReportPath<br/>RemoteParentFolder RemoteSourcePath DataStartDate DataEndDate&#59<br/><br/>Filename setXls \"&settingsXls\"&#59<br/><br/>/*create a folder dedicated for the project (by rem id?)*/<br/>/*copy a back up of the setting xls file in the log directory*/<br/>/*add a file for log (create date, etc)*/<br/><br/>/*1.Import the dates*/<br/>/*always create an empty data set first<br/>&nbsp&nbsp&nbsp&nbspotherwise, when the source excel table contains 0 records, the import proc won't run,<br/>&nbsp&nbsp&nbsp&nbspthe setting file won't be created<br/>&nbsp&nbsp&nbsp&nbsplater, no files were copied to the remote site to overwrite the old files<br/>&nbsp&nbsp&nbsp&nbspAs such, the old setting files will be used in getting data, which is wrong <br/>*/<br/>data translib.a1_MasterInput&#59<br/>&nbsp&nbsp&nbsp&nbspformat Items $100. Values $100.&#59<br/>&nbsp&nbsp&nbsp&nbspdelete&#59<br/>run&#59<br/>proc import datafile=\"&settingsXls\"<br/>&nbsp&nbsp&nbsp&nbspDBMS=excel<br/>&nbsp&nbsp&nbsp&nbspout=translib.a1_MasterInput<br/>&nbsp&nbsp&nbsp&nbspreplace<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>getnames=yes&#59<br/>sheet=\"MasterInput\"&#59<br/>run&#59<br/>%print(data=translib.a1_MasterInput)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*Determine the local data/target/reports folder*/<br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset translib.a1_MasterInput&#59<br/>&nbsp&nbsp&nbsp&nbspif Items = 'LocalFolder'&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('localParentFolder', Value)&#59<br/>run&#59<br/><br/>%let localParentFolder=%sysfunc(strip(&localParentFolder))&#59<br/>%let localTargetPath=&localParentFolder.\\Output\\Result data&#59<br/>%put >>> &localTargetPath&#59<br/>%let localDataPath=&localParentFolder.\\Data&#59 /*the folder to save requested raw data files*/<br/>libname localT \"&localTargetPath\"&#59<br/>libname localD \"&localDataPath\"&#59<br/>%put >>> &localDataPath&#59<br/>/*the report in local drive S*/<br/>%let localReportPath=&localParentFolder.\\Output\\Reports&#59<br/>%put >>> &localReportPath&#59<br/>libname localR \"&localReportPath\"&#59<br/><br/><br/><br/>/*2.Import the sourcefiles and fields*/<br/>data translib.A2_CohortDataVars&#59<br/>&nbsp&nbsp&nbsp&nbspformat final_status 8. file_nick_name $100. VarName_in_Raw_File $100.&#59<br/>&nbsp&nbsp&nbsp&nbspdelete&#59<br/>run&#59<br/>proc import datafile=\"&settingsXls\"<br/>&nbsp&nbsp&nbsp&nbspDBMS=excel<br/>&nbsp&nbsp&nbsp&nbspout=translib.A2_CohortDataVars (<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwhere=(Final_status=1) <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep= final_status file_nick_name VarName_in_Raw_File<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>&nbsp&nbsp&nbsp&nbspreplace<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>getnames=yes&#59<br/>sheet=\"StudyFields\"&#59<br/>run&#59<br/><br/><br/>/*3 import the case def ICD code list*/<br/>data translib.a3_ICDDx&#59<br/>&nbsp&nbsp&nbsp&nbspformat Source_file $100. Code_Version $100. Code $100. Disease $100. Description $100.&#59<br/>&nbsp&nbsp&nbsp&nbspdelete&#59<br/>run&#59<br/>proc import datafile=\"&settingsXls\"<br/>&nbsp&nbsp&nbsp&nbspDBMS=excel<br/>&nbsp&nbsp&nbsp&nbspout=translib.a3_ICDDx (where=(code ne \"\") keep= Source_file Code_Version Code Disease Description)<br/>&nbsp&nbsp&nbsp&nbspreplace<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>getnames=yes&#59<br/>sheet=\"ICD_Codes\"&#59<br/>run&#59<br/>%print(data=translib.a3_ICDDx)&#59<br/><br/>/*4 import the case def procedure code list*/<br/>data translib.a4_IntvnDx&#59<br/>&nbsp&nbsp&nbsp&nbspformat Source_file $100. Code_Version $100. Code $100. Disease $100. Description $100.&#59<br/>&nbsp&nbsp&nbsp&nbspdelete&#59<br/>run&#59<br/>proc import datafile=\"&settingsXls\"<br/>&nbsp&nbsp&nbsp&nbspDBMS=excel<br/>&nbsp&nbsp&nbsp&nbspout=translib.a4_IntvnDx (where=(code ne \"\") keep=Source_file Code_Version Code Disease Description)<br/>&nbsp&nbsp&nbsp&nbspreplace<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>getnames=yes&#59<br/>sheet=\"Procedure_Codes\"&#59<br/>run&#59<br/>%print(data=translib.a4_IntvnDx)&#59<br/><br/>/*5 import the case def SK fee for service code list*/<br/>data translib.a5_FSC&#59<br/>&nbsp&nbsp&nbsp&nbspformat Source_file $100. Code_Version $100. Code $100. Disease $100. Description $100.&#59<br/>&nbsp&nbsp&nbsp&nbspdelete&#59<br/>run&#59<br/>proc import datafile=\"&settingsXls\"<br/>&nbsp&nbsp&nbsp&nbspDBMS=excel<br/>&nbsp&nbsp&nbsp&nbspout=translib.a5_FSC (where=(code ne \"\") keep=Source_file Code_Version Code Disease Description)<br/>&nbsp&nbsp&nbsp&nbspreplace<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>getnames=yes&#59<br/>sheet=\"SK_fee_Codes\"&#59<br/>run&#59<br/>%print(data=translib.a5_FSC)&#59<br/><br/>/*6 import the case def DINPIN list*/<br/>data translib.a6_DINDx&#59<br/>&nbsp&nbsp&nbsp&nbspformat Therapeutic_Class $100. Generic_Name $100. DIN $100. Disease $100. Description $100.&#59<br/>&nbsp&nbsp&nbsp&nbspdelete&#59<br/>run&#59<br/>proc import datafile=\"&settingsXls\"<br/>&nbsp&nbsp&nbsp&nbspDBMS=excel<br/>&nbsp&nbsp&nbsp&nbspout=translib.a6_DINDx (where=(DIN ne \"\") keep=Therapeutic_Class Generic_Name DIN Disease Description)<br/>&nbsp&nbsp&nbsp&nbspreplace<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>getnames=yes&#59<br/>sheet=\"DINs\"&#59<br/>run&#59<br/>%print(data=translib.a6_DINDx)&#59<br/><br/>/*7 import the list of source files for case definition*/<br/>data translib.a7_DxFiles&#59<br/>&nbsp&nbsp&nbsp&nbspformat DxFiles $100. Inclusion 8.&#59<br/>&nbsp&nbsp&nbsp&nbspdelete&#59<br/>run&#59<br/>proc import datafile=\"&settingsXls\"<br/>&nbsp&nbsp&nbsp&nbspDBMS=excel<br/>&nbsp&nbsp&nbsp&nbspout=translib.a7_DxFiles (where=(Inclusion =1) )<br/>&nbsp&nbsp&nbsp&nbspreplace<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>getnames=yes&#59<br/>sheet=\"DxFiles\"&#59<br/>run&#59<br/>%print(data=translib.a7_DxFiles)&#59<br/><br/>/*8 import the list of additional request*/<br/>data translib.a8_AddRequest&#59<br/>&nbsp&nbsp&nbsp&nbspformat Class $100. Description $100. SourceData $100. Syntax $100.&#59<br/>&nbsp&nbsp&nbsp&nbspdelete&#59<br/>run&#59<br/>proc import datafile=\"&settingsXls\"<br/>&nbsp&nbsp&nbsp&nbspDBMS=excel<br/>&nbsp&nbsp&nbsp&nbspout=translib.a8_AddRequest  (where=(syntax ne '') )<br/>&nbsp&nbsp&nbsp&nbspreplace<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>getnames=yes&#59<br/>sheet=\"Additional request\"&#59<br/>run&#59<br/>%print(data=translib.a8_AddRequest)&#59<br/><br/>/*9 import cohort exclusion criteria*/<br/>data translib.a9_CohortExclusion&#59<br/>&nbsp&nbsp&nbsp&nbspformat Source $100. Criteria $100. Syntax $100. Description $100.&#59<br/>&nbsp&nbsp&nbsp&nbspdelete&#59<br/>run&#59<br/>proc import datafile=\"&settingsXls\"<br/>&nbsp&nbsp&nbsp&nbspDBMS=excel<br/>&nbsp&nbsp&nbsp&nbspout=translib.a9_CohortExclusion<br/>&nbsp&nbsp&nbsp&nbspreplace<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>getnames=yes&#59<br/>sheet=\"cohort_exclusion\"&#59<br/>run&#59<br/>%print(data=translib.a9_CohortExclusion)&#59<br/><br/>%put >>> &h_Infoxls&#59<br/><br/>/*<br/>&nbsp&nbsp&nbsp&nbspif the source xls file is open by other users, the import program may report error<br/>&nbsp&nbsp&nbsp&nbspin that case, open the Excel application (do not have to open the source xls file, just the Excel App), <br/>&nbsp&nbsp&nbsp&nbspthen run the following import program<br/>*/<br/>/*10 import hospital info*/<br/>proc import datafile=\"&h_Infoxls\"<br/>&nbsp&nbsp&nbsp&nbspDBMS=excel<br/>&nbsp&nbsp&nbsp&nbspout=translib.a10_hospInfo<br/>&nbsp&nbsp&nbsp&nbspreplace<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>getnames=yes&#59<br/>sheet=\"facilities\"&#59<br/>run&#59<br/>%print(data=translib.a10_hospInfo)&#59<br/><br/><br/>/*import ed data description*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc import datafile=\"&dicXls\"<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDBMS=excel<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspout=importDIc_tmp1 (where = (f8='Y')) /*if required by HQC*/<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspreplace<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgetnames=no&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsheet=\"ed (NACRS)\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%print(data=importDIc_tmp1)&#59*/<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata importDIc_tmp2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat  filename $100. varname $100. description $10000. notes $10000.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilename = 'master_ed_a2012'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset importDIc_tmp1 (firstOBS=3)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*strip: removing both leading and tailing spaces<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptrim: removing tailing spaces<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcompress removing all spaces (including those in the string)*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf6=strip(upcase(f6))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf7=strip(upcase(f7))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf10=strip(upcase(f10))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep filename varName description notes &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*don't use rename, as the length f6-f8 is limited*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvarName=f6&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdescription=f7&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnotes=f10&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif not (f6='' and f7 ='' and f10 ='')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>/****************************************************************/<br/>&nbsp&nbsp&nbsp&nbsp<br/>/*import hospital data description*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc import datafile=\"&dicXls\"<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDBMS=excel<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspout=importDIc_tmp11<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspreplace<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgetnames=no&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsheet=\"Hosp (DAD)\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%print(data=importDIc_tmp11)&#59*/<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata importDIc_tmp12&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat  filename $100. varname $100. description $10000. notes $10000. metadoc $20.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilename = 'master_hosp'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset importDIc_tmp11 (firstOBS=3)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*strip: removing both leading and tailing spaces<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptrim: removing tailing spaces<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcompress removing all spaces (including those in the string)*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf5=strip(upcase(f5))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf14=strip(upcase(f14))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf15=strip(upcase(f15))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf16=strip(upcase(f16))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep filename varName description notes metadoc&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*don't use rename, as the length f6-f8 is limited*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvarName=f5&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdescription=f15&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnotes=f14&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmetadoc=f16&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif not (f5='' and f14 ='' and f15 ='' and f16='')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>/****************************************************************/<br/>&nbsp&nbsp&nbsp&nbsp<br/>/*import phrs data description*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc import datafile=\"&dicXls\"<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDBMS=excel<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspout=importDIc_tmp21<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspreplace<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgetnames=no&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsheet=\"PHRS\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%print(data=importDIc_tmp21)&#59*/<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata importDIc_tmp22&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat  filename $100. varname $100. description $10000. notes $10000. metadoc $20.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilename = 'master_phrs_'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset importDIc_tmp21 (firstOBS=3)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*strip: removing both leading and tailing spaces<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptrim: removing tailing spaces<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcompress removing all spaces (including those in the string)*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf4=strip(upcase(f4))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf9=strip(upcase(f9))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf8=strip(upcase(f8))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf10=strip(upcase(f10))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep filename varName description notes metadoc&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*don't use rename, as the length f6-f8 is limited*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvarName=f4&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdescription=f9&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnotes=f8&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmetadoc=f10&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif not (f4='' and f9 ='' and f8 ='' and f10='')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>/****************************************************************/<br/>&nbsp&nbsp&nbsp&nbsp<br/>/*import drug claim variable description*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc import datafile=\"&dicXls\"<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDBMS=excel<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspout=importDIc_tmp31<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspreplace<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgetnames=no&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsheet=\"Drug plan\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%print(data=importDIc_tmp31)&#59*/<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata importDIc_tmp32&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat  filename $100. varname $100. description $10000. notes $10000. metadoc $20.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilename = 'master_dp_'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset importDIc_tmp31 (firstOBS=3)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*strip: removing both leading and tailing spaces<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptrim: removing tailing spaces<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcompress removing all spaces (including those in the string)*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf4=strip(upcase(f4))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf10=strip(upcase(f10))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf9=strip(upcase(f9))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf11=strip(upcase(f11))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep filename varName description notes metadoc&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*don't use rename, as the length f6-f8 is limited*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvarName=f4&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdescription=f10&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnotes=f9&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmetadoc=f11&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif not (f4='' and f9 ='' and f11 ='' and f10='')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>/****************************************************************/<br/><br/>/*import description of msb billing variables*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc import datafile=\"&dicXls\"<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDBMS=excel<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspout=importDIc_tmp41<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspreplace<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgetnames=no&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsheet=\"Phys Claims (MSB)\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%print(data=importDIc_tmp41)&#59*/<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata importDIc_tmp42&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat  filename $100. varname $100. description $10000. notes $10000. metadoc $20.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilename = 'master_msb'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset importDIc_tmp41 (firstOBS=4)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*strip: removing both leading and tailing spaces<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptrim: removing tailing spaces<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcompress removing all spaces (including those in the string)*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf4=strip(upcase(f4))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf10=strip(upcase(f10))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf9=strip(upcase(f9))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf11=strip(upcase(f11))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep filename varName description notes metadoc&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*don't use rename, as the length f6-f8 is limited*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvarName=f4&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdescription=f10&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnotes=f9&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmetadoc=f11&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif not (f4='' and f9 ='' and f11 ='' and f10='')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>/****************************************************************/<br/><br/>/*import description of msb mobility doc info variables*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc import datafile=\"&dicXls\"<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDBMS=excel<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspout=importDIc_tmp51<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspreplace<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgetnames=no&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsheet=\"Phys Mobility (MSB docs)\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%print(data=importDIc_tmp51)&#59*/<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata importDIc_tmp52&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat  filename $100. varname $100. description $10000. notes $10000. metadoc $20.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilename = 'master_msb'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset importDIc_tmp51 (firstOBS=4)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*strip: removing both leading and tailing spaces<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptrim: removing tailing spaces<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcompress removing all spaces (including those in the string)*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf4=strip(upcase(f4))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf10=strip(upcase(f10))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf9=strip(upcase(f9))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf11=strip(upcase(f11))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep filename varName description notes metadoc&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*don't use rename, as the length f6-f8 is limited*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvarName=f4&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdescription=f10&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnotes=f9&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmetadoc=f11&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif not (f4='' and f9 ='' and f11 ='' and f10='')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>/****************************************************************/<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp/*create an emtpy data set for var description*/<br/>&nbsp&nbsp&nbsp&nbspData importDIc_tmp91&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat  filename $100. varname $100. description $10000. notes $10000. metadoc $20.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp/*Append  descriptions from source data files*/<br/>&nbsp&nbsp&nbsp&nbspdata importDIc_tmp91&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset importDIc_tmp91 importDIc_tmp2 importDIc_tmp12 importDIc_tmp22 importDIc_tmp32 importDIc_tmp42 importDIc_tmp52&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*for those like 'dx_code_1 to dx_code_25', truncate the var names before the first space<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspalso, for those like 'D000360,V1' in metadoc, truncate the string and keep the sub string before the first comma <br/>&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbspdata translib.A11_DataVarDic&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset importDIc_tmp91&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsppos1= index(varname, ' ')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif pos1 >0 then varname =substr(varname, 1, pos1-1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsppos2= index(metadoc, ',')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif pos2 >0 then metadoc =substr(metadoc, 1, pos2-1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsppos3=index(metadoc, 'V')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif pos3 >0 then metadoc =substr(metadoc, 1, pos3-1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdrop pos1 pos2 pos3&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprename varName = variable&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/><br/>/*Determine the remote data/target/reports folder*/<br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset translib.a1_MasterInput&#59<br/>&nbsp&nbsp&nbsp&nbspif Items = 'RemoteFolder'&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('RemoteParentFolder', Value)&#59<br/>run&#59<br/>%let RemoteParentFolder=%sysfunc(strip(&RemoteParentFolder))&#59<br/>%put >>> RemoteParentFolder = &RemoteParentFolder&#59<br/>%let RemoteSourcePath=&RemoteParentFolder./Source&#59<br/>%put >>>RemoteSourcePath= &RemoteSourcePath&#59<br/><br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset translib.a1_MasterInput&#59<br/>&nbsp&nbsp&nbsp&nbspif items='DataStartDate'&#59<br/>&nbsp&nbsp&nbsp&nbspdatevalue=input(value, anydtdte.)&#59<br/>&nbsp&nbsp&nbsp&nbspformat datevalue date9.&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('DataStartDate', put(datevalue, date9.))&#59<br/>run&#59<br/>%let DataStartDate=%bquote('&DataStartDate')d&#59<br/>%let DataStartDate=%substr(&DataStartDate, 1, %length(&DataStartDate))&#59<br/>%put >>> DataStartDate = &DataStartDate&#59<br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset translib.a1_MasterInput&#59<br/>&nbsp&nbsp&nbsp&nbspif items='DataEndDate'&#59<br/>&nbsp&nbsp&nbsp&nbspdatevalue=input(value, anydtdte.)&#59<br/>&nbsp&nbsp&nbsp&nbspformat datevalue date9.&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('DataEndDate', put(datevalue, date9.))&#59<br/>run&#59<br/>%let DataEndDate=%bquote('&DataEndDate')d&#59<br/>%let DataEndDate=%substr(&DataEndDate, 1, %length(&DataEndDate))&#59<br/>%put >>> DataEndDate = &DataEndDate&#59<br/><br/>/*import data from MDS LTC (MDS_ASSESSMENT_F_2015)  <br/>&nbsp&nbsp&nbsp&nbspfor diagnoses (if in DXFiles, long_term_care =1), <br/>&nbsp&nbsp&nbsp&nbspit is not to get any dxlist (not like the ICD list, etc), rather it is go run a specific macro so as to get the study patients.<br/>&nbsp&nbsp&nbsp&nbspe.g., to have dementia patients by running specific macros,<br/>&nbsp&nbsp&nbsp&nbspor<br/>&nbsp&nbsp&nbsp&nbspto have all who admitted into LTC within a certain period of time (like the Frailty-HRPIM study)<br/><br/>&nbsp&nbsp&nbsp&nbspfor MDS_LTC data requested for a cohort, the fields are from two sources:<br/>&nbsp&nbsp&nbsp&nbsp1) by default, get key_hsn, create_date,  MDS_AB1, AB1b, A3, and R4, these fields has been specified in A2_CohortDataVars<br/>&nbsp&nbsp&nbsp&nbsp2) fields specified in sheet 'vars_MDS_LTC'<br/><br/>&nbsp&nbsp&nbsp&nbspNote that the two sources may have overlapping vars&#59 therefore they are putting together to have a list of distinct vars.<br/>&nbsp&nbsp&nbsp&nbspThe distinct vars are then added to A2_CohortDataVars<br/>*/<br/>/*21 import data vars from sheet 'vars_mds_ltc' LTC file*/<br/>data translib.a2_vars&#59<br/>&nbsp&nbsp&nbsp&nbspformat final_status $100. file_nick_name $100. VarName_in_Raw_File $100.&#59<br/>&nbsp&nbsp&nbsp&nbspdelete&#59<br/>run&#59<br/>%print(data=translib.a2_cohortdatavars)&#59<br/>data _tmp201&#59<br/>&nbsp&nbsp&nbsp&nbspformat variable $100.  &#59<br/>&nbsp&nbsp&nbsp&nbspdelete&#59<br/>run&#59<br/>proc import datafile=\"&settingsXls\"<br/>&nbsp&nbsp&nbsp&nbspDBMS=excel<br/>&nbsp&nbsp&nbsp&nbspout=_tmp201 (keep=variable where=(variable ne ''))<br/>&nbsp&nbsp&nbsp&nbspreplace<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>getnames=yes&#59<br/>sheet=\"vars_MDS_LTC\"&#59<br/>run&#59<br/>data _tmp202&#59<br/>&nbsp&nbsp&nbsp&nbspformat final_status 8. file_nick_name $100. &#59<br/>&nbsp&nbsp&nbsp&nbspset _tmp201&#59<br/>&nbsp&nbsp&nbsp&nbsprename variable = VarName_in_Raw_File&#59<br/>&nbsp&nbsp&nbsp&nbspfinal_status =1&#59<br/>&nbsp&nbsp&nbsp&nbspfile_nick_name='mds_ltc'&#59<br/>run&#59<br/>/*get ltc vars already input into a2 from sheet 'StudyFields'*/<br/>data _tmp203&#59<br/>&nbsp&nbsp&nbsp&nbspset translib.a2_cohortdatavars&#59<br/>&nbsp&nbsp&nbsp&nbspif file_nick_name='mds_ltc' &#59<br/>run&#59<br/><br/>/*from _tmp202, remove those already appeared in _tmp203*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=_tmp202,<br/>&nbsp&nbsp&nbsp&nbsptarget=_tmp204,<br/>&nbsp&nbsp&nbsp&nbspvars=t1.*,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(VarName_in_Raw_File not in (select  VarName_in_Raw_File from _tmp203))<br/>)&#59<br/><br/>/*attach vars in _tmp202 to a2*/<br/>data translib.a2_cohortdatavars&#59<br/>&nbsp&nbsp&nbsp&nbspset translib.a2_cohortdatavars &nbsp&nbsp&nbsp&nbsp_tmp204&#59<br/>&nbsp&nbsp&nbsp&nbspVarName_in_Raw_File=upcase(strip(VarName_in_Raw_File))&#59<br/>run&#59<br/>%sort(data =  translib.a2_cohortdatavars, sorter=file_nick_name VarName_in_Raw_File)&#59<br/><br/><br/>/*get dictionary for mds_ltc vars*/<br/>/*import description of variables from mds_ltc */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc import datafile=\"&dicXls\"<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDBMS=excel<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspout=importDIc_tmp205<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspreplace<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgetnames=no&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsheet=\"MDS-LTC\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%print(data=importDIc_tmp51)&#59*/<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata importDIc_tmp206&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat  filename $100. varname $100. description $10000. notes $10000. metadoc $20.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilename = 'mds_ltc'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset importDIc_tmp205 (firstOBS=3)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*strip: removing both leading and trailing spaces<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptrim: removing tailing spaces<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcompress removing all spaces (including those in the string)*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf4=strip(upcase(f4))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf9=strip(upcase(f9))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf8=strip(upcase(f8))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf10=strip(upcase(f10))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep filename varName description notes metadoc lagvar&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*don't use rename, as the length f6-f8 is limited*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvarName=f4&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdescription=f9&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnotes=f8&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmetadoc=f10&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif not (f4='' and f9 ='' and f8 ='' and f10='') &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprename varName = variable&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*For some of the vars, the description is in two rows. The var name appears in the first row, but not the second row<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata importDIc_tmp207&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset importDIc_tmp206&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspobs=_n_&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat lagVar1 $100. lagDesc $1000. lagNote $1000. lagMeta $1000.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplagVar1 = lag(variable)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLagdesc = lag(description)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplagNotes = lag(notes)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLagMeta = lag(metadoc)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif variable='' then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvariable = lagVar1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdescription = strip(Lagdesc) || ' ' || description&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnotes = strip(lagNotes) || ' ' || notes&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmetadoc = strip(LagMeta) || ' ' || metadoc&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sort(data=importDIc_tmp207, sorter=variable obs)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata importDIc_tmp208&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset importDIc_tmp207&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspby variable obs&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif last.variable&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdrop obs lagVar1 lagdesc lagNotes lagMeta&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*for those like 'dx_code_1 to dx_code_25', truncate the var names before the first space<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspalso, for those like 'D000360,V1' in metadoc, truncate the string and keep the sub string before the first comma <br/>&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbspdata translib.A11_DataVarDic&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset  translib.A11_DataVarDic importDIc_tmp206&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsppos1= index(variable, ' ')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif pos1 >0 then variable =substr(variable, 1, pos1-1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsppos2= index(metadoc, ',')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif pos2 >0 then metadoc =substr(metadoc, 1, pos2-1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsppos3=index(metadoc, 'V')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif pos3 >0 then metadoc =substr(metadoc, 1, pos3-1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdrop pos1 pos2 pos3&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>/****************************************************************/<br/><br/>/**getting macro file (full path) and command lines for getting dx from MDS_LTC files**/<br/><br/>%macro getLTCMacro&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*by default, always have a empty macro (for a later task, there has to be a file to be transferred)*/<br/>&nbsp&nbsp&nbsp&nbsp/*create an empty sas file. If A12 does not contain a real sas file, transfer the empty sas file*/<br/>&nbsp&nbsp&nbsp&nbspfilename EmpSAS \"&localDataPath.\\empty.sas\"&#59<br/>&nbsp&nbsp&nbsp&nbspdata _null_&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfile EmpSAS&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspput &#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbspproc import datafile=\"&settingsXls\"<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDBMS=excel<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspout=translib.a12_DxMDSLTC (where = (strip(theFile) ne ''))<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspreplace<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgetnames=yes&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsheet=\"Dx_MDS_LTC_Macro\"&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp%nobs(data=translib.a12_DxMDSLTC)&#59<br/>&nbsp&nbsp&nbsp&nbsp%if %eval(&nobs=0) %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata translib.a12_DxMDSLTC&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat thePath $1000. theFile $100. theLines $1000.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthePath = \"&localDataPath\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheFile =\"empty.sas\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>%mend getLTCMacro&#59<br/>%getLTCMacro&#59<br/><br/><br/><br/><br/><br/><br/><br/>&nbsp&nbsp&nbsp&nbsp%delData(data=importDIc_tmp1 importDIc_tmp2 importDIc_tmp11 importDIc_tmp12<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspimportDIc_tmp21 importDIc_tmp22 importDIc_tmp31 importDIc_tmp32<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspimportDIc_tmp41 importDIc_tmp42 importDIc_tmp51 importDIc_tmp52<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspimportDIc_tmp91 importDIc_tmp92<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspimportDIc_tmp205 importDIc_tmp206 importDIc_tmp207 importDIc_tmp208<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp_tmp201 _tmp202 _tmp203 _tmp204 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp/*************************************************************************************/<br/><br/><br/>s///<br/>t///","children":[{"idx":"EGTask-cWNDcRk2GJkT9UJm","name":"A1_Copy data sets in transLib to Remote Server","type":"TASK","children":[{"idx":"CodeTask-CinsaqqKpNiJAroE","name":"A2_at Local, del files in transDir","type":"TASK","NodeDescription":"///t<br/>///s<br/>/**/<br/>/*%delData(data=translib.a1_MasterInput translib.a2_vars */<br/>/*translib.a3_icddx translib.a4_intvndx translib.a5_fsc translib.a6_dindx*/<br/>/*translib.a7_dxfiles)&#59*/<br/><br/>Proc delete data=translib._all_&#59<br/>run&#59<br/><br/>s///<br/>t///","children":[{"idx":"CodeTask-B7GYeGViHcyJuijA","name":"B_Remote_get settings into macro variables","type":"TASK","NodeDescription":"///t<br/>///s<br/>/*get the project start date. It is also the last Xtrc Date*/<br/>data _null_&#59run&#59<br/><br/>%global <br/>&nbsp&nbsp&nbsp&nbspProjectName<br/>&nbsp&nbsp&nbsp&nbspProjectStartDate<br/>&nbsp&nbsp&nbsp&nbspContact<br/>&nbsp&nbsp&nbsp&nbspEmail<br/>&nbsp&nbsp&nbsp&nbspDataStartDate<br/>&nbsp&nbsp&nbsp&nbspDataEndDate<br/>&nbsp&nbsp&nbsp&nbspEntryStartDate<br/>&nbsp&nbsp&nbsp&nbspEntryEndDate<br/>&nbsp&nbsp&nbsp&nbspEntryStartYear<br/>&nbsp&nbsp&nbsp&nbspEntryEndYear<br/>&nbsp&nbsp&nbsp&nbspEntryYears&nbsp&nbsp&nbsp&nbsp<br/><br/>&nbsp&nbsp&nbsp&nbspLastXtrcDate<br/>&nbsp&nbsp&nbsp&nbspXtrc_Start_MSB<br/>&nbsp&nbsp&nbsp&nbspXtrc_End_MSB<br/>&nbsp&nbsp&nbsp&nbspXtrc_Start_DP_Ben<br/>&nbsp&nbsp&nbsp&nbspXtrc_End_DP_Ben<br/>&nbsp&nbsp&nbsp&nbspXtrc_Start_DP_NBen<br/>&nbsp&nbsp&nbsp&nbspXtrc_End_DP_NBen<br/>&nbsp&nbsp&nbsp&nbspXtrc_End_Cover<br/>&nbsp&nbsp&nbsp&nbspXtrc_Start_DP_SPEC<br/>&nbsp&nbsp&nbsp&nbspXtrc_End_DP_SPEC<br/>&nbsp&nbsp&nbsp&nbspXtrc_MDS_LTC<br/>&nbsp&nbsp&nbsp&nbspLPath_MDSLTC_DxMacro<br/>&nbsp&nbsp&nbsp&nbspFile_MDSLTC_DxMacro<br/>&nbsp&nbsp&nbsp&nbspCommand_MDSLTC_DxMacro<br/><br/>&nbsp&nbsp&nbsp&nbspRemoteParentFolder<br/>&nbsp&nbsp&nbsp&nbspremoteSourcePath<br/>&nbsp&nbsp&nbsp&nbspremoteReportPath<br/>&nbsp&nbsp&nbsp&nbspremoteTargetPath<br/>&nbsp&nbsp&nbsp&nbsplocalParentFolder<br/>&nbsp&nbsp&nbsp&nbsplocalDataPath<br/>&nbsp&nbsp&nbsp&nbsplocalTargetPath<br/>&#59<br/><br/>/*get remote path*/<br/>%print(data=RexLib.a1_MasterInput)&#59<br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset RexLib.a1_MasterInput&#59<br/>&nbsp&nbsp&nbsp&nbspif Items = 'RemoteFolder'&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('RemoteParentFolder', Value)&#59<br/>run&#59<br/>%put >>> &RemoteParentFolder&#59<br/><br/>%let RemoteParentFolder=%sysfunc(strip(&RemoteParentFolder))&#59<br/>%put >>> &RemoteParentFolder&#59<br/><br/>/*the source files on remote server*/<br/>%let remoteSourcePath=&RemoteParentFolder./Source&#59<br/>%put >>> &remoteSourcePath&#59<br/>libname remoteS \"&remoteSourcePath\"&#59<br/>/*the target files on remote server*/<br/>%let remoteTargetPath=&RemoteParentFolder./Target&#59<br/>libname remoteT \"&remoteTargetPath\"&#59<br/>/*the report on remote server*/<br/>%let remoteReportPath=&RemoteParentFolder./Reports&#59<br/>libname remoteR \"&remoteReportPath\"&#59<br/><br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset RexLib.a1_MasterInput&#59<br/>&nbsp&nbsp&nbsp&nbspif Items = 'LocalFolder'&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('localParentFolder', Value)&#59<br/>run&#59<br/>%let localParentFolder=%sysfunc(strip(&localParentFolder))&#59<br/>%put >>> &localParentFolder&#59<br/>%let localDataPath=&localParentFolder.\\Data&#59<br/>%put >>> localDataPath=&localDataPath&#59<br/>%let localTargetPath=&localParentFolder.\\Output\\Result data&#59<br/>%put >>> localTargetPath = &localTargetPath&#59<br/><br/><br/>/*copy all files from remote exchange to remoteS*/<br/>proc datasets lib=Rexlib&#59<br/>&nbsp&nbsp&nbsp&nbspcopy out=remoteS&#59<br/>run&#59<br/><br/>Proc delete data=Rexlib._all_&#59<br/>run&#59<br/><br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset remoteS.a1_MasterInput&#59<br/>&nbsp&nbsp&nbsp&nbspif Items='ProjectStartDate'&#59<br/>&nbsp&nbsp&nbsp&nbsp/*in the source data, the date values are characters<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspin the folloiwng steps, the character date values are changed to numberical datavalues, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthen put into macro variables<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspWhy not directly put characters into macro variable values?<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspbecause the original character is like 'yyyymmdd', while the required data format is 'ddmmmyyyy'<br/>&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbspdatevalue=input(value, anydtdte.)&#59<br/>&nbsp&nbsp&nbsp&nbspformat datevalue date9.&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('ProjectStartDate', put(datevalue, date9.))&#59<br/>run&#59<br/>%let ProjectStartDate=%bquote('&ProjectStartDate')d&#59<br/>%let ProjectStartDate=%substr(&ProjectStartDate, 1, %length(&ProjectStartDate))&#59<br/>%put >>> ProjectStartDate = &ProjectStartDate&#59<br/>%let LastXtrcDate=&ProjectStartDate&#59<br/>%put >>> ProjectStartDate = &ProjectStartDate&#59<br/>%put >>> LastXtrcDate=&ProjectStartDate&#59<br/><br/>/*get the data start and end dates*/<br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset remoteS.a1_MasterInput&#59<br/>&nbsp&nbsp&nbsp&nbspif items='DataStartDate'&#59<br/>&nbsp&nbsp&nbsp&nbspdatevalue=input(value, anydtdte.)&#59<br/>&nbsp&nbsp&nbsp&nbspformat datevalue date9.&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('DataStartDate', put(datevalue, date9.))&#59<br/>run&#59<br/>%let DataStartDate=%bquote('&DataStartDate')d&#59<br/>%let DataStartDate=%substr(&DataStartDate, 1, %length(&DataStartDate))&#59<br/>%put >>> DataStartDate = &DataStartDate&#59<br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset remoteS.a1_MasterInput&#59<br/>&nbsp&nbsp&nbsp&nbspif items='DataEndDate'&#59<br/>&nbsp&nbsp&nbsp&nbspdatevalue=input(value, anydtdte.)&#59<br/>&nbsp&nbsp&nbsp&nbspformat datevalue date9.&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('DataEndDate', put(datevalue, date9.))&#59<br/>run&#59<br/>%let DataEndDate=%bquote('&DataEndDate')d&#59<br/>%let DataEndDate=%substr(&DataEndDate, 1, %length(&DataEndDate))&#59<br/>%put >>> DataEndDate = &DataEndDate&#59<br/><br/>/*get the cohort entrydates*/<br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset remoteS.a1_MasterInput&#59<br/>&nbsp&nbsp&nbsp&nbspif items='EntryStartDate'&#59<br/>&nbsp&nbsp&nbsp&nbspdatevalue=input(value, anydtdte.)&#59<br/>&nbsp&nbsp&nbsp&nbspformat datevalue date9.&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('EntryStartDate', put(datevalue, date9.))&#59<br/>run&#59<br/>%let EntryStartDate=%bquote('&EntryStartDate')d&#59<br/>%let EntryStartDate=%substr(&EntryStartDate, 1, %length(&EntryStartDate))&#59<br/>%put >>> EntryStartDate = &EntryStartDate&#59<br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset remoteS.a1_MasterInput&#59<br/>&nbsp&nbsp&nbsp&nbspif items='EntryEndDate'&#59<br/>&nbsp&nbsp&nbsp&nbspdatevalue=input(value, anydtdte.)&#59<br/>&nbsp&nbsp&nbsp&nbspformat datevalue date9.&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('EntryEndDate', put(datevalue, date9.))&#59<br/>run&#59<br/>%let EntryEndDate=%bquote('&EntryEndDate')d&#59<br/>%let EntryEndDate=%substr(&EntryEndDate, 1, %length(&EntryEndDate))&#59<br/>%put >>> EntryEndDate = &EntryEndDate&#59<br/><br/>%let EntryStartYear = %sysfunc(year(&EntryStartDate))&#59<br/>%put >>> EntryStartYear=&EntryStartYear&#59<br/>%let EntryEndYear = %sysfunc(year(&EntryEndDate))&#59<br/>%put >>> EntryEndYear=&EntryEndYear&#59<br/>%let EntryYears = %eval(&EntryEndYear - &EntryStartYear +1)&#59<br/>%put >>> EntryYears=&EntryYears&#59<br/><br/><br/>/*The  project name, contact, and email*/<br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset remoteS.a1_MasterInput&#59<br/>&nbsp&nbsp&nbsp&nbspif items='ProjectName'&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('ProjectName', value)&#59<br/>run&#59<br/>%put >>> ProjectName = &ProjectName&#59<br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset remoteS.a1_MasterInput&#59<br/>&nbsp&nbsp&nbsp&nbspif items='Contact'&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('Contact', value)&#59<br/>run&#59<br/>%put >>> Contact = &Contact&#59<br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset remoteS.a1_MasterInput&#59<br/>&nbsp&nbsp&nbsp&nbspif items='Email'&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('Email', value)&#59<br/>run&#59<br/>%put >>> Email = &Email&#59<br/><br/><br/>/*the following part is to determine the xtrc_date for each sources<br/>&nbsp&nbsp&nbsp&nbspMSB, Drug claims, coverage period (same for demo, resitype)<br/>&nbsp&nbsp&nbsp&nbspThe cleaned hospital file does not require xtrc date<br/>&nbsp&nbsp&nbsp&nbsp?? How about the mortality record file (verfdt), the emergancy file (f_2012)<br/><br/>*/<br/>%put >>> &dataStartDate&#59<br/>/*the xtrc_dates*/<br/>/*determine the msb xtrc_date***********/<br/>%freq(data=clean.xtrc_dates, table=ds)&#59<br/>%sort(data=clean.xtrc_dates, target=b11, <br/>&nbsp&nbsp&nbsp&nbspsorter=%str(report_start report_end xtrc_date))&#59<br/><br/>data b12&#59<br/>&nbsp&nbsp&nbsp&nbspset b11&#59<br/>&nbsp&nbsp&nbsp&nbspif ds = 'msb_billing'&#59<br/>&nbsp&nbsp&nbsp&nbspdataStartDate=&dataStartDate&#59<br/>&nbsp&nbsp&nbsp&nbspLastXtrcDate = &LastXtrcDate&#59/* &LastXtrcDate&#59*/<br/>&nbsp&nbsp&nbsp&nbspformat dataStartDate date9. LastXtrcDate date9.&#59<br/>&nbsp&nbsp&nbsp&nbspif (report_start <= dataStartDate <= report_end <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor report_start > dataStartDate)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand (report_start <= LastXtrcDate <= report_end <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor report_end < LastXtrcDate)<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>run&#59<br/><br/><br/>%sort(data=b12, sorter=xtrc_date)&#59<br/>/*the earliest xtrc_date should be the last one in the rows with a negative<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspstartgGap*/<br/>data b13&#59<br/>&nbsp&nbsp&nbsp&nbspset b12 (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('Xtrc_Start_MSB', put(xtrc_date, date9.))&#59<br/>run&#59<br/>%let Xtrc_Start_MSB=%str(%')&Xtrc_Start_MSB.%str(%')d&#59<br/>%let Xtrc_Start_MSB= %substr(&Xtrc_Start_MSB, 1, %length(&Xtrc_Start_MSB))&#59<br/>%put >>> &Xtrc_Start_MSB&#59<br/><br/>%sort(data=b12, sorter=descending xtrc_date)&#59<br/>/*the earliest xtrc_date should be the last one in the rows with a negative<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspstartgGap*/<br/>data b14&#59<br/>&nbsp&nbsp&nbsp&nbspset b12 (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('Xtrc_End_MSB', put(xtrc_date, date9.))&#59<br/>run&#59<br/>%let Xtrc_End_MSB=%str(%')&Xtrc_End_MSB.%str(%')d&#59<br/>%let Xtrc_End_MSB= %substr(&Xtrc_End_MSB, 1, %length(&Xtrc_End_MSB))&#59<br/>%put >>> &Xtrc_End_MSB&#59<br/>/******************************************/<br/><br/>/*determine the benefit drug claim xtrc_date***********/<br/>%sort(data=clean.xtrc_dates, target=b21, <br/>&nbsp&nbsp&nbsp&nbspsorter=%str(report_start report_end xtrc_date))&#59<br/>data b22&#59<br/>&nbsp&nbsp&nbsp&nbspset b21&#59<br/>&nbsp&nbsp&nbsp&nbspif ds = 'dp_claim'&#59<br/>&nbsp&nbsp&nbsp&nbspdataStartDate=&dataStartDate&#59<br/>&nbsp&nbsp&nbsp&nbspLastXtrcDate = &LastXtrcDate&#59/* &LastXtrcDate&#59*/<br/>&nbsp&nbsp&nbsp&nbspformat dataStartDate date9. LastXtrcDate date9.&#59<br/>&nbsp&nbsp&nbsp&nbspif (report_start <= dataStartDate <= report_end <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor report_start > dataStartDate)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand (report_start <= LastXtrcDate <= report_end <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor report_end < LastXtrcDate)<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>run&#59<br/><br/><br/>%sort(data=b22, sorter=xtrc_date)&#59<br/>/*the earliest xtrc_date should be the last one in the rows with a negative<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspstartgGap*/<br/>data b23&#59<br/>&nbsp&nbsp&nbsp&nbspset b22 (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('Xtrc_Start_DP_Ben', put(xtrc_date, date9.))&#59<br/>run&#59<br/>%let Xtrc_Start_DP_Ben=%str(%')&Xtrc_Start_DP_Ben.%str(%')d&#59<br/>%let Xtrc_Start_DP_Ben= %substr(&Xtrc_Start_DP_Ben, 1, %length(&Xtrc_Start_DP_Ben))&#59<br/>%put >>> &Xtrc_Start_DP_Ben&#59<br/><br/>%sort(data=b22, sorter=descending xtrc_date)&#59<br/>/*the earliest xtrc_date should be the last one in the rows with a negative<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspstartgGap*/<br/>data b24&#59<br/>&nbsp&nbsp&nbsp&nbspset b22 (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('Xtrc_End_DP_Ben', put(xtrc_date, date9.))&#59<br/>run&#59<br/>%let Xtrc_End_DP_Ben=%str(%')&Xtrc_End_DP_Ben.%str(%')d&#59<br/>%let Xtrc_End_DP_Ben= %substr(&Xtrc_End_DP_Ben, 1, %length(&Xtrc_End_DP_Ben))&#59<br/>%put >>> &Xtrc_End_DP_Ben&#59<br/>/******************************************/<br/><br/>/*determine the non-benefit drug claim xtrc_date***********/<br/>%sort(data=clean.xtrc_dates, target=b31, <br/>&nbsp&nbsp&nbsp&nbspsorter=%str(report_start report_end xtrc_date))&#59<br/>data b32&#59<br/>&nbsp&nbsp&nbsp&nbspset b31&#59<br/>&nbsp&nbsp&nbsp&nbspif ds = 'dp_claim_non_ben'&#59<br/>&nbsp&nbsp&nbsp&nbspdataStartDate=&dataStartDate&#59<br/>&nbsp&nbsp&nbsp&nbspLastXtrcDate = &LastXtrcDate&#59/* &LastXtrcDate&#59*/<br/>&nbsp&nbsp&nbsp&nbspformat dataStartDate date9. LastXtrcDate date9.&#59<br/>&nbsp&nbsp&nbsp&nbspif (report_start <= dataStartDate <= report_end <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor report_start > dataStartDate)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand (report_start <= LastXtrcDate <= report_end <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor report_end < LastXtrcDate)<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>run&#59<br/><br/><br/>%sort(data=b32, sorter=xtrc_date)&#59<br/>/*the earliest xtrc_date should be the last one in the rows with a negative<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspstartgGap*/<br/>data b33&#59<br/>&nbsp&nbsp&nbsp&nbspset b32 (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('Xtrc_Start_DP_NBen', put(xtrc_date, date9.))&#59<br/>run&#59<br/>%let Xtrc_Start_DP_NBen=%str(%')&Xtrc_Start_DP_NBen.%str(%')d&#59<br/>%let Xtrc_Start_DP_NBen= %substr(&Xtrc_Start_DP_NBen, 1, %length(&Xtrc_Start_DP_NBen))&#59<br/>%put >>> &Xtrc_Start_DP_NBen&#59<br/><br/>%sort(data=b32, sorter=descending xtrc_date)&#59<br/>/*the earliest xtrc_date should be the last one in the rows with a negative<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspstartgGap*/<br/>data b34&#59<br/>&nbsp&nbsp&nbsp&nbspset b32 (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('Xtrc_End_DP_NBen', put(xtrc_date, date9.))&#59<br/>run&#59<br/>%let Xtrc_End_DP_NBen=%str(%')&Xtrc_End_DP_NBen.%str(%')d&#59<br/>%let Xtrc_End_DP_NBen= %substr(&Xtrc_End_DP_NBen, 1, %length(&Xtrc_End_DP_NBen))&#59<br/>%put >>> &Xtrc_End_DP_NBen&#59<br/>/******************************************/<br/><br/>*&xtrc_cover&#59<br/>/*determine the coverage xtrc_date***********/<br/>%sort(data=clean.xtrc_dates, target=b41, <br/>&nbsp&nbsp&nbsp&nbspsorter=%str(report_start report_end xtrc_date))&#59<br/>/*%freq(data=b41, table=ds)&#59*/<br/>data b42&#59<br/>&nbsp&nbsp&nbsp&nbspset b41&#59<br/>&nbsp&nbsp&nbsp&nbspif ds = 'phrs_pers_prog'&#59<br/>&nbsp&nbsp&nbsp&nbspdataStartDate=&dataStartDate&#59<br/>&nbsp&nbsp&nbsp&nbspLastXtrcDate = &LastXtrcDate&#59/* &LastXtrcDate&#59*/<br/>&nbsp&nbsp&nbsp&nbspformat dataStartDate date9. LastXtrcDate date9.&#59<br/>&nbsp&nbsp&nbsp&nbspif (report_start <= dataStartDate <= report_end <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor report_start > dataStartDate)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand (report_start <= LastXtrcDate <= report_end <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor report_end < LastXtrcDate)<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>run&#59<br/><br/>%sort(data=b42, sorter=xtrc_date)&#59<br/>/*the earliest xtrc_date should be the last one in the rows with a negative<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspstartgGap*/<br/>data b43&#59<br/>&nbsp&nbsp&nbsp&nbspset b42 (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('Xtrc_Start_Cover', put(xtrc_date, date9.))&#59<br/>run&#59<br/>%let Xtrc_Start_Cover=%str(%')&Xtrc_Start_Cover.%str(%')d&#59<br/>%let Xtrc_Start_Cover= %substr(&Xtrc_Start_Cover, 1, %length(&Xtrc_Start_Cover))&#59<br/>%put >>> &Xtrc_Start_Cover&#59<br/><br/>/*the earliest xtrc_date should be the last one in the rows with a negative<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspstartgGap*/<br/>data b44&#59<br/>&nbsp&nbsp&nbsp&nbspset b42 end=last&#59<br/>&nbsp&nbsp&nbsp&nbspif last&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('Xtrc_End_Cover', put(xtrc_date, date9.))&#59<br/>run&#59<br/>%let Xtrc_End_Cover=%str(%')&Xtrc_End_Cover.%str(%')d&#59<br/>%let Xtrc_End_Cover= %substr(&Xtrc_End_Cover, 1, %length(&Xtrc_End_Cover))&#59<br/>%put >>> &Xtrc_End_Cover&#59<br/>/******************************************/<br/><br/>/*determine the drug spec xtrc_date***********/<br/>%sort(data=clean.xtrc_dates, target=b51, <br/>&nbsp&nbsp&nbsp&nbspsorter=%str(report_start report_end xtrc_date))&#59<br/>data b52&#59<br/>&nbsp&nbsp&nbsp&nbspset b51&#59<br/>&nbsp&nbsp&nbsp&nbspif ds = 'dp_claim' or ds = 'dp_claim_non_ben'&#59<br/>&nbsp&nbsp&nbsp&nbspdataStartDate=&dataStartDate&#59<br/>&nbsp&nbsp&nbsp&nbspLastXtrcDate = &LastXtrcDate&#59/* &LastXtrcDate&#59*/<br/>&nbsp&nbsp&nbsp&nbspformat dataStartDate date9. LastXtrcDate date9.&#59<br/>&nbsp&nbsp&nbsp&nbspif (report_start <= dataStartDate <= report_end <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor report_start > dataStartDate)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand (report_start <= LastXtrcDate <= report_end <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor report_end < LastXtrcDate)<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>run&#59<br/><br/>%sort(data=b52, sorter=xtrc_date)&#59<br/>/*the earliest xtrc_date should be the last one in the rows with a negative<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspstartgGap*/<br/>data b53&#59<br/>&nbsp&nbsp&nbsp&nbspset b52 (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('Xtrc_Start_DP_SPEC', put(xtrc_date, date9.))&#59<br/>run&#59<br/>%let Xtrc_Start_DP_SPEC=%str(%')&Xtrc_Start_DP_SPEC.%str(%')d&#59<br/>%let Xtrc_Start_DP_SPEC= %substr(&Xtrc_Start_DP_SPEC, 1, %length(&Xtrc_Start_DP_SPEC))&#59<br/>%put >>> &Xtrc_Start_DP_SPEC&#59<br/><br/>%sort(data=b52, sorter=descending xtrc_date)&#59<br/>/*the earliest xtrc_date should be the last one in the rows with a negative<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspstartgGap*/<br/>data b54&#59<br/>&nbsp&nbsp&nbsp&nbspset b52 (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('Xtrc_End_DP_SPEC', put(xtrc_date, date9.))&#59<br/>run&#59<br/>%let Xtrc_End_DP_SPEC=%str(%')&Xtrc_End_DP_SPEC.%str(%')d&#59<br/>%let Xtrc_End_DP_SPEC= %substr(&Xtrc_End_DP_SPEC, 1, %length(&Xtrc_End_DP_SPEC))&#59<br/>%put >>> &Xtrc_End_DP_SPEC&#59<br/>/******************************************/<br/><br/>/***get xtrc_date for mds_ltc data****************************/<br/>data b61&#59<br/>&nbsp&nbsp&nbsp&nbspset clean.xtrc_dates&#59<br/>&nbsp&nbsp&nbsp&nbspif xtrc_date < = &LastXtrcDate  and ds='mds_assessment_f_2015'&#59<br/>run&#59<br/>%sort(data=b61, sorter=descending xtrc_date)&#59<br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset b61 (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('Xtrc_MDS_LTC',  put(xtrc_date, date9.))&#59 <br/>run&#59<br/>%let XTRC_MDS_LTC=%str(%')&XTRC_MDS_LTC.%str(%')d&#59<br/>%let XTRC_MDS_LTC= %substr(&XTRC_MDS_LTC, 1, %length(&XTRC_MDS_LTC))&#59<br/>%put >>> &XTRC_MDS_LTC&#59<br/><br/>/****************************************************/<br/><br/>/*get the file (full path) and macro command for getting dx info from MDS_LTC*/<br/>%macro getMDSMacro&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*initially, let the following variables = nothing*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let LPath_MDSLTC_DxMacro=&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let File_MDSLTC_DxMacro=&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let Command_MDSLTC_DxMacro =&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%print(data =remoteS.A12_DXMDSLTC )&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*get the path, file name and command lines*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata _null_&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset remoteS.A12_DXMDSLTC (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcall symput('LPath_MDSLTC_DxMacro',  thePath)&#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcall symput('File_MDSLTC_DxMacro',  theFile)&#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcall symput('Command_MDSLTC_DxMacro',  theLines)&#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*remove the slash at the end of the path*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let LPath_MDSLTC_DxMacro=%sysfunc(strip(&LPath_MDSLTC_DxMacro))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if %substr(&LPath_MDSLTC_DxMacro, %length(&LPath_MDSLTC_DxMacro), 1) = \\ %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let LPath_MDSLTC_DxMacro=%substr(&LPath_MDSLTC_DxMacro, 1, %eval(%length(&LPath_MDSLTC_DxMacro)-1))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let LPath_MDSLTC_DxMacro= %sysfunc(strip(&LPath_MDSLTC_DxMacro))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> the local macro file to get dx data from MDS_LTC = %str(&LPath_MDSLTC_DxMacro.\\&File_MDSLTC_DxMacro)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> the remote macro file to get dx data from MDS_LTC = %str(&remoteSourcePath.\\&File_MDSLTC_DxMacro)&#59<br/>%mend getMDSMacro&#59<br/>%getMDSMacro&#59<br/><br/>%freq(source=clean.xtrc_dates, table=ds)&#59<br/><br/><br/><br/><br/>s///<br/>t///","children":[{"idx":"EGTask-yUjgFuvpaSgEzUDM","name":"Copy LTCMacro to Remote","type":"TASK","custparents":[{"idx":"CodeTask-B7GYeGViHcyJuijA"}]}],"custparents":[{"idx":"CodeTask-CinsaqqKpNiJAroE"}]}],"custparents":[{"idx":"EGTask-cWNDcRk2GJkT9UJm"}]}],"custparents":[{"idx":"CodeTask-kdXNatjk26MJ53wd"}]}],"custparents":[{"idx":"CodeTask-8XQczBciSUyozSiJ"}]}],"custparents":[{"idx":"EGTask-oyLU9215za4Elsgd"}]}],"custparents":[{"idx":"CodeTask-lm45gKn6MFkGPZo4"}]}],"custparents":[{"idx":"CodeTask-CljcMilWauaTBrim"}]},{"idx":"CodeTask-MFaCVD2HKG8H2ZiE","name":"MyMacros","type":"TASK","custparents":[{"idx":"CodeTask-CljcMilWauaTBrim"}]},{"idx":"CodeTask-zlO9ztVQoMSivIaE","name":"Test_remote","type":"TASK","NodeDescription":"///t<br/>///s<br/><br/>s///<br/>t///","custparents":[{"idx":"CodeTask-CljcMilWauaTBrim"}]},{"idx":"CodeTask-q65h3IrNGuXafJ8T","name":"Test_local","type":"TASK","NodeDescription":"///t<br/>///s<br/><br/>s///<br/>t///","custparents":[{"idx":"CodeTask-CljcMilWauaTBrim"}]},{"idx":"CodeTask-b3OezYBUd9h9Xqga","name":"escape","type":"TASK","NodeDescription":"///t<br/>///s<br/>/*data x&#59a=1&#59run&#59*/<br/>)&#59<br/><br/>s///<br/>t///","custparents":[{"idx":"CodeTask-CljcMilWauaTBrim"}]},{"idx":"CodeTask-nFFfnUzpOAcAde3z","name":"Beep","type":"TASK","NodeDescription":"///t<br/>///s<br/>%beep&#59<br/>s///<br/>t///","children":[{"idx":"CodeTask-YxMkyU68wHLjoZvY","name":"Learnings","type":"TASK","NodeDescription":"///t<br/>///s<br/>/*Leanring*/<br/><br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=msbzzb,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZZD0,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(key_hsn, key_doc_num, dos,  ifc(t1.mode='1', 'FFS', 'NFFS' ) as PayMode length=4),<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(num_srv ne 0<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLOS NOT in ('B','2','K','9')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspMODE ne 'Z'<br/>&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/><br/>/*note, it does not work to set length by format $4. as paymode. The length will yet be 200.*/<br/>/*Instead, should set the length=4*/<br/>s///<br/>t///","custparents":[{"idx":"CodeTask-nFFfnUzpOAcAde3z"}]}],"custparents":[{"idx":"CodeTask-CljcMilWauaTBrim"}]},{"idx":"CodeTask-cgblpitkLXgBWLXi","name":"UPC code","type":"TASK","NodeDescription":"///t<br/>///s<br/>/*from:<br/>Z:\\My Project\\Projects\\PhD Thesis\\SAS code\\Master code - UPC (Sept 2014).sas<br/>*/<br/><br/><br/>/***************************************************************************************************  <br/> *   Programmer: Beliz Acan Osman with reference methodology from CIHI Continuity of PHC study, SK  *                                                  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*<br/> *   Date: July 2013                                           &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp                            *<br/> *   Project: Primary Health Care Hoshin - Patient Connetedness- CHRONIC DISEASE PROFILES           *<br/> *   Purpose: This code extracts physician information for the chronic disease cohorts &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*<br/> *&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspof SK FY 2006-2013 and in &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*<br/> *   investigates the contunity of the care provided by GPs and NPs&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*<br/> ****************************************************************************************************/<br/>* Jan 2018<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp1.Used most upto date MSB & PHRS & Death & Doc Num files<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2.Mode = Z codes are excluded from UPC calculation - New Knowledge: these codes represent out of province claims<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp3. could not complete the ACSC specific UPC calculation as we are not calculating incidence/prevalence for ACSC conditions anymore.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTalked with Patrick about this January 9th. He will decide whether we should leave it as is or continue with inc/prev analysis.<br/><br/>* April 2017<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp1.Used most upto date MSB & PHRS & Death & Doc Num files<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2.Mode = Z codes are excluded from UPC calculation - New Knowledge: these codes represent out of province claims<br/><br/>* Jan 2016<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp1.Took out the clinic piece we will not provide that this wall walk.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2.Used most upto date MSB & PHRS & Death & Doc Num files<br/><br/>* Sept 2015 PLT Wall Walk - Notes by Meric Osman & Beliz Acan Osman<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp1. UPC by Clinic added. 2 sets of results,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspa. UPC by physician (same as before)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspb. UPC by clinic (new) - see code Master Code - UPC_by_clinic (Aug 2015)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2.Used most upto date MSB & PHRS & Death & Doc Num files<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/><br/>* June 2015 PLT Wall Walk - Notes by Meric Osman<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp1. Used most upto date MSB & PHRS file<br/><br/>* April 2015 PLT Wall Walk - Notes by Meric Osman<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp1. Used most upto date MSB & PHRS file<br/><br/>Old notes&#59<br/>* December 2014 RUN for January 2015 PLT Wall Walk - Notes by Meric Osman<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp1. Additional slush numbers have been acquired and used (see below),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2. Minor bug fixes.<br/><br/><br/>* August-September 2014 RUN for October 2014 PLT Wall Walk - Notes by Meric Osman<br/><br/>Changes/Updates (during Beliz's maternity leave)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp1. New MSB data has been acquired by HQC. This data includes physician specialty<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2. As the physician specialty information is already in the data - DOC FILE is not being used<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp3. Previously, MSB extracted from 2006, however only last 3-4 years of inforamtion is needed (informed by team), thus shorter extraction (Apr 2010 onwards) has been done.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp4. Out of province DOC numbers are for SAS flat files (not for the ORACLE MSB file), thus not used (see below).<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp5. Most upto date PHRS, Death files...etc. have been used (see below).<br/><br/><br/><br/>*MACROS&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%INCLUDE '/SAS_data/dw0/HQC_share/Clean/library_dw0.sas'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%INCLUDE '/SAS_data/dw0/HQC_Data_Lab/Macros/DataManip/Extract_MSB.sas'&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%INCLUDE '/SAS_data/dw0/HQC_Data_Lab/Macros/DataManip/demog_assign.sas'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%INCLUDE '/SAS_data/dw0/HQC_share/Meric/calc_age_discr.sas'&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/><br/>&nbsp&nbsp&nbsp&nbsp<br/>*DATASETS&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let death_file &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp= clean17.verf_dths_3_jfm17_01nov2017&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let phrs_res&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp &nbsp&nbsp&nbsp&nbsp= clean17.phrs_pers_resc_4_jas17_01dec2017&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let geo_file&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp= clean17.phrs_pers_resc_4_jas17_01dec2017&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/><br/>* EXCLUSIONS&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let in_patient&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp= 'B' '2' 'K'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*Slush codes are added from clean.Physician #s for Slush codes (new).txt&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let slush&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp= '76925314678' '36825374671' '52825354677' '66925324672' '38825384673' '52825354672' '35925334677' '00825374673' '32825384674' '79825354677' '42925314672' '14925324671'<br/>'74825384673' '95825354670' '86825364672' '95925344676' '03925304670' '59925304677' '96925314677' '36925314674' '96925314672' '62825364671' '28925304679' '82825394672'<br/>'43925314674' '13825364672' '31925324677' '48925314670' '05825364678' '17825354674' '13925304670' '82825384679' '27825354670' '19825374671' '45925304670' '07925304677'<br/>'05925344673' '64925344674' '25925304675' '95925314671' '05825354679' '64925304678' '26925334671' '80925334670' '87925304678' '53825394678' '17825344678' '52925304678'<br/>'61825384670' '17825374676' '31825374679' '29825354679' '41925304676' '01825374674' '24825364678'<br/>'11345384672' '91925324677' '87825394671' '81925304678' '74925304674' '78925334671' '01825354674' '58825374670' '83925324670' '34825364677' '58925324670' '53825384670' <br/>'27825344678' '48925314676' '37825364674' '31925324675' '56925304672' '95925344670' '02825384671' '81825354676' '22925304670' '51825394672' '95925304677' '84825354674' <br/>'74925314673'<br/>'06825384675' '39825344678' '99825374677' '35925304676' '73825364675' '14925304678' '14825354671' '14925314673' '76825364676' '88925314677' '76825374677' '23825374672'<br/>'74825384670' '07925334671' '71825364676' '24925304677' '11925324678' '49925334678' '31925324674' '80925314677' '91825364675' '11825374679' '55925324679' '99925304678'<br/>'35825374676' '10925314671' '22825394677' '93825394679' '26925314679' '59825344671' '27825384672' '12925304677' '42925304671' '16825364671' '24925304679' '82925314676'<br/>'17925314671' '04825394674' '16825344676' '33925344675' '01825394671' '28925314674' '18825354679' '25925344671' '01825354670' '93925304677' '47925334678' '37925334676'<br/>'01825364673' '75925324675' '85925314673' '35925334678' '24825364679' '90925304671' '73925324677' '76825374671' '83825354675' '74825374672' '77925314672' '50925324674'<br/>'05925324670' '20925304670' '06825354674' '42825364678' '88825354673' '81825364678' '23925314673' '24925334677' '99825394677' '94825374674' '08825374674' '87925324675'<br/>'06925304678' '84825384672' '19825344672' '28825394679' '53925334671' '05925334676' '81925314671' '64825354676' '28825394673' '22925314674' '38825394679' '57925324671'<br/>'46925334672' '92925334678'&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let mode_exc = 'Z'&#59*NEW - April 2017&#59<br/><br/>*LIBRARIES&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplibname phc &nbsp&nbsp&nbsp&nbsp'/SAS_data/dw0/HQC_share/Beliz/continuity/Jan 2018'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>*needed library for SASApp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplibname hqc meta library=\"HQC\"&#59<br/><br/>*DISEASE COHORTS&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplibname copd   '/SAS_data/dw0/HQC_share/Shan/ACSC/17 Nov/Data/COPD'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplibname asthma '/SAS_data/dw0/HQC_share/Shan/ACSC/17 Nov/Data/Asthma'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplibname chf    '/SAS_data/dw0/HQC_share/Shan/ACSC/17 Nov/Data/CHF'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplibname cad    '/SAS_data/dw0/HQC_share/Shan/ACSC/17 Nov/Data/CAD'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplibname dm     '/SAS_data/dw0/HQC_share/Shan/ACSC/17 Nov/Data/DM'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplibname mood   '/SAS_data/dw0/HQC_share/Shan/ACSC/17 Nov/Data/Mood'&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspoptions mprint nosymbolgen nomlogic&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspoption compress=Y&#59<br/><br/><br/>options nosymbolgen nomlogic nomprint&#59<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*****************************************************************************************************/<br/><br/><br/><br/><br/>%let phc_dos_start &nbsp&nbsp&nbsp&nbsp= '01Apr2010'd&#59<br/>%let phc_dos_end &nbsp&nbsp&nbsp&nbsp= '30SEP2017'd&#59<br/><br/><br/><br/>%Extract_MSB(<br/>   &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspds_out&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp=&nbsp&nbsp&nbsp&nbspmsb_extract,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspxtrc_start_dt&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp= &nbsp&nbsp&nbsp&nbsp'31MAR2011'd,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspxtrc_end_dt&nbsp&nbsp&nbsp&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp= &nbsp&nbsp&nbsp&nbsp'19SEP2017'd,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdostart&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp= &nbsp&nbsp&nbsp&nbsp&phc_dos_start,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp    dosend&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp= &nbsp&nbsp&nbsp&nbsp&phc_dos_end)&#59*-Jan 2018:79,756,277, Apr2017: 73,926,659, -JuneWW16 62,303,134, -JanWW16 59,682,474- , JuneWW15 - 54,106,206&#59<br/><br/>proc sql&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp   select min(dos_1) as earliest format=date9., max(dos_1) as latest format=date9. <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp   from msb_extract&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp quit&#59*(01Apr2010 , 12Sep2017)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp <br/>* Do a nodupkey - Only important thing for PHC is having the \"Record of Visit\" not the individual claims&#59<br/>proc sort data=msb_extract nodupkey out=msb_extract_nodup_all&#59 by key_hsn dos_1 key_doc_num spec&#59 run&#59*jan 2018-57,471,158 ,apr2017-53,370,242, june2016-45150575,Jan16-43,276,407--39,312,813&#59<br/><br/>*Note:&nbsp&nbsp&nbsp&nbspThere is no case that num_srv = 0 - HQC does not receive those claims (deleted at the source by eHealth)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspAssume all spec's starting with B (%72.13) as BB and also keep the pediatricians with couple exlusions, and WB - nurse practitioners (per CIHI),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDelete slush physician numbers & (NEW) out of province claims through mode = Z&nbsp&nbsp&nbsp&nbsp<br/> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspRemember, in_patient&nbsp&nbsp&nbsp&nbsp= 'B' '2' 'K' (will be deleted)&#59<br/><br/>proc freq data = msb_extract_nodup_all&#59table num_srv&#59 run&#59<br/><br/>*There will be another exclusion in later steps regarding pediatricians and patient's age&#59<br/><br/>data msb_extract_nodup&#59 set msb_extract_nodup_all&#59<br/><br/>*apr2017 run had missing key_hsn - deleted&#59<br/>if key_hsn=\"\" then delete&#59<br/>if num_srv = 0 then delete&#59<br/>if los in:(&in_patient) then delete&#59<br/>if key_doc_num in:(&slush) then delete&#59<br/>if spec not in: ('B','C','WB') then delete&#59<br/>if substr(spec,1,1)='C' and ~(substr(fsc,1,1) not in ('B','C')) then delete&#59<br/>if mode in:(&mode_exc) then delete&#59<br/><br/>*fy&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp if '01APR2010'd LE dos_1 LE '31MAR2011'd then fy = 'FY2010/11'&#59&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspelse if '01APR2011'd LE dos_1 LE '31MAR2012'd then fy = 'FY2011/12'&#59<br/>&nbsp&nbsp&nbsp&nbspelse if '01APR2012'd LE dos_1 LE '31MAR2013'd then fy = 'FY2012/13'&#59<br/>&nbsp&nbsp&nbsp&nbspelse if '01APR2013'd LE dos_1 LE '31MAR2014'd then fy = 'FY2013/14'&#59<br/>&nbsp&nbsp&nbsp&nbspelse if '01APR2014'd LE dos_1 LE '31MAR2015'd then fy = 'FY2014/15'&#59<br/>&nbsp&nbsp&nbsp&nbspelse if '01APR2015'd LE dos_1 LE '31MAR2016'd then fy = 'FY2015/16'&#59<br/>&nbsp&nbsp&nbsp&nbspelse if '01APR2016'd LE dos_1 LE '31MAR2017'd then fy = 'FY2016/17'&#59<br/>&nbsp&nbsp&nbsp&nbspelse if '01APR2017'd LE dos_1 LE '31MAR2018'd then fy = 'FY2017/18'&#59<br/>rename xtrc_date=xtrc_date_msb&#59<br/>&nbsp&nbsp&nbsp&nbsp<br/>run&#59*Jan 2018-7271258,apr2017-34,698,104 -- jun16-29,523,814--jan16  28,294,478--25,747,453&#59<br/>proc freq data=msb_extract_nodup&#59 table fy spec num_srv los&#59run&#59<br/><br/>/*1b. Add demographic information (RHA at time of service)*/<br/><br/>%demog_assign(prs_xtrc_dt='02OCT2017'd,<br/>                   ds_in &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp= msb_extract_nodup,<br/>                   ds_out&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp= cohort_master_apr17, <br/>                   strt_dt_var&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp= dos_1,<br/>                   end_dt_var&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp= dos_1,<br/>                   geo_file&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp= &geo_file,<br/>incl_full_info=N)&#59*34,698,104&#59<br/><br/>proc freq data=cohort_master_apr17&#59 table sex_desc rha&#59run&#59<br/><br/>* Remove key_hsn's that we can NOT find in PHRS - 5,849 visits (previously - 1,084 visits)&#59<br/>* 34,607 times an RHA can NOT be assigned to a key_hsn - keep them for now&#59<br/><br/>data cohort_master_apr17_1&#59 set cohort_master_apr17&#59<br/><br/>if sex_desc = ''  then delete&#59<br/>if sex_desc&nbsp&nbsp&nbsp&nbsp= 'M' then male=1&#59 else male=0&#59<br/><br/>rename rha = rha_index&#59<br/><br/>drop tot_days mindiff_rha rhadays rhadiff mindiff_urb_rur urdays urdiff&#59<br/>run&#59* 37269992 (1266 visits dropped)&#59<br/>proc freq data=cohort_master_apr17_1&#59table fy sex_desc male rha_index&#59run&#59*28,758 missing RHA (apr2017), 35,499 missing rha--27,920 Rha cannot be assigned (roughly 10,000 people)&#59<br/><br/><br/>/*add age at date of service */<br/>* Note: There are handful of patients receiving services after their death date - very few thus not investigating - consider for future&#59<br/><br/>%calc_age_discr(ds_in=cohort_master_apr17_1,ds_out=cohort_master_1,refday_var=dos_1,agevar=age)&#59<br/><br/>proc freq data=cohort_master_1&#59 table age&#59run&#59* No missing age&#59<br/><br/>/*manipulate variables*/<br/><br/>* NOTE: There are some patients where best_dt < 01Apr2010, however, there are claims indicating that they have seen a physician after 01Apr2010 -  keep them (<1000 cases)&#59<br/><br/>data phc.cohort_master_3&#59 set cohort_master_1&#59<br/><br/>* Delete pediatrician claims if the patients is 18 and older&#59<br/>if age >= 18 and substr(spec,1,1)='C' then delete&#59<br/><br/>*For UPC calculation&#59<br/>n = 1&#59<br/><br/>run&#59*34,692,255&#59<br/>proc freq data=phc.cohort_master_3&#59 table n fy los&#59run&#59<br/>proc freq data=phc.cohort_master_3&#59 table age&#59 where substr(spec,1,1)='C'&#59run&#59<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp proc sql&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp   select min(dos_1) as earliest format=date9., max(dos_1) as latest format=date9. <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp   from phc.cohort_master_3&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp quit&#59*(01Apr2010 , 14Mar2017)&#59<br/><br/><br/>* RHA assignment of patients<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp RHA's are assigned to patients AT THE TIME OF PHY SERVICE<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp There are some patients who had assigned >1 RHA's within a fiscal year (probably due to a move)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp For those cases - assign the RHA where the patient was residing, received majority of services<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp If there is a draw, assign randomly&#59<br/><br/>* RHA frequencies&#59<br/>proc sql noprint&#59 <br/>create table rha_assign as <br/>  select key_hsn, fy, rha_index,<br/>  &nbsp&nbsp&nbsp&nbspsum (n)&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspas rha_times<br/>from phc.cohort_master_3<br/>  group by key_hsn, fy, rha_index<br/>  order by key_hsn&#59<br/>run&#59*6,255,567&#59<br/>proc sort data=rha_assign&#59 by key_hsn fy descending rha_times&#59 run&#59*6,255,567 -- 1,261,810 unique patients&#59<br/>proc sort data=rha_assign nodupkey out=rha_assign_1&#59 by key_hsn fy&#59run&#59* 6,186,049&#59<br/><br/><br/>* It has been decided to ONLY include UPC to the PLT Wall - thus only calculate UPC&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp /*UPC index*/<br/><br/>* Sum the visits by EACH DOCTOR in EACH FY by EACH PATIENT&#59<br/>proc summary nway data=phc.cohort_master_3&#59<br/>class key_hsn key_doc_num fy&#59<br/>var n&#59<br/>output out=upc n=visits&#59<br/>run&#59<br/>proc freq data=upc&#59 table visits&#59run&#59<br/><br/>data upc_drop(drop=_type_ _freq_)&#59 set upc&#59run&#59* Notes:&nbsp&nbsp&nbsp&nbspType is all 7, Freq & visits are exactly same (delete them)&#59<br/><br/><br/>*&nbsp&nbsp&nbsp&nbspSum the total visits in EACH FY by EACH PATIENT<br/>Also keeps the maximum number of visits done to an individual physician&#59<br/>proc summary nway data=upc_drop&#59<br/>class key_hsn fy&#59<br/>var visits&#59<br/>output out=upc3 max=max_visits sum=visits&#59<br/>run&#59<br/><br/>proc sort data=upc&#59 by key_hsn fy&#59run&#59<br/>proc sort data=upc3&#59 by key_hsn fy&#59run&#59<br/><br/>* Delete cases where the patient had ONLY 1 visit within a fiscal year&#59<br/>data upc_1(drop=_type_ _freq_)&#59 set upc3&#59<br/>if visits = 1 then delete&#59<br/>run&#59<br/>proc freq data = upc_1&#59 table visits&#59run&#59<br/><br/>data UPC_index&#59<br/>set upc_1&#59<br/>UPC=(max_visits/visits)*100&#59<br/>format UPC 8.2&#59<br/>run&#59<br/>proc freq data=UPC_index&#59 table fy upc&#59run&#59<br/><br/>*Merge the RHA info&#59<br/>proc sort data=rha_assign_1&#59by key_hsn fy&#59run&#59<br/>proc sort data=UPC_index&#59by key_hsn fy&#59run&#59<br/><br/>data phc.UPC_final&#59<br/>merge UPC_index(in=b) rha_assign_1(in=m)&#59<br/><br/>by key_hsn fy&#59<br/>if b&#59<br/>format rha_name $22.&#59<br/>if rha_index = '1' then rha_name = \"Sun Country\"&#59<br/>if rha_index = '2' then rha_name = \"Five Hills\"&#59<br/>if rha_index = '3' then rha_name = \"Cypress\"&#59<br/>if rha_index = '4' then rha_name = \"Regina Qu'Appelle\"&#59<br/>if rha_index = '5' then rha_name = \"Sunrise\"&#59<br/>if rha_index = '6' then rha_name = \"Saskatoon\"&#59<br/>if rha_index = '7' then rha_name = \"Heartland\"&#59<br/>if rha_index = '8' then rha_name = \"Kelsey Trail\"&#59<br/>if rha_index = '9' then rha_name = \"Prince Albert\"&#59<br/>if rha_index = '10' then rha_name = \"Prairie North\"&#59<br/>if rha_index = '11' or rha_index = '12' or rha_index = '13' then rha_name = \"Northern Sask\"&#59<br/>if rha_index = ''  then rha_name = \"Missing\"&#59<br/><br/>run&#59<br/>proc freq data=phc.UPC_final order=freq&#59 table rha_index rha_name fy UPC&#59 run&#59<br/><br/>* Important Note (Meric) Aug 6, 2015: Above dataset created and saved phc.UPC_final. Run below to report to PLT Wall Walk.<br/><br/>* UPC by RHA&#59<br/>proc report data=phc.UPC_final missing&#59 <br/>column fy rha_name UPC,(n mean)&#59<br/>define fy &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define rha_name&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define UPC&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ analysis&#59<br/>run&#59<br/><br/>* UPC by SK&#59<br/>proc report data=phc.UPC_final missing&#59 <br/>column fy UPC,(n mean)&#59<br/>define fy &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define UPC&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ analysis&#59<br/>run&#59<br/><br/>* ACSC Drilldown&#59<br/><br/>* 1.Asthma&#59<br/>proc sql&#59<br/>create table asthma_UPC as select * from phc.UPC_final<br/>where key_hsn in<br/>(select key_hsn from asthma.master)&#59<br/>quit&#59*Jan2018-5498078,April17:557,990 /// January16:463,710 /// October15: 416,059 /// June15 run:338,082 /// March15 run:331,387 /// Dec14 run:270,372 /// Aug14 run:232,809&#59<br/><br/><br/>* Asthma UPC by RHA&#59<br/>proc report data=asthma_UPC missing&#59 <br/>column fy rha_name UPC,(n mean)&#59<br/>define fy &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define rha_name&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define UPC&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ analysis&#59<br/>run&#59<br/><br/>* Asthma  UPC by SK&#59<br/>proc report data=asthma_UPC missing&#59 <br/>column fy UPC,(n mean)&#59<br/>define fy &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define UPC&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ analysis&#59<br/>run&#59<br/><br/><br/>* 2.CAD&#59<br/>proc sql&#59<br/>create table CAD_UPC as select * from phc.UPC_final<br/>where key_hsn in<br/>(select key_hsn from CAD.CAD)&#59<br/>quit&#59* April17:461,757 /// January16: 392,945 ///October15: 358,176 /// June15 run:313,105 /// March15 run:310,737 // Dec14 run:251,777 -Aug14 run:243,896&#59<br/><br/>* CAD UPC by RHA&#59<br/>proc report data=CAD_UPC missing&#59 <br/>column fy rha_name UPC,(n mean)&#59<br/>define fy &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define rha_name&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define UPC&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ analysis&#59<br/>run&#59<br/><br/>* CAD  UPC by SK&#59<br/>proc report data=CAD_UPC missing&#59 <br/>column fy UPC,(n mean)&#59<br/>define fy &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define UPC&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ analysis&#59<br/>run&#59<br/><br/><br/>* 3.CHF&#59<br/>proc sql&#59<br/>create table CHF_UPC as select * from phc.UPC_final<br/>where key_hsn in<br/>(select key_hsn from CHF.CHF)&#59<br/>quit&#59*April17:305,696 /// January16: 261,091 /// October15: 237,316  /// June15 run:200,287 /// March15 run:199,151// Dec14 run:163,569 - Aug14 run:159,443&#59<br/><br/>* CHF UPC by RHA&#59<br/>proc report data=CHF_UPC missing&#59 <br/>column fy rha_name UPC,(n mean)&#59<br/>define fy &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define rha_name&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define UPC&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ analysis&#59<br/>run&#59<br/><br/>* CHF  UPC by SK&#59<br/>proc report data=CHF_UPC missing&#59 <br/>column fy UPC,(n mean)&#59<br/>define fy &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define UPC&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ analysis&#59<br/>run&#59<br/><br/><br/>* 4.COPD&#59<br/>proc sql&#59<br/>create table COPD_UPC as select * from phc.UPC_final<br/>where key_hsn in<br/>(select key_hsn from COPD.COPD)&#59<br/>quit&#59*April17:396,216 /// January16: 330,876 /// October15: 295,995 /// June15 run:249,655 /// March15 run:247,427 // Dec14 run:200,578 - Aug14 run:194,410&#59<br/><br/>* COPD UPC by RHA&#59<br/>proc report data=COPD_UPC missing&#59 <br/>column fy rha_name UPC,(n mean)&#59<br/>define fy &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define rha_name&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define UPC&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ analysis&#59<br/>run&#59<br/><br/>* COPD UPC by SK&#59<br/>proc report data=COPD_UPC missing&#59 <br/>column fy UPC,(n mean)&#59<br/>define fy &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define UPC&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ analysis&#59<br/>run&#59<br/><br/><br/>* 5.DM&#59<br/>proc sql&#59<br/>create table DM_UPC as select * from phc.UPC_final<br/>where key_hsn in<br/>(select key_hsn from DM.DM)&#59<br/>quit&#59*April17:593,552 /// January16: 497,721 /// October15: 448,050 ///June15 run:382,400 /// March15 run:379,076 // Dec14 run:305,827 -Aug14 run:295,604&#59<br/><br/>* DM UPC by RHA&#59<br/>proc report data=DM_UPC missing&#59 <br/>column fy rha_name UPC,(n mean)&#59<br/>define fy &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define rha_name&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define UPC&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ analysis&#59<br/>run&#59<br/><br/>* DM UPC by SK&#59<br/>proc report data=DM_UPC missing&#59 <br/>column fy UPC,(n mean)&#59<br/>define fy &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define UPC&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ analysis&#59<br/>run&#59<br/><br/><br/>* 6.Mood&#59<br/>proc sql&#59<br/>create table Mood_UPC as select * from phc.UPC_final<br/>where key_hsn in<br/>(select key_hsn from Mood.Mood)&#59<br/>quit&#59*April17: 1,000,000+ /// *January16: 1,872,423 /// October15: 1,690,695 /// June15 run:1,495,170 /// March15 run:1,469,429 // Dec14 run:1,196,115 - Aug14 run:1,092,251&#59<br/><br/>* Mood UPC by RHA&#59<br/>proc report data=Mood_UPC missing&#59 <br/>column fy rha_name UPC,(n mean)&#59<br/>define fy &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define rha_name&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define UPC&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ analysis&#59<br/>run&#59<br/><br/>* Mood UPC by SK&#59<br/>proc report data=Mood_UPC missing&#59 <br/>column fy UPC,(n mean)&#59<br/>define fy &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define UPC&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ analysis&#59<br/>run&#59<br/><br/><br/>**********************************************************************************<br/>**********************************************************************************<br/>**********************************************************************************<br/><br/>/* DATA PREPERATION FOR QIO */<br/><br/>* UPC by RHA&#59<br/>proc means data=phc.UPC_final&#59<br/>class fy rha_name&#59<br/>var upc&#59<br/>output out=whole_pop_rha mean=result_connected&#59 run&#59<br/><br/>data whole_pop_rha_1&#59 set whole_pop_rha&#59<br/>if fy = \"\" then delete&#59<br/>if rha_name = \"\" then rha_name=\"sk\"&#59<br/>drop _type_ _freq_&#59<br/>run&#59<br/><br/>* ACSC Drilldown&#59<br/><br/>* 1.Asthma&#59<br/>proc means data=asthma_UPC&#59<br/>class fy rha_name&#59<br/>var upc&#59<br/>output out=asthma_rha mean=result_connected&#59 run&#59<br/><br/>data asthma_rha_1&#59 set asthma_rha&#59<br/>if fy = \"\" then delete&#59<br/>if rha_name = \"\" then rha_name=\"sk\"&#59<br/>format tag1 $char12.&#59<br/>tag1 = \"asthma\"&#59<br/>drop _type_ _freq_&#59<br/>run&#59<br/><br/><br/>* 2.CAD&#59<br/>proc means data=cad_UPC&#59<br/>class fy rha_name&#59<br/>var upc&#59<br/>output out=cad_rha mean=result_connected&#59 run&#59<br/><br/>data cad_rha_1&#59 set cad_rha&#59<br/>if fy = \"\" then delete&#59<br/>if rha_name = \"\" then rha_name=\"sk\"&#59<br/>format tag1 $char12.&#59<br/>tag1 = \"cad\"&#59<br/>drop _type_ _freq_&#59<br/>run&#59<br/><br/><br/>* 3.CHF&#59<br/>proc means data=chf_UPC&#59<br/>class fy rha_name&#59<br/>var upc&#59<br/>output out=chf_rha mean=result_connected&#59 run&#59<br/><br/>data chf_rha_1&#59 set chf_rha&#59<br/>if fy = \"\" then delete&#59<br/>if rha_name = \"\" then rha_name=\"sk\"&#59<br/>format tag1 $char12.&#59<br/>tag1 = \"chf\"&#59<br/>drop _type_ _freq_&#59<br/>run&#59<br/><br/><br/>* 4.COPD&#59<br/>proc means data=copd_UPC&#59<br/>class fy rha_name&#59<br/>var upc&#59<br/>output out=copd_rha mean=result_connected&#59 run&#59<br/><br/>data copd_rha_1&#59 set copd_rha&#59<br/>if fy = \"\" then delete&#59<br/>if rha_name = \"\" then rha_name=\"sk\"&#59<br/>format tag1 $char12.&#59<br/>tag1 = \"copd\"&#59<br/>drop _type_ _freq_&#59<br/>run&#59<br/><br/><br/>* 5.DM&#59<br/>proc means data=dm_UPC&#59<br/>class fy rha_name&#59<br/>var upc&#59<br/>output out=dm_rha mean=result_connected&#59 run&#59<br/><br/>data dm_rha_1&#59 set dm_rha&#59<br/>if fy = \"\" then delete&#59<br/>if rha_name = \"\" then rha_name=\"sk\"&#59<br/>format tag1 $char12.&#59<br/>tag1 = \"dm\"&#59<br/>drop _type_ _freq_&#59<br/>run&#59<br/> <br/><br/>* 6.Mood&#59<br/>proc means data=mood_UPC&#59<br/>class fy rha_name&#59<br/>var upc&#59<br/>output out=mood_rha mean=result_connected&#59 run&#59<br/><br/>data mood_rha_1&#59 set mood_rha&#59<br/>if fy = \"\" then delete&#59<br/>if rha_name = \"\" then rha_name=\"sk\"&#59<br/>format tag1 $char12.&#59<br/>tag1 = \"mood\"&#59<br/>drop _type_ _freq_&#59<br/>run&#59<br/><br/>*Combine all databases&#59<br/><br/>data phc.qio_connectedness&#59 retain date result_connected rha_name tag1&#59 set whole_pop_rha_1 &#59*asthma_rha_1 cad_rha_1 chf_rha_1 copd_rha_1 dm_rha_1 mood_rha_1<br/><br/>if rha_name = \"Cypress\" &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthen rha_name = \"chr\"&#59<br/>if rha_name = \"Sun Country\" &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthen rha_name = \"schr\"&#59<br/>if rha_name = \"Five Hills\" &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthen rha_name = \"fhhr\"&#59<br/>if rha_name = \"Regina Qu'Appelle\" &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthen rha_name = \"rqhr\"&#59<br/>if rha_name = \"Sunrise\" &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthen rha_name = \"sunhr\"&#59<br/>if rha_name = \"Saskatoon\" &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthen rha_name = \"shr\"&#59<br/>if rha_name = \"Heartland\" &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthen rha_name = \"hhr\"&#59<br/>if rha_name = \"Kelsey Trail\" &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthen rha_name = \"kthr\"&#59<br/>if rha_name = \"Prince Albert\" &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthen rha_name = \"paphr\"&#59<br/>if rha_name = \"Prairie North\" &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthen rha_name = \"pnhr\"&#59<br/>if rha_name = \"Northern Sask\" &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthen rha_name = \"northern\"&#59<br/><br/>if rha_name = \"Missing\" then delete&#59<br/><br/>rename rha_name = tag&#59<br/><br/>if fy = \"FY2010/11\" then date = \"20100630\"&#59<br/>if fy = \"FY2011/12\" then date = \"20110630\"&#59<br/>if fy = \"FY2012/13\" then date = \"20120630\"&#59<br/>if fy = \"FY2013/14\" then date = \"20130630\"&#59<br/>if fy = \"FY2014/15\" then date = \"20140630\"&#59<br/>if fy = \"FY2015/16\" then date = \"20150630\"&#59<br/>if fy = \"FY2016/17\" then date = \"20160630\"&#59<br/>if fy = \"FY2017/18\" then date = \"20170630\"&#59<br/>drop fy&#59<br/><br/>run&#59<br/>proc freq data=phc.qio_connectedness&#59 table tag tag1 date&#59run&#59<br/><br/><br/><br/>/*UPC taxonomy*/<br/>data taxupc&#59<br/>infile datalines truncover&#59<br/>length date $45. rate $45. region $45. acsc $45.&#59<br/>input date rate region acsc&#59<br/>datalines&#59<br/>number-of-data-columns duration tag tag . . . . . . <br/>1 fiscal-year connected-phys smarter . . . . . . <br/>date  result-connected-phys|percentage tag tag<br/>&#59 <br/>run&#59<br/><br/>data qio_connectedness &#59<br/>retain date rate region acsc&#59<br/>set phc.qio_connectedness &#59<br/><br/>*rename result_connected=rate&#59<br/>rename tag=region&#59<br/>rename tag1=acsc&#59<br/>rate=trim (left (put(result_connected, 12.2)))&#59<br/>drop result_connected&#59<br/><br/> <br/>run&#59<br/><br/>data phc.upc_apr17&#59<br/>set taxupc qio_connectedness &#59<br/>run&#59<br/><br/><br/><br/>data qio_connectedness &#59<br/>retain date rate region acsc&#59<br/>set phc.qio_connectedness &#59<br/><br/>*rename result_connected=rate&#59<br/>rename tag=region&#59<br/>rename tag1=acsc&#59<br/>rate=trim (left (put(result_connected, 12.2)))&#59<br/>drop result_connected&#59<br/><br/> <br/>run&#59<br/>proc sort data=qio_connectedness&#59 by  date region&#59<br/>run&#59<br/>proc transpose data=qio_connectedness out=moh&#59<br/>by date region&#59<br/>var acsc rate&#59<br/>run&#59<br/> <br/>data moh1&#59<br/>set moh&#59<br/>drop _name_&#59<br/>rename col2=asthma&#59<br/>rename col3=cad&#59<br/>rename col4=chf&#59<br/>rename col5=copd&#59<br/>rename col6=dm&#59<br/>rename col7=mood&#59<br/>if col1=. then delete&#59<br/>rename col1=all&#59<br/>run&#59<br/><br/><br/><br/>/* -------------------------------------------------------------------<br/>   Code generated by SAS Task<br/><br/>   Generated on: Thursday, January 21, 2016 at 11:23:17 AM<br/>   By task: List Data1<br/><br/>   Input Data: WORK.MOH1<br/>   Server:  Local<br/>   ------------------------------------------------------------------- */<br/><br/>%_eg_conditional_dropds(WORK.SORTTempTableSorted)&#59<br/>/* -------------------------------------------------------------------<br/>   Sort data set WORK.MOH1<br/>   ------------------------------------------------------------------- */<br/>PROC SORT<br/>&nbsp&nbsp&nbsp&nbspDATA=WORK.MOH1(FIRSTOBS=1  KEEP=date asthma cad chf copd dm mood all region)<br/>&nbsp&nbsp&nbsp&nbspOUT=WORK.SORTTempTableSorted<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbspBY region&#59<br/>RUN&#59<br/>TITLE&#59<br/>TITLE1 \"Report Listing\"&#59<br/>FOOTNOTE&#59<br/>FOOTNOTE1 \"Generated by the SAS System (&_SASSERVERNAME, &SYSSCPL) on %TRIM(%QSYSFUNC(DATE(), NLDATE20.)) at %TRIM(%SYSFUNC(TIME(), TIMEAMPM12.))\"&#59<br/><br/>/* Start of custom user code. */<br/>ods tagsets.excelxp style=sasweb file=\"/SAS_data/dw0/HQC_share/Beliz/continuity/oct2016/by_options.xls\" options(suppress_bylines='yes')&#59<br/>/* End of custom user code. */<br/><br/>PROC PRINT DATA=WORK.SORTTempTableSorted<br/>&nbsp&nbsp&nbsp&nbspOBS=\"Row number\"<br/>&nbsp&nbsp&nbsp&nbspLABEL<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbspVAR date asthma cad chf copd dm mood all&#59<br/>&nbsp&nbsp&nbsp&nbspBY region&#59<br/>RUN&#59<br/><br/>/* Start of custom user code. */<br/>ods tagsets.excelxp close&#59<br/>/* End of custom user code. */<br/>/* -------------------------------------------------------------------<br/>   End of task code.<br/>   ------------------------------------------------------------------- */<br/>RUN&#59 QUIT&#59<br/>%_eg_conditional_dropds(WORK.SORTTempTableSorted)&#59<br/>TITLE&#59 FOOTNOTE&#59<br/><br/>s///<br/>t///","custparents":[{"idx":"CodeTask-CljcMilWauaTBrim"}]},{"idx":"CodeTask-nbwvdnJMbVnPgccI","name":"Physician Pannel code","type":"TASK","NodeDescription":"///t<br/>///s<br/>/*from<br/>P:\\2018 - Physician Panel Reports\\SAS code\\1. Patient Allocation to Physician Panels(Alberta Health).sas*/<br/><br/>/*PHYSICIAN PRACTICE REPORTS*/<br/>/*<br/>1. Extract MSB starting from latest available date (31 Dec 2017) and going back 5 years<br/>2. Exclude from MSB<br/>if key_hsn=\"\" then delete<br/>if num_srv = 0 then delete<br/>if los in:(&in_patient) then delete<br/>if key_doc_num in:(&slush) then delete<br/>if spec not in: ('B','C','WB') then delete<br/>if substr(spec,1,1)='C' and ~(substr(fsc,1,1) not in ('B','C')) then delete<br/>if mode in:(&mode_exc) then delete<br/>*/<br/>%let mode_exc = 'Z'&#59*NEW - April 2017&#59<br/>%let in_patient= 'B' '2' 'K'&#59<br/>*Slush codes are added from clean.Physician #s for Slush codes (new).txt&#59<br/>%let slush='76925314678' '36825374671' '52825354677' '66925324672' '38825384673' '52825354672' '35925334677' '00825374673' '32825384674' '79825354677' '42925314672' '14925324671'<br/>'74825384673' '95825354670' '86825364672' '95925344676' '03925304670' '59925304677' '96925314677' '36925314674' '96925314672' '62825364671' '28925304679' '82825394672'<br/>'43925314674' '13825364672' '31925324677' '48925314670' '05825364678' '17825354674' '13925304670' '82825384679' '27825354670' '19825374671' '45925304670' '07925304677'<br/>'05925344673' '64925344674' '25925304675' '95925314671' '05825354679' '64925304678' '26925334671' '80925334670' '87925304678' '53825394678' '17825344678' '52925304678'<br/>'61825384670' '17825374676' '31825374679' '29825354679' '41925304676' '01825374674' '24825364678'<br/>'11345384672' '91925324677' '87825394671' '81925304678' '74925304674' '78925334671' '01825354674' '58825374670' '83925324670' '34825364677' '58925324670' '53825384670' <br/>'27825344678' '48925314676' '37825364674' '31925324675' '56925304672' '95925344670' '02825384671' '81825354676' '22925304670' '51825394672' '95925304677' '84825354674' <br/>'74925314673'<br/>'06825384675' '39825344678' '99825374677' '35925304676' '73825364675' '14925304678' '14825354671' '14925314673' '76825364676' '88925314677' '76825374677' '23825374672'<br/>'74825384670' '07925334671' '71825364676' '24925304677' '11925324678' '49925334678' '31925324674' '80925314677' '91825364675' '11825374679' '55925324679' '99925304678'<br/>'35825374676' '10925314671' '22825394677' '93825394679' '26925314679' '59825344671' '27825384672' '12925304677' '42925304671' '16825364671' '24925304679' '82925314676'<br/>'17925314671' '04825394674' '16825344676' '33925344675' '01825394671' '28925314674' '18825354679' '25925344671' '01825354670' '93925304677' '47925334678' '37925334676'<br/>'01825364673' '75925324675' '85925314673' '35925334678' '24825364679' '90925304671' '73925324677' '76825374671' '83825354675' '74825374672' '77925314672' '50925324674'<br/>'05925324670' '20925304670' '06825354674' '42825364678' '88825354673' '81825364678' '23925314673' '24925334677' '99825394677' '94825374674' '08825374674' '87925324675'<br/>'06925304678' '84825384672' '19825344672' '28825394679' '53925334671' '05925334676' '81925314671' '64825354676' '28825394673' '22925314674' '38825394679' '57925324671'<br/>'46925334672' '92925334678'&#59<br/><br/>/*vaheguru ji   Extract MSB data*/<br/>%include '/SAS_data/dw0/HQC_share/Clean/library_dw0.sas'&#59<br/>%include '/SAS_data/dw0/HQC_Data_Lab/Macros/DataManip/demog_assign.sas'&#59<br/>%include '/SAS_data/dw0/HQC_Data_Lab/Macros/DataManip/coverage_days.sas'&#59<br/>libname ppr '/SAS_data/dw0/HQC_share/nsidhu/PPR/data_MS'&#59<br/>%INCLUDE '/SAS_data/dw0/HQC_Data_Lab/Macros/DataManip/Extract_MSB.sas'&#59&nbsp&nbsp&nbsp&nbsp<br/>%Extract_MSB(xtrc_start_dt='31Mar2012'd,<br/>                   xtrc_end_dt='26Mar2018'd, <br/>                   excl_xtrc_dt=, <br/>                   ds_out=temp_msb, <br/>                   ds_out_hsn_only=, <br/>                   hsn_list=, <br/>                   hsn_file=, <br/>                   MDnumber=, <br/>                   diagcode=, <br/>&nbsp&nbsp&nbsp&nbsp       diag_file=, <br/>                   dostart='01Apr2013'd, <br/>                   dosend='31Mar2018'd, <br/>                   fscode=, <br/>                   loscode=, <br/>                   othercondition=, <br/>                   othernumber=, <br/>                   kept_vars=KEY_HSN KEY_DOC_NUM SPEC MG DIAG FSC NUM_SRV LOS CONTACTS AMT_APP MODE, <br/>                   debug=N)&#59&nbsp&nbsp&nbsp&nbsp<br/>data ppr.temp_msb1&#59<br/>set temp_msb&#59<br/>SPEC1=trim(left(upcase(substr(SPEC, 1,1))))&#59<br/>if SPEC1='B' then SPEC_flag=1&#59 else SPEC_flag=0&#59<br/>run&#59<br/><br/>/*<br/>Quality Checks: Check below for the chosen 4 physicians, <br/>Proc freq variable SPEC and LOS<br/>Check the earliest dos_1 for each of 4 physicians<br/>Extract the data of these 4 physicians from the physician mobility file to check the practice start dates<br/>*/<br/>proc freq data=ppr.temp_msb1&#59<br/>table spec los&#59<br/>run&#59<br/><br/>/*Exclusions mention above in notes*/<br/>data temp_msb2&#59/*332003786 out of 54983036*/<br/>set ppr.temp_msb1&#59<br/>/*<br/>if key_doc_num in ('51925304676' '42925324679' '27925304675' '63825354679' '05825374675' '73925324675') <br/>then key_doc_num='00123456789'&#59<br/>*/<br/><br/>if key_hsn='' then delete&#59<br/>if num_srv=0 then delete&#59<br/>*if los in:(&in_patient) then delete&#59/*we decided to include hospital physician visits April 26*/<br/>if key_doc_num in:(&slush) then delete&#59<br/>if spec not in: ('B') then delete&#59<br/>if mode in:(&mode_exc) then delete&#59<br/>if substr(spec,1,1)='C' and ~(substr(fsc,1,1) not in ('B','C')) then delete&#59<br/>run&#59<br/>proc freq data=temp_msb2&#59<br/>tables spec&#59 run&#59<br/>/*Step 4 removing same day, same doctor visits: <br/>NOTE: There were 32003786 observations read from the data set WORK.TEMP_MSB2.<br/>NOTE: 5942281 observations with duplicate key values were deleted.<br/>NOTE: The data set PPR.TEMP_MSB2 has 26061505 observations and 14 variables.<br/>*/<br/>data ppr.temp_msb1x&#59<br/>set temp_msb2&#59<br/>if FSC in ('B003' 'B064' 'B052' 'B004' ) then physical_flag=1&#59 else physical_flag=0&#59<br/>run&#59<br/><br/>proc sort data=ppr.temp_msb1x&#59<br/>by key_hsn key_doc_num dos_1 descending physical_flag&#59<br/>run&#59<br/>proc sort data=ppr.temp_msb1x out=ppr.temp_msb2 nodupkey&#59<br/>by key_hsn key_doc_num dos_1&#59<br/>run&#59<br/>/*<br/>NOTE: There were 26061505 observations read from the data set PPR.TEMP_MSB2.<br/>NOTE: The data set WORK.TEMP_MSB_3YEAR has 15783671 observations and 14 variables.<br/>*/<br/>data temp_msb_3year&#59<br/>set ppr.temp_msb2&#59<br/>where ('01Apr2015'd LE dos_1 LE '31Mar2018'd)&#59<br/><br/>     if ('01Apr2015'd LE dos_1 LE '31Mar2016'd) then FY='201516'&#59<br/>else if ('01Apr2016'd LE dos_1 LE '31Mar2017'd) then FY='201617'&#59<br/>else if ('01Apr2017'd LE dos_1 LE '31Mar2018'd) then FY='201718'&#59<br/>else if ('01Apr2018'd LE dos_1 LE '31Mar2019'd) then FY='201819'&#59<br/>run&#59<br/><br/><br/>/*checking coverage on Mar 31, 2018*/<br/>data temp_msb_3year&#59<br/>set temp_msb_3year&#59<br/>cover_dt1='1Dec2017'd&#59<br/>cover_dt='31Dec2017'd&#59 /*change these dates to 31Mar 2018 when data comes*/<br/>format cover_dt date9. cover_dt1 date9.&#59<br/>run&#59<br/><br/>%coverage_days(xtrc_dt='02JAN2018'd,<br/>&nbsp&nbsp&nbsp&nbspds_in=temp_msb_3year,<br/>&nbsp&nbsp&nbsp&nbspds_out=temp_msb_3year_covered, <br/>&nbsp&nbsp&nbsp&nbspstrt_dt_var=cover_dt,      <br/>&nbsp&nbsp&nbsp&nbspend_dt_var=cover_dt,<br/>&nbsp&nbsp&nbsp&nbspdef_strt_dt=07DEC1994,<br/>&nbsp&nbsp&nbsp&nbspdef_end_dt=&sysdate9,<br/>&nbsp&nbsp&nbsp&nbspcvrg_strt_dt_var=eff_date,<br/>&nbsp&nbsp&nbsp&nbspcvrg_end_dt_var=exp_date)&#59<br/>proc freq data=temp_msb_3year_covered&#59<br/>table cvgdays&#59<br/>run&#59<br/>/*keeping if covered on last day of month*/<br/>data temp_msb_3yearx&#59<br/>set temp_msb_3year_covered&#59<br/>if cvgdays=1&#59<br/>run&#59<br/><br/>proc sort data=temp_msb_3yearx out=tt nodupkey&#59 by key_doc_num&#59 run&#59/*1548*/<br/>proc sql noprint&#59 <br/>create table temp_msb_3year1 as <br/>select *, count(dos_1) as total_visits3<br/>from temp_msb_3yearx<br/>group by key_hsn<br/>order by key_hsn&#59<br/>run&#59<br/>proc sort data=temp_msb_3year1 nodupkey out=checkz&#59 by key_hsn&#59 run&#59<br/>proc freq data=checkz&#59table total_visits3&#59run&#59<br/><br/>proc sql noprint&#59 <br/>create table temp_msb_3year2 as <br/>select *, count(dos_1) as total_visits_phy3<br/>from temp_msb_3year1<br/>group by key_hsn, key_doc_num<br/>order by key_hsn, key_doc_num&#59<br/>run&#59<br/><br/>data ppr.visits_by_phy_3year&#59/*14943391 visits*/<br/>retain key_hsn key_doc_num total_visits_phy3 total_visits3 upc3&#59<br/>set temp_msb_3year2&#59<br/>upc3=(total_visits_phy3/total_visits3)*100&#59<br/>format upc3 6.2&#59<br/>run&#59<br/>proc sort data=ppr.visits_by_phy_3year out=tt nodupkey&#59 by key_doc_num&#59 run&#59/*1548*/<br/><br/>/*Single provider*/<br/>data sole_visits ppr.after_sole_visits&#59/*sole=921798 1061676+rest left out=14861873=Total of 15783671*/<br/>set ppr.visits_by_phy_3year&#59<br/>if upc3=100 then output sole_visits&#59<br/>else output ppr.after_sole_visits&#59<br/>run&#59<br/>proc sort data=sole_visits&#59/*sorting this way? Idea is to keep the last visit date*/<br/>by key_hsn descending dos_1 key_doc_num&#59 <br/>run&#59<br/>proc sort data=sole_visits nodupkey out=ppr.sole_visits&#59/*729502 accounting for 921798 visits*/<br/>by key_hsn key_doc_num&#59 <br/>run&#59<br/>data ppr.sole_visits&#59<br/>set ppr.sole_visits&#59<br/>step=1&#59<br/>run&#59<br/><br/>/*192296 individuals keys are alloted physician based on sole provider*/<br/>proc sort data=ppr.sole_visits out=check1 nodupkey&#59<br/>by key_hsn&#59<br/>run&#59<br/><br/>/*14861873 observations (or 938099 unique individuals) has to allocated doctor based on criteria below*/<br/>proc sort data=ppr.after_sole_visits out=check nodupkey&#59<br/>by key_hsn&#59<br/>run&#59<br/>/*<br/>2. Majority Provider&#59 <br/>3. if tie then PHYSICAL EXAM(3B), CDM(64B), SUPPORTIVE CARE(52B), WELL BABY(4B) takes prority&#59<br/>4. if no physical then date of service takes priority<br/>*/  <br/>data after_sole_visitsx&#59<br/>retain key_hsn upc3 FSC physical_flag dos_1 key_doc_num&#59<br/>set ppr.after_sole_visits&#59<br/>/*if FSC in ('B003' 'B064' 'B052' 'B004' ) then physical_flag=1&#59 else physical_flag=0&#59*/<br/>run&#59<br/>proc freq data=after_sole_visitsx&#59 tables physical_flag&#59 run&#59<br/>proc sort data=after_sole_visitsx&#59<br/>by key_hsn descending upc3 descending physical_flag descending dos_1 key_doc_num&#59<br/>run&#59<br/>proc sort data=after_sole_visitsx out=after_sole_visitsxz nodupkey&#59 /*904902 accounting for 14084916 visits*/<br/>by key_hsn&#59<br/>run&#59<br/><br/>/*to add which step contributed, i changed code as under and we get same result*/<br/>/*Here starts setp 2*/<br/>proc sort data=after_sole_visitsx out=step2A nodupkey&#59<br/>by key_hsn upc3 key_doc_num&#59<br/>run&#59<br/>proc sort data=step2A&#59<br/>by key_hsn descending upc3 descending physical_flag descending dos_1 key_doc_num&#59<br/>run&#59<br/>data step2B&#59<br/>_n_ ++ 1&#59<br/>if _n_ LE n then do&#59<br/>set step2A point=_n_&#59<br/>leadupc3=upc3&#59<br/>end&#59<br/>set step2A nobs=n end=end&#59<br/>by key_hsn&#59<br/>if end then leadupc3=.&#59<br/>run&#59<br/>data step2C&#59<br/>set step2B&#59<br/>by key_hsn&#59<br/>if last.key_hsn then do&#59<br/>leadupc3=.&#59<br/>end&#59<br/>run&#59<br/>data step2D&#59<br/>set step2C&#59<br/>by key_hsn&#59<br/>if first.key_hsn then do&#59<br/>if upc3 GT leadupc3 then step=2&#59<br/>&nbsp&nbsp&nbsp&nbsp        else step=9&#59<br/>&nbsp&nbsp&nbsp&nbsp      end&#59<br/>run&#59<br/>proc freq data=step2D&#59<br/>tables step&#59<br/>run&#59<br/>data step2E&#59/*741493 unique people got alloted in step 2*/<br/>set step2D&#59<br/>if step=2&#59<br/>run&#59<br/>proc sort data=step2E out=check nodupkey&#59 by key_hsn&#59 run&#59<br/><br/>/*Here starts setp 3*/<br/>Proc sql&#59/*start with 1030476 observations*/ <br/>create table step3 as select * from after_sole_visitsx<br/>where key_hsn not in <br/>(select key_hsn from step2E)&#59<br/>quit&#59<br/>proc sort data=step3 out=step3A nodupkey&#59/*704108*/<br/>by key_hsn physical_flag key_doc_num&#59<br/>run&#59<br/>proc sort data=step3A&#59<br/>by key_hsn descending upc3 descending physical_flag descending dos_1 key_doc_num&#59<br/>run&#59<br/>data step3B&#59<br/>_n_ ++ 1&#59<br/>if _n_ LE n then do&#59<br/>set step3A point=_n_&#59<br/>leadphysical_flag=physical_flag&#59<br/>end&#59<br/>set step3A nobs=n end=end&#59<br/>by key_hsn&#59<br/>if end then leadphysical_flag=.&#59<br/>run&#59<br/>data step3C&#59<br/>set step3B&#59<br/>by key_hsn&#59<br/>if last.key_hsn then do&#59<br/>leadphysical_flag=.&#59<br/>end&#59<br/>run&#59<br/>data step3D&#59<br/>set step3C&#59<br/>by key_hsn&#59<br/>if first.key_hsn then do&#59<br/>if physical_flag GT leadphysical_flag then step=3&#59<br/>&nbsp&nbsp&nbsp&nbsp        else step=9&#59<br/>&nbsp&nbsp&nbsp&nbsp      end&#59<br/>run&#59<br/>proc freq data=step3D&#59<br/>tables step&#59<br/>run&#59<br/>data step3E&#59/*25078 unique people got alloted in step 2*/<br/>set step3D&#59<br/>if step=3&#59<br/>run&#59<br/>proc sort data=step3E out=check nodupkey&#59 by key_hsn&#59 run&#59<br/><br/>/*Here starts setp 4*/<br/>Proc sql&#59/*start with 822472 observations*/ <br/>create table step4 as select * from step3<br/>where key_hsn not in <br/>(select key_hsn from step3E)&#59<br/>quit&#59<br/>proc sort data=step4 out=step4A nodupkey&#59/*822472*/<br/>by key_hsn dos_1 key_doc_num&#59<br/>run&#59<br/>proc sort data=step4A&#59<br/>by key_hsn descending upc3 descending physical_flag descending dos_1 key_doc_num&#59<br/>run&#59<br/>data step4B&#59<br/>_n_ ++ 1&#59<br/>if _n_ LE n then do&#59<br/>set step4A point=_n_&#59<br/>leaddos_1=dos_1&#59<br/>end&#59<br/>set step4A nobs=n end=end&#59<br/>by key_hsn&#59<br/>if end then leaddos_1=.&#59<br/>run&#59<br/>data step4C&#59<br/>set step4B&#59<br/>by key_hsn&#59<br/>if last.key_hsn then do&#59<br/>leaddos_1=.&#59<br/>end&#59<br/>run&#59<br/>data step4D&#59<br/>set step4C&#59<br/>by key_hsn&#59<br/>if first.key_hsn then do&#59<br/>if dos_1 GT leaddos_1 then step=4&#59<br/>&nbsp&nbsp&nbsp&nbsp        else step=9&#59<br/>&nbsp&nbsp&nbsp&nbsp      end&#59<br/>run&#59<br/>proc freq data=step4D&#59<br/>tables step&#59<br/>run&#59<br/>data step4E&#59/*136652 unique people got alloted in step 2*/<br/>set step4D&#59<br/>if step=4&#59<br/>run&#59<br/>proc sort data=step4E out=check nodupkey&#59 by key_hsn&#59 run&#59<br/><br/>/*left out in all above steps assigned randomly*/<br/>Proc sql&#59/*start with 6161 observations, these are going to different doctor but same date and same upc and same physical flag*/ <br/>create table step5 as select * from step4<br/>where key_hsn not in <br/>(select key_hsn from step4E)&#59<br/>quit&#59<br/><br/>proc sort data=step5 out=step5A nodupkey&#59/*6161*/<br/>by key_hsn dos_1 key_doc_num&#59<br/>run&#59<br/>proc sort data=step5A out=FSCtest nodupkey&#59/*130 unique FSC*/<br/>by fsc&#59<br/>run&#59<br/>proc print data=FSCtest noobs&#59<br/>var FSC&#59<br/>run&#59<br/><br/>data step5A&#59<br/>set step5A&#59<br/>random_number=rand('uniform')&#59<br/>run&#59<br/>proc sort data=step5A&#59<br/>by key_hsn descending upc3 descending physical_flag descending dos_1 random_number&#59<br/>run&#59<br/>proc sort data=step5A out=step5B nodupkey&#59/*1679 got allotted based on lower key_doc_num*/<br/>by key_hsn&#59<br/>run&#59<br/>data step5B&#59<br/>set step5B&#59<br/>step=4&#59 /*we still call it step 4*/<br/>run&#59<br/><br/>/*combining steps 2 to 5*/<br/>data steps2to5&#59<br/>set step2E step3E step4E step5B&#59<br/>drop leadupc3 leadphysical_flag leaddos_1&#59<br/>run&#59<br/>proc freq data=steps2to5&#59<br/>table step&#59<br/>run&#59<br/><br/>/*<br/>combining sole provider and step 2, 3 and 4<br/>NOTE: There were 938099 observations read from the data set WORK.AFTER_SOLE_VISITSXZ.<br/>NOTE: There were 192296 observations read from the data set PPR.SOLE_VISITS.<br/>NOTE: The data set WORK.TOGETHER has 1130395 observations and 18 variables.<br/>*/<br/>data together&#59<br/>retain key_hsn key_doc_num total_visits_phy3 total_visits3 upc3 step&#59<br/>set <br/>steps2to5  /*old way was this data: after_sole_visitsxz*/ <br/>ppr.sole_visits&#59<br/>run&#59<br/>proc sort data=together&#59<br/>by key_hsn descending upc3 descending physical_flag descending dos_1 key_doc_num&#59<br/>run&#59<br/>proc freq data=together&#59 table step&#59 run&#59<br/><br/>/*how many physicians are there?*/<br/>proc sort data=together out=tt1 nodupkey&#59 by key_doc_num&#59 run&#59/*1511*/<br/>proc freq data=together order=freq&#59<br/>tables key_doc_num upc3&#59<br/>run&#59<br/>proc sql noprint&#59 <br/>create table patients1 as <br/>select *, count(key_hsn) as total_patients  <br/>from together<br/>group by key_doc_num<br/>order by key_doc_num&#59<br/>run&#59<br/>data unique_phy_patients&#59<br/>retain key_doc_num key_hsn total_patients total_visits_phy3 total_visits3 upc3 spec spec1 spec_flag FSC physical_flag step&#59<br/>set patients1&#59<br/>if physical_flag=. then physical_flag=9&#59<br/>keep FY key_doc_num key_hsn total_patients total_visits_phy3 total_visits3 upc3 spec spec1 spec_flag FSC physical_flag dos_1 step&#59<br/>run&#59<br/>proc freq data=unique_phy_patients&#59 tables spec spec1 physical_flag&#59 run&#59<br/>proc sort data=unique_phy_patients out=dr nodupkey&#59 by key_doc_num&#59 run&#59/*1511 unique physician total*/<br/>proc sort data=unique_phy_patients&#59 by key_doc_num descending upc3&#59 run&#59<br/><br/>/*Getting Demographic Information*/<br/>%demog_assign(prs_xtrc_dt='02JAN2018'd,<br/>ds_in=unique_phy_patients,<br/>ds_out=unique_phy_patients_demog, <br/>strt_dt_var=dos_1,&nbsp&nbsp&nbsp&nbsp<br/>end_dt_var=dos_1,<br/>geo_file=clean17.phrs_pers_resc_4_jas17_01dec2017,<br/>incl_full_info=N)&#59<br/>data unique_phy_patients_demog&#59<br/>set unique_phy_patients_demog&#59<br/>age_dt='31Mar2018'd&#59<br/>format age_dt date9.&#59<br/>run&#59<br/>%include '/SAS_data/dw0/HQC_share/nsidhu/PPR/sas code/calc_age_discr.sas'&#59<br/>%calc_age_discr(ds_in=unique_phy_patients_demog,ds_out=unique_phy_patients_demog1,refday_var=age_dt,agevar=age)&#59<br/><br/>/*addition of two other ages*/<br/>data unique_phy_patients_demog1&#59<br/>set unique_phy_patients_demog1&#59<br/>age_dt1='31Mar2016'd&#59<br/>format age_dt1 date9.&#59<br/>age_dt2='31Mar2017'd&#59<br/>format age_dt2 date9.&#59<br/>run&#59<br/>%calc_age_discr(ds_in=unique_phy_patients_demog1,ds_out=unique_phy_patients_demog2,refday_var=age_dt1,agevar=age1)&#59<br/>%calc_age_discr(ds_in=unique_phy_patients_demog2,ds_out=unique_phy_patients_demog3,refday_var=age_dt2,agevar=age2)&#59<br/><br/>/*end of age*/<br/>data ppr.unique_phy_patients_demog&#59<br/>retain key_doc_num key_hsn age sex_desc rha urb_rur&#59<br/>set unique_phy_patients_demog3&#59<br/>drop age_dt tot_days mindiff_RHA RHAdays RHAdiff mindiff_Urb_Rur URdays URdiff INCQTL mindiff_INCQTL INCQTLdays INCQTLdiff NATV_STAT_FLAG&#59<br/>run&#59<br/>proc freq data=ppr.unique_phy_patients_demog&#59 <br/>table sex_desc rha urb_rur&#59<br/>run&#59<br/>proc sort data=ppr.unique_phy_patients_demog&#59 by key_doc_num&#59 run&#59<br/><br/>/*just creating missing physician data. In data but NOT in our panel data*/<br/>Proc sql&#59<br/>create table missing_dr as select * from ppr.temp_msb1<br/>where key_hsn not in <br/>(select key_hsn from ppr.unique_phy_patients_demog)&#59<br/>quit&#59<br/>proc sort data=missing_dr out=missing_dr1 nodupkey&#59<br/>by key_doc_num&#59 <br/>run&#59<br/>data ppr.missing_dr&#59<br/>set missing_dr1&#59<br/>keep key_doc_num&#59<br/>run&#59<br/><br/>/************************specialist data****************************/<br/>data specialist&#59<br/>length section $50&#59<br/>set ppr.temp_msb1&#59<br/>where ('01Apr2015'd LE dos_1 LE '31Mar2018'd)&#59<br/>if key_hsn='' then delete&#59<br/>if num_srv=0 then delete&#59<br/>if key_doc_num in:(&slush) then delete&#59<br/>if mode in:(&mode_exc) then delete&#59<br/><br/>     if ('01Apr2015'd LE dos_1 LE '31Mar2016'd) then FY='201516'&#59<br/>else if ('01Apr2016'd LE dos_1 LE '31Mar2017'd) then FY='201617'&#59<br/>else if ('01Apr2017'd LE dos_1 LE '31Mar2018'd) then FY='201718'&#59<br/>else if ('01Apr2018'd LE dos_1 LE '31Mar2019'd) then FY='201819'&#59<br/><br/>if substr(spec,1,1)=\"B\" then section = \"General Practice\"&#59<br/>if substr(spec,1,1)=\"C\" then section = \"Paediatrics\"&#59<br/><br/>if substr(spec,1,2)=\"DK\" then section = \"Neurology\"&#59<br/>if substr(spec,1,2)=\"DL\" then section = \"Cardiology\"&#59<br/>if substr(spec,1,1)=\"D\" and spec not in ('DK', 'DL') then section = \"Internal Medicine\"&#59<br/><br/>if substr(spec,1,1)=\"E\" then section = \"Psychiatry\"&#59<br/>if substr(spec,1,1)=\"F\" then section = \"Dermatology\"&#59<br/>if substr(spec,1,1)=\"G\" then section = \"Medical Genetics\"&#59<br/>if substr(spec,1,1)=\"H\" then section = \"Anaesthesia\"&#59<br/>if substr(spec,1,1)=\"I\" then section = \"Physical Medicine\"&#59<br/>if substr(spec,1,1)=\"K\" then section = \"NeuroSurgery\"&#59<br/><br/>if substr(spec,1,2)=\"LB\" then section = \"General Surgery\"&#59<br/>if substr(spec,1,2)=\"LL\" then section = \"Cardiac Surgery\"&#59<br/><br/>if substr(spec,1,1)=\"M\" then section = \"Orthopaedic Surgery\"&#59<br/>if substr(spec,1,1)=\"N\" then section = \"Plastic & Reconstructive Surgery\"&#59<br/>if substr(spec,1,1)=\"P\" then section = \"Obstetrics & Gynaecology\"&#59<br/>if substr(spec,1,1)=\"R\" then section = \"Urological Surgery\"&#59<br/>if substr(spec,1,1)=\"S\" then section = \"Ophthalmology\"&#59<br/>if substr(spec,1,1)=\"T\" then section = \"Otolaryngology\"&#59<br/>if substr(spec,1,1)=\"X\" then section = \"Diagnostic Radiology & Radiology Oncology\"&#59<br/>if substr(spec,1,1)=\"Y\" then section = \"Therapeutic Radiology & Nuclear Medicine\"&#59<br/>if substr(spec,1,1)=\"V\" then section = \"Laboratory Specialties\"&#59<br/>if substr(spec,1,1)=\"W\" then section = \"Others (NP, RN,etc.)\"&#59<br/><br/>if section NE \"General Practice\"&#59<br/>run&#59<br/>proc sort data=specialist out=ppr.specialist nodupkey&#59 by key_hsn key_doc_num dos_1&#59 run&#59<br/><br/>proc freq data=ppr.specialist&#59 <br/>table SPEC_flag spec*section&#59 <br/>run&#59<br/><br/>data check&#59<br/>set ppr.specialist&#59<br/>if section = \"General Practice\"&#59<br/>run&#59<br/>s///<br/>t///","custparents":[{"idx":"CodeTask-CljcMilWauaTBrim"}]}],"custparents":[{"idx":"MY84805d1e-a9a8-4034-ad9d-bb995777ec44"},{"idx":"MY84805d1e-a9a8-4034-ad9d-bb995777ec44"}]}]}]}