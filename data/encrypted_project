{"idx":"cd460f46-1f15-4344-93ca-8a36d5c2a23b","name":"Encrypted Project","children":[{"idx":"MY879b4a26-82e5-4157-b3c2-5d76878c91c8","name":"Step1. Prepare a default json hex string","custparents":[{"idx":"cd460f46-1f15-4344-93ca-8a36d5c2a23b"}],"children":[{"idx":"MY2e32db4a-e598-4a32-ad2f-cd218b1ce717","name":"Open the default json data","custparents":[{"idx":"MY879b4a26-82e5-4157-b3c2-5d76878c91c8"}],"children":[{"idx":"MYfe88d709-9bfa-479e-88c9-93b0501d2f12","name":"a js to get json, stringify and send to a php","custparents":[{"idx":"MYe6dcc6c6-c026-4dc6-8946-25eb19eeb36e"},{"idx":"MY2e32db4a-e598-4a32-ad2f-cd218b1ce717"}],"NodeDescription":"<p>///t</p><p><strong>A js function (</strong>postbinstr2php() in component.js<strong>) to post binstr of the current json to php, which turns it into a hexstr and save as tmp/tmphexstr.txt</strong></p><p><strong>The function is triggered by click the button '</strong>save JSON as hex tmphexstr.txt<strong>'. The button is defined in executive.js</strong></p><div class=\"ql-code-block-container\" spellcheck=\"false\"><div class=\"ql-code-block\" data-language=\"plain\">// additional: post json to a php which turns the str to hex and save as tmp/tmphexstr.txt</div><div class=\"ql-code-block\" data-language=\"plain\">// send jsonstr from js to a php which converts the jsonstr into hexstr, and save as a text</div><div class=\"ql-code-block\" data-language=\"plain\">function postbinstr2php(){</div><div class=\"ql-code-block\" data-language=\"plain\">//get the most recent json data</div><div class=\"ql-code-block\" data-language=\"plain\">var jsonstr = JSON.stringify(rootdatapoint_sortedrowscols.data);</div><div class=\"ql-code-block\" data-language=\"plain\">//prepare a json obj with keys including slqtable, josnstr, userid, and jsonstrname</div><div class=\"ql-code-block\" data-language=\"plain\">//note: the stringified jsonstr is only 1 element of the json obj</div><div class=\"ql-code-block\" data-language=\"plain\">var</div><div class=\"ql-code-block\" data-language=\"plain\">v1=sessionStorage.getItem('thejsonstr', jsonstr),</div><div class=\"ql-code-block\" data-language=\"plain\">jsontosend = {</div><div class=\"ql-code-block\" data-language=\"plain\">binstr:v1</div><div class=\"ql-code-block\" data-language=\"plain\">}</div><div class=\"ql-code-block\" data-language=\"plain\"><br></div><div class=\"ql-code-block\" data-language=\"plain\">// Post the json data to a php file, and receive response text echoed on that php file</div><div class=\"ql-code-block\" data-language=\"plain\">//https://api.jquery.com/jQuery.post/</div><div class=\"ql-code-block\" data-language=\"plain\">// The jquery way is simply to specify: 1) the target php, 2) the name of the json data 3) the data type.</div><div class=\"ql-code-block\" data-language=\"plain\"><br></div><div class=\"ql-code-block\" data-language=\"plain\">var jqxhr = $.post(</div><div class=\"ql-code-block\" data-language=\"plain\">\"php/hexstr2txt.php\",</div><div class=\"ql-code-block\" data-language=\"plain\">jsontosend,</div><div class=\"ql-code-block\" data-language=\"plain\">'json'</div><div class=\"ql-code-block\" data-language=\"plain\">)</div><div class=\"ql-code-block\" data-language=\"plain\">// the following is to return the contents printed on the target php, so that user can</div><div class=\"ql-code-block\" data-language=\"plain\">// moniter whether the target php runs normally or having errors.</div><div class=\"ql-code-block\" data-language=\"plain\">.done(function(d) {</div><div class=\"ql-code-block\" data-language=\"plain\">console.log( 'On php/hexstr2txt.php:\\n' + d );</div><div class=\"ql-code-block\" data-language=\"plain\">}) // end post</div><div class=\"ql-code-block\" data-language=\"plain\">} // end postbinstr2php()</div></div><p><br></p><p>t///</p><p><br></p>","children":[{"idx":"MY8988064d-8169-463c-9bfb-11ab091b80eb","name":"a php to save hex string to a local txt","custparents":[{"idx":"MYfe88d709-9bfa-479e-88c9-93b0501d2f12"}],"NodeDescription":"<p><span class=\"ql-font-timesnewroman\" style=\"font-size: 20px;\">///t</span></p><p><br></p><p><strong>php/hexstr2txt.php</strong></p><div class=\"ql-code-block-container\" spellcheck=\"false\"><div class=\"ql-code-block\" data-language=\"plain\">&lt;?php</div><div class=\"ql-code-block\" data-language=\"plain\">//load the tools in phptoos.php</div><div class=\"ql-code-block\" data-language=\"plain\">//must have!!! as the function to connect to MySQL database is in that file</div><div class=\"ql-code-block\" data-language=\"plain\">include ('phptools.php'); //include the phptools</div><div class=\"ql-code-block\" data-language=\"plain\"><br></div><div class=\"ql-code-block\" data-language=\"plain\">//The following is received from posted json by _POST</div><div class=\"ql-code-block\" data-language=\"plain\">// the posted json is like {binstr: &lt;the binary stringified json string&gt;}</div><div class=\"ql-code-block\" data-language=\"plain\"><br></div><div class=\"ql-code-block\" data-language=\"plain\">//1. save the posted data into variables</div><div class=\"ql-code-block\" data-language=\"plain\">//echo $_POST['binstr'];</div><div class=\"ql-code-block\" data-language=\"plain\">$binstr = $_POST['binstr'];</div><div class=\"ql-code-block\" data-language=\"plain\"><br></div><div class=\"ql-code-block\" data-language=\"plain\">//convert the binary jsonstr into hexadecimal str (so as to avoid escaping problmes for apostrophes, and quotes)</div><div class=\"ql-code-block\" data-language=\"plain\">$hexstr = bin2hex($binstr);</div><div class=\"ql-code-block\" data-language=\"plain\">//echo $hexstr;</div><div class=\"ql-code-block\" data-language=\"plain\"><br></div><div class=\"ql-code-block\" data-language=\"plain\">//save the hexstr as a text file in the server folder</div><div class=\"ql-code-block\" data-language=\"plain\">//the txt file need to be saved into F:/Personal/Virtual_Server/PHPWeb/d3egp2019/153a/data</div><div class=\"ql-code-block\" data-language=\"plain\">//$_SERVER['DOCUMENT_ROOT'] returns 'F:/Personal/Virtual_Server/PHPWeb/'</div><div class=\"ql-code-block\" data-language=\"plain\"><br></div><div class=\"ql-code-block\" data-language=\"plain\">//define the temptxt name</div><div class=\"ql-code-block\" data-language=\"plain\">$tmptxtname = 'tmphexstr.txt';</div><div class=\"ql-code-block\" data-language=\"plain\"><br></div><div class=\"ql-code-block\" data-language=\"plain\">//the parent folder of the current php file is like /d3egp2019/153a/</div><div class=\"ql-code-block\" data-language=\"plain\">$parentfolder = dirname(dirname($_SERVER['REQUEST_URI']));</div><div class=\"ql-code-block\" data-language=\"plain\">// echo \"parentfolder is \".$parentfolder;</div><div class=\"ql-code-block\" data-language=\"plain\">//the txt file need to be saved into F:/Personal/Virtual_Server/PHPWeb/d3egp2019/153a/data</div><div class=\"ql-code-block\" data-language=\"plain\">$targetfilefullpath = $_SERVER['DOCUMENT_ROOT'].$parentfolder.\"/tmp/\".$tmptxtname;</div><div class=\"ql-code-block\" data-language=\"plain\"><br></div><div class=\"ql-code-block\" data-language=\"plain\">//write the jsonstr as txt file to server</div><div class=\"ql-code-block\" data-language=\"plain\">$myfile = fopen(\"$targetfilefullpath\", \"w\") or die(\"Unable to open file!\");</div><div class=\"ql-code-block\" data-language=\"plain\">$txt = $hexstr;</div><div class=\"ql-code-block\" data-language=\"plain\">fwrite($myfile, $txt);</div><div class=\"ql-code-block\" data-language=\"plain\">fclose($myfile);</div><div class=\"ql-code-block\" data-language=\"plain\">?&gt;</div></div><p><br></p><p><span class=\"ql-font-timesnewroman\" style=\"font-size: 20px;\">t///</span></p><p><span class=\"ql-font-timesnewroman\" style=\"font-size: 20px;\">///h</span></p><p><span class=\"ql-font-timesnewroman\" style=\"font-size: 20px;\">h///</span></p>"}]}]}]},{"idx":"MYb265501f-923e-4d1d-a609-adda744d852e","name":"Step2. Launch project index.html","custparents":[{"idx":"cd460f46-1f15-4344-93ca-8a36d5c2a23b"}],"children":[{"idx":"MY9afdbd53-123e-4acb-be92-ec2961ff340d","name":"The index.html is at localhost","custparents":[{"idx":"MYb265501f-923e-4d1d-a609-adda744d852e"}],"children":[{"idx":"MY19a599bd-7f88-460a-bbe3-ef2deabb2e55","name":"load index2 html and executive.js, load default treeURL by init.js","custparents":[{"idx":"MY9afdbd53-123e-4acb-be92-ec2961ff340d"}],"NodeDescription":"<p>///t</p><p><strong>in index2.html</strong></p><ol><li data-list=\"ordered\"><span class=\"ql-ui\" contenteditable=\"false\"></span>load and run executive.js</li></ol><p><strong>in executive.js, function makeSvgRectGTree()</strong></p><ol><li data-list=\"ordered\"><span class=\"ql-ui\" contenteditable=\"false\"></span>run function newTreeJsonfromURL(treejsonURL) to build the tree diagram. (treejsonURL is defined in init.js)</li></ol><div class=\"ql-code-block-container\" spellcheck=\"false\"><div class=\"ql-code-block\">//when running on local host:</div><div class=\"ql-code-block\">    if (currentURL.startsWith(\"http://localhost:\")){</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">        // load the default tree data stored in the data folder (which is set in init.js)</div><div class=\"ql-code-block\">        newTreebyJsonfromURL(treejsonURL)</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">    } else {....}</div></div><p><br></p><p><br></p><p>t///</p>"}]},{"idx":"6886c1c0-52ea-4c15-b216-46f76631579d","name":"Enter passcode","custparents":[{"idx":"MY14b8cbdf-cd80-4238-8dad-e54187ac19c0"},{"idx":"MYb265501f-923e-4d1d-a609-adda744d852e"}],"NodeDescription":"<p>///t</p><p><br></p><p><strong>Make a new index.html</strong></p><div class=\"ql-code-block-container\" spellcheck=\"false\"><div class=\"ql-code-block\" data-language=\"plain\">&lt;!DOCTYPE html&gt;</div><div class=\"ql-code-block\" data-language=\"plain\">&lt;html lang=\"en\"&gt;</div><div class=\"ql-code-block\" data-language=\"plain\">\t&lt;head&gt;</div><div class=\"ql-code-block\" data-language=\"plain\">        &lt;script src = 'tools/jquery/jquery.3.3.1.min.js'&gt;&lt;/script&gt;</div><div class=\"ql-code-block\" data-language=\"plain\">        &lt;script src = 'js/workaroundnetlify.js'&gt;&lt;/script&gt;</div><div class=\"ql-code-block\" data-language=\"plain\"><br></div><div class=\"ql-code-block\" data-language=\"plain\">        &lt;script&gt;</div><div class=\"ql-code-block\" data-language=\"plain\"><br></div><div class=\"ql-code-block\" data-language=\"plain\">            function checklocationurl(){</div><div class=\"ql-code-block\" data-language=\"plain\">                // console.log('load checklocationurl')</div><div class=\"ql-code-block\" data-language=\"plain\">                var currentURL = window.location.href;</div><div class=\"ql-code-block\" data-language=\"plain\">                // if the page is on local host, go to index2.html directly</div><div class=\"ql-code-block\" data-language=\"plain\">                if (currentURL.startsWith(\"http://localhost:\")){</div><div class=\"ql-code-block\" data-language=\"plain\">                    window.location.href ='index2.html'</div><div class=\"ql-code-block\" data-language=\"plain\">                } </div><div class=\"ql-code-block\" data-language=\"plain\">            }</div><div class=\"ql-code-block\" data-language=\"plain\">            function checkpasscode() {</div><div class=\"ql-code-block\" data-language=\"plain\">                //get the passcode</div><div class=\"ql-code-block\" data-language=\"plain\">                var passcode = document.getElementById('passcode').value;</div><div class=\"ql-code-block\" data-language=\"plain\">                console.log(passcode)</div><div class=\"ql-code-block\" data-language=\"plain\"><br></div><div class=\"ql-code-block\" data-language=\"plain\"><br></div><div class=\"ql-code-block\" data-language=\"plain\">                //if the page is on netlify, do not use ajax post, as php is not suported</div><div class=\"ql-code-block\" data-language=\"plain\">                var currentURL = window.location.href;</div><div class=\"ql-code-block\" data-language=\"plain\">                console.log(currentURL)</div><div class=\"ql-code-block\" data-language=\"plain\">                if (currentURL.endsWith(\"netlify.com/\")){</div><div class=\"ql-code-block\" data-language=\"plain\">                    console.log('hey, it is netlify!')</div><div class=\"ql-code-block\" data-language=\"plain\"><br></div><div class=\"ql-code-block\" data-language=\"plain\">                    // load the conents in workaroundnetlify</div><div class=\"ql-code-block\" data-language=\"plain\">                    var workaroundobj= workaroundnetlify();</div><div class=\"ql-code-block\" data-language=\"plain\">                    console.log(workaroundobj)</div><div class=\"ql-code-block\" data-language=\"plain\">                    if (passcode ===workaroundobj.code ) {</div><div class=\"ql-code-block\" data-language=\"plain\">                        // stringify the json</div><div class=\"ql-code-block\" data-language=\"plain\">                        var workaroundjsonstr=JSON.stringify(workaroundobj.json)</div><div class=\"ql-code-block\" data-language=\"plain\">                        //save the json str into a sessionStorage item</div><div class=\"ql-code-block\" data-language=\"plain\">                        sessionStorage.setItem('thejsonstr', workaroundjsonstr);</div><div class=\"ql-code-block\" data-language=\"plain\">                        sessionStorage.setItem('thejsonstrname', workaroundobj.name);</div><div class=\"ql-code-block\" data-language=\"plain\">                        // goto index2.html</div><div class=\"ql-code-block\" data-language=\"plain\">                        window.location.href ='index2.html'                        </div><div class=\"ql-code-block\" data-language=\"plain\">                    } else {</div><div class=\"ql-code-block\" data-language=\"plain\">                        console.log (\"The passcode is incorrect. Please try again\")</div><div class=\"ql-code-block\" data-language=\"plain\">                        $(\"p#prompt\").text(\"The passcode is incorrect. Please try again.\");</div><div class=\"ql-code-block\" data-language=\"plain\">                    }</div><div class=\"ql-code-block\" data-language=\"plain\"><br></div><div class=\"ql-code-block\" data-language=\"plain\">                } else {</div><div class=\"ql-code-block\" data-language=\"plain\"><br></div><div class=\"ql-code-block\" data-language=\"plain\">                    var </div><div class=\"ql-code-block\" data-language=\"plain\">                        jsontosend = {</div><div class=\"ql-code-block\" data-language=\"plain\">                            passcode:passcode</div><div class=\"ql-code-block\" data-language=\"plain\">                        }</div><div class=\"ql-code-block\" data-language=\"plain\"><br></div><div class=\"ql-code-block\" data-language=\"plain\">                    //post the password to 'php/checkpasscode.php', and get returned contents</div><div class=\"ql-code-block\" data-language=\"plain\">                    var jqxhr = $.post( </div><div class=\"ql-code-block\" data-language=\"plain\">                        \"php/checkpasscode.php\", </div><div class=\"ql-code-block\" data-language=\"plain\">                        jsontosend, </div><div class=\"ql-code-block\" data-language=\"plain\">                        'json'</div><div class=\"ql-code-block\" data-language=\"plain\">                        )</div><div class=\"ql-code-block\" data-language=\"plain\">                        // the following is to return the contents printed on the target php, so that user can </div><div class=\"ql-code-block\" data-language=\"plain\">                        // moniter whether the target php runs normally or having errors.</div><div class=\"ql-code-block\" data-language=\"plain\">                        .done(function(d) {</div><div class=\"ql-code-block\" data-language=\"plain\">                        console.log( 'On php/checkpasscode.php:\\n' + d );</div><div class=\"ql-code-block\" data-language=\"plain\">                        if (d===\"inCorRect\") {</div><div class=\"ql-code-block\" data-language=\"plain\">                            console.log (\"The passcode is incorrect. Please try again\")</div><div class=\"ql-code-block\" data-language=\"plain\">                            $(\"p#prompt\").text(\"The passcode is incorrect. Please try again.\");</div><div class=\"ql-code-block\" data-language=\"plain\">                        } else {</div><div class=\"ql-code-block\" data-language=\"plain\">                            // if the returned d is a json (passcode is correct)</div><div class=\"ql-code-block\" data-language=\"plain\">                            //save the json str into a sessionStorage item</div><div class=\"ql-code-block\" data-language=\"plain\">                            sessionStorage.setItem('thejsonstr', d);</div><div class=\"ql-code-block\" data-language=\"plain\">                            sessionStorage.setItem('thejsonstrname', 'ULtraSound_20191221');</div><div class=\"ql-code-block\" data-language=\"plain\">                    </div><div class=\"ql-code-block\" data-language=\"plain\">                            // goto index2.html</div><div class=\"ql-code-block\" data-language=\"plain\">                            window.location.href ='index2.html'</div><div class=\"ql-code-block\" data-language=\"plain\">                        }</div><div class=\"ql-code-block\" data-language=\"plain\">                    }) // end post</div><div class=\"ql-code-block\" data-language=\"plain\">                } // end if</div><div class=\"ql-code-block\" data-language=\"plain\">            } // end function checkpasscode()</div><div class=\"ql-code-block\" data-language=\"plain\">        &lt;/script&gt;</div><div class=\"ql-code-block\" data-language=\"plain\"> \t&lt;/head&gt;</div><div class=\"ql-code-block\" data-language=\"plain\">  \t&lt;body onload=\"checklocationurl()\"&gt;</div><div class=\"ql-code-block\" data-language=\"plain\">        &lt;h2&gt;Please input passcode:&lt;/h2&gt;</div><div class=\"ql-code-block\" data-language=\"plain\">        &lt;input type=\"text\" name=\"passcode\" id=\"passcode\"&gt;</div><div class=\"ql-code-block\" data-language=\"plain\">        &lt;button onclick= \"checkpasscode()\"&gt;Submit&lt;/button&gt;</div><div class=\"ql-code-block\" data-language=\"plain\">        &lt;p id=\"prompt\"&gt;&lt;/p&gt;</div><div class=\"ql-code-block\" data-language=\"plain\">        &lt;p style=\"font-weight:bold;size:15\"&gt;Confidentiality Notice&lt;/p&gt;</div><div class=\"ql-code-block\" data-language=\"plain\">        &lt;p&gt;information on this page is for the sole use of the intended recipient(s) with explicit consent from the author Shenzhen YAO. Any unauthorized review, use, disclosure, or distribution is strictly prohibited.&lt;/p&gt;        </div><div class=\"ql-code-block\" data-language=\"plain\">\t &lt;/body&gt;</div><div class=\"ql-code-block\" data-language=\"plain\">\t &lt;footer&gt;</div><div class=\"ql-code-block\" data-language=\"plain\">\t\t </div><div class=\"ql-code-block\" data-language=\"plain\">\t &lt;/footer&gt;</div><div class=\"ql-code-block\" data-language=\"plain\">\t </div><div class=\"ql-code-block\" data-language=\"plain\">&lt;/html&gt;</div></div><p>t///</p><p><br></p>","children":[{"idx":"MY14b8cbdf-cd80-4238-8dad-e54187ac19c0","name":"The project is on Netlify","custparents":[{"idx":"6886c1c0-52ea-4c15-b216-46f76631579d"}],"children":[{"idx":"MY865537cb-4ad8-484b-a163-cd8593197186","name":"Load the default json from the js/workaroundnetlify.js","custparents":[{"idx":"MY14b8cbdf-cd80-4238-8dad-e54187ac19c0"}],"NodeDescription":"<p>///t</p><p><strong>The workaroundnetlify.js is loaded by index.html</strong></p><p><strong>in index.html, use contents from </strong>js/workaroundnetlify.js</p><div class=\"ql-code-block-container\" spellcheck=\"false\"><div class=\"ql-code-block\">//if the page is on netlify, do not use ajax post, as php is not suported</div><div class=\"ql-code-block\">                var currentURL = window.location.href;</div><div class=\"ql-code-block\">                // console.log(currentURL)</div><div class=\"ql-code-block\">                if (currentURL.endsWith(\"netlify.com/\")){</div><div class=\"ql-code-block\">                    console.log('hey, it is netlify!')</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">                    // load the conents in workaroundnetlify</div><div class=\"ql-code-block\">                    var workaroundobj= workaroundnetlify();</div><div class=\"ql-code-block\">                    // console.log(workaroundobj)</div><div class=\"ql-code-block\">                    if (passcode ===workaroundobj.code ) {</div><div class=\"ql-code-block\">                        // stringify the json</div><div class=\"ql-code-block\">                        var workaroundjsonstr=JSON.stringify(workaroundobj.json)</div><div class=\"ql-code-block\">                        //save the json str into a sessionStorage item</div><div class=\"ql-code-block\">                        sessionStorage.setItem('thejsonstr', workaroundjsonstr);</div><div class=\"ql-code-block\">                        sessionStorage.setItem('thejsonstrname', workaroundobj.name);</div><div class=\"ql-code-block\">                        // goto index2.html</div><div class=\"ql-code-block\">                        window.location.href ='index2.html'                        </div><div class=\"ql-code-block\">                    } else {</div><div class=\"ql-code-block\">                        console.log (\"The passcode is incorrect. Please try again\")</div><div class=\"ql-code-block\">                        $(\"p#prompt\").text(\"The passcode is incorrect. Please try again.\");</div><div class=\"ql-code-block\">                    }</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\" data-language=\"plain\">                } else {</div><div class=\"ql-code-block\" data-language=\"plain\">                  ...</div><div class=\"ql-code-block\">                }</div><div class=\"ql-code-block\"><br></div></div><p><br></p><p><br></p><p>t///</p>","children":[{"idx":"MYf6d3ebd6-9b25-4285-88b2-0ea2826e30f3","name":"correct passcode","custparents":[{"idx":"MY865537cb-4ad8-484b-a163-cd8593197186"}],"NodeDescription":"<p>///t</p><p><strong>in index.html</strong></p><div class=\"ql-code-block-container\" spellcheck=\"false\"><div class=\"ql-code-block\">if (passcode ===workaroundobj.code ) {</div><div class=\"ql-code-block\">                        // stringify the json</div><div class=\"ql-code-block\">                        var workaroundjsonstr=JSON.stringify(workaroundobj.json)</div><div class=\"ql-code-block\">                        //save the json str into a sessionStorage item</div><div class=\"ql-code-block\">                        sessionStorage.setItem('thejsonstr', workaroundjsonstr);</div><div class=\"ql-code-block\">                        sessionStorage.setItem('thejsonstrname', workaroundobj.name);</div><div class=\"ql-code-block\">                        // goto index2.html</div><div class=\"ql-code-block\">                        window.location.href ='index2.html'                        </div><div class=\"ql-code-block\">                    } else {</div><div class=\"ql-code-block\">                        ...</div><div class=\"ql-code-block\">                    }</div></div><p>t///</p>","children":[{"idx":"5812ec70-98dc-44fc-8508-d0e035c6ea3b","name":"load index2.html and excutive.js","custparents":[{"idx":"5a1b3e34-59dc-4c7e-8f6e-bd3595b1683d"},{"idx":"MYf6d3ebd6-9b25-4285-88b2-0ea2826e30f3"}],"NodeDescription":"<p>///t</p><p><strong>in index2.html</strong></p><ol><li data-list=\"ordered\"><span class=\"ql-ui\" contenteditable=\"false\"></span>load and run executive.js</li></ol><p><strong>in executive.js, function makeSvgRectGTree()</strong></p><ol><li data-list=\"ordered\"><span class=\"ql-ui\" contenteditable=\"false\"></span>get the jsonstr, and jsonname from the sessionStorage</li><li data-list=\"ordered\"><span class=\"ql-ui\" contenteditable=\"false\"></span>parse the jsonstr into a JSON obj (treeData as a JSON)</li><li data-list=\"ordered\"><span class=\"ql-ui\" contenteditable=\"false\"></span>run function NewTree(treeData) to build the tree diagram</li></ol><div class=\"ql-code-block-container\" spellcheck=\"false\"><div class=\"ql-code-block\" data-language=\"plain\">if (currentURL.startsWith(\"http://localhost:\")){</div><div class=\"ql-code-block\" data-language=\"plain\"><br></div><div class=\"ql-code-block\" data-language=\"plain\">...</div><div class=\"ql-code-block\" data-language=\"plain\"><br></div><div class=\"ql-code-block\" data-language=\"plain\">} else {</div><div class=\"ql-code-block\" data-language=\"plain\">//load the json from sessionStorage</div><div class=\"ql-code-block\" data-language=\"plain\">var loadedjsonstr = sessionStorage.getItem(\"thejsonstr\");</div><div class=\"ql-code-block\" data-language=\"plain\">treeData = JSON.parse(loadedjsonstr)</div><div class=\"ql-code-block\" data-language=\"plain\">NewTree (treeData)</div><div class=\"ql-code-block\" data-language=\"plain\">}</div></div><p>t///</p><p><br></p>"}]},{"idx":"MYd81fc0a1-6ade-4631-8308-c971b63715ab","name":"wrong passcode","custparents":[{"idx":"MY865537cb-4ad8-484b-a163-cd8593197186"}],"NodeDescription":"<p>///t</p><p><strong>In index.html</strong></p><div class=\"ql-code-block-container\" spellcheck=\"false\"><div class=\"ql-code-block\">if (passcode ===workaroundobj.code ) {</div><div class=\"ql-code-block\">    ...                       </div><div class=\"ql-code-block\">    } else {</div><div class=\"ql-code-block\">        console.log (\"The passcode is incorrect. Please try again\")</div><div class=\"ql-code-block\">        $(\"p#prompt\").text(\"The passcode is incorrect. Please try again.\");</div><div class=\"ql-code-block\">    }</div></div><p>t///</p>"}]}]},{"idx":"MY869fbbd1-4af8-42c3-970d-fbd825f8f19a","name":"The index html is on other web servers","custparents":[{"idx":"6886c1c0-52ea-4c15-b216-46f76631579d"},{"idx":"6886c1c0-52ea-4c15-b216-46f76631579d"}],"children":[{"idx":"MY9fdc2276-941f-40ba-8bac-6fd306854be6","name":"ajax post passcode to php","custparents":[{"idx":"MY52eb1807-edca-48b3-b663-6e0f99b130cf"},{"idx":"MY869fbbd1-4af8-42c3-970d-fbd825f8f19a"}],"children":[{"idx":"MYeb986e72-eebe-4dca-a744-f0550d40d2a3","name":"php to check passcode and return a string","custparents":[{"idx":"MY9fdc2276-941f-40ba-8bac-6fd306854be6"}],"children":[{"idx":"MYbd1600c5-85df-4096-a101-ee002f8fc79a","name":"correct passcode load json in php","custparents":[{"idx":"MYeb986e72-eebe-4dca-a744-f0550d40d2a3"}],"NodeDescription":"<p>///t</p><p><br></p><p><strong>PHP 'checkpasscode.php</strong></p><p><br></p><ol><li data-list=\"ordered\"><span class=\"ql-ui\" contenteditable=\"false\"></span>conver the stored $.hexstr (by default, the hexstr is the ultrasound text in hexdecimal code)</li><li data-list=\"ordered\"><span class=\"ql-ui\" contenteditable=\"false\"></span>echo '&lt;the json binary str ($binstr)&gt;'</li></ol><p><strong>In index.html</strong></p><ol><li data-list=\"ordered\"><span class=\"ql-ui\" contenteditable=\"false\"></span>the text in PHP is returned to js function checkpasscode () in index.html</li><li data-list=\"ordered\"><span class=\"ql-ui\" contenteditable=\"false\"></span>same the binstr, and the default name (ULtraSound_20191221) to sessionStorage</li><li data-list=\"ordered\"><span class=\"ql-ui\" contenteditable=\"false\"></span>goto index2.html</li></ol><p>t///</p><p><br></p>","children":[{"idx":"MY4726a134-f3cc-4d6e-8c91-15a495729599","name":"load index2.html and excutive.js","custparents":[{"idx":"MYbd1600c5-85df-4096-a101-ee002f8fc79a"}],"NodeDescription":"<p>///t</p><p><strong>in index2.html</strong></p><ol><li data-list=\"ordered\"><span class=\"ql-ui\" contenteditable=\"false\"></span>load and run executive.js</li></ol><p><strong>in executive.js, function makeSvgRectGTree()</strong></p><ol><li data-list=\"ordered\"><span class=\"ql-ui\" contenteditable=\"false\"></span>get the jsonstr, and jsonname from the sessionStorage</li><li data-list=\"ordered\"><span class=\"ql-ui\" contenteditable=\"false\"></span>parse the jsonstr into a JSON obj (treeData as a JSON)</li><li data-list=\"ordered\"><span class=\"ql-ui\" contenteditable=\"false\"></span>run function NewTree(treeData) to build the tree diagram</li></ol><div class=\"ql-code-block-container\" spellcheck=\"false\"><div class=\"ql-code-block\" data-language=\"plain\">if (currentURL.startsWith(\"http://localhost:\")){</div><div class=\"ql-code-block\" data-language=\"plain\"><br></div><div class=\"ql-code-block\" data-language=\"plain\">...</div><div class=\"ql-code-block\" data-language=\"plain\"><br></div><div class=\"ql-code-block\" data-language=\"plain\">} else {</div><div class=\"ql-code-block\" data-language=\"plain\">//when running online, load the default json hidden in PHP</div><div class=\"ql-code-block\" data-language=\"plain\">var loadedjsonstr = sessionStorage.getItem(\"thejsonstr\");</div><div class=\"ql-code-block\" data-language=\"plain\">treeData = JSON.parse(loadedjsonstr)</div><div class=\"ql-code-block\" data-language=\"plain\">NewTree (treeData)</div><div class=\"ql-code-block\" data-language=\"plain\">}</div></div><p>t///</p><p><br></p>"}]},{"idx":"MYc221848e-4f61-4e4e-b556-95f67b29cdfb","name":"wrong passcode input box again","custparents":[{"idx":"MYeb986e72-eebe-4dca-a744-f0550d40d2a3"},{"idx":"MYeb986e72-eebe-4dca-a744-f0550d40d2a3"}],"NodeDescription":"<p>///t</p><p><strong>in PHP 'checkpasscode.php'</strong></p><p>PHP 'checkpasscode.php echo 'inCorRect'</p><p><br></p><p><strong>in 'inCorRect'</strong></p><p>the text in PHP is returned to js function checkpasscode () in index.html</p><p>if the returned d='inCorRect', change the text in the element 'p#prompt': 'The passcode is incorrect. Please try again.'</p><p><strong>This is to display a prompt string that the passcode is incorrect.</strong></p><p>t///</p><p><br></p>"}],"NodeDescription":"<p>///t</p><p><strong>PHP: checkpasscode.php</strong></p><div class=\"ql-code-block-container\" spellcheck=\"false\"><div class=\"ql-code-block\">&lt;?php</div><div class=\"ql-code-block\">    //load the tools in phptoos.php</div><div class=\"ql-code-block\">    //must have!!! as the function to connect to MySQL database is in that file</div><div class=\"ql-code-block\">    include ('phptools.php'); //include the phptools</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">    //The following is received from posted json by _POST </div><div class=\"ql-code-block\">    // the posted json is like {binstr: &lt;the binary stringified json string&gt;}</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">    //1. save the posted data into variables</div><div class=\"ql-code-block\">    $passcode =  $_POST['passcode']; </div><div class=\"ql-code-block\">    // echo $passcode;</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">    // check the passcode;</div><div class=\"ql-code-block\">    // if passcode = '9602' then convert the hexstr to binary and echo it</div><div class=\"ql-code-block\">    if ($passcode == '9602') {</div><div class=\"ql-code-block\" data-language=\"plain\">    $hexstr = &lt;the hex string of the tree json. e.g., the Ultrasound js&gt;;</div><div class=\"ql-code-block\" data-language=\"plain\"><br></div><div class=\"ql-code-block\" data-language=\"plain\">    $binstr = pack('H*', $hexstr );</div><div class=\"ql-code-block\" data-language=\"plain\">        echo $binstr;</div><div class=\"ql-code-block\" data-language=\"plain\">    } else {</div><div class=\"ql-code-block\" data-language=\"plain\">    </div><div class=\"ql-code-block\" data-language=\"plain\">            echo \"inCorRect\";</div><div class=\"ql-code-block\" data-language=\"plain\">    </div><div class=\"ql-code-block\" data-language=\"plain\">        }</div><div class=\"ql-code-block\"><br></div></div><p><br></p><p>t///</p><p><br></p>"}],"NodeDescription":"<p>///t</p><p><br></p><p><strong>The javascript in index.html</strong></p><p><br></p><div class=\"ql-code-block-container\" spellcheck=\"false\"><div class=\"ql-code-block\">function checkpasscode() {</div><div class=\"ql-code-block\">                //get the passcode</div><div class=\"ql-code-block\">                var passcode = document.getElementById('passcode').value;</div><div class=\"ql-code-block\">                console.log(passcode)</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">                var </div><div class=\"ql-code-block\">                    jsontosend = {</div><div class=\"ql-code-block\">                        passcode:passcode</div><div class=\"ql-code-block\">                    }</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">                //post the password to 'php/checkpasscode.php', and get returned contents</div><div class=\"ql-code-block\">                var jqxhr = $.post( </div><div class=\"ql-code-block\">                    \"php/checkpasscode.php\", </div><div class=\"ql-code-block\">                    jsontosend, </div><div class=\"ql-code-block\">                    'json'</div><div class=\"ql-code-block\">                    )</div><div class=\"ql-code-block\">                    // the following is to return the contents printed on the target php, so that user can </div><div class=\"ql-code-block\">                    // moniter whether the target php runs normally or having errors.</div><div class=\"ql-code-block\">                    .done(function(d) {</div><div class=\"ql-code-block\">                    console.log( 'On php/checkpasscode.php:\\n' + d );</div><div class=\"ql-code-block\">                    if (d===\"inCorRect\") {</div><div class=\"ql-code-block\">                        console.log (\"The passcode is incorrect. Please try again\")</div><div class=\"ql-code-block\">                        $(\"p#prompt\").text(\"The passcode is incorrect. Please try again.\");</div><div class=\"ql-code-block\">                    } else {</div><div class=\"ql-code-block\">                        // if the returned d is a json (passcode is correct)</div><div class=\"ql-code-block\">                        //save the json str into a sessionStorage item</div><div class=\"ql-code-block\">                        sessionStorage.setItem('thejsonstr', d);</div><div class=\"ql-code-block\">                        sessionStorage.setItem('thejsonstrname', 'ULtraSound_20191221');</div><div class=\"ql-code-block\">                </div><div class=\"ql-code-block\">                        // goto index2.html</div><div class=\"ql-code-block\">                        window.location.href ='index2.html'</div><div class=\"ql-code-block\">                    }</div><div class=\"ql-code-block\">                }) // end post</div><div class=\"ql-code-block\">            }</div></div><p>t///</p><p><br></p>"}]}]}]},{"idx":"MY7014dab6-5896-4cbd-8319-a313299c4403","name":"Step 3. make a separate project","custparents":[{"idx":"cd460f46-1f15-4344-93ca-8a36d5c2a23b"}],"children":[{"idx":"MYfa2c2b38-0fcc-4faa-aadc-2505c44b4ac6","name":"Copy the project, paste to a separate folder","custparents":[{"idx":"MY7014dab6-5896-4cbd-8319-a313299c4403"}],"children":[{"idx":"MY8351e0b5-bc76-4186-9552-debd4180ae79","name":"Git Hub create a new repository","custparents":[{"idx":"MYfa2c2b38-0fcc-4faa-aadc-2505c44b4ac6"}]},{"idx":"MY88ff8cf3-a4c0-4e28-b775-c8575d3c7198","name":"in the git ignore file, add all files in data","custparents":[{"idx":"MYfa2c2b38-0fcc-4faa-aadc-2505c44b4ac6"}]},{"idx":"MY5a13d4fb-6653-4393-a562-07534b72b428","name":"Push the separated project to github","custparents":[{"idx":"MYfa2c2b38-0fcc-4faa-aadc-2505c44b4ac6"}]},{"idx":"MYc2783f25-4ab0-4277-ad95-c88d97159d59","name":"Netlify link to the new repository","custparents":[{"idx":"MYfa2c2b38-0fcc-4faa-aadc-2505c44b4ac6"},{"idx":"MYfa2c2b38-0fcc-4faa-aadc-2505c44b4ac6"},{"idx":"MYfa2c2b38-0fcc-4faa-aadc-2505c44b4ac6"}]}]}]}],"NodeDescription":"<p>///t </p><p>t///</p>"}